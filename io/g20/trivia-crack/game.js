var TGFW;(function(TGFW){var Shim;(function(Shim){var container=window;function init(){for(var i=0;i<_shims.length;i++){_shims[i]();}}Shim.init=init;var _shims=[function windowTGFW_ASSERT(){try{container['TGFW_ASSERT']=function(throw_exception_if_falsy,message){if(!throw_exception_if_falsy){message=message||'Assertion failed';console.error(message);if(typeof Error!=='undefined'){throw new Error(message);}throw message;}};}catch(e){console.error("Couldn't register new window.TGFW_ASSERT");}},function windowTGFW_BREAK_ON_SHAPE(){try{container['TGFW_BREAK_ON_SHAPE']=function(shape,debugShapeNameContainingText,callbackBeforeBreakPoint){if(shape.getDebugName().indexOf(debugShapeNameContainingText)>=0){if(callbackBeforeBreakPoint)callbackBeforeBreakPoint();debugger;}};}catch(e){console.error("Couldn't register new window.TGFW_ASSERT");}},function windowTGFW_SMI(){try{container['TGFW_SMI']=function(){var throw_exception_if_not_smi=[];for(var _i=0;_i<arguments.length;_i++){throw_exception_if_not_smi[_i-0]=arguments[_i];}for(var i=0,l=throw_exception_if_not_smi.length;i<l;i++){if(throw_exception_if_not_smi[i]!==(throw_exception_if_not_smi[i]|0)){var message='Assertion failed: value='+throw_exception_if_not_smi[i]+' in arguments['+i+'] is not an "small integer"';console.error(message);if(typeof Error!=='undefined'){throw new Error(message);}throw message;}}};}catch(e){console.error("Couldn't register new window.TGFW_SMI");}},function windowTGFW_DOUBLE(){try{container['TGFW_DOUBLE']=function(){var throw_exception_if_not_double=[];for(var _i=0;_i<arguments.length;_i++){throw_exception_if_not_double[_i-0]=arguments[_i];}for(var i=0,l=throw_exception_if_not_double.length;i<l;i++){if(throw_exception_if_not_double[i]!==+throw_exception_if_not_double[i]){var message='Assertion failed: value='+throw_exception_if_not_double[i]+' in arguments['+i+'] is not an "double"';console.error(message);if(typeof Error!=='undefined'){throw new Error(message);}throw message;}}};}catch(e){console.error("Couldn't register new window.TGFW_DOUBLE");}},function windowTGFW_BOOLEAN(){try{container['TGFW_BOOLEAN']=function(){var throw_exception_if_not_boolean=[];for(var _i=0;_i<arguments.length;_i++){throw_exception_if_not_boolean[_i-0]=arguments[_i];}for(var i=0,l=throw_exception_if_not_boolean.length;i<l;i++){if(typeof throw_exception_if_not_boolean[i]!=='boolean'){var message='Assertion failed: value='+throw_exception_if_not_boolean[i]+' in arguments['+i+'] is not an "double"';console.error(message);if(typeof Error!=='undefined'){throw new Error(message);}throw message;}}};}catch(e){console.error("Couldn't register new window.TGFW_BOOLEAN");}},function windowTGFW_STRING(){try{container['TGFW_STRING']=function(){var throw_exception_if_not_string=[];for(var _i=0;_i<arguments.length;_i++){throw_exception_if_not_string[_i-0]=arguments[_i];}for(var i=0,l=throw_exception_if_not_string.length;i<l;i++){if(typeof throw_exception_if_not_string[i]!=='string'){var message='Assertion failed: value='+throw_exception_if_not_string[i]+' in arguments['+i+'] is not an "string"';console.error(message);if(typeof Error!=='undefined'){throw new Error(message);}throw message;}}};}catch(e){console.error("Couldn't register new window.TGFW_STRING");}},function windowTGFW_UPDATE(){try{container['TGFW_UPDATE']=function(){TGFW.RenderManager.getRender().update(0);};}catch(e){console.error("Couldn't register new window.TGFW_UPDATE");}},function windowTGFW_LOG(){var tgfwConsole;try{container['TGFW_LOG']=function(message){if(!tgfwConsole)tgfwConsole=new TGH5.Console(20,70,30);if(typeof console!=='undefined'&&typeof console.log!=='undefined'){console.log(message);}tgfwConsole.log(message);};}catch(e){console.error("Couldn't register new window.TGFW_LOG");}}];Shim.init();}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var _Math=Math;var TGFW;(function(TGFW){var Shim;(function(Shim){var supportsDescriptors=Object.defineProperty&&function(){try{var obj={};Object.defineProperty(obj,'x',{enumerable:false,value:obj});for(var _ in obj){return false;}return obj.x===obj;}catch(e){return false;}}();Shim.defineProperty=function(obj,propertyName,method,forceAssign){if(forceAssign===undefined){forceAssign=false;}if(forceAssign||!obj[propertyName]){if(supportsDescriptors){Object.defineProperty(obj,propertyName,{configurable:true,enumerable:false,writable:true,value:method});}else{obj[propertyName]=method;}}};}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){var Empty=function Empty(){};Shim.defineProperty(Function.prototype,'some',function bind(oThis){if(typeof this!=='function'){{return;}}var aArgs=TGFW.Utils.sliceArray(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(TGFW.Utils.sliceArray(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;});if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');}var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};fNOP.prototype=this.prototype;fBound.prototype=new fNOP();return fBound;};}}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){var lastTime=0,vendors=['ms','moz','webkit','o'],request=null,cancel=null;for(var x=0;x<vendors.length&&!request;++x){request=window[vendors[x]+'RequestAnimationFrame'];cancel=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}Shim.defineProperty(window,'requestAnimationFrame',request||function(callback){var currTime=new Date().getTime(),timeToCall=_Math.max(4,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;});Shim.defineProperty(window,'cancelAnimationFrame',cancel||function(id){clearTimeout(id);});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){var hasDontEnumBug=!{toString:null}.propertyIsEnumerable('toString'),dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'];Shim.defineProperty(Object,'keys',function(obj){if(typeof obj!=='object'&&(typeof obj!=='function'||obj===null)){{return;}}var result=[];for(var prop in obj){if(Object.prototype.hasOwnProperty.call(obj,prop)){result.push(prop);}}if(hasDontEnumBug){for(var _i=0;_i<dontEnums.length;_i++){var prop=dontEnums[_i];if(Object.prototype.hasOwnProperty.call(obj,prop)){result.push(prop);}}}return result;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'every',function every(callback,thisArg){var length=this.length|0;for(var i=0;i<length;i++){if(i in this&&!callback.call(thisArg,this[i],i,this)){return false;}}return true;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'filter',function filter(callback,thisArg){var length=this.length|0;var result=[];for(var i=0;i<length;i++){if(i in this){var value=this[i];if(callback.call(thisArg,value,i,this)){result.push(value);}}}return result;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'forEach',function forEach(callback,thisArg){var length=this.length>>0;var i=-1;while(++i<length){if(i in this){callback.call(thisArg,this[i],i,this);}}});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'map',function map(callback,thisArg){var length=this.length>>0;var result=new Array(length);for(var i=0;i<length;i++){if(i in this){result[i]=callback.call(thisArg,this[i],i,this);}}return result;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'reduce',function reduce(callback,initialValue){var length=this.length>>0;if(!length&&arguments.length===1){{return;}}var i=0,result;if(arguments.length>=2){result=initialValue;}else{do{if(i in this){result=this[i++];break;}i++;if(i>=length){{return;}}}while(true);}for(;i<length;i++){if(i in this){result=callback.call(undefined,result,this[i],i,this);}}return result;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'reduceRight',function reduceRight(callback,initialValue){var length=this.length>>0;if(!length&&arguments.length===1){{return;}}var result,i=length-1;if(arguments.length>=2){result=initialValue;}else{do{if(i in this){result=this[i--];break;}i--;if(i<0){{return;}}}while(true);}if(i<0){return result;}do{if(i in this){result=callback.call(undefined,result,this[i],i,this);}}while(i--);return result;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shim;(function(Shim){Shim.defineProperty(Array.prototype,'some',function some(callback,thisArg){var length=this.length>>>0;for(var i=0;i<length;i++){if(i in this&&callback.call(thisArg,this[i],i,this)){return true;}}return false;});}(Shim=TGFW.Shim||(TGFW.Shim={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var DebugOptions=function(){function DebugOptions(){this.loader={showResourcesToLoad:false,showResourcesToUnload:false,showResourcesLoadingPopup:false,stopOnLoading:false};this.storage={checkMaxSaveSize:false,showStorageSize:false};this.render={forceRenderEngine:null,showDOMShapeBounds:false,showTextShapeBounds:false,printShapesUpdated:false,useFastRenderMethod:true,printPixelsUpdated:true};}return DebugOptions;}();TGFW.DebugOptions=DebugOptions;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var SignalCallback=function(){function SignalCallback(callback,callOnce){this.callback=callback;this.callOnce=callOnce;}return SignalCallback;}();var Signal=function(){function Signal(){this._callbacks=[];}Signal.prototype.add=function(callback,checkIfExists){if(checkIfExists!==false){for(var i=0;i<this._callbacks.length;i++){if(this._callbacks[i].callback===callback){return;}}}this._callbacks.push(new SignalCallback(callback,false));};Signal.prototype.addOnce=function(callback){this._callbacks.push(new SignalCallback(callback,true));};Signal.prototype.dispatch=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i-0]=arguments[_i];}var i;var callbacks=TGFW.Utils.sliceArray(this._callbacks,0);var toRemove=[];for(i=0;i<callbacks.length;i++){var el=callbacks[i];el.callback.apply(null,args);if(el.callOnce){toRemove.push(el);}}for(i=0;i<toRemove.length;i++){this.remove(toRemove[i].callback);}};Signal.prototype.suspend=function(){this._callbacks.length=0;};Signal.prototype.remove=function(callback){if(!callback)return;for(var i=0;i<this._callbacks.length;i++){if(this._callbacks[i].callback===callback){this._callbacks.splice(i,1);i--;}}};return Signal;}();TGFW.Signal=Signal;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){function DOMLoader(callback){var _onLoadEventName='DOMContentLoaded';function _onLoaded(){document.removeEventListener(_onLoadEventName,_onLoaded,true);callback();}document.addEventListener(_onLoadEventName,_onLoaded,true);}TGFW.DOMLoader=DOMLoader;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Base=function(){function Base(desc){this.setDesc(desc);}Base.prototype.setDesc=function(desc){this.desc=desc;};Base.prototype.getDesc=function(){return this.desc;};Base.create=function(desc){if(desc.platform){var platformName=TGFW.sdk().getPlatformName();if(desc.platform!=platformName&&(desc.platform.indexOf('!')<0||desc.platform.indexOf('!'+platformName)>=0)){return null;}}var _sdk=TGFW.sdk();if(desc.skipForLowEnd&&_sdk.isLowEndDevice&&_sdk.isLowEndDevice()){return null;}return new desc.className(desc);};Base.prototype.suspend=function(){this.desc=null;};return Base;}();TGFW.Base=Base;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Audio=function(){function Audio(){}Audio.play=function(soundId,playMode){if(Audio._soundsEnabled){if(soundId!==Audio.silenceSoundId){TGFW.sdk().playSound(soundId,playMode);}}};Audio.stop=function(){if(Audio._soundsEnabled){TGFW.sdk().stopSound();}};Audio.silenceSoundId=function(){};Audio._soundsEnabled=true;return Audio;}();TGFW.Audio=Audio;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){TGFW.onAction=new TGFW.Signal();var Action=function(){function Action(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i-0]=arguments[_i];}this._args=args;}Action.prototype.getArguments=function(){return this._args;};Action.prototype.invoke=function(){TGFW.onAction.dispatch(this,this._args);};Action.prototype.invokeArgs=function(){var arg=[];for(var _i=0;_i<arguments.length;_i++){arg[_i-0]=arguments[_i];}TGFW.onAction.dispatch(this,arg);};Action.isAction=function(obj){return obj instanceof Action;};return Action;}();TGFW.Action=Action;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){TGFW.onNewFrame=new TGFW.Signal();var TimerManager=function(){function TimerManager(minimumTimerInterval,useRAF){switch(TGFW.sdk().getPlatformName()){case TGH5.Platforms.PC:this._minimumTimeout=_Math.max(4,minimumTimerInterval);break;default:this._minimumTimeout=_Math.max(10,minimumTimerInterval);}this._updateTimeout=this._minimumTimeout;this._timers=[];this._currTime=Date.now();this._rafCallback=window.requestAnimationFrame||window['mozRequestAnimationFrame']||window['webkitRequestAnimationFrame'];this._useRAF=useRAF&&this._rafCallback;if(this._useRAF){this._rafCallback.call(window,TimerManager._updateCallback);}else{setTimeout(TimerManager._updateCallback,this._updateTimeout);}}TimerManager.init=function(minimumTimerInterval){if(TimerManager._instance===null){TimerManager._instance=new TimerManager(minimumTimerInterval,TGFW.app().desc.useRAF);}};TimerManager._debugGetTimerStatistic=function(){return'T: '+TimerManager._instance._deltaTime+' FPS: '+(1000/TimerManager._instance._deltaTime).toFixed(1)+' C: '+TimerManager._instance._timers.length;};TimerManager.getCurrentTime=function(){return TimerManager._instance._currTime;};TimerManager._updateCallback=function(time){TimerManager._instance._update();};TimerManager.prototype._update=function(){var lastTime=this._currTime,currentTime=Date.now(),deltaTime=currentTime-lastTime;this._lastTime=this._currTime;this._currTime=currentTime;this._deltaTime=this._currTime-this._lastTime;TGFW.onNewFrame.dispatch(this._deltaTime);var l=this._timers.length;if(l>0){var i;for(i=0;i<l;i++){this._timers[i]._update(this._deltaTime);}var needRemove=0;for(i=0;i<this._timers.length;i++){if(this._timers[i]._isFinished()){needRemove++;}}if(needRemove>0){var newLength=this._timers.length-needRemove;if(newLength==0){this._timers=[];}else{var newTimers=new Array(newLength);l=0;for(i=0;i<this._timers.length;i++){if(!this._timers[i]._isFinished()){newTimers[l++]=this._timers[i];}}this._timers=newTimers;}}}if(this._useRAF){this._rafCallback.call(window,TimerManager._updateCallback);}else{setTimeout(TimerManager._updateCallback,this._updateTimeout);}};TimerManager._registerTimer=function(timer){var instance=TimerManager._instance;if(instance._timers.indexOf(timer)<0){instance._timers.push(timer);}};TimerManager._instance=null;TimerManager.MINIMUM_DELTA_TIME=4;return TimerManager;}();TGFW.TimerManager=TimerManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Timer=function(){function Timer(callback){this._callback=callback;this._running=false;}Timer.prototype.start=function(timeout,looped){if(looped===undefined){looped=false;}this._timeout=timeout;this._currentTime=0;this._running=true;this._paused=false;this._lopped=looped;TGFW.TimerManager._registerTimer(this);};Timer.prototype.stop=function(){this._running=false;};Timer.prototype.pause=function(){this._paused=true;};Timer.prototype.resume=function(){this._paused=false;};Timer.prototype._update=function(deltaTime){if(this._paused||!this._running)return;this._currentTime+=deltaTime;if(this._currentTime>=this._timeout){var dt=this._timeout;if(this._lopped){this._currentTime-=this._timeout;if(this._currentTime>this._timeout){dt+=this._currentTime;this._currentTime=0;}}else{this._running=false;}this._callback(dt);}};Timer.prototype._isFinished=function(){return!this._running;};return Timer;}();TGFW.Timer=Timer;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Utils;(function(Utils){var BitStream=function(){function BitStream(bufferString){this._mode=BitStream._modes.NONE;this._mask=1;this._buffer=[];if(Utils.isString(bufferString)){this._mode=BitStream._modes.READ_ALLOWED;for(var i=0,l=bufferString.length;i<l;i++){this._buffer.push(TGH5.Api.RADIX_64_BASE.indexOf(bufferString.charAt(i)));}this._byte=this._buffer.shift();}else{this._mode=BitStream._modes.WRITE_ALLOWED;this._byte=0;}}BitStream.isBitStream=function(obj){return obj instanceof BitStream;};BitStream.prototype.getLengthInBits=function(){return this._buffer.length*BitStream._bitsPerByte+TGFW.Math.log(this._mask,2);};BitStream.prototype.writeBit=function(bit){if(bit===1)this._byte+=this._mask;this._mask<<=1;if(this._mask===BitStream._byteMaxValue+1){this._buffer.push(this._byte);this._mask=1;this._byte=0;}};BitStream.prototype.readBit=function(){var bit=this._byte&this._mask?1:0;this._mask<<=1;if(this._mask===BitStream._byteMaxValue+1){this._mask=1;this._byte=this._buffer.shift();}return bit;};BitStream.prototype.toString=function(){this._finalize();var result='';for(var i=0,l=this._buffer.length;i<l;i++){result+=TGH5.Api.RADIX_64_BASE.charAt(this._buffer[i]);}return result;};BitStream.prototype.writeBoolean=function(value){this.writeBit(value?1:0);};BitStream.prototype.readBoolean=function(){return!!this.readBit();};BitStream.prototype.writeInt=function(value,bitsToWrite){if(value<0){this.writeBit(1);value=-value;}else{this.writeBit(0);}this.writeUInt(value,bitsToWrite);};BitStream.prototype.readInt=function(bitsToRead){var isNegative=this.readBit(),value=this.readUInt(bitsToRead);return isNegative?-value:value;};BitStream.prototype.writeUInt=function(value,bitsToWrite){if(bitsToWrite<=30){for(var i=0;i<bitsToWrite;i++){this.writeBit(value&1);value>>>=1;}}else{for(var i=0;i<bitsToWrite;i++){this.writeBit(value%2);value=_Math.floor(value/2);}}};BitStream.prototype.readUInt=function(bitsToRead){var value=0;for(var i=0;i<bitsToRead;i++){if(this.readBit()){value+=i<=30?1<<i:_Math.pow(2,i);}}return value;};BitStream.prototype.writeIntInRange=function(value,low,high){var range=high-low+1;this.writeUInt(value-low,TGFW.Math.bitsInNumber(range-1));};BitStream.prototype.readIntInRange=function(low,high){var range=high-low+1;var value=this.readUInt(TGFW.Math.bitsInNumber(range-1))+low;return value;};BitStream.prototype.writeStream=function(bitStream){var inputStream=new BitStream(bitStream.toString());for(var i=0,l=inputStream.getLengthInBits();i<l;i++){this.writeBit(inputStream.readBit());}};BitStream.prototype._finalize=function(){if(this._mode===BitStream._modes.WRITE_ALLOWED){if(this._mask!==1){this._buffer.push(this._byte);}}};BitStream._modes={NONE:0,READ_ALLOWED:1,WRITE_ALLOWED:2};BitStream._bitsPerByte=6;BitStream._byteMaxValue=_Math.pow(2,BitStream._bitsPerByte)-1;return BitStream;}();Utils.BitStream=BitStream;}(Utils=TGFW.Utils||(TGFW.Utils={})));}(TGFW||(TGFW={})));var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};var TGFW;(function(TGFW){var Utils;(function(Utils){var TypedBitStream=function(_super){__extends(TypedBitStream,_super);function TypedBitStream(bufferString){_super.call(this,bufferString);}TypedBitStream.prototype.writeString=function(text,isUnicode){if(isUnicode)text=encodeURIComponent(text);var l=text.length;this.writeNumber(l);for(var i=0;i<l;i++){this.writeUInt(text.charCodeAt(i),7);}};TypedBitStream.prototype.readString=function(isUnicode){var l=this.readNumber(),text='';for(var i=0;i<l;i++){text+=String.fromCharCode(this.readUInt(7));}if(isUnicode)text=decodeURIComponent(text);return text;};TypedBitStream.prototype.writeNumber=function(value){var isNegative=value<0;if(isNegative){value=-value;this.writeBit(1);}else{this.writeBit(0);}var l=value!==0?TGFW.Math.bitsInNumber(value):0;this.writeUInt(l,5);this.writeUInt(value,l);};TypedBitStream.prototype.readNumber=function(){var isNegative=this.readBit(),l=this.readUInt(5),value=this.readUInt(l);return isNegative?-value:value;};return TypedBitStream;}(Utils.BitStream);Utils.TypedBitStream=TypedBitStream;}(Utils=TGFW.Utils||(TGFW.Utils={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var ResourceType;(function(ResourceType){ResourceType[ResourceType['FONT']=1]='FONT';ResourceType[ResourceType['IMAGE']=2]='IMAGE';}(ResourceType||(ResourceType={})));var Loader=function(){function Loader(loaderDesc){this._loadedStages=[];var stageNames=Object.keys(loaderDesc);this._desc=loaderDesc;this._resources={};for(var _i=0;_i<stageNames.length;_i++){var stageName=stageNames[_i];if(stageName==='common')continue;var value=loaderDesc[stageName];this._registerStage(stageName,value);}this._checkDialogs(loaderDesc);this._checkImages();}Loader.init=function(loaderDesc){if(Loader._instance===null){Loader._instance=new Loader(loaderDesc);}};Loader.loadResources=function(stagesToLoad,stagesToUnload,showLoadingPopup,callbackOnFinish,callbackOnProgress){Loader._instance._loadResources(stagesToLoad,stagesToUnload,showLoadingPopup,callbackOnFinish,callbackOnProgress);};Loader.addStage=function(name,stage){if(Loader._instance._desc[name]){Loader._instance._unregisterStage(name);}Loader._instance._desc[name]=stage;Loader._instance._registerStage(name,stage);};Loader.prototype._registerStage=function(stageName,value){var common=this._desc.common,dialogs=value.dialogs;if(stageName!='loading')dialogs=dialogs.concat(common.dialogs);for(var _i=0;_i<dialogs.length;_i++){var dialogName=dialogs[_i];var dialog=TGFW.app().desc.scene[dialogName];this._scan(stageName,dialog);}var textures=value.textures;if(stageName!='loading')textures=textures.concat(common.textures);for(var _a=0;_a<textures.length;_a++){var textureName=textures[_a];this._addTexture(textureName,stageName);}var fonts=value.fonts;if(stageName!='loading')fonts=fonts.concat(common.fonts);for(var _b=0;_b<fonts.length;_b++){var fontName=fonts[_b];this._addFont(fontName,stageName);}};Loader.prototype._unregisterStage=function(stageName){for(var p in this._resources){if(!this._resources.hasOwnProperty(p))continue;var resource=this._resources[p];var index=resource.belongs.indexOf(stageName);if(index>=0){if(resource.belongs.length==1){resource.belongs=null;delete this._resources[p];}else{resource.belongs.splice(index,1);}}}};Loader.prototype._loadResources=function(stageNamesToLoad,stageNamesToUnLoad,showLoadingPopup,callbackOnFinish,callbackOnProgress){if(TGFW.Utils.isArray(stageNamesToUnLoad)){stageNamesToUnLoad.forEach(function(stageName){var index=this._loadedStages.indexOf(stageName);if(index>=0)this._loadedStages.splice(index,1);},this);}if(TGFW.Utils.isArray(stageNamesToLoad)){stageNamesToLoad.forEach(function(stageName){var index=this._loadedStages.indexOf(stageName);if(index<0)this._loadedStages.push(stageName);},this);}var resourcesToProcess=this._updateResourcesList();this._start(resourcesToProcess,showLoadingPopup,callbackOnFinish,callbackOnProgress);};Loader.prototype._updateResourcesList=function(){var toLoad=[],toUnload=[],fontsToLoad=[];for(var _i=0,_a=Object.keys(this._resources);_i<_a.length;_i++){var url=_a[_i];var resource=this._resources[url];var isNeeded=this._loadedStages.some(function(stageName){return resource.belongs.indexOf(stageName)>=0;},this);if(isNeeded&&!resource.loaded){resource.loaded=true;toLoad.push(url);if(resource.type===ResourceType.FONT){fontsToLoad.push(resource.fontName);}}if(!isNeeded&&resource.loaded){resource.loaded=false;toUnload.push(url);}}toLoad.forEach(function(urlLoad){toUnload.forEach(function(urlUnload){});});toUnload.forEach(function(urlUnload){toLoad.forEach(function(urlLoad){});});return{toLoad:toLoad,toUnload:toUnload,fontsToLoad:fontsToLoad};};Loader.prototype._start=function(resourcesToProcess,showLoadingPopup,callbackOnFinish,callbackOnProgress){TGFW.sdk().disableInput();TGFW.app().getDebugOptions().loader.showResourcesToUnload;TGFW.RenderManager.getRender().update(0);TGFW.RenderManager.getRender().suspendTexturesByUrl(resourcesToProcess.toUnload);TGFW.sdk().getResourceManager().unloadResources(resourcesToProcess.toUnload).always(function(){if(resourcesToProcess.toLoad.length>0){if(TGFW.app().getDebugOptions().loader.showResourcesLoadingPopup){if(showLoadingPopup){resourcesToProcess.toLoad.push('__&%^&%^%^%xxx.png');TGFW.sdk().sdkSettings.resourceManager.loadingTimeout=500;}}TGFW.app().getDebugOptions().loader.showResourcesToLoad;var deferred=TGFW.sdk().getResourceManager().loadResources(resourcesToProcess.toLoad,showLoadingPopup);deferred.always(function(){resourcesToProcess.fontsToLoad.forEach(function(fontName){TGFW.FontManager.calculateFontSizeToLineHeightCoefficient(fontName);});if(resourcesToProcess.fontsToLoad.length>0)TGFW.LocalizationManager.onLanguageChanged.dispatch(TGFW.sdk().getLanguage());TGFW.sdk().enableInput();if(callbackOnFinish)callbackOnFinish();});deferred.progress(function(type,param){if(type==TGH5.Resources.ProgressEvents.ShowPopup){TGFW.app().dialogs.loadingPopup.show();}if(type==TGH5.Resources.ProgressEvents.HidePopup){TGFW.app().dialogs.loadingPopup.hide();}if(callbackOnProgress)callbackOnProgress(type,param);});}else{TGFW.Utils.processLater(function(){if(callbackOnProgress)callbackOnProgress(TGH5.Resources.ProgressEvents.Progress,1);TGFW.sdk().enableInput();if(callbackOnFinish)callbackOnFinish();});}});};Loader.prototype._add=function(stageName,url){if(!this._resources[url]){this._resources[url]={loaded:false,belongs:[stageName]};}else{var resource=this._resources[url];if(resource.belongs.indexOf(stageName)<0)resource.belongs.push(stageName);}};Loader.prototype._scan=function(stageName,desc){var isLowEnd=false;if(typeof TGFW.sdk().isLowEndDevice==='function'){isLowEnd=TGFW.sdk().isLowEndDevice();}function scan(value){if(!(value.skipForLowEnd===true&&isLowEnd)){this._addTexture(value['texture'],stageName);this._addFont(value['font'],stageName);if(value['layout']){for(var _i=0,_a=Object.keys(value['layout']);_i<_a.length;_i++){var shapeName=_a[_i];scan.call(this,value['layout'][shapeName]);}}}}if(desc.layout){for(var _i=0,_a=Object.keys(desc.layout);_i<_a.length;_i++){var shapeName=_a[_i];scan.call(this,desc.layout[shapeName]);}}};Loader.prototype._addFont=function(fontName,stageName){if(!TGFW.FontManager.isFontsOverrided()&&TGFW.Utils.isString(fontName)){var f=TGFW.FontManager.getFont(fontName);if(f){if(TGFW.RenderManager.isTTFFontsSupported()){var url=fontName+'|'+f.url;this._add(stageName,url);this._resources[url].fontName=fontName;this._resources[url].type=ResourceType.FONT;}}}};Loader.prototype._addTexture=function(textureName,stageName){if(TGFW.Utils.isString(textureName)){var t=TGFW.TextureManager.getTexture(textureName);if(t){this._add(stageName,t.map.url);this._resources[t.map.url].type=ResourceType.IMAGE;}}};Loader.prototype._getUnloadResourceList=function(){var toUnload=[];for(var _i=0,_a=Object.keys(this._resources);_i<_a.length;_i++){var url=_a[_i];var resource=this._resources[url];var isNeeded=this._loadedStages.some(function(stageName){return resource.belongs.indexOf(stageName)>=0;},this);if(!isNeeded&&resource.loaded)toUnload.push(url);}return toUnload;};Loader.prototype._getLoadResourceList=function(){var toLoad=[];for(var _i=0,_a=Object.keys(this._resources);_i<_a.length;_i++){var url=_a[_i];var resource=this._resources[url];var isNeeded=this._loadedStages.some(function(stageName){return resource.belongs.indexOf(stageName)>=0;},this);if(isNeeded&&!resource.loaded)toLoad.push(url);}return toLoad;};Loader.prototype._checkImages=function(){var appResources=[],usedResources=[],failed=false;for(var _i=0,_a=Object.keys(TGFW.app().desc.texturePool);_i<_a.length;_i++){var textureName=_a[_i];var value=TGFW.app().desc.texturePool[textureName];if(appResources.indexOf(value.map.url)<0){appResources.push(value.map.url);}}for(var _b=0,_c=Object.keys(TGFW.app().desc.fontPool);_b<_c.length;_b++){var fontName=_c[_b];if(appResources.indexOf(fontName)<0){appResources.push(fontName);}}for(var _d=0,_e=Object.keys(this._resources);_d<_e.length;_d++){var resourceName=_e[_d];if(resourceName.indexOf('|')>=0)resourceName=resourceName.substr(0,resourceName.indexOf('|'));if(usedResources.indexOf(resourceName)<0)usedResources.push(resourceName);}usedResources.forEach(function(resourceName){if(appResources.indexOf(resourceName)<0&&resourceName.indexOf('.json')<=0){failed=true;}},this);appResources.forEach(function(resourceName){usedResources.indexOf(resourceName)<0;},this);};Loader.prototype._checkDialogs=function(loaderDesc){var appDialogNames=Object.keys(TGFW.app().desc.scene),usedDialogNames=[],failed=false;for(var _i=0,_a=Object.keys(loaderDesc);_i<_a.length;_i++){var loaderStageName=_a[_i];loaderDesc[loaderStageName].dialogs.forEach(function(loaderStage){if(usedDialogNames.indexOf(loaderStage)<0)usedDialogNames.push(loaderStage);},this);}usedDialogNames.forEach(function(dialogName){if(appDialogNames.indexOf(dialogName)<0){failed=true;}},this);appDialogNames.forEach(function(dialogName){if(usedDialogNames.indexOf(dialogName)<0){failed=true;}},this);};Loader._instance=null;return Loader;}();TGFW.Loader=Loader;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){var Random=function(){function Random(){this._storedState=null;this._seed=0;this.randomize();}Random.readStateFromStream=function(bitStream){return{seed:bitStream.readUInt(Random.SEED_BITS)};};Random.writeStateToStream=function(bitStream,state){bitStream.writeUInt(state.seed,Random.SEED_BITS);return bitStream;};Random.prototype.randomize=function(){this._seed=(Date.now()&Random.SEED_MASK)>>>0;this.storeState();};Random.prototype.getLastStoredState=function(){return this._storedState;};Random.prototype.storeState=function(){this._storedState={seed:this._seed};};Random.prototype.restoreState=function(state){this._seed=state.seed;this.storeState();};Random.prototype.next=function(){this._seed=(this._seed*Random._multiplier+Random._addition&Random.SEED_MASK)>>>0;var value=this._seed>>>16&Random.VALUE_MASK;return value;};Random.prototype.nextInRange=function(low,high){var result=low+_Math.round((high-low)*this.next()/Random.VALUE_MASK);return result;};Random.SEED_BITS=32;Random.SEED_MASK=_Math.pow(2,Random.SEED_BITS)-1;Random.VALUE_BITS=15;Random.VALUE_MASK=_Math.pow(2,Random.VALUE_BITS)-1;Random._multiplier=214013;Random._addition=2531011;return Random;}();Math.Random=Random;}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW_DEBUG_SHAPES=false;var TGFW;(function(TGFW){var Utils;(function(Utils){function getRandomMinMax(min,max){return min+_Math.random()*(max-min);}Utils.getRandomMinMax=getRandomMinMax;function degreesToRadians(deg){return deg*_Math.PI/180;}Utils.degreesToRadians=degreesToRadians;function radiansToDegrees(rad){return rad*180/_Math.PI;}Utils.radiansToDegrees=radiansToDegrees;function getRandomK(){return getRandomMinMax(0,1000)/1000;}Utils.getRandomK=getRandomK;function interpolateNumber(startPoint,endPoint,k){return startPoint+k*(endPoint-startPoint);}Utils.interpolateNumber=interpolateNumber;function hexToColor(hex){return new TGFW.Render.Color(hex>>24&255,hex>>16&255,hex>>8&255,(hex&255)/255);}Utils.hexToColor=hexToColor;function isExitAvailable(){if(TGFW.sdk()&&TGFW.sdk().isExitAvailable)return TGFW.sdk().isExitAvailable();return true;}Utils.isExitAvailable=isExitAvailable;function setDefault(obj,key,defaultObj){if(!obj||!defaultObj)return;if(typeof obj[key]=='undefined'){if(typeof defaultObj[key]!='undefined'){obj[key]=defaultObj[key];}}}Utils.setDefault=setDefault;function setIfNumber(obj,attrName,value,defaultValue){if(isNumber(value)){obj[attrName]=value;}else{if(isNumber(defaultValue))obj[attrName]=defaultValue;}}Utils.setIfNumber=setIfNumber;function isObject(obj){return obj&&typeof obj==='object';}Utils.isObject=isObject;function isFunction(obj){return typeof obj==='function';}Utils.isFunction=isFunction;function isString(obj){return typeof obj==='string';}Utils.isString=isString;function isArray(obj){return Object.prototype.toString.call(obj)==='[object Array]';}Utils.isArray=isArray;function isBoolean(obj){return typeof obj==='boolean';}Utils.isBoolean=isBoolean;function isNumber(obj){return typeof obj==='number'&&!isNaN(obj);}Utils.isNumber=isNumber;function sliceArray(arr,start,end){if(start===undefined){start=0;}if(end===undefined){end=arr.length;}var resultArray=new Array(end-start),i=start;for(start;i<end;i++){resultArray[i]=arr[i];}return resultArray;}Utils.sliceArray=sliceArray;function createArray2D(rows,cols,value){var result=new Array(rows),useValue=arguments.length>=3;for(var i=0;i<rows;i++){result[i]=useValue?createArray(cols,value):createArray(cols);}return result;}Utils.createArray2D=createArray2D;function createArray(size,value){var result=new Array(size);if(arguments.length>=2){fillArray(result,size,value);}return result;}Utils.createArray=createArray;function fillArray2D(inputArray,rows,cols,value){for(var i=0;i<rows;i++){fillArray(inputArray[i],cols,value);}}Utils.fillArray2D=fillArray2D;function fillArray(inputArray,size,value){if(Utils.isFunction(value)){for(var i=0;i<size;i++){inputArray[i]=new value();}}else{for(var i=0;i<size;i++){inputArray[i]=value;}}}Utils.fillArray=fillArray;function copyArray(destinationArray,sourceArray){var l=sourceArray.length;if(destinationArray.length>l){destinationArray.length=l;}for(var i=0;i<l;i++){destinationArray[i]=sourceArray[i];}}Utils.copyArray=copyArray;function shuffleArray(arrayToShuffle,random){if(random===undefined){random=TGFW.Math.random;}var l=arrayToShuffle.length;for(var first=0;first<l-1;first++){var second=random.nextInRange(first+1,l-1);_a=[arrayToShuffle[second],arrayToShuffle[first]],arrayToShuffle[first]=_a[0],arrayToShuffle[second]=_a[1];}var _a;}Utils.shuffleArray=shuffleArray;function processLater(callback,thisArg,args){setTimeout(function(){callback.apply(thisArg,args);},4);}Utils.processLater=processLater;function numberToCommaString(value){return value.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,'$1,');}Utils.numberToCommaString=numberToCommaString;function repeatString(stringToRepeat,repeatCount){var result='';for(;;){if(repeatCount&1)result+=stringToRepeat;repeatCount>>=1;if(repeatCount){stringToRepeat+=stringToRepeat;}else{return result;}}}Utils.repeatString=repeatString;function stringParser(format,dictionary,dictionaryUsed){return format.replace(/\{\{([^\s,:]+)(?:,(\d+))?(?::([zZfFcCeE])(\d+)?)?\}\}/g,function(match,key,alignment,formatType,precisionSpecifier){var valueString;if(dictionary&&dictionaryUsed)dictionaryUsed[key]=dictionary[key];if(dictionary&&key in dictionary){valueString=isString(dictionary[key])||isNumber(dictionary[key])?String(dictionary[key]):'';if(isString(formatType)&&valueString.length>0){var value,isNegative,precisionSpecifierNumber;switch(formatType.toLowerCase()){case'z':value=parseInt(valueString,10);isNegative=value<0;precisionSpecifierNumber=parseInt(precisionSpecifier,10);valueString=String(_Math.abs(value));valueString=(repeatString('0',precisionSpecifierNumber)+valueString).substr(-_Math.max(precisionSpecifierNumber,valueString.length));if(isNegative)valueString='-'+valueString;break;case'f':value=parseInt(valueString,10);precisionSpecifierNumber=parseInt(precisionSpecifier,10);valueString=value.toFixed(precisionSpecifierNumber);break;case'c':value=parseInt(valueString,10);valueString=numberToCommaString(value);break;case'e':valueString=valueString.replace(/ /g,' ');break;default:break;}}}else if(TGFW.LocalizationManager.hasText(key)){var text=TGFW.LocalizationManager.getText(key);if(text!==format&&Utils.isString(text)){valueString=stringParser(text,dictionary,dictionaryUsed);}else{valueString=match;}}else{valueString=match;}return valueString;});}Utils.stringParser=stringParser;Utils.numberToString64=TGH5.PackedStream.numberToString64;Utils.string64ToNumber=TGH5.PackedStream.string64ToNumber;function getStringOccurrencesCount(searchInString,searchForSubString,allowOverlapping){searchInString+='';searchForSubString+='';if(searchForSubString.length<=0)return searchInString.length+1;var n=0,pos=0,step=allowOverlapping?1:searchForSubString.length;while((pos=searchInString.indexOf(searchForSubString,pos))>=0){n++;pos+=step;}return n;}Utils.getStringOccurrencesCount=getStringOccurrencesCount;var __time;function profileStart(){__time=Date.now();}Utils.profileStart=profileStart;function profileEnd(){}Utils.profileEnd=profileEnd;function loadJSON(jsonFileName,onSuccess,onError){var resourceManager=TGFW.sdk().getResourceManager();resourceManager.loadResources([jsonFileName]).done(function(){var data=resourceManager.getResourceData(jsonFileName);onSuccess(data);}).fail(function(error){if(onError)onError(error);});}Utils.loadJSON=loadJSON;}(Utils=TGFW.Utils||(TGFW.Utils={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var FontManager=function(){function FontManager(fontPool){this._fontPool={};this._fontPool=fontPool;}FontManager.init=function(fontPool){if(FontManager._instance===null){FontManager._instance=new FontManager(fontPool);}};FontManager.getFont=function(fontName){return FontManager._instance._fontPool[fontName];};FontManager.isFontsOverrided=function(){return FontManager._isOverrided;};FontManager.overrideAllFonts=function(newFontName){FontManager._isOverrided=true;FontManager._overridedFont=newFontName;};FontManager.getOverridedFont=function(){return FontManager._overridedFont;};FontManager.calculateFontSizeToLineHeightCoefficient=function(fontName){var fontDescription=FontManager._instance._fontPool[fontName],testFontSize=50;if(!fontDescription.fontSizeToLineHeightCoefficient){var div=document.createElement('div');div.setAttribute('style',['visibility : hidden','display : block','position : absolute','top : 20px','left : 20px','font-family : '+fontName,'font-size : '+testFontSize+'px'].join(';'));div.innerHTML='ABZW';document.body.appendChild(div);var style=getComputedStyle(div,null),height=parseInt(style.getPropertyValue('height'),10);fontDescription.fontSizeToLineHeightCoefficient=height/testFontSize;if(div.parentNode){var samsungFix=div.parentNode.removeChild(div);samsungFix=null;}}};FontManager.DEFAULT_MAX_FONT_SIZE=25;FontManager._instance=null;FontManager._isOverrided=false;return FontManager;}();TGFW.FontManager=FontManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var ITexture=function(){function ITexture(){}return ITexture;}();TGFW.ITexture=ITexture;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var TextureManager=function(){function TextureManager(texturePool){this._texturePool={};this._texturePool=texturePool;}TextureManager.init=function(texturePool){if(TextureManager._instance===null){TextureManager._instance=new TextureManager(texturePool);var textures=TextureManager._instance._texturePool,uniqueMaps=[],resourceManager=TGFW.sdk().getResourceManager();for(var p in textures){if(!textures.hasOwnProperty(p))continue;var map=textures[p].map;if(uniqueMaps.indexOf(map.url)>=0)continue;map.url=resourceManager.resolvePath(map.url);uniqueMaps.push(map.url);}}};TextureManager.getTexture=function(textureName){return TextureManager._instance._texturePool[textureName];};TextureManager._instance=null;return TextureManager;}();TGFW.TextureManager=TextureManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){var Point=function(){function Point(x,y){this.x=x;this.y=y;}Point.create=function(obj){return new Point(obj.x,obj.y);};Point.getDirection=function(p1,p2){return p2.clone().subtract(p1).normalize();};Point.getDistance=function(p1,p2){return p2.clone().subtract(p1).length();};Point.getSqDistance=function(p1,p2){return p2.clone().subtract(p1).lengthSq();};Point.prototype.setDesc=function(desc){TGFW.Utils.setIfNumber(this,'x',desc.x,0);TGFW.Utils.setIfNumber(this,'y',desc.y,0);};Point.prototype.interpolate=function(k,end){return new Point(this.x+k*(end.x-this.x),this.y+k*(end.y-this.y));};Point.prototype.inverse=function(){this.x=-this.x;this.y=-this.y;return this;};Point.prototype.clone=function(){return new Point(this.x,this.y);};Point.prototype.dot=function(vector){return this.x*vector.x+this.y*vector.y;};Point.prototype.add=function(point){this.x+=point.x;this.y+=point.y;return this;};Point.prototype.subtract=function(point){this.x-=point.x;this.y-=point.y;return this;};Point.prototype.multiply=function(scalar){this.x*=scalar;this.y*=scalar;return this;};Point.prototype.scale=function(scale){if(scale.x!==Point.NOT_SET&&this.x!==Point.NOT_SET){this.x*=scale.x;}if(scale.y!==Point.NOT_SET&&this.y!==Point.NOT_SET){this.y*=scale.y;}return this;};Point.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y;};Point.prototype.length=function(){return _Math.sqrt(this.lengthSq());};Point.prototype.normalize=function(){var length=this.length();if(length===0){this.x=1;this.y=0;}else{this.multiply(1/length);}return this;};Point.prototype.setX=function(value){this.x=value;};Point.prototype.setY=function(value){this.y=value;};Point.prototype.getX=function(){return this.x;};Point.prototype.getY=function(){return this.y;};Point.prototype.isEqualTo=function(point){return this.x==point.x&&this.y==point.y;};Point.prototype.set=function(x,y){this.x=x;this.y=y;};Point.prototype.setPoint=function(point){this.x=point.x;this.y=point.y;};Point.NOT_SET=1073741824;return Point;}();Math.Point=Point;}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){var Rect=function(){function Rect(x,y,width,height){this.position=new Math.Point(0,0);this.size=new Math.Point(Math.Point.NOT_SET,Math.Point.NOT_SET);this.set(x,y,width,height);}Rect.create=function(obj){return new Rect(obj.x,obj.y,obj.width,obj.height);};Rect.prototype.set=function(x,y,width,height){this.setPosition(x,y);this.setSize(width,height);};Rect.prototype.setRect=function(rect){this.setPosition(rect.getX(),rect.getY());this.setSize(rect.getWidth(),rect.getHeight());};Rect.prototype.setDesc=function(desc){this.position.setDesc(desc);this.size.setDesc({x:desc.width,y:desc.height});};Rect.prototype.setPosition=function(x,y){this.position.set(x,y);};Rect.prototype.setSize=function(width,height){this.size.set(width,height);};Rect.prototype.getPosition=function(){return this.position;};Rect.prototype.getSize=function(){return this.size;};Rect.prototype.getCenter=function(){return this.position.clone().add(this.size.clone().multiply(0.5));};Rect.prototype.clone=function(){return new Rect(this.position.x,this.position.y,this.size.x,this.size.y);};Rect.prototype.isIntersect=function(rect){return rect.position.x+rect.size.x>this.position.x&&rect.position.y+rect.size.y>this.position.y&&rect.position.x<this.position.x+this.size.x&&rect.position.y<this.position.y+this.size.y;};Rect.prototype.union=function(rect){var x1=_Math.min(this.position.x,rect.position.x),y1=_Math.min(this.position.y,rect.position.y),x2=_Math.max(this.position.x+this.size.x,rect.position.x+rect.size.x),y2=_Math.max(this.position.y+this.size.y,rect.position.y+rect.size.y);this.setPosition(x1,y1);this.setSize(x2-x1,y2-y1);return this;};Rect.prototype.isEqualTo=function(anotherBound){return this.position.isEqualTo(anotherBound.position)&&this.size.isEqualTo(anotherBound.size);};Rect.prototype.isValid=function(){return this.size.x>0&&this.size.y>0;};Rect.prototype.scale=function(scale){this.size.scale(scale);return this;};Rect.prototype.expand=function(expandWidth,expandHeight){this.setSize(_Math.max(this.size.x,expandWidth),_Math.max(this.size.y,expandHeight));return this;};Rect.prototype.expandBy=function(deltaWidth,deltaHeight){this.setSize(this.size.x+deltaWidth,this.size.y+deltaHeight);return this;};Rect.prototype.moveBy=function(deltaX,deltaY){this.setPosition(this.position.x+deltaX,this.position.y+deltaY);return this;};Rect.prototype.getBottom=function(){return this.position.y+this.size.y;};Rect.prototype.getRight=function(){return this.position.x+this.size.x;};Rect.prototype.getLeft=function(){return this.position.x;};Rect.prototype.getTop=function(){return this.position.y;};Rect.prototype.getX=function(){return this.position.x;};Rect.prototype.getY=function(){return this.position.y;};Rect.prototype.getWidth=function(){return this.size.x;};Rect.prototype.getHeight=function(){return this.size.y;};Rect.prototype.getTopLeft=function(){return this.position.clone();};Rect.prototype.getTopRight=function(){return new Math.Point(this.getRight(),this.position.y);};Rect.prototype.getBottomLeft=function(){return new Math.Point(this.position.x,this.getBottom());};Rect.prototype.getBottomRight=function(){return new Math.Point(this.getRight(),this.getBottom());};return Rect;}();Math.Rect=Rect;}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){var RangeRandom=function(){function RangeRandom(low,high){this._low=low;this._high=high;this._storedState=null;this._random=new TGFW.Math.Random();this.randomize();}RangeRandom.readStateFromStream=function(bitStream){return{randomState:Math.Random.readStateFromStream(bitStream)};};RangeRandom.writeStateToStream=function(bitStream,state){Math.Random.writeStateToStream(bitStream,state.randomState);return bitStream;};RangeRandom.prototype.randomize=function(){this._random.randomize();};RangeRandom.prototype.getLastStoredState=function(){return this._storedState;};RangeRandom.prototype.storeState=function(){this._random.storeState();};RangeRandom.prototype.restoreState=function(state){this._random.restoreState(state.randomState);};RangeRandom.prototype.next=function(){return this._random.nextInRange(this._low,this._high);};return RangeRandom;}();Math.RangeRandom=RangeRandom;}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){var SmartRandom=function(){function SmartRandom(low,high){this._storedState=null;this._random=new TGFW.Math.Random();this._shuffleCounter=0;this._arrayPosition=0;this._size=high-low+1;this._array=new Array(this._size);this.randomize();}SmartRandom.readStateFromStream=function(bitStream){return{shuffleCounter:bitStream.readUInt(SmartRandom._SHUFFLE_COUNTER_BITS),arrayPosition:bitStream.readUInt(SmartRandom._ARRAY_POSITION_BITS),randomState:Math.Random.readStateFromStream(bitStream)};};SmartRandom.writeStateToStream=function(bitStream,state){bitStream.writeUInt(state.shuffleCounter,SmartRandom._SHUFFLE_COUNTER_BITS);bitStream.writeUInt(state.arrayPosition,SmartRandom._ARRAY_POSITION_BITS);Math.Random.writeStateToStream(bitStream,state.randomState);return bitStream;};SmartRandom.prototype.randomize=function(){this._random.randomize();this._initializeRandom();this._shuffle();this.storeState();};SmartRandom.prototype.getLastStoredState=function(){return this._storedState;};SmartRandom.prototype.storeState=function(){this._storedState={shuffleCounter:this._shuffleCounter,arrayPosition:this._arrayPosition,randomState:this._random.getLastStoredState()};};SmartRandom.prototype.restoreState=function(state){this._initializeRandom();var shuffleCounter=state.shuffleCounter;this._arrayPosition=state.arrayPosition;this._random.restoreState(state.randomState);for(var i=0;i<shuffleCounter;i++){this._shuffle();}this.storeState();};SmartRandom.prototype.next=function(){var value=this._array[this._arrayPosition++];if(this._arrayPosition>=this._size){this._arrayPosition=0;this._shuffle();}return value;};SmartRandom.prototype._shuffle=function(){var l=this._size;for(var first=0;first<l-1;first++){var second=this._random.nextInRange(first+1,l-1);var tmp=this._array[first];this._array[first]=this._array[second];this._array[second]=tmp;}this._shuffleCounter++;};SmartRandom.prototype._initializeRandom=function(){this._shuffleCounter=0;this._arrayPosition=0;for(var i=0;i<this._size;i++){this._array[i]=i;}};SmartRandom._ARRAY_POSITION_BITS=Math.Random.VALUE_BITS;SmartRandom._SHUFFLE_COUNTER_BITS=32;return SmartRandom;}();Math.SmartRandom=SmartRandom;}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Math;(function(Math){Math.PRECISION_LIMIT=0.0001;function log(n,base){return _Math.log(n)/_Math.log(base);}Math.log=log;function bitsInNumber(value){return _Math.ceil(_Math.log(1+value)/_Math.LN2);}Math.bitsInNumber=bitsInNumber;function getPowerOfTwo(value){var pow=1;while(pow<value){pow*=2;}return pow;}Math.getPowerOfTwo=getPowerOfTwo;function decimalAdjust(type,value,exp){if(exp===undefined){exp=0;}if(+exp===0){return _Math[type](value);}var p=value.toString().split('e');value=_Math[type](+(p[0]+'e'+(p[1]?+p[1]-exp:-exp)));p=value.toString().split('e');return+(p[0]+'e'+(p[1]?+p[1]+exp:exp));}Math.round10=function(value,exp){return decimalAdjust('round',value,exp);};Math.floor10=function(value,exp){return decimalAdjust('floor',value,exp);};Math.ceil10=function(value,exp){return decimalAdjust('ceil',value,exp);};Math.random=new Math.Random();}(Math=TGFW.Math||(TGFW.Math={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Color=function(){function Color(r,g,b,a){if(a===undefined){a=Color.opaque;}this.r=r|0;this.g=g|0;this.b=b|0;this.a=a;}Color.white=function(a){if(a===undefined){a=Color.opaque;}return new Color(255,255,255,a);};Color.black=function(a){if(a===undefined){a=Color.opaque;}return new Color(0,0,0,a);};Color.prototype.isOpaque=function(){return 1-this.a<TGFW.Math.PRECISION_LIMIT;};Color.prototype.isWhite=function(){return this.r===255&&this.g===255&&this.b===255;};Color.prototype.getOpacity=function(){return this.a;};Color.prototype.toRGB=function(){return'rgb('+this.r+','+this.g+','+this.b+')';};Color.prototype.toStyle=function(){if(this.isOpaque()){return this.toRGB();}else{return'rgba('+this.r+','+this.g+','+this.b+','+this.a+')';}};Color.prototype.randomise=function(startColor,endColor){this.r=TGFW.Utils.interpolateNumber(startColor.r,endColor.r,TGFW.Utils.getRandomK())|0;this.g=TGFW.Utils.interpolateNumber(startColor.g,endColor.g,TGFW.Utils.getRandomK())|0;this.b=TGFW.Utils.interpolateNumber(startColor.b,endColor.b,TGFW.Utils.getRandomK())|0;this.a=TGFW.Utils.interpolateNumber(startColor.a,endColor.a,TGFW.Utils.getRandomK());return this;};Color.prototype.randomiseOpacity=function(startColor,endColor){this.a=TGFW.Utils.interpolateNumber(startColor.a,endColor.a,TGFW.Utils.getRandomK());return this;};Color.prototype.interpolate=function(startColor,endColor,k){this.r=TGFW.Utils.interpolateNumber(startColor.r,endColor.r,k)|0;this.g=TGFW.Utils.interpolateNumber(startColor.g,endColor.g,k)|0;this.b=TGFW.Utils.interpolateNumber(startColor.b,endColor.b,k)|0;this.a=TGFW.Utils.interpolateNumber(startColor.a,endColor.a,k);return this;};Color.prototype.interpolateOpacity=function(startColor,endColor,k){this.a=TGFW.Utils.interpolateNumber(startColor.a,endColor.a,k);return this;};Color.prototype.setColor=function(newColor){this.r=newColor.r;this.g=newColor.g;this.b=newColor.b;this.a=newColor.a;};Color.opaque=1;return Color;}();Render.Color=Color;}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Border=function(){function Border(width,color){this._width=width|0;this._color=color;}Border.prototype.getWidth=function(){return this._width;};Border.prototype.getColor=function(){return this._color;};Border.prototype.toStyle=function(){return this._width&&this._color?this._width+'px solid '+this._color.toStyle():'';};return Border;}();Render.Border=Border;}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var BorderRadius=function(){function BorderRadius(){switch(arguments.length){case 1:var r=arguments[0]|0;this._radiusTopLeft=r;this._radiusTopRight=r;this._radiusBottomRight=r;this._radiusBottomLeft=r;break;case 4:this._radiusTopLeft=arguments[0]|0;this._radiusTopRight=arguments[1]|0;this._radiusBottomRight=arguments[2]|0;this._radiusBottomLeft=arguments[3]|0;break;}this._hasBorderRadius=!!(this._radiusTopLeft|this._radiusTopRight|this._radiusBottomLeft|this._radiusBottomRight);}BorderRadius.prototype.hasBorderRadius=function(){return TGFW.RenderManager.isBorderRadiusSupported()&&this._hasBorderRadius;};BorderRadius.prototype.getTopLeftRadius=function(){return this._radiusTopLeft;};BorderRadius.prototype.getTopRightRadius=function(){return this._radiusTopRight;};BorderRadius.prototype.getBottomLeftRadius=function(){return this._radiusBottomLeft;};BorderRadius.prototype.getBottomRightRadius=function(){return this._radiusBottomRight;};BorderRadius.prototype.toStyle=function(){var single=this._radiusTopLeft===this._radiusTopRight&&this._radiusBottomLeft===this._radiusBottomRight&&this._radiusTopLeft===this._radiusBottomRight;if(single){return this._radiusTopLeft+'px';}else{return this._radiusTopLeft+'px '+this._radiusTopRight+'px '+this._radiusBottomRight+'px '+this._radiusBottomLeft+'px';}};return BorderRadius;}();Render.BorderRadius=BorderRadius;}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var TextShadow=function(){function TextShadow(offsetX,offsetY,blurRadius,color,multiplier){if(multiplier===undefined){multiplier=1;}this._offsetX=offsetX|0;this._offsetY=offsetY|0;this._blurRadius=blurRadius|0;this._color=color;this._multiplier=multiplier|0;}TextShadow.prototype.toStyle=function(){var result=[this._offsetX+'px',this._offsetY+'px',this._blurRadius+'px',this._color.toStyle()].join(' ');if(this._multiplier>0){var r=new Array(this._multiplier);for(var i=0;i<this._multiplier;i++){r[i]=result;}return r.join(',');}return result;};TextShadow.prototype.getOffsetX=function(){return this._offsetX;};TextShadow.prototype.getOffsetY=function(){return this._offsetY;};TextShadow.prototype.getBlurRadius=function(){return this._blurRadius;};TextShadow.prototype.getColor=function(){return this._color;};TextShadow.prototype.getMultiplier=function(){return this._multiplier;};return TextShadow;}();Render.TextShadow=TextShadow;}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var BoxShadow=function(){function BoxShadow(offsetX,offsetY,blurRadius,color,innerShadow,spreadRadius){if(innerShadow===undefined){innerShadow=false;}if(spreadRadius===undefined){spreadRadius=0;}this._offsetX=offsetX|0;this._offsetY=offsetY|0;this._blurRadius=blurRadius|0;this._color=color;this._innerShadow=innerShadow;this._spreadRadius=spreadRadius|0;}BoxShadow.prototype.toStyle=function(){return(this._innerShadow?'inset ':'')+this._offsetX+'px '+this._offsetY+'px '+this._blurRadius+'px '+this._spreadRadius+'px '+this._color.toStyle();};BoxShadow.prototype.getOffsetX=function(){return this._offsetX;};BoxShadow.prototype.getOffsetY=function(){return this._offsetY;};BoxShadow.prototype.getBlurRadius=function(){return this._blurRadius;};BoxShadow.prototype.getColor=function(){return this._color;};return BoxShadow;}();Render.BoxShadow=BoxShadow;}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Div;(function(Div){var Base=function(){function Base(owner,rootElement){this._owner=owner;this._style={};if(rootElement){this._root=rootElement;}else{this._root=document.createElement('div');this._setStyle('display','none');}this._root.style.position='absolute';}Base.getHashIdByElement=function(element){if(element.hasAttribute(Base._dataAttributeName)){return element.getAttribute(Base._dataAttributeName);}return null;};Base.prototype.suspendResources=function(){};Base.prototype.setAdditionalParams=function(paramId,value){};Base.prototype._renderRotate=function(){var transformValue=[];var transformOriginValue='50% 50%';var owner=this._owner,rotate=owner.getRotate();if(rotate!==TGFW.Math.Point.NOT_SET){var pivot=owner.pivot;if(rotate!=0&&pivot.x!==TGFW.Math.Point.NOT_SET){transformOriginValue=''+pivot.x*100+'% '+pivot.y*100+'%';}transformValue.push('rotate('+rotate+'rad)');}var rotateX=this._owner.getRotateX();if(rotateX!==TGFW.Math.Point.NOT_SET){transformValue.push('scaleX('+rotateX+')');}var rotateY=this._owner.getRotateY();if(rotateY!==TGFW.Math.Point.NOT_SET){transformValue.push('scaleY('+rotateY+')');}var value=transformValue.join(' ');this._setStyle('transform',value);this._setStyle('webkitTransform',value);this._setStyle('oTransform',value);this._setStyle('transformOrigin',transformOriginValue);this._setStyle('webkitTransformOrigin',transformOriginValue);};Base.prototype._renderBoxShadow=function(){var boxShadows=this._owner.getBoxShadows();if(boxShadows){this._setStyle('boxShadow',boxShadows.map(function(boxShadow){return boxShadow.toStyle();}).join(','));}};Base.prototype._renderBorder=function(){var borderRadius=this._owner.getBorderRadius();if(borderRadius){this._setStyle('borderRadius',borderRadius.toStyle());}var border=this._owner.getBorder();if(border){this._setStyle('border',border.toStyle());}};Base.prototype._renderOpacity=function(){var opacity=this._owner.getOpacity();if(1-opacity<TGFW.Math.PRECISION_LIMIT){this._setStyle('opacity','');}else{this._setStyle('opacity',''+opacity);}};Base.prototype._renderVisibility=function(){this._setStyle('display',this._owner.isVisible()?'block':'none');};Base.prototype.append=function(render){var renderRoot=render._root;this._root.appendChild(renderRoot);};Base.prototype.setShapeZIndex=function(backShape){var ownEl=this._root.parentNode;this.remove();if(backShape){var bsRender=backShape.getRender();if(bsRender){var nextEl=bsRender._root.nextSibling;if(nextEl){ownEl.insertBefore(this._root,nextEl);}else{this.append(this);}}else{this.append(this);}}else{this.append(this);}};Base.prototype.remove=function(){if(this._root.parentNode){this._root.parentNode.removeChild(this._root);}};Base.prototype.setId=function(id){this._root.id=id;};Base.prototype.setHashId=function(hashId){this._root.setAttribute(Base._dataAttributeName,hashId);};Base.prototype.getHashId=function(){return this._root.hasAttribute(Base._dataAttributeName)?this._root.getAttribute(Base._dataAttributeName):null;};Base.prototype.update=function(){};Base.prototype.render=function(){};Base.prototype.suspend=function(){this.remove();this._root=null;};Base.prototype._setSize=function(width,height){if(width!==TGFW.Math.Point.NOT_SET){this._setStylePx('width',width|0);}else{this._setStyle('width','');}if(height!==TGFW.Math.Point.NOT_SET){this._setStylePx('height',height|0);}else{this._setStyle('height','');}};Base.prototype._setPosition=function(x,y){var border=this._owner.getBorder();if(border){x-=border.getWidth();y-=border.getWidth();}this._setStylePx('left',x|0);this._setStylePx('top',y|0);};Base.prototype._setStylePx=function(key,value){return this._setStyle(key,value+'px');};Base.prototype._setStyle2Px=function(key,value1,value2){return this._setStyle(key,value1+'px '+value2+'px');};Base.prototype._setStyle=function(key,value){if(this._style[key]===value)return false;this._style[key]=value;this._root.style[key]=value;return true;};Base.prototype._getStyle=function(key){return this._style[key]||'';};Base._dataAttributeName='data-tgfw-hash-id';return Base;}();Div.Base=Base;}(Div=Render.Div||(Render.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Div;(function(Div){var TImage=function(_super){__extends(TImage,_super);function TImage(owner){_super.call(this,owner);}TImage.prototype.render=function(){this._renderVisibility();if(this._owner.isVisible()){var texture=this._owner.getTexture(),bound=this._owner.bound,size=bound.size.clone(),x=bound.position.x,y=bound.position.y,scale=this._owner.getScale();if(texture){var map=texture.map;this._setBackgroundImage(texture.map.url,map.width*scale.x,map.height*scale.y,-texture.x*scale.x,-texture.y*scale.y);if(!map.repeatX){size.x=texture.width-texture.trim.left-texture.trim.right;}if(!map.repeatY){size.y=texture.height-texture.trim.top-texture.trim.bottom;}var rotateX=this._owner.getRotateX();if(rotateX<0){x+=_Math.round(texture.trim.right*scale.x);}else{x+=_Math.round(texture.trim.left*scale.x);}var rotateY=this._owner.getRotateY();if(rotateY<0){y+=_Math.round(texture.trim.bottom*scale.y);}else{y+=_Math.round(texture.trim.top*scale.y);}}else{this._removeBackgroundImage();}size.scale(scale);this._setSize(size.x,size.y);this._setPosition(x,y);this._renderBoxShadow();this._renderBorder();this._renderOpacity();this._renderRotate();}};TImage.prototype._setBackgroundImage=function(image,sizeX,sizeY,positionX,positionY){this._setStyle('backgroundImage','url("'+image+'")');this._setStyle2Px('backgroundSize',sizeX|0,sizeY|0);this._setStyle2Px('backgroundPosition',positionX|0,positionY|0);};TImage.prototype._removeBackgroundImage=function(){this._setStyle('backgroundImage',TImage._emptyImage);this._setStyle('backgroundSize','');this._setStyle('backgroundPosition','');};TImage._emptyImage='url("'+TGH5.Resources.Image.emptyImage+'")';return TImage;}(Div.Base);Div.TImage=TImage;var Image=function(_super){__extends(Image,_super);function Image(){_super.apply(this,arguments);}return Image;}(TImage);Div.Image=Image;}(Div=Render.Div||(Render.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Div;(function(Div){var TImageURL=function(_super){__extends(TImageURL,_super);function TImageURL(owner){_super.call(this,owner);this._lastImageURL=null;}TImageURL.prototype.render=function(){this._renderVisibility();if(this._owner.isVisible()){var bound=this._owner.bound,url=this._owner.getURL(),size=bound.size.clone(),x=bound.position.x,y=bound.position.y,scale=this._owner.getScale();if(this._lastImageURL!=url){this._owner.onImageLoaded();}size.scale(scale);if(url){this._setBackgroundImage(url,size.x,size.y,0,0);}else{this._removeBackgroundImage();}this._setSize(size.x,size.y);this._setPosition(x,y);this._renderBoxShadow();this._renderBorder();this._renderOpacity();this._renderRotate();}};TImageURL.prototype._setBackgroundImage=function(image,sizeX,sizeY,positionX,positionY){this._lastImageURL=image;_super.prototype._setBackgroundImage.call(this,image,sizeX,sizeY,positionX,positionY);};TImageURL.prototype._removeBackgroundImage=function(){this._lastImageURL=null;_super.prototype._removeBackgroundImage.call(this);};return TImageURL;}(Div.TImage);Div.TImageURL=TImageURL;var ImageURL=function(_super){__extends(ImageURL,_super);function ImageURL(){_super.apply(this,arguments);}return ImageURL;}(TImageURL);Div.ImageURL=ImageURL;}(Div=Render.Div||(Render.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Div;(function(Div){var Text=function(_super){__extends(Text,_super);function Text(owner){this._textNodes=[];_super.call(this,owner);}Text.prototype.update=function(){var owner=this._owner;if(owner.isVisible()){var color=owner.getColor();if(color){this._setStyle('color',color.toStyle());}var textShadows=owner.getTextShadows();if(textShadows){var shadowsStyle=new Array(textShadows.length);for(var i=0;i<textShadows.length;i++){shadowsStyle[i]=textShadows[i].toStyle();}this._setStyle('textShadow',shadowsStyle.join(','));}var font=owner.getFont();if(font){this._setStyle('fontFamily','"'+font+'",'+TGFW.RenderManager.standardFontFamily);}var fontSize=owner.getFontSize();if(fontSize){this._setStylePx('fontSize',fontSize);}var textAlign=owner.getTextAlign();switch(textAlign&TGFW.Shape.Align.HORIZONTAL_MASK){case TGFW.Shape.Align.LEFT:this._setStyle('textAlign','left');break;case TGFW.Shape.Align.CENTER:this._setStyle('textAlign','center');break;case TGFW.Shape.Align.RIGHT:this._setStyle('textAlign','right');break;}var textLines=owner.getTextLines();this._updateTextNodesCount(textLines.length);for(var i=0,l=this._textNodes.length;i<l;i++){this._textNodes[i].nodeValue=i<textLines.length?textLines[i].replace(/ /g,' '):'';}}};Text.prototype.render=function(){this._renderVisibility();var owner=this._owner;if(owner.isVisible()){this._setStylePx('lineHeight',owner.calculateLineHeight()|0);var bound=owner.bound,width=bound.size.x,x=bound.position.x,y=bound.position.y,lineHeightDelta=owner.calculateLineHeight()-owner.calculateFontLineHeight(),paddingTop=owner.calculatePaddingTop()-(lineHeightDelta>>1);if(width!==TGFW.Math.Point.NOT_SET){this._setStylePx('width',width);}this._setPosition(x,y+paddingTop);this._renderOpacity();this._renderRotate();}};Text.prototype.calculateRenderWidth=function(){var display=this._getStyle('display'),visibility=this._getStyle('visibility'),savedWidth=this._getStyle('width'),doHide=display!=='block'||visibility!=='hidden';if(doHide){this._setStyle('display','block');this._setStyle('visibility','hidden');}this._setStyle('width','');var style=getComputedStyle(this._root,null),width=parseInt(style.getPropertyValue('width'),10);this._setStyle('width',savedWidth);if(doHide){this._setStyle('visibility',visibility);this._setStyle('display',display);}return width;};Text.prototype._updateTextNodesCount=function(nodesCount){for(var i=this._textNodes.length;i<nodesCount;i++){if(i>0){this._root.appendChild(document.createElement('br'));}var node=document.createTextNode('');this._textNodes.push(node);this._root.appendChild(node);node=null;}};return Text;}(Div.Base);Div.Text=Text;}(Div=Render.Div||(Render.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Div;(function(Div){var Box=function(_super){__extends(Box,_super);function Box(owner){_super.call(this,owner);}Box.prototype.render=function(){this._renderVisibility();var owner=this._owner;if(owner.isVisible()){var color=owner.getColor(),bound=owner.bound;if(color)this._setStyle('backgroundColor',color.toStyle());this._setPosition(bound.position.x,bound.position.y);this._setSize(bound.size.x,bound.size.y);this._renderBoxShadow();this._renderBorder();this._renderOpacity();this._renderRotate();}};return Box;}(Div.Base);Div.Box=Box;}(Div=Render.Div||(Render.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render_1){var Div;(function(Div){var Render=function(){function Render(){this._body=null;this._shapeHashMap={};this._renderQueue=[];}Render.prototype.suspendTexturesByUrl=function(urls){};Render.prototype.isParticleSystemSupported=function(){return false;};Render.prototype.clear=function(){};Render.prototype.addToRenderQueue=function(shapeRender){this._renderQueue.push(shapeRender);};Render.prototype.isSimulateOverOutForMouseNeeded=function(){return false;};Render.prototype.update=function(dt){var root=TGFW.SceneManager.getRoot();this._startRender();root.update();this._endRender();};Render.prototype.getRoot=function(){return this._body;};Render.prototype.getName=function(){return'dom';};Render.prototype.createShapeRender=function(className,owner){var shapeRender=new Render._classesImpl[className](owner),uniqueId=this._getUniqueHashId();shapeRender.setHashId(uniqueId);this._shapeHashMap[uniqueId]=owner;return shapeRender;};Render.prototype.destroyShapeRender=function(shape){var shapeRender=shape.getRender();if(shapeRender){this._shapeHashMap[shapeRender.getHashId()]=null;shapeRender.suspend();}};Render.prototype.getShapeByMouseEvent=function(event){var element=event&&event.target;if(element){var hashId=Div.Base.getHashIdByElement(element);return this._shapeHashMap[hashId];}return null;};Render.prototype.init=function(root){this._body=new Div.Base(root,document.body);root.setRender(this._body);if(TGFW.app().getDebugOptions().render.showDOMShapeBounds){var styleEl=document.createElement('style');styleEl.setAttribute('type','text/css');styleEl.innerHTML=['div:nth-of-type(3n) { outline: 2px solid yellow; }','div:nth-of-type(3n+1) { outline: 2px solid red; }','div:nth-of-type(3n+2) { outline: 2px solid blue; }'].join('\n');styleEl.appendChild(document.createTextNode(''));document.head.appendChild(styleEl);}};Render.prototype.calculateTextShapeWidth=function(shape){return shape.getRender().calculateRenderWidth();};Render.prototype._startRender=function(){this._renderQueue.length=0;};Render.prototype._endRender=function(){for(var _i=0,_a=this._renderQueue;_i<_a.length;_i++){var render=_a[_i];render.render();}};Render.prototype._getUniqueHashId=function(){return''+Render._uniqueId++;};Render._uniqueId=0;Render._classesImpl={'Image':Div.Image,'ParticleSystem':Div.Image,'ImageURL':Div.ImageURL,'Text':Div.Text,'Box':Div.Box,'Canvas':Div.Box};return Render;}();Div.Render=Render;}(Div=Render_1.Div||(Render_1.Div={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var Rectangle=function(){function Rectangle(x,y,width,height){this.set(x,y,width,height);}Rectangle.prototype.set=function(x,y,width,height){this.x=x;this.y=y;this.width=width;this.height=height;};Rectangle.prototype.from=function(rectangle){this.set(rectangle.x,rectangle.y,rectangle.width,rectangle.height);};Rectangle.prototype.rotate=function(angle){var corner_1_x=this.width/2,corner_2_x=corner_1_x,corner_1_y=-this.height/2,corner_2_y=this.height/2,sin_o=_Math.sin(angle),cos_o=_Math.cos(angle);var xformed_corner_1_x=corner_1_x*cos_o-corner_1_y*sin_o,xformed_corner_1_y=corner_1_x*sin_o+corner_1_y*cos_o,xformed_corner_2_x=corner_2_x*cos_o-corner_2_y*sin_o,xformed_corner_2_y=corner_2_x*sin_o+corner_2_y*cos_o;var ex=_Math.max(_Math.abs(xformed_corner_1_x),_Math.abs(xformed_corner_2_x));var ey=_Math.max(_Math.abs(xformed_corner_1_y),_Math.abs(xformed_corner_2_y));this.x-=ex-this.width/2;this.y-=ey-this.height/2;this.width=ex*2;this.height=ey*2;};Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height);};Rectangle.prototype.getRight=function(){return this.x+this.width;};Rectangle.prototype.getBottom=function(){return this.y+this.height;};Rectangle.prototype.isValid=function(){return this.width>0&&this.height>0;};Rectangle.prototype.invalidate=function(){this.width=-1;};Rectangle.prototype.isEqual=function(rectangle){return this.x===rectangle.x&&this.y===rectangle.y&&this.width===rectangle.width&&this.height===rectangle.height;};Rectangle.prototype.checkCollision=function(rectangle){return this.isValid()&&rectangle.isValid()&&this.x<rectangle.getRight()&&this.getRight()>rectangle.x&&this.y<rectangle.getBottom()&&this.getBottom()>rectangle.y;};Rectangle.prototype.intersect=function(rectangle){if(this.checkCollision(rectangle)){var x=_Math.max(this.x,rectangle.x),y=_Math.max(this.y,rectangle.y);this.set(x,y,_Math.min(this.getRight(),rectangle.getRight())-x,_Math.min(this.getBottom(),rectangle.getBottom())-y);}else{this.invalidate();}};Rectangle.prototype.union=function(rectangle){var thisValid=this.isValid(),rectangleValid=rectangle.isValid();if(thisValid&&rectangleValid){var x=_Math.min(this.x,rectangle.x),y=_Math.min(this.y,rectangle.y);this.set(x,y,_Math.max(this.getRight(),rectangle.getRight())-x,_Math.max(this.getBottom(),rectangle.getBottom())-y);}else if(!thisValid){if(rectangleValid){this.from(rectangle);}}};Rectangle.prototype.isInscribedInto=function(rectangle){return this.isValid()&&rectangle.isValid()&&rectangle.x<=this.x&&rectangle.y<=this.y&&rectangle.getRight()>=this.getRight()&&rectangle.getBottom()>=this.getBottom();};return Rectangle;}();Canvas.Rectangle=Rectangle;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var Base=function(){function Base(owner,context2d){this._owner=owner;this._context2d=context2d;this._renderBoundNeedsRecalculation=false;this._renderRectangle=new Canvas.Rectangle(0,0,0,0);this._opaqueRectangle=new Canvas.Rectangle(0,0,0,0);this._unionDirtyRectangle=new Canvas.Rectangle(0,0,0,0);this._previousDirtyRectangle=new Canvas.Rectangle(0,0,0,0);this._savedContextGroups=[];this._children=[];this._parent=null;}Base.prototype.setAdditionalParams=function(paramId,value){};Base.prototype.getOwner=function(){return this._owner;};Base.prototype.getChildren=function(){return this._children;};Base.prototype.findShapeByPoint=function(x,y){if(this._owner.isVisible()){var children=this._children;for(var i=children.length-1;i>=0;i--){var shape=children[i].findShapeByPoint(x,y);if(shape)return shape;}var bound=this._owner.bound,bX=bound.position.x,bY=bound.position.y;if(x>=bX&&x<bX+bound.size.x&&y>=bY&&y<bY+bound.size.y){return this._owner;}}return null;};Base.prototype.append=function(render){render.remove();this._children.push(render);render.setParent(this);TGFW.RenderManager.addToRenderQueue(render);};Base.prototype.remove=function(){if(this._parent){this._parent.removeChild(this);}};Base.prototype.removeChild=function(render){var index=this._children.indexOf(render);if(index>=0){this._children.splice(index,1);render.setParent(null);TGFW.RenderManager.addToRenderQueue(render);}};Base.prototype.setParent=function(render){this._parent=render;};Base.prototype.setId=function(id){};Base.prototype.update=function(){this._renderBoundNeedsRecalculation=true;this._savedContextGroups.length=0;};Base.prototype.render=function(dirtyRectangle,dt){};Base.prototype.suspendResources=function(){};Base.prototype.suspend=function(){this.remove();};Base.prototype.reflow=function(){if(this._renderBoundNeedsRecalculation){this._calculateRenderRectangle();if(TGFW.app().getDebugOptions().render.useFastRenderMethod){var hasRotation=this._owner.getRotate()!==TGFW.Math.Point.NOT_SET||this._owner.getRotateX()!==TGFW.Math.Point.NOT_SET||this._owner.getRotateY()!==TGFW.Math.Point.NOT_SET;if(!hasRotation){this._calculateOpaqueRectangle();}else{this._opaqueRectangle.invalidate();}}this._renderBoundNeedsRecalculation=false;}};Base.prototype.getRenderRectangle=function(){return this._renderRectangle;};Base.prototype.getOpaqueRectangle=function(){return this._opaqueRectangle;};Base.prototype.setShapeZIndex=function(backShape){if(!this._parent)return;var children=this._parent._children;if(!children)return;var count=children.length,currIndex=children.indexOf(this);if(currIndex<0)return;var newIndex=0;if(backShape){newIndex=children.indexOf(backShape.getRender())+1;}if(newIndex>count-1){newIndex=count-1;}children.splice(currIndex,1);if(newIndex>0&&currIndex<newIndex){newIndex--;}children.splice(newIndex,0,this);};Base.prototype.getDirtyRectangle=function(){var unionRectangle=this._unionDirtyRectangle;if(this._owner.isVisible()){this.reflow();var x=_Math.floor(this._renderRectangle.x),y=_Math.floor(this._renderRectangle.y),w=_Math.round(this._renderRectangle.width+2),h=_Math.round(this._renderRectangle.height+2);unionRectangle.set(x,y,w,h);unionRectangle.union(this._previousDirtyRectangle);this._previousDirtyRectangle.set(x,y,w,h);}else{unionRectangle.from(this._previousDirtyRectangle);this._previousDirtyRectangle.invalidate();}return unionRectangle;};Base.prototype._beforeDraw=function(){var rotate=this._owner.getRotate(),rotateX=this._owner.getRotateX(),rotateY=this._owner.getRotateY();if(rotate!==TGFW.Math.Point.NOT_SET||rotateX!==TGFW.Math.Point.NOT_SET||rotateY!==TGFW.Math.Point.NOT_SET){var ctx=this._context2d;ctx.save();var bound=this._owner.bound,pivot=this._owner.pivot,offsetMultiplierX,offsetMultiplierY,translateX,translateY;if(pivot.x!=TGFW.Math.Point.NOT_SET){offsetMultiplierX=pivot.x;offsetMultiplierY=pivot.y;}else{offsetMultiplierX=0.5;offsetMultiplierY=0.5;}translateX=bound.getLeft()+bound.size.x*offsetMultiplierX;translateY=bound.getTop()+bound.size.y*offsetMultiplierY;ctx.translate(translateX,translateY);if(rotate!==TGFW.Math.Point.NOT_SET){ctx.rotate(rotate);}if(rotateX!==TGFW.Math.Point.NOT_SET||rotateY!==TGFW.Math.Point.NOT_SET){ctx.scale(rotateX===TGFW.Math.Point.NOT_SET?1:rotateX,rotateY===TGFW.Math.Point.NOT_SET?1:rotateY);}ctx.translate(-translateX,-translateY);}};Base.prototype._afterDraw=function(){var rotate=this._owner.getRotate(),rotateX=this._owner.getRotateX(),rotateY=this._owner.getRotateY();if(rotate!==TGFW.Math.Point.NOT_SET||rotateX!==TGFW.Math.Point.NOT_SET||rotateY!==TGFW.Math.Point.NOT_SET){this._context2d.restore();}};Base.prototype._setRenderRectangleSize=function(x,y,width,height){this._renderRectangle.set(x,y,width,height);};Base.prototype._calculateOpaqueRectangle=function(){this._opaqueRectangle.invalidate();};Base.prototype._calculateRenderRectangle=function(){this._renderRectangle.invalidate();};Base.prototype._createRectanglePathWithRoundedCorners=function(rectangle,borderRadius){var x=rectangle.x,y=rectangle.y,tl=borderRadius.getTopLeftRadius(),tr=borderRadius.getTopRightRadius(),bl=borderRadius.getBottomLeftRadius(),br=borderRadius.getBottomRightRadius(),r=x+rectangle.width,b=y+rectangle.height;var ctx=this._context2d;ctx.beginPath();ctx.moveTo(x+tl,y);ctx.lineTo(r-tr,y);ctx.quadraticCurveTo(r,y,r,y+tr);ctx.lineTo(r,b-br);ctx.quadraticCurveTo(r,b,r-br,b);ctx.lineTo(x+bl,b);ctx.quadraticCurveTo(x,b,x,b-bl);ctx.lineTo(x,y+tl);ctx.quadraticCurveTo(x,y,x+tl,y);};Base.prototype._drawBorder=function(collision){var border=this._owner.getBorder();if(border){var borderWidth=border.getWidth(),bound=this._owner.bound;Base._rectangle.set(bound.position.x-borderWidth/2,bound.position.y-borderWidth/2,bound.size.x+borderWidth,bound.size.y+borderWidth);if(Base._rectangle.isValid()){var borderColor=border.getColor().toStyle(),borderRadius=this._owner.getBorderRadius(),doClip=!this._renderRectangle.isInscribedInto(collision);var ctx=this._context2d;ctx.save();if(doClip){ctx.beginPath();ctx.rect(collision.x,collision.y,collision.width,collision.height);ctx.clip();}ctx.lineWidth=borderWidth;ctx.strokeStyle=borderColor;if(borderRadius&&borderRadius.hasBorderRadius()){this._createRectanglePathWithRoundedCorners(Base._rectangle,borderRadius);ctx.closePath();ctx.stroke();}else{ctx.strokeRect(Base._rectangle.x,Base._rectangle.y,Base._rectangle.width,Base._rectangle.height);}ctx.restore();}}};Base._rectangle=new Canvas.Rectangle(0,0,0,0);Base._transformationGroup=-200;return Base;}();Canvas.Base=Base;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var Box=function(_super){__extends(Box,_super);function Box(){_super.apply(this,arguments);}Box.prototype.render=function(collision){this._context2d.globalAlpha=this._owner.getOpacity();this._beforeDraw();this._drawBackgroundColor(collision);this._drawBorder(collision);this._afterDraw();};Box.prototype._calculateOpaqueRectangle=function(){var owner=this._owner;if(owner.getColor().isOpaque()&&1-owner.getOpacity()<TGFW.Math.PRECISION_LIMIT){var bound=owner.bound,borderRadius=owner.getBorderRadius();var maxLeftRadius=0,maxTopRadius=0,maxRightRadius=0,maxBottomRadius=0;if(borderRadius&&borderRadius.hasBorderRadius()){maxLeftRadius=_Math.max(borderRadius.getTopLeftRadius(),borderRadius.getBottomLeftRadius());maxTopRadius=_Math.max(borderRadius.getTopLeftRadius(),borderRadius.getTopRightRadius());maxRightRadius=_Math.max(borderRadius.getTopRightRadius(),borderRadius.getBottomRightRadius());maxBottomRadius=_Math.max(borderRadius.getBottomLeftRadius(),borderRadius.getBottomRightRadius());}this._opaqueRectangle.set(bound.position.x+maxLeftRadius,bound.position.y+maxTopRadius,bound.size.x-maxRightRadius|0,bound.size.y-maxBottomRadius|0);}else{this._opaqueRectangle.invalidate();}};Box.prototype._calculateRenderRectangle=function(){var owner=this._owner,bound=owner.bound,border=owner.getBorder(),borderWidth=border?border.getWidth():0,boxShadows=owner.getBoxShadows();var x=bound.position.x-borderWidth,y=bound.position.y-borderWidth,width=bound.size.x+borderWidth*3,height=bound.size.y+borderWidth*3;if(boxShadows&&boxShadows.length>0){var dx=boxShadows[0].getOffsetX(),dy=boxShadows[0].getOffsetY(),radius=boxShadows[0].getBlurRadius();var add=-(dx-radius);if(add>0){x-=add;width+=add;}add=-(dy-radius);if(add>0){y-=add;height+=add;}add=dx+radius;if(add>0){width+=add;}add=dy+radius;if(add>0){height+=add;}}this._setRenderRectangleSize(x,y,width,height);};Box.prototype._drawBackgroundColor=function(collision){var bound=this._owner.bound,width=bound.size.x,height=bound.size.y,border=this._owner.getBorder(),borderWidth=border?border.getWidth():0;var rectangle=Canvas.Base._rectangle;rectangle.set(bound.position.x-borderWidth/2|0,bound.position.y-borderWidth/2|0,_Math.ceil(width+borderWidth/2),_Math.ceil(height+borderWidth/2));if(rectangle.isValid()){var borderRadius=this._owner.getBorderRadius(),hasBorderRadius=borderRadius&&borderRadius.hasBorderRadius();var ctx=this._context2d;if(hasBorderRadius){ctx.save();ctx.beginPath();ctx.rect(collision.x,collision.y,collision.width,collision.height);ctx.clip();}ctx.fillStyle=this._owner.getColor().toStyle();if(hasBorderRadius){this._createRectanglePathWithRoundedCorners(rectangle,borderRadius);ctx.closePath();ctx.fill();}else{if(rectangle.checkCollision(collision)){rectangle.intersect(collision);ctx.fillRect(rectangle.x,rectangle.y,rectangle.width,rectangle.height);}}if(hasBorderRadius){ctx.restore();}}};return Box;}(Canvas.Base);Canvas.Box=Box;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var TImage=function(_super){__extends(TImage,_super);function TImage(owner,context2d){_super.call(this,owner,context2d);this._sourceX=0;this._sourceY=0;this._sourceWidth=0;this._sourceHeight=0;this._targetStepWidth=0;this._targetStepHeight=0;this._targetBottom=0;this._targetRight=0;this._image=null;}TImage.prototype.render=function(collision){var opacity=this._owner.getOpacity();this._context2d.globalAlpha=opacity;this._beforeDraw();this._drawImage(collision);this._drawBorder(collision);this._afterDraw();if(opacity!=1){this._context2d.globalAlpha=1;}};TImage.prototype._calculateOpaqueRectangle=function(){var owner=this._owner,texture=this._getTexture();if(texture){if(!texture.opaque||1-owner.getOpacity()>=TGFW.Math.PRECISION_LIMIT){this._opaqueRectangle.invalidate();}else{var bound=owner.bound,borderRadius=owner.getBorderRadius(),scale=owner.getScale(),scaleX=scale.x,scaleY=scale.y;var maxLeftRadius=0,maxTopRadius=0,maxRightRadius=0,maxBottomRadius=0;if(borderRadius&&borderRadius.hasBorderRadius()){maxLeftRadius=_Math.max(borderRadius.getTopLeftRadius(),borderRadius.getBottomLeftRadius());maxTopRadius=_Math.max(borderRadius.getTopLeftRadius(),borderRadius.getTopRightRadius());maxRightRadius=_Math.max(borderRadius.getTopRightRadius(),borderRadius.getBottomRightRadius());maxBottomRadius=_Math.max(borderRadius.getBottomLeftRadius(),borderRadius.getBottomRightRadius());}var x=bound.position.x+maxLeftRadius,y=bound.position.y+maxTopRadius,width=0,height=0;if(texture.map.repeatX){width=bound.size.x-maxRightRadius;}else{width=(texture.width-texture.trim.left-texture.trim.right)*scaleX-maxRightRadius;x+=texture.trim.left*scaleX;}if(texture.map.repeatY){height=bound.size.y*scaleY-maxBottomRadius;}else{height=(texture.height-texture.trim.top-texture.trim.bottom)*scaleY-maxBottomRadius;y+=texture.trim.top*scaleY;}this._opaqueRectangle.set(x,y,width,height);}}else{this._opaqueRectangle.invalidate();}};TImage.prototype._calculateRenderRectangle=function(){var owner=this._owner,bound=owner.bound,border=owner.getBorder(),borderWidth=border?border.getWidth():0,boxShadows=owner.getBoxShadows(),scale=owner.getScale(),scaleX=scale.x,scaleY=scale.y;var x=bound.getX()-borderWidth,y=bound.getY()-borderWidth,texture=this._getTexture(),width=0,height=0;if(texture){this._calculateTexture();if(texture.map.repeatX){width=bound.size.x;}else{width=(texture.width-texture.trim.left-texture.trim.right)*scaleX;x+=texture.trim.left*scaleX;}if(texture.map.repeatY){height=bound.size.y;}else{height=(texture.height-texture.trim.top-texture.trim.bottom)*scaleY;y+=texture.trim.top*scaleY;}}else{width=bound.size.x;height=bound.size.y;}width+=borderWidth*3;height+=borderWidth*3;if(boxShadows&&boxShadows.length>0){var dx=boxShadows[0].getOffsetX(),dy=boxShadows[0].getOffsetY(),radius=boxShadows[0].getBlurRadius();var add=-(dx-radius);if(add>0){x-=add;width+=add;}add=-(dy-radius);if(add>0){y-=add;height+=add;}add=dx+radius;if(add>0){width+=add;}add=dy+radius;if(add>0){height+=add;}}this._setRenderRectangleSize(x,y,width,height);};TImage.prototype._calculateTexture=function(){var bound=this._owner.bound,scale=this._owner.getScale(),scaleX=scale.x,scaleY=scale.y,texture=this._getTexture();if(texture){this._sourceX=texture.x;this._sourceY=texture.y;this._sourceWidth=texture.width-texture.trim.left-texture.trim.right;this._sourceHeight=texture.height-texture.trim.top-texture.trim.bottom;this._targetStepWidth=texture.width*scaleX;this._targetStepHeight=texture.height*scaleY;this._targetRight=bound.position.x+bound.size.x;this._targetBottom=bound.position.y+bound.size.y;}};TImage.prototype._drawImageInRectangle=function(collision,x,y){var scale=this._owner.getScale(),scaleX=scale.x,scaleY=scale.y,sx=this._sourceX,sy=this._sourceY,trim=this._getTexture().trim,dx,dy;dx=x+trim.left*scaleX;dy=y+trim.top*scaleY;var dw=this._sourceWidth*scaleX,dh=this._sourceHeight*scaleY;var db=dy+dh,dr=dx+dw;if(dx<collision.x){sx+=(collision.x-dx)/scaleX;dx=collision.x;}if(dy<collision.y){sy+=(collision.y-dy)/scaleY;dy=collision.y;}if(collision.getRight()<dr){dr=collision.getRight();}if(collision.getBottom()<db){db=collision.getBottom();}dw=dr-dx;dh=db-dy;if(dw>0&&dh>0){var sw=dw/scaleX;var sh=dh/scaleY;this._context2d.drawImage(this._image,sx,sy,sw,sh,dx,dy,dw,dh);}};TImage.prototype._getTexture=function(){return this._owner.getTexture();};TImage.prototype._getImage=function(){var texture=this._getTexture();if(texture){return TGFW.sdk().getResourceManager().getResourceHTMLElement(texture.map.url);}else{return null;}};TImage.prototype._drawImage=function(collision){var texture=this._getTexture();if(texture){this._image=this._getImage();if(this._image){var bound=this._owner.bound,borderRadius=this._owner.getBorderRadius(),hasBorderRadius=borderRadius&&borderRadius.hasBorderRadius();var ctx=this._context2d;if(hasBorderRadius){ctx.save();Canvas.Base._rectangle.set(bound.position.x,bound.position.y,bound.size.x,bound.size.y);this._createRectanglePathWithRoundedCorners(Canvas.Base._rectangle,borderRadius);ctx.closePath();ctx.clip();}var repeatedY=false;for(var py=bound.position.y;py<this._targetBottom;py+=this._targetStepHeight){if(repeatedY&&!texture.map.repeatY)break;repeatedY=true;var repeatedX=false;for(var px=bound.position.x;px<this._targetRight;px+=this._targetStepWidth){if(repeatedX&&!texture.map.repeatX)break;repeatedX=true;this._drawImageInRectangle(collision,px,py);}}if(hasBorderRadius){ctx.restore();}}}};return TImage;}(Canvas.Base);Canvas.TImage=TImage;var Image=function(_super){__extends(Image,_super);function Image(){_super.apply(this,arguments);}return Image;}(TImage);Canvas.Image=Image;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var TParticleSystem=function(_super){__extends(TParticleSystem,_super);function TParticleSystem(owner,context2d){_super.call(this,owner,context2d);this._sourceX=0;this._sourceY=0;this._sourceWidth=0;this._sourceHeight=0;this._currentParticleX=0;this._currentParticleY=0;this._texture=null;this._image=null;this._pCanvas=null;this._pCtx=null;}TParticleSystem.prototype.render=function(collision,dt){if(this._owner.isFinished()===true)return;this._owner.updateParticleSystem(dt);if(!this._texture){this._setTexture();this._calculateTexture();this._setImage();}this._drawAliveParticles();};TParticleSystem.prototype._drawAliveParticles=function(){for(var _i=0,_a=this._owner.getParticlesPool();_i<_a.length;_i++){var particle=_a[_i];if(!particle.isAlive)continue;this._beforeDrawParticle(particle);this._drawParticle(particle.color);this._afterDrawParticle(particle.opacity);}};TParticleSystem.prototype._beforeDrawParticle=function(particle){this._currentParticleX=particle.pos.x-this._texture.width/2;this._currentParticleY=particle.pos.y-this._texture.height/2;var rotate=particle.spin,scale=particle.scale,translateX=this._currentParticleX+this._texture.width/2,translateY=this._currentParticleY+this._texture.height/2;var ctx=this._context2d;ctx.save();ctx.translate(translateX,translateY);ctx.rotate(rotate);ctx.scale(scale,scale);ctx.translate(-translateX,-translateY);if(ctx.globalAlpha!==particle.color.a){ctx.globalAlpha=particle.color.a;}};TParticleSystem.prototype._afterDrawParticle=function(opacity){if(opacity!==1)this._context2d.globalAlpha=1;this._context2d.restore();};TParticleSystem.prototype._calculateTexture=function(){if(this._texture){this._sourceX=this._texture.x;this._sourceY=this._texture.y;this._sourceWidth=this._texture.width-this._texture.trim.left-this._texture.trim.right;this._sourceHeight=this._texture.height-this._texture.trim.top-this._texture.trim.bottom;}};TParticleSystem.prototype._setTexture=function(){this._texture=this._owner.getTexture();};TParticleSystem.prototype._setImage=function(){this._image=this._image=this._getImage();};TParticleSystem.prototype._getImage=function(){if(this._texture){return TGFW.sdk().getResourceManager().getResourceHTMLElement(this._texture.map.url);}else{return null;}};TParticleSystem.prototype._drawParticle=function(color){if(this._texture&&this._image){var collision=new Canvas.Rectangle(this._currentParticleX,this._currentParticleY,this._texture.width,this._texture.height);this._drawImageInRectangle(color,collision,this._currentParticleX,this._currentParticleY);}};TParticleSystem.prototype._drawImageInRectangle=function(color,collision,x,y){var sx=this._sourceX,sy=this._sourceY,trim=this._texture.trim,dx,dy;dx=x+trim.left;dy=y+trim.top;var dw=this._sourceWidth,dh=this._sourceHeight;var db=dy+dh,dr=dx+dw;if(dx<collision.x){sx+=collision.x-dx;dx=collision.x;}if(dy<collision.y){sy+=collision.y-dy;dy=collision.y;}if(collision.getRight()<dr){dr=collision.getRight();}if(collision.getBottom()<db){db=collision.getBottom();}dw=dr-dx;dh=db-dy;if(dw>0&&dh>0){var sw=dw;var sh=dh;var pCanvas=this._pCanvas,pCtx=this._pCtx;if(this._owner.getDoUpdateColor()){if(!pCanvas){pCanvas=document.createElement('canvas');pCanvas.width=dw;pCanvas.height=dh;pCtx=pCanvas.getContext('2d');}pCtx.clearRect(0,0,pCanvas.width,pCanvas.height);pCtx.globalCompositeOperation='source-over';pCtx.fillStyle=color.toRGB();pCtx.fillRect(0,0,pCanvas.width,pCanvas.height);pCtx.globalCompositeOperation='multiply';pCtx.drawImage(this._image,sx,sy,sw,sh,0,0,dw,dh);pCtx.globalCompositeOperation='destination-in';pCtx.drawImage(this._image,sx,sy,sw,sh,0,0,dw,dh);this._context2d.drawImage(pCanvas,dx,dy,dw,dh);}else{this._context2d.drawImage(this._image,sx,sy,sw,sh,dx,dy,dw,dh);}}};return TParticleSystem;}(Canvas.Base);Canvas.TParticleSystem=TParticleSystem;var ParticleSystem=function(_super){__extends(ParticleSystem,_super);function ParticleSystem(){_super.apply(this,arguments);}return ParticleSystem;}(TParticleSystem);Canvas.ParticleSystem=ParticleSystem;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var ImageURL=function(_super){__extends(ImageURL,_super);function ImageURL(owner,context2d){var _this=this;_super.call(this,owner,context2d);this._url=null;this._imageLoaded=false;this._loadingInProgress=false;this._texture={map:{url:null},x:0,y:0,width:0,height:0,opaque:true,trim:{left:0,right:0,top:0,bottom:0}};this._img=document.createElement('img');this._img.setAttribute('crossOrigin','anonymous');this._img.onload=function(){_this._onImageLoaded();};this._img.onerror=function(){_this._onImageLoadError();};}ImageURL.prototype._getTexture=function(){if(this._loadingInProgress)return null;if(this._url!=this._owner.getURL()){this._loadImage();}else{if(!this._url)return null;return this._texture;}};ImageURL.prototype._getImage=function(){if(this._loadingInProgress||!this._imageLoaded)return null;var texture=this._getTexture();if(texture){return this._img;}else{return null;}};ImageURL.prototype._onImageLoadError=function(){var _this=this;this._loadAttempt++;if(this._loadAttempt>=ImageURL.MAX_NUM_ATTEMPTS){this._img.src=ImageURL._errorImage;this._onImageLoaded();}else{this._loadAttempt++;this._img.src=null;setTimeout(function(){_this._img.src=_this._url;},10);}};ImageURL.prototype._onImageLoaded=function(){this._loadingInProgress=false;this._imageLoaded=true;this._texture.width=this._img.width;this._texture.height=this._img.height;var size=this._owner.size;if(size.x>0&&size.y>0){this._owner.setScaleX(size.x/this._texture.width);this._owner.setScaleY(size.y/this._texture.height);}this._owner.onImageLoaded();};ImageURL.prototype.suspendResources=function(){if(this._url){this._loadingInProgress=false;this._imageLoaded=false;this._url=null;this._img.src=null;}};ImageURL.prototype._loadImage=function(){this._url=this._owner.getURL();this._loadingInProgress=true;this._loadAttempt=0;if(!this._url){this._img.src=null;this._onImageLoaded();}else{this._img.src=this._url;}};ImageURL.MAX_NUM_ATTEMPTS=3;ImageURL._errorImage='url("'+TGH5.Resources.Image.emptyImage+'")';return ImageURL;}(Canvas.TImage);Canvas.ImageURL=ImageURL;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas){var Text=function(_super){__extends(Text,_super);function Text(owner,context2d){_super.call(this,owner,context2d);this._forceClip=false;this._linesPaddingLeft=[];this._blockPaddingLeft=0;this._blockPaddingTop=0;this._blockWidth=0;}Text.prototype.render=function(collision){this._context2d.globalAlpha=this._owner.getOpacity();this._beforeDraw();this._drawText(collision);this._afterDraw();};Text.prototype._calculateRenderRectangle=function(){var textLines=this._owner.getTextLines();if(textLines.length<=0||!this._owner.getColor()){this._renderRectangle.invalidate();}else{var bound=this._owner.bound,border=this._owner.getBorder(),borderWidth=border?border.getWidth():0,textShadows=this._owner.getTextShadows();this._calculateText();var x=bound.position.x-borderWidth+-1+this._blockPaddingLeft,y=bound.position.y-borderWidth+this._blockPaddingTop,width=this._blockWidth+1+borderWidth*3,height=this._owner.calculateTextHeight()+borderWidth*3;if(textShadows&&textShadows.length>0){var dx=textShadows[0].getOffsetX(),dy=textShadows[0].getOffsetY(),radius=textShadows[0].getBlurRadius();var add=-(dx-radius);if(add>0){x-=add;width+=add;}add=-(dy-radius);if(add){y-=add;height+=add;}add=dx+radius;if(add){width+=add;}add=dy+radius;if(add){height+=add;}}this._setRenderRectangleSize(x,y,width,height);}};Text.prototype._calculateText=function(){var textLines=this._owner.getTextLines(),linesCount=textLines.length;if(linesCount>0){var color=this._owner.getColor();var ctx=this._context2d;ctx.fillStyle=color.toStyle();ctx.font=this._owner.getFontSize()+'px '+this._owner.getFont();var blockWidth=0;for(var i=0;i<linesCount;i++){var lineWidth=_Math.ceil(ctx.measureText(textLines[i]).width);blockWidth=_Math.max(blockWidth,lineWidth);this._linesPaddingLeft[i]=lineWidth;}switch(this._owner.getTextAlign()&TGFW.Shape.Align.HORIZONTAL_MASK){case TGFW.Shape.Align.LEFT:for(var i_1=0;i_1<linesCount;i_1++){this._linesPaddingLeft[i_1]=0;}this._blockPaddingLeft=0;break;case TGFW.Shape.Align.CENTER:for(var i_2=0;i_2<linesCount;i_2++){this._linesPaddingLeft[i_2]=blockWidth-this._linesPaddingLeft[i_2]>>1;}this._blockPaddingLeft=this._owner.bound.size.x-blockWidth>>1;break;case TGFW.Shape.Align.RIGHT:for(var i_3=0;i_3<linesCount;i_3++){this._linesPaddingLeft[i_3]=blockWidth-this._linesPaddingLeft[i_3];}this._blockPaddingLeft=this._owner.bound.size.x-blockWidth;break;}this._blockWidth=blockWidth;this._blockPaddingTop=this._owner.calculatePaddingTop();}};Text.prototype._drawText=function(collision){var textLines=this._owner.getTextLines();if(textLines.length>0){var bound=this._owner.bound,x=bound.position.x+this._blockPaddingLeft,textShadows=this._owner.getTextShadows(),useTextShadows=textShadows&&textShadows.length>0,doClip=!this._renderRectangle.isInscribedInto(collision)||this._forceClip;var ctx=this._context2d;if(doClip||useTextShadows){ctx.save();}if(doClip){var width=this._forceClip?_Math.min(collision.getRight(),x+bound.size.x)-collision.x:collision.width;ctx.beginPath();ctx.rect(collision.x,collision.y,width,collision.height);ctx.clip();}var color=this._owner.getColor();ctx.fillStyle=color.toStyle();ctx.font=this._owner.getFontSize()+'px '+this._owner.getFont();ctx.textBaseline='bottom';var shadowMultiplier=1;if(useTextShadows){ctx.shadowOffsetX=textShadows[0].getOffsetX();ctx.shadowOffsetY=textShadows[0].getOffsetY();ctx.shadowBlur=textShadows[0].getBlurRadius();ctx.shadowColor=textShadows[0].getColor().toStyle();shadowMultiplier=textShadows[0].getMultiplier();}var y=bound.getY()+this._blockPaddingTop+this._owner.calculateFontLineHeight(),lineHeight=this._owner.calculateLineHeight();for(var shadowIterator=0;shadowIterator<shadowMultiplier;shadowIterator++){for(var textLineIndex=0,l=textLines.length;textLineIndex<l;textLineIndex++){ctx.fillText(textLines[textLineIndex],0.5+x+this._linesPaddingLeft[textLineIndex],-0.5+y+textLineIndex*lineHeight);}}if(doClip||useTextShadows){ctx.restore();}if(TGFW.app().getDebugOptions().render.showTextShapeBounds){ctx.strokeRect(this._renderRectangle.x,this._renderRectangle.y,this._renderRectangle.width,this._renderRectangle.height);}}};return Text;}(Canvas.Base);Canvas.Text=Text;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var Canvas;(function(Canvas_1){var TCanvas=function(_super){__extends(TCanvas,_super);function TCanvas(owner,context2d){_super.call(this,owner,context2d);this._sourceX=0;this._sourceY=0;this._sourceWidth=0;this._sourceHeight=0;this._targetStepWidth=0;this._targetStepHeight=0;this._targetBottom=0;this._targetRight=0;this._image=null;}TCanvas.prototype.render=function(collision){this._owner.render(this._context2d,this._getImage());};TCanvas.prototype._getTexture=function(){return this._owner.getTexture();};TCanvas.prototype._calculateTexture=function(){var bound=this._owner.bound,scale=this._owner.getScale(),scaleX=scale.x,scaleY=scale.y,texture=this._getTexture();if(texture){this._sourceX=texture.x;this._sourceY=texture.y;this._sourceWidth=texture.width-texture.trim.left-texture.trim.right;this._sourceHeight=texture.height-texture.trim.top-texture.trim.bottom;this._targetStepWidth=texture.width*scaleX;this._targetStepHeight=texture.height*scaleY;this._targetRight=bound.position.x+bound.size.x;this._targetBottom=bound.position.y+bound.size.y;}};TCanvas.prototype._calculateRenderRectangle=function(){var owner=this._owner,bound=owner.bound,border=owner.getBorder(),borderWidth=border?border.getWidth():0,boxShadows=owner.getBoxShadows(),scale=owner.getScale(),scaleX=scale.x,scaleY=scale.y;var x=bound.position.x-borderWidth,y=bound.position.y-borderWidth,texture=this._getTexture(),width=0,height=0;if(texture){this._calculateTexture();if(texture.map.repeatX){width=bound.size.x;}else{width=(texture.width-texture.trim.left-texture.trim.right)*scaleX;x+=texture.trim.left*scaleX;}if(texture.map.repeatY){height=bound.size.y;}else{height=(texture.height-texture.trim.top-texture.trim.bottom)*scaleY;y+=texture.trim.top*scaleY;}}else{width=bound.size.x;height=bound.size.y;}width+=borderWidth*3;height+=borderWidth*3;if(boxShadows&&boxShadows.length>0){var dx=boxShadows[0].getOffsetX(),dy=boxShadows[0].getOffsetY(),radius=boxShadows[0].getBlurRadius();var add=-(dx-radius);if(add>0){x-=add;width+=add;}add=-(dy-radius);if(add>0){y-=add;height+=add;}add=dx+radius;if(add>0){width+=add;}add=dy+radius;if(add>0){height+=add;}}this._setRenderRectangleSize(x,y,width,height);};TCanvas.prototype._getImage=function(){var texture=this._getTexture();if(texture){return TGFW.sdk().getResourceManager().getResourceHTMLElement(texture.map.url);}else{return null;}};return TCanvas;}(Canvas_1.Base);Canvas_1.TCanvas=TCanvas;var Canvas=function(_super){__extends(Canvas,_super);function Canvas(){_super.apply(this,arguments);}return Canvas;}(TCanvas);Canvas_1.Canvas=Canvas;}(Canvas=Render.Canvas||(Render.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render_2){var Canvas;(function(Canvas){var Render=function(){function Render(){this._debugRenderVirtualDivsRendered=[];this._dirtyRectangles=[];this._uniqueDirtyRectangles=[];this._divsToRenderPerEachDirtyRectangle=[];this._body=null;this._renderQueue=[];}Render.prototype.init=function(root){this._createCanvas();this._body=new Canvas.Base(root,this._context2d);root.setRender(this._body);};Render.prototype.isParticleSystemSupported=function(){return true;};Render.prototype.isSimulateOverOutForMouseNeeded=function(){return true;};Render.prototype.getRoot=function(){return this._body;};Render.prototype.getName=function(){return'canvas';};Render.prototype.addToRenderQueue=function(shapeRender){this._renderQueue.push(shapeRender);};Render.prototype.createShapeRender=function(className,owner){return new Render._classesImpl[className](owner,this._context2d);};Render.prototype.destroyShapeRender=function(shape){var shapeRender=shape.getRender();if(shapeRender){shapeRender.suspend();}};Render.prototype.getShapeByMouseEvent=function(event){if(event){return this._body.findShapeByPoint(event.x,event.y);}return null;};Render.prototype.calculateTextShapeWidth=function(shape){this._context2d.font=shape.getFontSize()+'px "'+shape.getFont()+'",'+TGFW.RenderManager.standardFontFamily;var maxWidth=0;for(var _i=0,_a=shape.getTextLines();_i<_a.length;_i++){var textLine=_a[_i];maxWidth=_Math.max(maxWidth,this._context2d.measureText(textLine).width);}return maxWidth;};Render.prototype._createCanvas=function(){var canvas=document.createElement('canvas'),ctx=canvas.getContext('2d',{alpha:!!TGFW.app().getDesc().canvasTransparency});ctx['imageSmoothingEnabled']=false;ctx['webkitImageSmoothingEnabled']=false;ctx['msImageSmoothingEnabled']=false;ctx['mozImageSmoothingEnabled']=false;this.resolutionWidth=TGFW.RenderManager.resolutionWidth/TGFW.RenderManager.resolutionScaleX;this.resolutionHeight=TGFW.RenderManager.resolutionHeight/TGFW.RenderManager.resolutionScaleY;canvas.width=this.resolutionWidth;canvas.height=this.resolutionHeight;canvas.setAttribute('style',['position: absolute','left: 0','top: 0','width : '+this.resolutionWidth+'px','height: '+this.resolutionHeight+'px','will-change: transform','transform: translateZ(0)'].join(';'));document.body.appendChild(canvas);ctx.fillStyle='rgb(0,0,0)';ctx.fillRect(0,0,this.resolutionWidth,this.resolutionHeight);this._context2d=ctx;if(TGFW.RenderManager.resolutionScaleX!=1||TGFW.RenderManager.resolutionScaleY!=1){canvas.style.transform='scale('+TGFW.RenderManager.resolutionScaleX+','+TGFW.RenderManager.resolutionScaleY+')';canvas.style.webkitTransform='scale('+TGFW.RenderManager.resolutionScaleX+','+TGFW.RenderManager.resolutionScaleY+')';canvas.style.transformOrigin='0 0';canvas.style.webkitTransformOrigin='0 0';ctx.scale(1/TGFW.RenderManager.resolutionScaleX,1/TGFW.RenderManager.resolutionScaleY);}};Render.prototype.suspendTexturesByUrl=function(urls){};Render.prototype._startRender=function(){this._renderQueue.length=0;};Render.prototype.update=function(dt){var root=TGFW.SceneManager.getRoot();this._startRender();root.update();this._endRender(root,dt);};Render.prototype.clear=function(){this._context2d.clearRect(0,0,this.resolutionWidth,this.resolutionHeight);};Render.prototype._endRender=function(rootShape,dt){var isFullRenderMode=TGFW.app().desc.useFullRenderCanvas;if(TGFW.app().getDebugOptions().render.printShapesUpdated){this._debugRenderVirtualDivsRendered.length=0;}TGFW.Utils.PerformanceMonitor.time('R1');for(var i=this._renderQueue.length-1;i>=0;i--){var dirtyRectangle=this._renderQueue[i].getDirtyRectangle();if(TGFW.app().getDebugOptions().render.printShapesUpdated){this._debugRenderAddVirtualDiv(this._renderQueue[i],dirtyRectangle);}if(!isFullRenderMode){if(dirtyRectangle.isValid()){this._dirtyRectangles.push(dirtyRectangle);}}}TGFW.Utils.PerformanceMonitor.timeEnd('R1');if(isFullRenderMode){this._renderFullMethod(rootShape,dt);}else if(this._dirtyRectangles.length>0){TGFW.Utils.PerformanceMonitor.time('R2');do{var found=false,l=this._dirtyRectangles.length;for(var i=0;i<l-1;i++){for(var j=i+1;j<l;j++){var r1=this._dirtyRectangles[i],r2=this._dirtyRectangles[j];if(r1.checkCollision(r2)){r2.union(r1);r1.invalidate();found=true;break;}}}}while(found);for(var _i=0,_a=this._dirtyRectangles;_i<_a.length;_i++){var dirtyRectangle=_a[_i];if(dirtyRectangle.isValid()){this._uniqueDirtyRectangles.push(dirtyRectangle);}}TGFW.Utils.PerformanceMonitor.timeEnd('R2');TGFW.Utils.PerformanceMonitor.time('R3');if(TGFW.app().getDebugOptions().render.useFastRenderMethod){this._renderExclusionsMethod(rootShape,dt);}else{this._renderSlowMethod(rootShape,dt);}TGFW.Utils.PerformanceMonitor.timeEnd('R3');if(TGFW.app().getDebugOptions().render.printShapesUpdated){if(this._debugRenderVirtualDivsRendered.length>0){var updatedRectangles=this._uniqueDirtyRectangles;this._uniqueDirtyRectangles=[new Canvas.Rectangle(0,0,TGFW.RenderManager.resolutionWidth,TGFW.RenderManager.resolutionHeight)];this._renderExclusionsMethod(rootShape,dt);this._debugRenderLogVirtualDivs(updatedRectangles);}}this._uniqueDirtyRectangles.length=0;this._dirtyRectangles.length=0;}};Render.prototype._renderExclusionsMethod_Collect=function(shape){if(shape.isVisible()){if(shape.getRender){var render=shape.getRender(),renderRectangle=render.getRenderRectangle();for(var i=0,l=this._uniqueDirtyRectangles.length;i<l;i++){if(this._uniqueDirtyRectangles[i].checkCollision(renderRectangle)){this._divsToRenderPerEachDirtyRectangle[i].push(render);}}var children=render.getChildren();for(var i=0,l=children.length;i<l;i++){this._renderExclusionsMethod_Collect(children[i].getOwner());}}}};Render.prototype._renderExclusionsMethod_Paint=function(dt){for(var i=0,l=this._uniqueDirtyRectangles.length;i<l;i++){if(this._divsToRenderPerEachDirtyRectangle[i].length>0){var dirtyRectangle=this._uniqueDirtyRectangles[i],divs=this._divsToRenderPerEachDirtyRectangle[i],firstDivIndex=0;for(var divIndex=divs.length-1;divIndex>=0;divIndex--){if(dirtyRectangle.isInscribedInto(divs[divIndex].getOpaqueRectangle())){firstDivIndex=divIndex;break;}}for(divIndex=firstDivIndex;divIndex<divs.length;divIndex++){divs[divIndex].render(dirtyRectangle,dt);}}}};Render.prototype._renderExclusionsMethod=function(shape,dt){var dirtyRectanglesCount=this._uniqueDirtyRectangles.length,shapeArraysPerDirtyRectangle=this._divsToRenderPerEachDirtyRectangle;for(var i=0;i<dirtyRectanglesCount;i++){if(i>=shapeArraysPerDirtyRectangle.length){shapeArraysPerDirtyRectangle[i]=[];}else{shapeArraysPerDirtyRectangle[i].length=0;}}this._renderExclusionsMethod_Collect(shape);this._renderExclusionsMethod_Paint(dt);};Render.prototype._renderFullMethod=function(shape,dt){if(!shape.isVisible())return;if(shape.getRender){var render=shape.getRender();var renderRectangle=render.getRenderRectangle();render.render(renderRectangle,dt);var children=render.getChildren();for(var i=0,l=children.length;i<l;i++){this._renderFullMethod(children[i].getOwner(),dt);}}};Render.prototype._renderSlowMethod=function(shape,dt){if(shape.isVisible()){if(shape.getRender){var render=shape.getRender();var renderRectangle=render.getRenderRectangle();for(var i=0,l=this._uniqueDirtyRectangles.length;i<l;i++){var dirtyRectangle=this._uniqueDirtyRectangles[i];if(dirtyRectangle.checkCollision(renderRectangle)){render.render(dirtyRectangle,dt);}}var children=render.getChildren();for(var i=0,l=children.length;i<l;i++){this._renderSlowMethod(children[i].getOwner(),dt);}}}};Render.prototype._debugRenderAddVirtualDiv=function(virtualDiv,rectangle){this._context2d.rect(rectangle.x,rectangle.y,rectangle.width,rectangle.height);this._context2d.stroke();};Render.prototype._debugRenderLogVirtualDivs=function(tmp){var ctx=this._context2d,shapesRendered=this._debugRenderVirtualDivsRendered,i,l;for(i=0;i<tmp.length;i++){var r=tmp[i];if(r){ctx.lineWidth=3;ctx.strokeStyle='#FFF';ctx.strokeRect(r.x-3,r.y-3,r.width+3,r.height+3);}}var x=10,y=100,dh=20,width=0,height=shapesRendered.length*dh;ctx.font='20px "sans-serif"';for(i=0,l=shapesRendered.length;i<l;i++){width=_Math.max(ctx.measureText(shapesRendered[i]).width,width);}ctx.fillStyle='#FFF';ctx.fillRect(x,y,width+20,height+20);ctx.strokeStyle='#000';ctx.fillStyle='rgb(0,0,0)';ctx.textAlign='left';ctx.font='20px robochivo';ctx.textBaseline='top';ctx.shadowColor='rgba(0,0,0,0)';ctx.shadowBlur=0;ctx.lineWidth=1;for(i=0,l=shapesRendered.length;i<l;i++){ctx.fillText(shapesRendered[i],x+10,y+10+i*dh);}};Render._classesImpl={'Image':Canvas.Image,'ParticleSystem':Canvas.ParticleSystem,'ImageURL':Canvas.ImageURL,'Canvas':Canvas.Canvas,'Text':Canvas.Text,'Box':Canvas.Box};return Render;}();Canvas.Render=Render;}(Canvas=Render_2.Canvas||(Render_2.Canvas={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var Base=function(){function Base(owner,contextGL){this._owner=owner;this._gl=contextGL;this._children=[];this._parent=null;this._transform=new WebGL.Matrix3x3();}Base.prototype.getOwner=function(){return this._owner;};Base.prototype.getChildren=function(){return this._children;};Base.prototype.findShapeByPoint=function(x,y){var owner=this._owner;if(owner.isVisible()){var children=this._children;for(var i=children.length-1;i>=0;i--){var shape=children[i].findShapeByPoint(x,y);if(shape)return shape;}var bound=owner.bound,bX=bound.position.x,bY=bound.position.y;if(x>=bX&&x<bX+bound.size.x&&y>=bY&&y<bY+bound.size.y){return owner;}}return null;};Base.prototype.append=function(render){render.remove();this._children.push(render);render.setParent(this);TGFW.RenderManager.addToRenderQueue(render);};Base.prototype.setShapeZIndex=function(backShape){if(!this._parent)return;var children=this._parent._children;if(!children)return;var count=children.length,currIndex=children.indexOf(this);if(currIndex<0)return;var newIndex=0;if(backShape){newIndex=children.indexOf(backShape.getRender())+1;}if(newIndex>count-1){newIndex=count-1;}children.splice(currIndex,1);if(newIndex>0&&currIndex<newIndex){newIndex--;}children.splice(newIndex,0,this);};Base.prototype.remove=function(){if(this._parent){this._parent.removeChild(this);}};Base.prototype.removeChild=function(render){var index=this._children.indexOf(render);if(index>=0){this._children.splice(index,1);render.setParent(null);TGFW.RenderManager.addToRenderQueue(render);}};Base.prototype.setParent=function(render){this._parent=render;};Base.prototype.setId=function(id){};Base.prototype.suspendResources=function(){};Base.prototype.update=function(){};Base.prototype.render=function(dt){};Base.prototype.resetGlTexture=function(){};Base.prototype.suspend=function(){this.remove();};Base.prototype.setAdditionalParams=function(paramId,value){};Base.prototype._drawBorder=function(){};return Base;}();WebGL.Base=Base;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var Box=function(_super){__extends(Box,_super);function Box(owner,gl){_super.call(this,owner,gl);}Box.prototype._updateTransform=function(){var bound=this._owner.bound,rotate=this._owner.getRotate(),pos=bound.position,size=bound.size,x=pos.x,y=pos.y,w=size.x,h=size.y;if(rotate!==TGFW.Math.Point.NOT_SET){var pivot=this._owner.pivot;if(pivot.x!=TGFW.Math.Point.NOT_SET){this._transform.setRotatePivot(rotate,x,y,w,h,w*pivot.x,h*pivot.y);}else{this._transform.setRotateCenter(rotate,x,y,w,h);}}else{this._transform.setTranslate(x,y);this._transform.setScale(w,h);}};Box.prototype.render=function(){this._updateTransform();WebGL.WebGLRenderer._I.renderBox(this._owner.getColor(),this._owner.getOpacity(),this._transform);};return Box;}(WebGL.Base);WebGL.Box=Box;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var TImage=function(_super){__extends(TImage,_super);function TImage(owner,gl){_super.call(this,owner,gl);this._sourceX=0;this._sourceY=0;this._sourceWidth=0;this._sourceHeight=0;this._lastTexture=null;this._glTexture=null;this._uvOffsetX=0;this._uvOffsetY=0;this._uvMultiplierX=1;this._uvMultiplierY=1;this._transform_uv=new WebGL.Matrix3x3();}TImage.prototype.resetGlTexture=function(){this._glTexture=null;this._lastTexture=null;};TImage.prototype.render=function(){var texture=this._getTexture();if(texture){if(this._lastTexture!=texture){this._updateTextureTransform();this._lastTexture=texture;this._glTexture=WebGL.TextureRenderer._I.getGLTexture(this._lastTexture);}this._updateTransform();WebGL.WebGLRenderer._I.renderImage(this._transform,this._transform_uv,this._glTexture,this._owner.getOpacity());}};TImage.prototype._getTexture=function(){return this._owner.getTexture();};TImage.prototype._updateTextureTransform=function(){var renderer=WebGL.TextureRenderer._I;var texture=this._getTexture();if(!texture)return;var tx,ty,tw,th;this._sourceX=texture.x;tx=this._sourceX/texture.map.width;this._sourceY=texture.y;ty=this._sourceY/texture.map.height;this._sourceWidth=texture.width-texture.trim.left-texture.trim.right;tw=this._sourceWidth/texture.map.width;this._sourceHeight=texture.height-texture.trim.top-texture.trim.bottom;th=this._sourceHeight/texture.map.height;if(texture.map.repeatX){if(!this._glTexture){this._glTexture=renderer.getGLTexture(texture);renderer.setTextureRepeatX(this._glTexture);}tw*=this._owner.bound.size.x/this._sourceWidth;}if(texture.map.repeatY){if(!this._glTexture){this._glTexture=renderer.getGLTexture(texture);renderer.setTextureRepeatY(this._glTexture);}th*=this._owner.bound.size.y/this._sourceHeight;}this._transform_uv.setTranslate(tx+this._uvOffsetX,ty+this._uvOffsetY);this._transform_uv.setScale(tw*this._uvMultiplierX,th*this._uvMultiplierY);};TImage.prototype.setAdditionalParams=function(paramId,value){var texture=this._getTexture();if(texture&&!this._glTexture){this._glTexture=WebGL.TextureRenderer._I.getGLTexture(texture);}switch(paramId){case'UVOffsetX':this._uvOffsetX=value-(value|0);this._updateTextureTransform();WebGL.TextureRenderer._I.setTextureRepeatX(this._glTexture);break;case'UVMultiplierX':this._uvMultiplierX=value;WebGL.TextureRenderer._I.setTextureRepeatX(this._glTexture);this._updateTextureTransform();break;case'UVMultiplierY':this._uvMultiplierY=value;WebGL.TextureRenderer._I.setTextureRepeatY(this._glTexture);this._updateTextureTransform();break;case'UVOffsetY':this._uvOffsetY=value-(value|0);this._updateTextureTransform();WebGL.TextureRenderer._I.setTextureRepeatY(this._glTexture);break;}};TImage.prototype._updateTransform=function(){var owner=this._owner,bound=owner.bound,texture=this._getTexture();if(!texture)return;var scale=owner.getScale(),scaleX=scale.x,scaleY=scale.y;var x=_Math.round(bound.position.x+texture.trim.left*scaleX),y=_Math.round(bound.position.y+texture.trim.top*scaleY),w=_Math.round((texture.width-texture.trim.left-texture.trim.right)*scaleX),h=_Math.round((texture.height-texture.trim.top-texture.trim.bottom)*scaleY);if(texture.map.repeatX){w=bound.size.x;}if(texture.map.repeatY){h=bound.size.y;}var rotate=this._owner.getRotate();if(rotate!==TGFW.Math.Point.NOT_SET){var pivot=owner.pivot;if(pivot.x!=TGFW.Math.Point.NOT_SET){this._transform.setRotatePivot(rotate,x,y,w,h,w*pivot.x,h*pivot.y);}else{this._transform.setRotateCenter(rotate,x,y,w,h);}}else{this._transform.setTranslate(x,y);this._transform.setScale(w,h);}var rotateX=this._owner.getRotateX(),rotateY=this._owner.getRotateY();if(rotateX!==TGFW.Math.Point.NOT_SET){this._transform.rotateX(w,rotateX);}if(rotateY!==TGFW.Math.Point.NOT_SET){this._transform.rotateY(h,rotateY);}};return TImage;}(WebGL.Base);WebGL.TImage=TImage;var Image=function(_super){__extends(Image,_super);function Image(){_super.apply(this,arguments);}return Image;}(TImage);WebGL.Image=Image;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var TParticleSystem=function(_super){__extends(TParticleSystem,_super);function TParticleSystem(owner,gl){_super.call(this,owner,gl);this._sourceX=0;this._sourceY=0;this._sourceWidth=0;this._sourceHeight=0;this._sourceWidthHalf=0;this._sourceHeightHalf=0;this._texture=null;this._image=null;this._transform_uv=new WebGL.Matrix3x3();}TParticleSystem.prototype.render=function(dt){if(this._owner.isFinished()===true)return;this._owner.updateParticleSystem(dt);if(!this._texture){this._setTexture();this._updateTextureTransform();}this._renderAliveParticles();};TParticleSystem.prototype._renderAliveParticles=function(){var renderer=WebGL.WebGLRenderer._I;renderer.setCurrentProgram();renderer.setUVTransform(this._transform_uv);renderer.setPositionBuffer();WebGL.TextureRenderer._I.setGLTexture(this._glTexture);for(var _i=0,_a=this._owner.getParticlesPool();_i<_a.length;_i++){var particle=_a[_i];if(!particle.isAlive)continue;this._updateTransform(particle);renderer.renderParticle(this._transform,particle.color);}};TParticleSystem.prototype._setTexture=function(){this._texture=this._owner.getTexture();this._glTexture=WebGL.TextureRenderer._I.getGLTexture(this._texture);};TParticleSystem.prototype._getImage=function(){if(this._texture){return TGFW.sdk().getResourceManager().getResourceHTMLElement(this._texture.map.url);}else{return null;}};TParticleSystem.prototype._updateTextureTransform=function(){if(!this._texture)return;var tx,ty,tw,th;this._sourceX=this._texture.x;tx=this._sourceX/this._texture.map.width;this._sourceY=this._texture.y;ty=this._sourceY/this._texture.map.height;this._sourceWidth=this._texture.width-this._texture.trim.left-this._texture.trim.right;tw=this._sourceWidth/this._texture.map.width;this._sourceHeight=this._texture.height-this._texture.trim.top-this._texture.trim.bottom;th=this._sourceHeight/this._texture.map.height;this._sourceWidthHalf=this._sourceWidth/2;this._sourceHeightHalf=this._sourceHeight/2;this._transform_uv.setTranslate(tx,ty);this._transform_uv.setScale(tw,th);};TParticleSystem.prototype._updateTransform=function(particle){var scale=particle.scale;var w=this._sourceWidth*scale;var h=this._sourceHeight*scale;var x=particle.pos.x-this._sourceWidthHalf*scale;var y=particle.pos.y-this._sourceHeightHalf*scale;var rotate=particle.spin;if(rotate===0){this._transform.setTranslate(x,y);this._transform.setScale(w,h);}else{this._transform.setRotateCenter(rotate,x,y,w,h);}};return TParticleSystem;}(WebGL.Base);WebGL.TParticleSystem=TParticleSystem;var ParticleSystem=function(_super){__extends(ParticleSystem,_super);function ParticleSystem(){_super.apply(this,arguments);}return ParticleSystem;}(TParticleSystem);WebGL.ParticleSystem=ParticleSystem;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var Text=function(_super){__extends(Text,_super);function Text(owner,gl){_super.call(this,owner,gl);this._transform_uv=new WebGL.Matrix3x3();this._linesPaddingLeft=[];this._blockPaddingTop=0;this._blockPaddingLeft=0;this._fontMap=null;}Text.prototype.render=function(){var textLines=this._owner.getTextLines();if(textLines.length>0){this._calculateText();if(!this._fontMap)return;var bound=this._owner.bound,x=bound.getX()+this._blockPaddingLeft,textShadows=this._owner.getTextShadows(),useTextShadows=textShadows&&textShadows.length>0,color=this._owner.getColor(),opacity=this._owner.getOpacity();var y=bound.getY()+this._blockPaddingTop+this._owner.calculateFontLineHeight(),lineHeight=this._owner.calculateLineHeight();WebGL.WebGLRenderer._I.startRenderFont();WebGL.FontRenderer._I.setTexture(this._fontMap.texture);if(useTextShadows){for(var textLineIndex=0,l=textLines.length;textLineIndex<l;textLineIndex++){for(var i=0;i<textShadows.length;i++){var sh=textShadows[i];WebGL.FontRenderer._I.setColor(sh.getColor(),opacity);this._drawTextLine(textLines[textLineIndex],sh.getOffsetX()+0.5+x+this._linesPaddingLeft[textLineIndex],sh.getOffsetY()-0.5+y+textLineIndex*lineHeight);}}}WebGL.FontRenderer._I.setColor(color,opacity);for(var textLineIndex=0,l=textLines.length;textLineIndex<l;textLineIndex++){this._drawTextLine(textLines[textLineIndex],0.5+x+this._linesPaddingLeft[textLineIndex],-0.5+y+textLineIndex*lineHeight);}}};Text.prototype._getFontDesc=function(){if(this._fontMap)return;this._fontMap=WebGL.FontMapManager.getFontMap(this._owner.getFont());};Text.prototype._calculateText=function(){var textLines=this._owner.getTextLines(),linesCount=textLines.length;if(linesCount>0){this._getFontDesc();if(!this._fontMap)return;this._fontScale=this._owner.getFontSize()/this._fontMap.fontSize;var blockWidth=0;for(var i=0;i<linesCount;i++){var lineWidth=_Math.ceil(this._fontMap.getTextWidth(textLines[i],this._owner.getFontSize()));blockWidth=_Math.max(blockWidth,lineWidth);this._linesPaddingLeft[i]=lineWidth;}switch(this._owner.getTextAlign()&TGFW.Shape.Align.HORIZONTAL_MASK){case TGFW.Shape.Align.LEFT:for(var i_4=0;i_4<linesCount;i_4++){this._linesPaddingLeft[i_4]=0;}this._blockPaddingLeft=0;break;case TGFW.Shape.Align.RIGHT:for(var i_5=0;i_5<linesCount;i_5++){this._linesPaddingLeft[i_5]=blockWidth-this._linesPaddingLeft[i_5];}this._blockPaddingLeft=this._owner.bound.getWidth()-blockWidth;break;case TGFW.Shape.Align.CENTER:for(var i_6=0;i_6<linesCount;i_6++){this._linesPaddingLeft[i_6]=blockWidth-this._linesPaddingLeft[i_6]>>1;}this._blockPaddingLeft=this._owner.bound.getWidth()-blockWidth>>1;break;}this._blockPaddingTop=this._owner.calculatePaddingTop();}};Text.prototype._drawTextLine=function(text,x,y){var len=text.length;for(var i=0;i<len;i++){var p=this._fontMap.letters[text[i]];if(!p)continue;this._transform.setScale(p.w*this._fontScale,p.h*this._fontScale);this._transform.setTranslate(x+p.offsetX*this._fontScale,y+p.offsetY*this._fontScale);x+=p.advanceX*this._fontScale;this._transform_uv.setTranslate(p.tx,p.ty);this._transform_uv.setScale(p.tw,p.th);WebGL.FontRenderer._I.render(this._transform,this._transform_uv);}};return Text;}(WebGL.Base);WebGL.Text=Text;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var ImageURL=function(_super){__extends(ImageURL,_super);function ImageURL(owner,gl){var _this=this;_super.call(this,owner,gl);this._url=null;this._imageLoaded=false;this._loadingInProgress=false;this._lastTexture={map:{url:null,width:0,height:0},x:0,y:0,width:0,height:0,opaque:true,trim:{left:0,right:0,top:0,bottom:0}};this._img=document.createElement('img');this._img.setAttribute('crossOrigin','anonymous');this._img.onload=function(){_this._onImageLoaded();};this._img.onerror=function(){_this._onImageLoadError();};}ImageURL.prototype.render=function(){var texture=this._getTexture();if(texture&&this._glTexture){this._updateTransform();WebGL.WebGLRenderer._I.renderImage(this._transform,this._transform_uv,this._glTexture,this._owner.getOpacity());}};ImageURL.prototype.suspendResources=function(){if(this._glTexture){WebGL.TextureRenderer._I.deleteGLTexture(this._glTexture);this._glTexture=null;this._img.src=null;}this._url=null;this._loadingInProgress=false;this._imageLoaded=false;};ImageURL.prototype._getTexture=function(){if(this._loadingInProgress)return null;if(this._url!=this._owner.getURL()){this._loadImage();}else{if(!this._url)return null;return this._lastTexture;}};ImageURL.prototype._onImageLoadError=function(){var _this=this;this._loadAttempt++;if(this._loadAttempt>=ImageURL.MAX_NUM_ATTEMPTS){this._img.src=ImageURL._errorImage;this._onImageLoaded();}else{this._loadAttempt++;this._img.src=null;setTimeout(function(){_this._img.src=_this._url;},10);}};ImageURL.prototype._onImageLoaded=function(){if(!this._loadingInProgress){return;}this._loadingInProgress=false;this._imageLoaded=true;var img=this._img,lastTexture=this._lastTexture;lastTexture.width=img.width;lastTexture.height=img.height;lastTexture.map.width=img.width;lastTexture.map.height=img.height;if(this._glTexture){WebGL.TextureRenderer._I.deleteGLTexture(this._glTexture);}this._glTexture=WebGL.TextureRenderer._I.createTexture(img);this._updateTextureTransform();var size=this._owner.size;if(size.x>0&&size.y>0){this._owner.setScaleX(size.x/lastTexture.width);this._owner.setScaleY(size.y/lastTexture.height);}this._owner.onImageLoaded();};ImageURL.prototype._loadImage=function(){this._url=this._owner.getURL();this._loadingInProgress=true;this._loadAttempt=0;if(!this._url){this._img.src=null;this._onImageLoaded();}else{this._img.src=this._url;}};ImageURL.MAX_NUM_ATTEMPTS=3;ImageURL._errorImage='url("'+TGH5.Resources.Image.emptyImage+'")';return ImageURL;}(WebGL.TImage);WebGL.ImageURL=ImageURL;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var Matrix3x3=function(){function Matrix3x3(data){this._data=new Float32Array(9);if(data){for(var i=0;i<data.length;i++){this._data[i]=data[i];}}else{this.identity();}}Matrix3x3.prototype.multiply=function(right,dest){var r=dest._data,a=this._data,b=right._data;r[0]=a[0]*b[0]+a[1]*b[3]+a[2]*b[6];r[1]=a[0]*b[1]+a[1]*b[4]+a[2]*b[7];r[2]=a[0]*b[2]+a[1]*b[5]+a[2]*b[8];r[3]=a[3]*b[0]+a[4]*b[3]+a[5]*b[6];r[4]=a[3]*b[1]+a[4]*b[4]+a[5]*b[7];r[5]=a[3]*b[2]+a[4]*b[5]+a[5]*b[8];r[6]=a[6]*b[0]+a[7]*b[3]+a[8]*b[6];r[7]=a[6]*b[1]+a[7]*b[4]+a[8]*b[7];r[8]=a[6]*b[2]+a[7]*b[5]+a[8]*b[8];};Matrix3x3.prototype.getData=function(){return this._data;};Matrix3x3.prototype.set=function(m){var count=this._data.length;for(var i=0;i<count;i++){this._data[i]=m._data[i];}};Matrix3x3.prototype.makeProjectionMatrix=function(screenWidth,screenHeight){this.identity();this._data[0]=2/screenWidth;this._data[4]=-2/screenHeight;this.setTranslate(-1,1);};Matrix3x3.prototype.setScale=function(sx,sy){this._data[0]=sx;this._data[4]=sy;};Matrix3x3.prototype.mullScale=function(sx,sy){this._data[0]*=sx;this._data[4]*=sy;};Matrix3x3.prototype.setTranslate=function(x,y){this._data[6]=x;this._data[7]=y;};Matrix3x3.prototype.setRotateCenter=function(angle,x,y,w,h){var cos=_Math.cos(angle);var sin=_Math.sin(angle);this._data[0]=w*cos;this._data[1]=w*sin;this._data[3]=-h*sin;this._data[4]=h*cos;var tx=w/2,ty=h/2;this._data[6]=x+tx-tx*cos+ty*sin;this._data[7]=y+ty-ty*cos-tx*sin;};Matrix3x3.prototype.setRotatePivot=function(angle,x,y,w,h,tx,ty){var cos=_Math.cos(angle);var sin=_Math.sin(angle);this._data[0]=w*cos;this._data[1]=w*sin;this._data[3]=-h*sin;this._data[4]=h*cos;this._data[6]=x+tx-tx*cos+ty*sin;this._data[7]=y+ty-ty*cos-tx*sin;};Matrix3x3.prototype.rotateX=function(w,rx){this._data[0]*=rx;this._data[6]+=w*(1-rx)/2;};Matrix3x3.prototype.rotateY=function(h,ry){this._data[4]*=ry;this._data[7]+=h*(1-ry)/2;};Matrix3x3.prototype.rotate=function(angle){var cos=_Math.cos(angle);var sin=_Math.sin(angle);this._data[0]=cos;this._data[1]=sin;this._data[3]=-sin;this._data[4]=cos;return this;};Matrix3x3.prototype.identity=function(){this._data[0]=this._data[4]=this._data[8]=1;this._data[1]=this._data[2]=this._data[3]=this._data[5]=this._data[6]=this._data[7]=0;};Matrix3x3.identityMatrix=new Matrix3x3();return Matrix3x3;}();WebGL.Matrix3x3=Matrix3x3;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var TextureMap=function(){function TextureMap(){}return TextureMap;}();WebGL.TextureMap=TextureMap;var _textureMap=[];function _getGLTexture(gl,texture){for(var i=0;i<_textureMap.length;i++){if(_textureMap[i].map==texture.map){return _textureMap[i].glTexture;}}var img=TGFW.sdk().getResourceManager().getResourceHTMLElement(texture.map.url);var result=TextureRenderer._I.createTexture(img);_textureMap.push({map:texture.map,glTexture:result});return result;}var TextureRenderer=function(){function TextureRenderer(gl){this._gl=gl;this._lastTexture=null;}TextureRenderer.initialize=function(gl){TextureRenderer._I=new TextureRenderer(gl);TextureRenderer._I._createProgram();};TextureRenderer.prototype._createProgram=function(){var textureVShaderCode=['uniform mat3 u_projection;','uniform mat3 u_matrix;','uniform mat3 u_uv_matrix;','attribute vec2 a_position;','attribute vec2 a_texcoord;','varying vec2 v_texcoord;','void main(void) {','    gl_Position = vec4((u_projection * u_matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);','    v_texcoord = vec2(u_uv_matrix * vec3(a_texcoord, 1.0));','}'].join('\n');var texturePShaderCode=['precision mediump float;','varying vec2 v_texcoord;','uniform sampler2D u_texture;','uniform vec4 u_color;','void main() {','   gl_FragColor = texture2D(u_texture, v_texcoord)*u_color;','}'].join('\n');this.program=WebGL.WebGLRenderer._I.compileProgram(textureVShaderCode,texturePShaderCode);this.u_matrix_loc=this._gl.getUniformLocation(this.program,'u_matrix');this.u_projection_loc=this._gl.getUniformLocation(this.program,'u_projection');this.u_uv_matrix_loc=this._gl.getUniformLocation(this.program,'u_uv_matrix');this.u_color_loc=this._gl.getUniformLocation(this.program,'u_color');this.positionBuffer=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this.positionBuffer);this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([0,0,0,0,1,0,1,0,1,1,1,1,0,1,0,1]),this._gl.STATIC_DRAW);var a_position_loc=this._gl.getAttribLocation(this.program,'a_position');this._gl.vertexAttribPointer(a_position_loc,2,this._gl.FLOAT,false,16,0);this._gl.enableVertexAttribArray(a_position_loc);var a_texcoord_loc=this._gl.getAttribLocation(this.program,'a_texcoord');this._gl.vertexAttribPointer(a_texcoord_loc,2,this._gl.FLOAT,false,16,8);this._gl.enableVertexAttribArray(a_texcoord_loc);this._gl.useProgram(this.program);this._gl.uniformMatrix3fv(this._gl.getUniformLocation(this.program,'u_projection'),false,WebGL.WebGLRenderer._I.getProjectionMatrix().getData());this._lastTexture=null;};TextureRenderer.prototype.deleteTextureByUrl=function(url){for(var i=0;i<_textureMap.length;i++){if(_textureMap[i].map.url==url){this._lastTexture=null;if(_textureMap[i].glTexture){this.deleteGLTexture(_textureMap[i].glTexture);_textureMap[i].glTexture=null;_textureMap.splice(i,1);i--;}}}};TextureRenderer.prototype.deleteGLTexture=function(glTexture){TextureRenderer._I.setGLTexture(null);this._gl.deleteTexture(glTexture);};TextureRenderer.prototype.createTexture=function(img){var result=this._gl.createTexture();this._gl.bindTexture(this._gl.TEXTURE_2D,result);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);if(!!TGFW.app().getDesc().webglDisableTextureFilter){this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST);}else{this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR);}this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,img);return result;};TextureRenderer.prototype.setTextureRepeatX=function(glTexture){if(glTexture){var gl=this._gl;gl.bindTexture(gl.TEXTURE_2D,glTexture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);}};TextureRenderer.prototype.setTextureRepeatY=function(glTexture){if(glTexture){var gl=this._gl;gl.bindTexture(gl.TEXTURE_2D,glTexture);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.REPEAT);}};TextureRenderer.prototype.endRender=function(){};TextureRenderer.prototype.setGLColor=function(r,g,b,a){this._gl.uniform4f(this.u_color_loc,r,g,b,a);};TextureRenderer.prototype.setGLTexture=function(glTexture){if(this._lastTexture==glTexture)return;this._gl.bindTexture(this._gl.TEXTURE_2D,glTexture);this._lastTexture=glTexture;};TextureRenderer.prototype.getGLTexture=function(texture){return _getGLTexture(this._gl,texture);};TextureRenderer.prototype.setTexture=function(texture){var glTexture=_getGLTexture(this._gl,texture);if(this._lastTexture==glTexture)return;this._lastTexture=glTexture;this._gl.bindTexture(this._gl.TEXTURE_2D,glTexture);};TextureRenderer.prototype.setUVMatrix=function(textureMatrix){this._gl.uniformMatrix3fv(this.u_uv_matrix_loc,false,textureMatrix.getData());};TextureRenderer.prototype.renderNoUVStaticFans=function(transform){this._gl.uniformMatrix3fv(this.u_matrix_loc,false,transform.getData());this._gl.drawArrays(this._gl.TRIANGLE_FAN,0,4);};TextureRenderer.prototype.renderStaticFans=function(transform,textureMatrix){this._gl.uniformMatrix3fv(this.u_matrix_loc,false,transform.getData());this.setUVMatrix(textureMatrix);this._gl.drawArrays(this._gl.TRIANGLE_FAN,0,4);};return TextureRenderer;}();WebGL.TextureRenderer=TextureRenderer;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var BoxRenderer=function(){function BoxRenderer(gl){this._gl=gl;}BoxRenderer.initialize=function(gl){BoxRenderer._I=new BoxRenderer(gl);BoxRenderer._I._createProgram();};BoxRenderer.prototype._createProgram=function(){var gl=this._gl;var vertexShaderCode=['uniform mat3 u_projection;','uniform mat3 u_matrix;','attribute vec2 a_position;','void main(void) {','    gl_Position = vec4((u_projection * u_matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);','}'].join('\n');var fragmentShaderCode=['precision mediump float;','uniform vec4 u_color;','void main() {','   gl_FragColor = u_color;','}'].join('\n');this.program=WebGL.WebGLRenderer._I.compileProgram(vertexShaderCode,fragmentShaderCode);this.u_matrix_loc=gl.getUniformLocation(this.program,'u_matrix');this.u_color_loc=gl.getUniformLocation(this.program,'u_color');gl.useProgram(this.program);gl.uniformMatrix3fv(gl.getUniformLocation(this.program,'u_projection'),false,WebGL.WebGLRenderer._I.getProjectionMatrix().getData());};BoxRenderer.prototype.render=function(color,opacity,transform){var gl=this._gl;gl.uniform4f(this.u_color_loc,color.r/255,color.g/255,color.b/255,color.a*opacity);gl.uniformMatrix3fv(this.u_matrix_loc,false,transform.getData());gl.drawArrays(gl.TRIANGLE_FAN,0,4);};return BoxRenderer;}();WebGL.BoxRenderer=BoxRenderer;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var FontRenderer=function(){function FontRenderer(gl){this._gl=gl;}FontRenderer.initialize=function(gl){FontRenderer._I=new FontRenderer(gl);FontRenderer._I._createProgram();};FontRenderer.prototype._createProgram=function(){var vertexShaderCode=['uniform mat3 u_projection;','uniform mat3 u_matrix;','uniform mat3 u_uv_matrix;','attribute vec2 a_position;','attribute vec2 a_texcoord;','varying vec2 v_texcoord;','void main(void) {','    gl_Position = vec4((u_projection * u_matrix * vec3(a_position, 1.0)).xy, 0.0, 1.0);','    v_texcoord = vec2(u_uv_matrix * vec3(a_texcoord, 1.0));','}'].join('\n');var fragmentShaderCode=['precision mediump float;','varying vec2 v_texcoord;','uniform sampler2D u_texture;','uniform vec4 u_color;','void main() {','   gl_FragColor = vec4(u_color.xyz,u_color.w*texture2D(u_texture, v_texcoord).a);','}'].join('\n');this.program=WebGL.WebGLRenderer._I.compileProgram(vertexShaderCode,fragmentShaderCode);this.u_matrix_loc=this._gl.getUniformLocation(this.program,'u_matrix');this.u_uv_matrix_loc=this._gl.getUniformLocation(this.program,'u_uv_matrix');this.u_color_loc=this._gl.getUniformLocation(this.program,'u_color');this._gl.useProgram(this.program);this._gl.uniformMatrix3fv(this._gl.getUniformLocation(this.program,'u_projection'),false,WebGL.WebGLRenderer._I.getProjectionMatrix().getData());};FontRenderer.prototype.setTexture=function(texture){WebGL.TextureRenderer._I.setTexture(texture);};FontRenderer.prototype.setColor=function(color,opacity){this._gl.uniform4f(this.u_color_loc,color.r/255,color.g/255,color.b/255,color.a*opacity);};FontRenderer.prototype.render=function(transform,textureMatrix){this._gl.uniformMatrix3fv(this.u_matrix_loc,false,transform.getData());this._gl.uniformMatrix3fv(this.u_uv_matrix_loc,false,textureMatrix.getData());this._gl.drawArrays(this._gl.TRIANGLE_FAN,0,4);};return FontRenderer;}();WebGL.FontRenderer=FontRenderer;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var FontMap=function(){function FontMap(fontName,fontSize){this.fontName=fontName;this.fontSize=fontSize;this.letters={};this.texture=TGFW.TextureManager.getTexture(fontName);}FontMap.prototype.getTextWidth=function(text,fontSize){if(!text)return 0;var len=text.length,result=0,fontScale=fontSize/this.fontSize;for(var i=0;i<len;i++){var p=this.letters[text[i]];if(p){result+=p.advanceX*fontScale;}}return result;};return FontMap;}();WebGL.FontMap=FontMap;var FontMapManager=function(){function FontMapManager(){}FontMapManager.string64ToNumber=function(str){var result=0;var len=str.length;if(len<=0)return result;var sign=1;var i=0;if(str.charAt(0)=='-'){sign=-1;i++;}while(i<len){var c=str.charAt(i);result=result*64+FontMapManager.RADIX_64_BASE.indexOf(c);i++;}return sign<0?-result:result;};FontMapManager.getFontMap=function(fontName){if(FontMapManager._fontMaps[fontName]){return FontMapManager._fontMaps[fontName];}var f=TGFW.FontManager.getFont(fontName);if(!f||!f.webgl)return null;var fs=f.webgl.split('~'),index=0;FontMapManager._fontMaps[fontName]=new FontMap(fontName,FontMapManager.string64ToNumber(fs[index++]));var w=FontMapManager.string64ToNumber(fs[index++]),h=FontMapManager.string64ToNumber(fs[index++]);while(index<fs.length){var c=fs[index++],lw=FontMapManager.string64ToNumber(fs[index++]),lh=FontMapManager.string64ToNumber(fs[index++]);FontMapManager._fontMaps[fontName].letters[c]={w:lw,h:lh,tx:FontMapManager.string64ToNumber(fs[index++])/w,ty:FontMapManager.string64ToNumber(fs[index++])/h,tw:lw/w,th:lh/h,offsetX:FontMapManager.string64ToNumber(fs[index++]),offsetY:FontMapManager.string64ToNumber(fs[index++]),advanceX:FontMapManager.string64ToNumber(fs[index++])};}return FontMapManager._fontMaps[fontName];};FontMapManager._fontMaps={};FontMapManager.RADIX_64_BASE='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+/';return FontMapManager;}();WebGL.FontMapManager=FontMapManager;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render){var WebGL;(function(WebGL){var WebGLRenderer=function(){function WebGLRenderer(gl){this._gl=gl;this._currentProgram=null;this._currentPositionBuffer=null;this._currentUVBuffer=null;this._currentOpacity=-1;}WebGLRenderer.initialize=function(gl){WebGLRenderer._I=new WebGLRenderer(gl);WebGLRenderer._I._init();};WebGLRenderer.prototype._init=function(){var gl=this._gl;this._projectionMatrix=new WebGL.Matrix3x3();this._projectionMatrix.makeProjectionMatrix(TGFW.RenderManager.resolutionWidth/TGFW.RenderManager.resolutionScaleX,TGFW.RenderManager.resolutionHeight/TGFW.RenderManager.resolutionScaleY);this._projectionMatrix.mullScale(1/TGFW.RenderManager.resolutionScaleX,1/TGFW.RenderManager.resolutionScaleY);WebGL.FontRenderer.initialize(gl);WebGL.TextureRenderer.initialize(gl);WebGL.BoxRenderer.initialize(gl);};WebGLRenderer.prototype.compileProgram=function(vertexCode,pixelCode){var gl=this._gl;var vShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vShader,vertexCode);gl.compileShader(vShader);var pShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(pShader,pixelCode);gl.compileShader(pShader);var result=gl.createProgram();gl.attachShader(result,vShader);gl.attachShader(result,pShader);gl.linkProgram(result);return result;};WebGLRenderer.prototype.getProjectionMatrix=function(){return this._projectionMatrix;};WebGLRenderer.prototype.renderImage=function(transform,transform_uv,glTexture,opacity){var r=WebGL.TextureRenderer._I;if(this._currentProgram!=r.program){this._gl.useProgram(r.program);this._currentProgram=r.program;}if(this._currentOpacity!==opacity){r.setGLColor(1,1,1,opacity);this._currentOpacity=opacity;}r.setGLTexture(glTexture);if(this._currentPositionBuffer!=r.positionBuffer){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.positionBuffer);this._currentPositionBuffer=r.positionBuffer;}r.renderStaticFans(transform,transform_uv);};WebGLRenderer.prototype.startRenderFont=function(){var r=WebGL.FontRenderer._I;if(this._currentProgram!=r.program){this._gl.useProgram(r.program);this._currentProgram=r.program;}};WebGLRenderer.prototype.setUVTransform=function(transform_uv){WebGL.TextureRenderer._I.setUVMatrix(transform_uv);};WebGLRenderer.prototype.setCurrentProgram=function(){var r=WebGL.TextureRenderer._I;if(this._currentProgram!=r.program){this._gl.useProgram(r.program);this._currentProgram=r.program;}};WebGLRenderer.prototype.setPositionBuffer=function(){var r=WebGL.TextureRenderer._I;if(this._currentPositionBuffer!=r.positionBuffer){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.positionBuffer);this._currentPositionBuffer=r.positionBuffer;}};WebGLRenderer.prototype.renderParticle=function(transform,color){var r=WebGL.TextureRenderer._I;if(color.isWhite()){if(this._currentOpacity!==color.a){r.setGLColor(1,1,1,color.a);this._currentOpacity=color.a;}}else{r.setGLColor(color.r/255,color.g/255,color.b/255,color.a);this._currentOpacity=-1;}r.renderNoUVStaticFans(transform);};WebGLRenderer.prototype.renderBox=function(color,opacity,transform){var r=WebGL.BoxRenderer._I;if(this._currentProgram!=r.program){this._gl.useProgram(r.program);this._currentProgram=r.program;}if(this._currentPositionBuffer!=r.positionBuffer){this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.positionBuffer);this._currentPositionBuffer=r.positionBuffer;}r.render(color,opacity,transform);};return WebGLRenderer;}();WebGL.WebGLRenderer=WebGLRenderer;}(WebGL=Render.WebGL||(Render.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Render;(function(Render_3){var WebGL;(function(WebGL){var Render=function(){function Render(){this._body=null;this._renderQueue=[];Render._I=this;}Render.prototype.init=function(root){this._initWebGL();this._body=new WebGL.Base(root,this._gl);root.setRender(this._body);};Render.prototype.isParticleSystemSupported=function(){return true;};Render.prototype.isSimulateOverOutForMouseNeeded=function(){return true;};Render.prototype.getRoot=function(){return this._body;};Render.prototype.getName=function(){return'webgl';};Render.prototype.clear=function(){};Render.prototype.addToRenderQueue=function(shapeRender){this._renderQueue.push(shapeRender);};Render.prototype.createShapeRender=function(className,owner){return new Render._classesImpl[className](owner,this._gl);};Render.prototype.destroyShapeRender=function(shape){var shapeRender=shape.getRender();if(shapeRender){shapeRender.suspend();}};Render.prototype.getShapeByMouseEvent=function(event){if(event){return this._body.findShapeByPoint(event.x,event.y);}return null;};Render.prototype.calculateTextShapeWidth=function(shape){var fontMap=WebGL.FontMapManager.getFontMap(shape.getFont());if(!fontMap)return 0;var maxWidth=0;for(var _i=0,_a=shape.getTextLines();_i<_a.length;_i++){var textLine=_a[_i];maxWidth=_Math.max(maxWidth,fontMap.getTextWidth(textLine,shape.getFontSize()));}return maxWidth;};Render.prototype.suspendTexturesByUrl=function(urls){if(!urls||urls.length<=0){return;}for(var i=0;i<urls.length;i++){WebGL.TextureRenderer._I.deleteTextureByUrl(urls[i]);}var root=TGFW.SceneManager.getRoot();this._resetGLTextures(root);};Render.prototype._initWebGL=function(){var canvas=document.createElement('canvas');this.resolutionWidth=TGFW.RenderManager.resolutionWidth/TGFW.RenderManager.resolutionScaleX;this.resolutionHeight=TGFW.RenderManager.resolutionHeight/TGFW.RenderManager.resolutionScaleY;canvas.width=this.resolutionWidth;canvas.height=this.resolutionHeight;if(TGFW.RenderManager.resolutionScaleX!=1||TGFW.RenderManager.resolutionScaleY!=1){canvas.style.transform='scale('+TGFW.RenderManager.resolutionScaleX+','+TGFW.RenderManager.resolutionScaleY+')';canvas.style.webkitTransform='scale('+TGFW.RenderManager.resolutionScaleX+','+TGFW.RenderManager.resolutionScaleY+')';canvas.style.transformOrigin='0 0';canvas.style.webkitTransformOrigin='0 0';}document.body.appendChild(canvas);var webglTransparency=!!TGFW.app().getDesc().webglTransparency;this._gl=canvas.getContext('webgl',{alpha:webglTransparency})||canvas.getContext('experimental-webgl',{alpha:webglTransparency});var gl=this._gl;gl.clearColor(0,0,0,webglTransparency?0:1);gl.enable(this._gl.BLEND);gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA);gl.disable(gl.CULL_FACE);gl.disable(gl.STENCIL_TEST);gl.disable(gl.DITHER);gl.disable(gl.DEPTH_TEST);gl.activeTexture(gl.TEXTURE0);WebGL.WebGLRenderer.initialize(this._gl);this._gl.viewport(0,0,this.resolutionWidth,this.resolutionHeight);};Render.prototype.update=function(dt){var root=TGFW.SceneManager.getRoot();this._renderQueue.length=0;root.update();this._gl.clear(this._gl.COLOR_BUFFER_BIT);this._render(root,dt);};Render.prototype._render=function(shape,dt){if(!shape.isVisible())return;if(shape.getRender){var render=shape.getRender();render.render(dt);var children=render.getChildren();for(var i=0,l=children.length;i<l;i++){this._render(children[i].getOwner(),dt);}}};Render.prototype._resetGLTextures=function(shape){if(shape.getRender){var render=shape.getRender();if(render){render.resetGlTexture();}}var children=shape.getChildren();for(var i=0,l=children.length;i<l;i++){this._resetGLTextures(children[i]);}};Render._classesImpl={'Image':WebGL.Image,'ParticleSystem':WebGL.ParticleSystem,'ImageURL':WebGL.ImageURL,'Text':WebGL.Text,'Box':WebGL.Box,'Canvas':WebGL.Box};return Render;}();WebGL.Render=Render;}(WebGL=Render_3.WebGL||(Render_3.WebGL={})));}(Render=TGFW.Render||(TGFW.Render={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var RenderManager=function(){function RenderManager(renderUpdateInterval){this._renderImpl=this._createRenderImplementationByRenderEngine([TGH5.Api.locationGetParam('render'),TGFW.app().getDebugOptions().render.forceRenderEngine,TGFW.sdk().getRenderEngine(),TGFW.app().desc.renderEngine]);var renderSettings=TGFW.sdk().sdkSettings.renderSettings;if(renderSettings&&renderSettings[this._renderImpl.getName()]){this._isBorderRadiusSupported=!!renderSettings[this._renderImpl.getName()].borderRadius;}var sdkSettings=TGFW.sdk().sdkSettings;if(sdkSettings.screenResolution){RenderManager.resolutionWidth=sdkSettings.screenResolution.width;RenderManager.resolutionHeight=sdkSettings.screenResolution.height;}var productSettings=TGFW.sdk().getProductSettings(TGFW.app().getDesc().productId);if(productSettings&&productSettings.renderSettings&&productSettings.renderSettings[this._renderImpl.getName()]){var rs=productSettings.renderSettings[this._renderImpl.getName()];if(rs.resolutionWidth){RenderManager.resolutionScaleX=RenderManager.resolutionWidth/rs.resolutionWidth;}if(rs.resolutionHeight){RenderManager.resolutionScaleY=RenderManager.resolutionHeight/rs.resolutionHeight;}if(TGFW.sdk().isLowEndDevice()&&rs.lowEnd){if(rs.lowEnd.resolutionWidth){RenderManager.resolutionScaleX=RenderManager.resolutionWidth/rs.lowEnd.resolutionWidth;}if(rs.lowEnd.resolutionHeight){RenderManager.resolutionScaleY=RenderManager.resolutionHeight/rs.lowEnd.resolutionHeight;}}}if(TGFW.app().desc.useRAF){TGFW.onNewFrame.add(RenderManager._update);}else{this._updateTimer=new TGFW.Timer(RenderManager._update);this._updateTimer.start(renderUpdateInterval,true);}}RenderManager.isTTFFontsSupported=function(){if(RenderManager._instance._renderImpl.getName()=='webgl'){return true;}return true;};RenderManager.getRender=function(){return RenderManager._instance._renderImpl;};RenderManager.init=function(renderUpdateInterval){if(RenderManager._instance===null){RenderManager._instance=new RenderManager(renderUpdateInterval);}};RenderManager.addToRenderQueue=function(shapeRender){RenderManager._instance._renderImpl.addToRenderQueue(shapeRender);};RenderManager._update=function(dt){RenderManager.getRender().update(dt);};RenderManager.isParticleSystemSupported=function(){return RenderManager._instance._renderImpl.isParticleSystemSupported();};RenderManager.isBorderRadiusSupported=function(){return RenderManager._instance._isBorderRadiusSupported;};RenderManager.prototype._createRenderImplementationByRenderEngine=function(renderEnginesList){for(var _i=0;_i<renderEnginesList.length;_i++){var renderEngine=renderEnginesList[_i];switch(renderEngine){case TGH5.RenderEngine.div:return new TGFW.Render.Div.Render();case TGH5.RenderEngine.canvas:return new TGFW.Render.Canvas.Render();case TGH5.RenderEngine.webgl:return new TGFW.Render.WebGL.Render();}}return new TGFW.Render.Div.Render();};RenderManager.resolutionWidth=1280;RenderManager.resolutionHeight=720;RenderManager.resolutionScaleX=1;RenderManager.resolutionScaleY=1;RenderManager.standardFontFamily='"serif","sans-serif"';RenderManager._instance=null;return RenderManager;}();TGFW.RenderManager=RenderManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TBaseShape=function(_super){__extends(TBaseShape,_super);function TBaseShape(desc){this._name=null;this.position=new TGFW.Math.Point(0,0);this._tempPosition=new TGFW.Math.Point(0,0);this.pivot=new TGFW.Math.Point(TGFW.Math.Point.NOT_SET,TGFW.Math.Point.NOT_SET);this.size=new TGFW.Math.Point(TGFW.Math.Point.NOT_SET,TGFW.Math.Point.NOT_SET);this._tempSize=new TGFW.Math.Point(0,0);this._touched=false;this.bound=new TGFW.Math.Rect(0,0,0,0);this._visible=false;this._children=[];this._parent=null;this._touchMutex=false;this._shapeAlign=Shape.Align.TOP|Shape.Align.LEFT;_super.call(this,desc);}TBaseShape.prototype.create=function(){};TBaseShape.prototype.getRender=function(){return null;};TBaseShape.prototype.setName=function(name){this._name=name;};TBaseShape.prototype.getName=function(){return this._name;};TBaseShape.prototype.getDebugName=function(){var parent=this._parent,names=[this.getName()];while(parent){if(parent._parent){names.unshift(parent.getName());}parent=parent._parent;}return names.join('.');};TBaseShape.prototype.setDesc=function(desc){_super.prototype.setDesc.call(this,desc);if(TGFW.Utils.isNumber(desc.x))this.position.x=desc.x;if(TGFW.Utils.isNumber(desc.y))this.position.y=desc.y;if(TGFW.Utils.isNumber(desc.width))this.size.x=desc.width;if(TGFW.Utils.isNumber(desc.height))this.size.y=desc.height;if(TGFW.Utils.isBoolean(desc.visible))this._visible=desc.visible;if(TGFW.Utils.isNumber(desc.align))this.setAlign(desc.align);if(TGFW.Utils.isNumber(desc.pivotX))this.pivot.x=desc.pivotX;if(TGFW.Utils.isNumber(desc.pivotY))this.pivot.y=desc.pivotY;if(this.pivot.x!=TGFW.Math.Point.NOT_SET||this.pivot.y!=TGFW.Math.Point.NOT_SET){if(this.pivot.x==TGFW.Math.Point.NOT_SET)this.pivot.x=0;if(this.pivot.y==TGFW.Math.Point.NOT_SET)this.pivot.y=0;}this._touch();};TBaseShape.prototype.getChildren=function(){return this._children;};TBaseShape.prototype.forSomeShapeBackwardScan=function(onShape){var interupt=false;var _forSomeShapeBackwardScan=function(parent,index,onShape,callOnShape){if(!interupt&&index<0&&parent){if(parent._parent&&parent._parent._children){_forSomeShapeBackwardScan(parent._parent,parent._parent._children.indexOf(parent),onShape,false);}return;}if(interupt||index<0||!parent){return;}var shape=parent._children[index];if(callOnShape){interupt=onShape(shape);}if(interupt)return;if(callOnShape&&shape._children&&shape._children.length>0){_forSomeShapeBackwardScan(shape,shape._children.length-1,onShape,true);if(interupt)return;}_forSomeShapeBackwardScan(parent,index-1,onShape,true);};if(!this._parent)return;_forSomeShapeBackwardScan(this._parent,this._parent._children.indexOf(this),onShape,false);};TBaseShape.prototype.getShapeIndex=function(shapeName){for(var i=0;i<this._children.length;i++){if(this._children[i].getName()==shapeName){return i;}}return-1;};TBaseShape.prototype.setShapeIndex=function(shapeName,index){var currIndex=this.getShapeIndex(shapeName);if(currIndex==index||currIndex<0){return;}var _count=this._children.length;if(index>_count-1||index==-1){index=_count-1;}var shape=this._children[currIndex];this._children.splice(currIndex,1);this._children.splice(index,0,shape);var minIndex=currIndex;if(index<minIndex)minIndex=index;for(var i=index;i<this._children.length;i++){this._children[i]._touch();}shape._renderUpdateShapeIndex();};TBaseShape.prototype._renderUpdateShapeIndex=function(){};TBaseShape.prototype.hasShape=function(shape){if(this._children){for(var _i=0,_a=this._children;_i<_a.length;_i++){var layoutShape=_a[_i];if(shape===layoutShape)return true;if(layoutShape.hasShape(shape))return true;}}return false;};TBaseShape.prototype.suspend=function(){while(this._children.length>0){var child=this._children[this._children.length-1];this.remove(child);child.suspend();}if(this._parent){this._parent.remove(this);}this._children=null;};TBaseShape.prototype.remove=function(child){var index=this._children.indexOf(child);if(index>=0){this._children.splice(index,1);}child._parent=null;};TBaseShape.prototype.append=function(child){this._children.push(child);child._parent=this;child._touch();};TBaseShape.prototype.attachToRender=function(render){for(var _i=0,_a=this._children;_i<_a.length;_i++){var child=_a[_i];child.attachToRender(render);}};TBaseShape.prototype.removeFromRender=function(render){for(var _i=0,_a=this._children;_i<_a.length;_i++){var child=_a[_i];child.removeFromRender(render);}};TBaseShape.prototype.isTouched=function(){return this._touched;};TBaseShape.prototype.setVisibility=function(visible){if(this._visible==visible)return;this._visible=visible;if(this._children){for(var _i=0,_a=this._children;_i<_a.length;_i++){var child=_a[_i];child.setVisibility(visible);}}this._touch();};TBaseShape.prototype.show=function(){this.setVisibility(true);};TBaseShape.prototype.hide=function(){this.setVisibility(false);};TBaseShape.prototype.isVisible=function(){return this._visible;};TBaseShape.prototype.setRelativePosition=function(x,y){this.setPosition(x+this.position.x,y+this.position.y);};TBaseShape.prototype.setSize=function(width,height){this.size.x=width;this.size.y=height;this._touch();};TBaseShape.prototype.setPivot=function(pivotX,pivotY){this.pivot.x=pivotX;this.pivot.y=pivotY;this._touch();};TBaseShape.prototype.getPosition=function(){return this.position;};TBaseShape.prototype.getSize=function(){return this.size;};TBaseShape.prototype.getPivot=function(){return this.pivot;};TBaseShape.prototype.getBound=function(){return this.bound;};TBaseShape.prototype.setPosition=function(x,y){this.position.x=x;this.position.y=y;this._touch();};TBaseShape.prototype.setX=function(x){this.position.x=x;this._touch();};TBaseShape.prototype.setY=function(y){this.position.y=y;this._touch();};TBaseShape.prototype.getX=function(){return this.position.x;};TBaseShape.prototype.getY=function(){return this.position.y;};TBaseShape.prototype.update=function(){this._refreshData();this._recalculateSize();this._recalculatePosition();};TBaseShape.prototype.setAlign=function(align){this._shapeAlign=align;this._touch();};TBaseShape.prototype.getAlign=function(){return this._shapeAlign;};TBaseShape.prototype._touch=function(){if(this._touched){return;}if(!this._touchMutex){this._touchMutex=true;var parent_1=this._parent;while(parent_1){if(parent_1 instanceof Shape.ArrangedLayout){parent_1._touch();break;}parent_1=parent_1._parent;}var children=this._children;for(var _i=0;_i<children.length;_i++){var child=children[_i];child._touch();}this._touched=true;this._touchMutex=false;}};TBaseShape.prototype._recalculateSize=function(){for(var _i=0,_a=this._children;_i<_a.length;_i++){var shape=_a[_i];shape._recalculateSize();}if(this._touched){var size=this._calculateSize();var bound=this.bound;bound.size.x=size.x;bound.size.y=size.y;bound.position.x=0;bound.position.y=0;}};TBaseShape.prototype._calculateSize=function(){this._tempSize.x=this.size.x;this._tempSize.y=this.size.y;return this._tempSize;};TBaseShape.prototype._calculatePosition=function(){this._tempPosition.x=this.position.x;this._tempPosition.y=this.position.y;return this._tempPosition;};TBaseShape.prototype._addToRenderQueue=function(){};TBaseShape.prototype._recalculatePosition=function(){if(this._touched){var bound=this.bound,position=bound.position,calculatedPosition=this._calculatePosition();position.x+=calculatedPosition.x;position.y+=calculatedPosition.y;var offsetX,offsetY,shapeAlign=Shape.Align,pivot=this.pivot,size=this.bound.size;if(pivot.x!=TGFW.Math.Point.NOT_SET){offsetX=-size.x*pivot.x;offsetY=-size.y*pivot.y;}else{switch(this._shapeAlign&shapeAlign.VERTICAL_MASK){case shapeAlign.TOP:offsetY=0;break;case shapeAlign.CENTER:offsetY=-size.y/2;break;case shapeAlign.BOTTOM:offsetY=-size.y;break;}switch(this._shapeAlign&shapeAlign.HORIZONTAL_MASK){case shapeAlign.LEFT:offsetX=0;break;case shapeAlign.CENTER:offsetX=-size.x/2;break;case shapeAlign.RIGHT:offsetX=-size.x;break;}}position.x+=offsetX;position.y+=offsetY;if(this._parent){var parentPosition=this._parent.bound.position;position.x+=parentPosition.x;position.y+=parentPosition.y;}this._addToRenderQueue();this._touched=false;}for(var _i=0,_a=this._children;_i<_a.length;_i++){var shape=_a[_i];shape._recalculatePosition();}};TBaseShape.prototype._refreshData=function(){for(var _i=0,_a=this._children;_i<_a.length;_i++){var shape=_a[_i];shape._refreshData();}};return TBaseShape;}(TGFW.Base);Shape.TBaseShape=TBaseShape;var BaseShape=function(_super){__extends(BaseShape,_super);function BaseShape(){_super.apply(this,arguments);}return BaseShape;}(TBaseShape);Shape.BaseShape=BaseShape;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TViewShape=function(_super){__extends(TViewShape,_super);function TViewShape(desc){this._render=null;this._border=null;this._borderRadius=null;this._boxShadows=null;this._textShadows=null;this._rotate=TGFW.Math.Point.NOT_SET;this._rotateX=TGFW.Math.Point.NOT_SET;this._rotateY=TGFW.Math.Point.NOT_SET;this._opacity=1;this._createRender();_super.call(this,desc);}TViewShape.prototype.setWebGLParam=function(name,value){this._render.setAdditionalParams(name,value);};TViewShape.prototype.setDesc=function(desc){if(TGFW.Utils.isNumber(desc.rotate))this.setRotate(desc.rotate);if(TGFW.Utils.isNumber(desc.rotateX))this.setRotateX(desc.rotateX);if(TGFW.Utils.isNumber(desc.rotateY))this.setRotateY(desc.rotateY);if(desc.border)this._border=desc.border;if(desc.borderRadius)this._borderRadius=desc.borderRadius;if(desc.boxShadows)this._boxShadows=desc.boxShadows;if(desc.textShadows)this._textShadows=desc.textShadows;if(TGFW.Utils.isNumber(desc.opacity))this._opacity=desc.opacity;_super.prototype.setDesc.call(this,desc);};TViewShape.prototype.setName=function(name){_super.prototype.setName.call(this,name);if(this._render)this._render.setId(name);};TViewShape.prototype.setRotate=function(angle){this._rotate=angle;this._touch();};TViewShape.prototype.getRotate=function(){return this._rotate;};TViewShape.prototype.setRotateX=function(scaleFactorX){this._rotateX=scaleFactorX;this._touch();};TViewShape.prototype.getRotateX=function(){return this._rotateX;};TViewShape.prototype.setRotateY=function(scaleFactorY){this._rotateY=scaleFactorY;this._touch();};TViewShape.prototype.getRotateY=function(){return this._rotateY;};TViewShape.prototype.setOpacity=function(opacity){this._opacity=opacity;this._touch();};TViewShape.prototype.getOpacity=function(){return this._opacity;};TViewShape.prototype.getBorder=function(){return this._border;};TViewShape.prototype.getBorderRadius=function(){return this._borderRadius;};TViewShape.prototype.getBoxShadows=function(){return this._boxShadows;};TViewShape.prototype.getTextShadows=function(){return this._textShadows;};TViewShape.prototype.suspend=function(){_super.prototype.suspend.call(this);TGFW.RenderManager.getRender().destroyShapeRender(this);this._render=null;};TViewShape.prototype.getRender=function(){return this._render;};TViewShape.prototype.setRender=function(render){this._render=render;};TViewShape.prototype.attachToRender=function(render){var viewShape=render;viewShape._render.append(this._render);_super.prototype.attachToRender.call(this,render);};TViewShape.prototype._renderUpdateShapeIndex=function(){var backShape=null;this.forSomeShapeBackwardScan(function(shape){if(shape.getRender()){backShape=shape;return true;}return false;});if(this._render){if(backShape)console.log('backShape: '+backShape.getName());this._render.setShapeZIndex(backShape);}};TViewShape.prototype.removeFromRender=function(render){this._render.remove();_super.prototype.removeFromRender.call(this,render);};TViewShape.prototype._refreshData=function(){if(this._touched&&this._render){this._render.update();}_super.prototype._refreshData.call(this);};TViewShape.prototype._addToRenderQueue=function(){TGFW.RenderManager.addToRenderQueue(this._render);};TViewShape.prototype._createRender=function(){this._render=null;};return TViewShape;}(Shape.TBaseShape);Shape.TViewShape=TViewShape;var ViewShape=function(_super){__extends(ViewShape,_super);function ViewShape(){_super.apply(this,arguments);}return ViewShape;}(TViewShape);Shape.ViewShape=ViewShape;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TImage=function(_super){__extends(TImage,_super);function TImage(desc){this._texture=null;this._scale=new TGFW.Math.Point(1,1);this._tempSize=new TGFW.Math.Point(0,0);_super.call(this,desc);}TImage.prototype.setDesc=function(desc){if(TGFW.Utils.isNumber(desc.scaleX))this.setScaleX(desc.scaleX);if(TGFW.Utils.isNumber(desc.scaleY))this.setScaleY(desc.scaleY);if(desc.texture){this._texture=TGFW.TextureManager.getTexture(desc.texture);}_super.prototype.setDesc.call(this,desc);};TImage.prototype.getTexture=function(){return this._texture;};TImage.prototype.setTexture=function(name){if(name){this._texture=TGFW.TextureManager.getTexture(name);}else{this._texture=null;}this._touch();};TImage.prototype.setScale=function(scaleX,scaleY){this._scale.x=scaleX;this._scale.y=scaleY;this._touch();};TImage.prototype.setScaleX=function(scaleX){this._scale.x=scaleX;this._touch();};TImage.prototype.setScaleY=function(scaleY){this._scale.y=scaleY;this._touch();};TImage.prototype.getScale=function(){return this._scale;};TImage.prototype._createRender=function(){this._render=TGFW.RenderManager.getRender().createShapeRender('Image',this);};TImage.prototype._calculateSize=function(){this._tempSize.x=this.size.x;this._tempSize.y=this.size.y;if(this._tempSize.x===TGFW.Math.Point.NOT_SET){var texture=this.getTexture();this._tempSize.x=texture?texture.width:0;}if(this._tempSize.y===TGFW.Math.Point.NOT_SET){var texture=this.getTexture();this._tempSize.y=texture?texture.height:0;}this._tempSize.scale(this._scale);return this._tempSize;};return TImage;}(Shape.TViewShape);Shape.TImage=TImage;var Image=function(_super){__extends(Image,_super);function Image(){_super.apply(this,arguments);}return Image;}(TImage);Shape.Image=Image;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var ParticleSystemEmitter=function(){function ParticleSystemEmitter(){this.relative=false;this.spawnOnPath=false;this.rotationIsDir=false;this.duration=0;this.emissionRate=1;this.maxParticles=1;this.liveTime={min:1000,max:1000};this.speed={min:100,max:100};this.angle={min:0,max:0};this.colorStart={min:4294967295,max:4294967295};this.colorEnd={min:4294967295,max:4294967295};this.gravity={x:0,y:0};this.spinStart={min:0,max:0};this.spinEnd={min:0,max:0};this.spawnRectSize={w:0,h:0};this.scaleStart={min:1,max:1};this.scaleEnd={min:1,max:1};}ParticleSystemEmitter.prototype.setDesc=function(emitterDesc){for(var key in emitterDesc){if(!emitterDesc.hasOwnProperty(key))continue;if(typeof this[key]!=='undefined'){this[key]=emitterDesc[key];}}};return ParticleSystemEmitter;}();Shape.ParticleSystemEmitter=ParticleSystemEmitter;var TParticleSystem=function(_super){__extends(TParticleSystem,_super);function TParticleSystem(desc){this._allowed=TGFW.RenderManager.isParticleSystemSupported();if(!this._allowed){_super.call(this,desc);return;}this._texture=null;this._emitter=new ParticleSystemEmitter();this._emitter.setDesc(desc.emitter);_super.call(this,desc);if(this._texture){this._create();}}TParticleSystem.prototype.setDesc=function(desc){if(!this._allowed)return;if(desc.texture){this._texture=TGFW.TextureManager.getTexture(desc.texture);}_super.prototype.setDesc.call(this,desc);};TParticleSystem.prototype.getTexture=function(){if(!this._allowed)return null;return this._texture;};TParticleSystem.prototype.setTexture=function(name){if(!this._allowed)return;if(name){this._texture=TGFW.TextureManager.getTexture(name);}else{this._texture=null;}this._touch();};TParticleSystem.prototype.attachToRender=function(render){if(!this._allowed)return;_super.prototype.attachToRender.call(this,render);};TParticleSystem.prototype.removeFromRender=function(render){if(!this._allowed)return;_super.prototype.removeFromRender.call(this,render);};TParticleSystem.prototype._addToRenderQueue=function(){if(!this._allowed)return;_super.prototype._addToRenderQueue.call(this);};TParticleSystem.prototype._createRender=function(){if(!this._allowed)return;this._render=TGFW.RenderManager.getRender().createShapeRender('ParticleSystem',this);};TParticleSystem.prototype.getScale=function(){return new TGFW.Math.Point(1,1);};TParticleSystem.prototype._calculateSize=function(){var texture=this.getTexture(),size=_super.prototype._calculateSize.call(this);if(size.x===TGFW.Math.Point.NOT_SET){size.x=texture?texture.width:0;}if(size.y===TGFW.Math.Point.NOT_SET){size.y=texture?texture.height:0;}return size;};TParticleSystem.prototype._create=function(){this._prevPos=new TGFW.Math.Point(0,0);this._colorStart={min:new TGFW.Render.Color(255,255,255,1),max:new TGFW.Render.Color(255,255,255,1)};this._colorEnd={min:new TGFW.Render.Color(255,255,255,1),max:new TGFW.Render.Color(255,255,255,1)};this._active=false;this._finished=true;this._numLiveParticles=0;this._emitCounter=0;this._elapsed=0;this._particlePool=[];this._doUpdateColor=true;this._gravity=new TGFW.Math.Point(this._emitter.gravity.x,-this._emitter.gravity.y);this._colorStart.min.setColor(TGFW.Utils.hexToColor(this._emitter.colorStart.min));this._colorStart.max.setColor(TGFW.Utils.hexToColor(this._emitter.colorStart.max));this._colorEnd.min.setColor(TGFW.Utils.hexToColor(this._emitter.colorEnd.min));this._colorEnd.max.setColor(TGFW.Utils.hexToColor(this._emitter.colorEnd.max));if(this._colorStart.min.isWhite()&&this._colorStart.max.isWhite()&&this._colorEnd.min.isWhite()&&this._colorEnd.max.isWhite()){this._doUpdateColor=false;}for(var i=0;i<this._emitter.maxParticles;i++){this._particlePool.push(new TGFW.Particles.Particle());}};TParticleSystem.prototype.getDoUpdateColor=function(){return this._doUpdateColor;};TParticleSystem.prototype.isActive=function(){if(!this._allowed)return false;return this._active;};TParticleSystem.prototype.getParticlesPool=function(){return this._particlePool;};TParticleSystem.prototype.isFinished=function(){if(!this._allowed)return true;return this._finished;};TParticleSystem.prototype.startEmitter=function(onFinishCallBack){if(onFinishCallBack===undefined){onFinishCallBack=undefined;}if(!this._allowed){if(onFinishCallBack){onFinishCallBack();}return;}this._active=true;this._finished=false;this._prevPos.setPoint(this.bound.getPosition());this._elapsed=0;this._emitCounter=0;this._onFinishCallback=onFinishCallBack;};TParticleSystem.prototype.stopEmitter=function(){this._active=false;};TParticleSystem.prototype.interrupt=function(){if(!this._allowed)return;this._hideSystem();for(var _i=0,_a=this._particlePool;_i<_a.length;_i++){var particle=_a[_i];particle.reset();}};TParticleSystem.prototype._hideSystem=function(){this._active=false;this._finished=true;this._emitCounter=0;this._numLiveParticles=0;};TParticleSystem.prototype._getRandomPos=function(){var spawnPos=new TGFW.Math.Point(TGFW.Utils.getRandomMinMax(-this._emitter.spawnRectSize.w/2,this._emitter.spawnRectSize.w/2),TGFW.Utils.getRandomMinMax(-this._emitter.spawnRectSize.h/2,this._emitter.spawnRectSize.h/2));if(this._emitter.spawnOnPath&&!this._emitter.relative){return spawnPos.add(this._prevPos).add(this._ownerPos.clone().subtract(this._prevPos).multiply(TGFW.Utils.getRandomK()));}else{return spawnPos.add(this._ownerPos);}};TParticleSystem.prototype._getRandomColor=function(targetColor){var color=new TGFW.Render.Color(255,255,255,1);if(this._doUpdateColor){return color.randomise(targetColor.min,targetColor.max);}else{return color.randomiseOpacity(targetColor.min,targetColor.max);}};TParticleSystem.prototype._initParticleForEmit=function(p){var angle=-TGFW.Utils.degreesToRadians(TGFW.Utils.getRandomMinMax(this._emitter.angle.min,this._emitter.angle.max)),speed=TGFW.Utils.getRandomMinMax(this._emitter.speed.min,this._emitter.speed.max);p._liveTime=TGFW.Utils.getRandomMinMax(this._emitter.liveTime.min,this._emitter.liveTime.max);p._relative=this._emitter.relative;p._rotationIsDir=this._emitter.rotationIsDir;p.pos=this._getRandomPos();p._dir=new TGFW.Math.Point(_Math.cos(angle),_Math.sin(angle));p._dir.multiply(speed);p._gravity=this._gravity;p._colorStart=this._getRandomColor(this._colorStart);p._colorEnd=this._getRandomColor(this._colorEnd);p._scaleStart=TGFW.Utils.getRandomMinMax(this._emitter.scaleStart.min*100,this._emitter.scaleStart.max*100)/100;p._scaleEnd=TGFW.Utils.getRandomMinMax(this._emitter.scaleEnd.min*100,this._emitter.scaleEnd.max*100)/100;p._spinStart=-TGFW.Utils.degreesToRadians(TGFW.Utils.getRandomMinMax(this._emitter.spinStart.min,this._emitter.spinStart.max));p._spinEnd=-TGFW.Utils.degreesToRadians(TGFW.Utils.getRandomMinMax(this._emitter.spinEnd.min,this._emitter.spinEnd.max));};TParticleSystem.prototype._emitParticle=function(){for(var _i=0,_a=this._particlePool;_i<_a.length;_i++){var particle=_a[_i];if(!particle.isAlive){this._initParticleForEmit(particle);particle.emit();this._numLiveParticles++;break;}}};TParticleSystem.prototype.updateParticleSystem=function(dt){if(!this._allowed)return;this._ownerPos=this.bound.getPosition();if(this._active&&this._emitter.emissionRate>0){var rate=1000/this._emitter.emissionRate;if(this._numLiveParticles<this._emitter.maxParticles){this._emitCounter+=dt;while(this._emitCounter>rate){this._emitParticle();this._emitCounter-=rate;}}this._elapsed+=dt;if(this._emitter.duration>0&&this._emitter.duration<this._elapsed){this.stopEmitter();}}if(!this._active&&this._numLiveParticles<=0){this._hideSystem();if(typeof this._onFinishCallback==='function'){this._onFinishCallback();}return;}var dtSec=dt/1000;for(var _i=0,_a=this._particlePool;_i<_a.length;_i++){var particle=_a[_i];if(particle.isAlive){particle.update(this._ownerPos,this._prevPos,this._doUpdateColor,dt,dtSec);if(!particle.isAlive)this._numLiveParticles--;}}this._prevPos.setPoint(this._ownerPos);};TParticleSystem.prototype.setRelative=function(value){if(!this._allowed)return;this._emitter.relative=value;};TParticleSystem.prototype.setDuration=function(value){if(!this._allowed)return;this._emitter.duration=value;};TParticleSystem.prototype.setEmissionRate=function(value){if(!this._allowed)return;this._emitter.emissionRate=value;};TParticleSystem.prototype.setLiveTime=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.liveTime.min=valueMin;this._emitter.liveTime.max=valueMax;};TParticleSystem.prototype.setSpeed=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.speed.min=valueMin;this._emitter.speed.max=valueMax;};TParticleSystem.prototype.setAngle=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.angle.min=valueMin;this._emitter.angle.max=valueMax;};TParticleSystem.prototype.setStartColor=function(valueMin,valueMax){if(!this._allowed)return;this._doUpdateColor=true;this._colorStart.min.setColor(valueMin);this._colorStart.max.setColor(valueMax);};TParticleSystem.prototype.setEndColor=function(valueMin,valueMax){if(!this._allowed)return;this._doUpdateColor=true;this._colorEnd.min.setColor(valueMin);this._colorEnd.max.setColor(valueMax);};TParticleSystem.prototype.setGravity=function(x,y){if(!this._allowed)return;this._gravity.set(x,y);};TParticleSystem.prototype.setSpinStart=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.spinStart.min=valueMin;this._emitter.spinStart.max=valueMax;};TParticleSystem.prototype.setSpinEnd=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.spinEnd.min=valueMin;this._emitter.spinEnd.max=valueMax;};TParticleSystem.prototype.setSpawnRectSize=function(w,h){if(!this._allowed)return;this._emitter.spawnRectSize.w=w;this._emitter.spawnRectSize.h=h;};TParticleSystem.prototype.setScaleStart=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.scaleStart.min=valueMin;this._emitter.scaleStart.max=valueMax;};TParticleSystem.prototype.setScaleEnd=function(valueMin,valueMax){if(!this._allowed)return;this._emitter.scaleEnd.min=valueMin;this._emitter.scaleEnd.max=valueMax;};return TParticleSystem;}(Shape.TViewShape);Shape.TParticleSystem=TParticleSystem;var ParticleSystem=function(_super){__extends(ParticleSystem,_super);function ParticleSystem(){_super.apply(this,arguments);}return ParticleSystem;}(TParticleSystem);Shape.ParticleSystem=ParticleSystem;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TImageURL=function(_super){__extends(TImageURL,_super);function TImageURL(desc){_super.call(this,desc);}TImageURL.prototype.setDesc=function(desc){if(desc.url){this._url=desc.url;}_super.prototype.setDesc.call(this,desc);};TImageURL.prototype.getURL=function(){return this._url;};TImageURL.prototype.unload=function(){this._render.suspendResources();};TImageURL.prototype.setUrl=function(url){if(this._url==url)return;if(url){this._url=url;}else{this._url=null;}this._touch();};TImageURL.prototype.onImageLoaded=function(){this._touch();};TImageURL.prototype._createRender=function(){this._render=TGFW.RenderManager.getRender().createShapeRender('ImageURL',this);};return TImageURL;}(Shape.TImage);Shape.TImageURL=TImageURL;var ImageURL=function(_super){__extends(ImageURL,_super);function ImageURL(){_super.apply(this,arguments);}return ImageURL;}(TImageURL);Shape.ImageURL=ImageURL;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TCanvas=function(_super){__extends(TCanvas,_super);function TCanvas(desc){_super.call(this,desc);}TCanvas.prototype.setDesc=function(desc){_super.prototype.setDesc.call(this,desc);};TCanvas.prototype._createRender=function(){this._render=TGFW.RenderManager.getRender().createShapeRender('Canvas',this);};TCanvas.prototype.render=function(context2d,image){};return TCanvas;}(Shape.TImage);Shape.TCanvas=TCanvas;var Canvas=function(_super){__extends(Canvas,_super);function Canvas(){_super.apply(this,arguments);}return Canvas;}(TCanvas);Shape.Canvas=Canvas;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TText=function(_super){__extends(TText,_super);function TText(desc){this._textData={};this._textTemplateName=null;this._textLines=[];this._onLocalizeCallback=this._onLocalize.bind(this);this._color=null;this._fontSize=93;this._lineLeading=TGFW.Math.Point.NOT_SET;this._font=null;this._textAlign=Shape.Align.TOP|Shape.Align.LEFT;TGFW.LocalizationManager.onLanguageChanged.add(this._onLocalizeCallback);_super.call(this,desc);}TText.prototype.suspend=function(){TGFW.LocalizationManager.onLanguageChanged.remove(this._onLocalizeCallback);this._onLocalizeCallback=null;_super.prototype.suspend.call(this);};TText.prototype.setDesc=function(desc){if(desc.font)this.setFont(desc.font);if(TGFW.Utils.isNumber(desc.size))this.setFontSize(desc.size);if(desc.text)this.setText(desc.text);if(desc.color)this.setColor(desc.color);if(TGFW.Utils.isNumber(desc.lineLeading))this.setLineLeading(desc.lineLeading);if(TGFW.Utils.isNumber(desc.textAlign))this.setTextAlign(desc.textAlign);_super.prototype.setDesc.call(this,desc);};TText.prototype.getTextAlign=function(){return this._textAlign;};TText.prototype.setTextAlign=function(align){this._textAlign=align;this._touch();};TText.prototype.getTextLines=function(){return this._textLines;};TText.prototype.getLineLeading=function(){return this._lineLeading;};TText.prototype.setLineLeading=function(leading){this._lineLeading=leading;this._touch();};TText.prototype.setColor=function(color){this._color=color;this._touch();};TText.prototype.getColor=function(){return this._color;};TText.prototype.setNumber=function(value,commaSeparate){this._textTemplateName=commaSeparate===true?TGFW.Utils.numberToCommaString(value):value.toString(10);this._textLines[0]=this._textTemplateName;this._textLines.length=1;this._touch();};TText.prototype.updateText=function(data){this.setText(this._textTemplateName,data);};TText.prototype.setText=function(textTemplateName,data){this._textTemplateName=textTemplateName;if(!TGFW.Utils.isString(this._textTemplateName)){this._textLines.length=0;}else{var templateText=TGFW.LocalizationManager.getText(this._textTemplateName);var text=TGFW.Utils.stringParser(TGFW.Utils.isString(templateText)?templateText:'',data,this._textData);this._textLines=text.split('\n');}this._touch();};TText.prototype.setAlign=function(textAlign){if(TGFW.Utils.isNumber(textAlign))this._textAlign=textAlign;this._touch();};TText.prototype.getFont=function(){return this._font;};TText.prototype.setFont=function(font){this._font=font;if(TGFW.FontManager.isFontsOverrided()){this._font=TGFW.FontManager.getOverridedFont();}else{this._font=font;}this._touch();};TText.prototype.getFontSize=function(){return this._fontSize;};TText.prototype.setFontSize=function(size){this._fontSize=size;this._touch();};TText.prototype.getFontSizeToLineHeightCoefficient=function(){var font=TGFW.FontManager.getFont(this._font);if(font&&font.fontSizeToLineHeightCoefficient){return font.fontSizeToLineHeightCoefficient;}return 1.2;};TText.prototype.calculateFontLineHeight=function(){return this._fontSize*this.getFontSizeToLineHeightCoefficient()|0;};TText.prototype.calculateLineHeight=function(){if(this._lineLeading!==TGFW.Math.Point.NOT_SET)return this._lineLeading|0;return this.calculateFontLineHeight();};TText.prototype.calculateTextHeight=function(){return(this._textLines.length-1)*this.calculateLineHeight()+this.calculateFontLineHeight();};TText.prototype.calculatePaddingTop=function(){var paddingTop=0;switch(this._textAlign&Shape.Align.VERTICAL_MASK){case Shape.Align.TOP:paddingTop=0;break;case Shape.Align.CENTER:paddingTop=this.bound.size.y-this.calculateTextHeight()>>1;break;case Shape.Align.BOTTOM:paddingTop=this.bound.size.y-this.calculateTextHeight();break;}return paddingTop;};TText.prototype._createRender=function(){this._render=TGFW.RenderManager.getRender().createShapeRender('Text',this);};TText.prototype._calculateSize=function(){var size=_super.prototype._calculateSize.call(this);if(size.x===TGFW.Math.Point.NOT_SET||size.y===TGFW.Math.Point.NOT_SET){var width=TGFW.RenderManager.getRender().calculateTextShapeWidth(this);if(size.x===TGFW.Math.Point.NOT_SET){size.x=isNaN(width)?0:width+1;}if(size.y===TGFW.Math.Point.NOT_SET){size.y=this.calculateTextHeight();}}return size;};TText.prototype._onLocalize=function(){if(this._textTemplateName){this.setText(this._textTemplateName,this._textData);}};return TText;}(Shape.TViewShape);Shape.TText=TText;var Text=function(_super){__extends(Text,_super);function Text(){_super.apply(this,arguments);}return Text;}(TText);Shape.Text=Text;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TBox=function(_super){__extends(TBox,_super);function TBox(desc){this._color=TGFW.Render.Color.black(0);_super.call(this,desc);}TBox.prototype.setDesc=function(desc){if(desc.color)this.setColor(desc.color);_super.prototype.setDesc.call(this,desc);};TBox.prototype.setColor=function(color){this._color=color;this._touch();};TBox.prototype.getColor=function(){return this._color;};TBox.prototype._createRender=function(){this._render=TGFW.RenderManager.getRender().createShapeRender('Box',this);};return TBox;}(Shape.TViewShape);Shape.TBox=TBox;var Box=function(_super){__extends(Box,_super);function Box(){_super.apply(this,arguments);}return Box;}(TBox);Shape.Box=Box;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){var TLayout=function(_super){__extends(TLayout,_super);function TLayout(desc){this.layout={};this._stashStatus=[];this.tempSize=new TGFW.Math.Point(0,0);_super.call(this,desc);}TLayout.prototype.getBaseShape=function(name){var path=name.split('.'),shape=this;while(path.length>0){shape=shape.layout[path.shift()];}return shape;};TLayout.prototype.getViewShape=function(name){return this.getBaseShape(name);};TLayout.prototype.getTextShape=function(name){return this.getBaseShape(name);};TLayout.prototype.getParticleSystem=function(name){return this.getBaseShape(name);};TLayout.prototype.getImageShape=function(name){return this.getBaseShape(name);};TLayout.prototype.getImageURLShape=function(name){return this.getBaseShape(name);};TLayout.prototype.getArrangedLayout=function(name){return this.getBaseShape(name);};TLayout.prototype.getLayout=function(name){return this.getBaseShape(name);};TLayout.prototype.getBoxShape=function(name){return this.getBaseShape(name);};TLayout.prototype.create=function(){this.layout={};for(var _i=0,_a=Object.keys(this.desc.layout);_i<_a.length;_i++){var key=_a[_i];this.addShape(key,this.desc.layout[key]);}};TLayout.prototype.stashVisibility=function(visible){if(visible){for(var _i=0,_a=this._stashStatus;_i<_a.length;_i++){var shape=_a[_i];shape.show();}this._stashStatus.length=0;}else{this._someShape(function(shape){if(shape.isVisible()){this._stashStatus.push(shape);shape.hide();}});}};TLayout.prototype.addShape=function(key,desc){var obj=TGFW.Base.create(desc);if(!obj)return null;this.layout[key]=obj;if(this.layout[key].setName)this.layout[key].setName(key);this.append(this.layout[key]);obj.create();return obj;};TLayout.prototype._calculateSize=function(){this.tempSize.x=this.size.x;this.tempSize.y=this.size.y;if(this.tempSize.x===TGFW.Math.Point.NOT_SET||this.tempSize.y===TGFW.Math.Point.NOT_SET){var rect=null;for(var _i=0,_a=this.getChildren();_i<_a.length;_i++){var shape=_a[_i];var bound=shape.bound.clone(),position=shape.position;bound.position.x=position.x;bound.position.y=position.y;if(rect){rect.union(bound);}else{rect=bound.clone();}}if(this.tempSize.x===TGFW.Math.Point.NOT_SET){this.tempSize.x=rect?rect.size.x:0;}if(this.tempSize.y===TGFW.Math.Point.NOT_SET){this.tempSize.y=rect?rect.size.y:0;}}return this.tempSize;};TLayout.prototype._renderUpdateShapeIndex=function(){var backShape=null;this.forSomeShapeBackwardScan(function(shape){if(shape.getRender()){backShape=shape;return true;}return false;});var toUpdate=[],children=[],childrenSource=this.getChildren();if(childrenSource){for(var i=0;i<childrenSource.length;i++){children[i]=childrenSource[i];}}while(children&&children.length>0){var n=children.shift();toUpdate.push(n);var nc=n.getChildren();if(nc&&nc.length>0){children=nc.concat(children);}}for(var i=0;i<toUpdate.length;i++){var s=toUpdate[i];s.getRender().setShapeZIndex(backShape);backShape=s;}};TLayout.prototype._someShape=function(callback){var layouts=[],i=0;layouts.push(this.layout);while(i<layouts.length){var layout=layouts[i];for(var p in layout){if(layout.hasOwnProperty(p)){var shape=layout[p];if(callback.call(this,shape,p))return true;if(shape['layout']){layouts.push(shape['layout']);}}}i++;}return false;};return TLayout;}(Shape.TBaseShape);Shape.TLayout=TLayout;var Layout=function(_super){__extends(Layout,_super);function Layout(){_super.apply(this,arguments);}return Layout;}(TLayout);Shape.Layout=Layout;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){(function(Arrange){Arrange[Arrange['NONE']=0]='NONE';Arrange[Arrange['HORIZONTAL']=1]='HORIZONTAL';Arrange[Arrange['VERTICAL']=2]='VERTICAL';}(Shape.Arrange||(Shape.Arrange={})));var Arrange=Shape.Arrange;var ArrangedShape=function(){function ArrangedShape(shape){this.shape=shape;this.bound=shape.bound;var position=shape.getPosition();this.x=position.x;this.y=position.y;}return ArrangedShape;}();var TArrangedLayout=function(_super){__extends(TArrangedLayout,_super);function TArrangedLayout(desc){this._align=Shape.Align.TOP|Shape.Align.LEFT;this._arrange=Arrange.NONE;_super.call(this,desc);}TArrangedLayout.prototype.setDesc=function(desc){if(TGFW.Utils.isNumber(desc.align))this._align=desc.align;if(TGFW.Utils.isNumber(desc.arrange))this._arrange=desc.arrange;_super.prototype.setDesc.call(this,desc);};TArrangedLayout.prototype.getAlign=function(){return this._align;};TArrangedLayout.prototype.getArrange=function(){return this._arrange;};TArrangedLayout.prototype._calculateSize=function(){var size=_super.prototype._calculateSize.call(this);if(size.x===TGFW.Math.Point.NOT_SET||size.y===TGFW.Math.Point.NOT_SET){var rect=this._calculateBoundByShapesToArrange(this._getShapesToArrange());if(rect){if(size.x===TGFW.Math.Point.NOT_SET){size.x=rect.size.x;}if(size.y===TGFW.Math.Point.NOT_SET){size.y=rect.size.y;}}}return size;};TArrangedLayout.prototype._calculatePosition=function(){var shapesToArrange=this._getShapesToArrange();if(shapesToArrange.length>0){var boundByShapes=this._calculateBoundByShapesToArrange(shapesToArrange),padding=this._calculatePadding(boundByShapes);this._arrangeShapes(shapesToArrange,padding,boundByShapes);}return _super.prototype._calculatePosition.call(this);};TArrangedLayout.prototype._getShapesToArrange=function(){return this.getChildren().map(function(shape){return new ArrangedShape(shape);});};TArrangedLayout.prototype._calculatePadding=function(boundByShapes){var layoutSize=this.size;var startX,startY;switch(this.getAlign()&Shape.Align.HORIZONTAL_MASK){case Shape.Align.LEFT:startX=0;break;case Shape.Align.CENTER:startX=(layoutSize.x-boundByShapes.size.x)/2;break;case Shape.Align.RIGHT:startX=layoutSize.x-boundByShapes.size.x;break;}switch(this.getAlign()&Shape.Align.VERTICAL_MASK){case Shape.Align.TOP:startY=0;break;case Shape.Align.CENTER:startY=(layoutSize.y-boundByShapes.size.y)/2;break;case Shape.Align.BOTTOM:startY=layoutSize.y-boundByShapes.size.y;break;}return new TGFW.Math.Point(startX,startY);};TArrangedLayout.prototype._calculateBoundByShapesToArrange=function(shapesToArrange){var rect=new TGFW.Math.Rect(0,0,0,0);for(var _i=0;_i<shapesToArrange.length;_i++){var shape=shapesToArrange[_i];var x=shape.x,y=shape.y,width=shape.bound.size.x,height=shape.bound.size.y;switch(this.getArrange()){case Shape.Arrange.HORIZONTAL:rect.union(new TGFW.Math.Rect(rect.getRight(),y,width+x,height));break;case Shape.Arrange.VERTICAL:rect.union(new TGFW.Math.Rect(x,rect.getBottom(),width,height+y));break;default:break;}}return rect;};TArrangedLayout.prototype._arrangeShapes=function(shapesToArrange,padding,boundByShapes){if(shapesToArrange.length===0)return;var deltaX,deltaY;var layoutX=padding.x,layoutY=padding.y;for(var _i=0;_i<shapesToArrange.length;_i++){var arrangedShape=shapesToArrange[_i];var bound=arrangedShape.bound,position=bound.position,x=arrangedShape.x,y=arrangedShape.y,width=bound.size.x,height=bound.size.y;switch(this.getArrange()){case Shape.Arrange.HORIZONTAL:layoutX+=x;switch(this.getAlign()&Shape.Align.VERTICAL_MASK){case Shape.Align.TOP:deltaY=0;break;case Shape.Align.CENTER:deltaY=(boundByShapes.size.y-height)/2;break;case Shape.Align.BOTTOM:deltaY=boundByShapes.size.y-height;break;}bound.position.x=position.x+layoutX-x;bound.position.y=position.y+padding.y+deltaY;layoutX+=width;break;case Shape.Arrange.VERTICAL:layoutY+=y;switch(this.getAlign()&Shape.Align.HORIZONTAL_MASK){case Shape.Align.LEFT:deltaX=0;break;case Shape.Align.CENTER:deltaX=(boundByShapes.size.x-width)/2;break;case Shape.Align.RIGHT:deltaX=boundByShapes.size.x-width;break;}bound.position.x=position.x+padding.x+deltaX;bound.position.y=position.y+layoutY-y;layoutY+=height;break;}}};return TArrangedLayout;}(Shape.TLayout);Shape.TArrangedLayout=TArrangedLayout;var ArrangedLayout=function(_super){__extends(ArrangedLayout,_super);function ArrangedLayout(){_super.apply(this,arguments);}return ArrangedLayout;}(TArrangedLayout);Shape.ArrangedLayout=ArrangedLayout;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Shape;(function(Shape){(function(Align){Align[Align['CENTER']=0]='CENTER';Align[Align['LEFT']=1]='LEFT';Align[Align['TOP']=2]='TOP';Align[Align['BOTTOM']=4]='BOTTOM';Align[Align['RIGHT']=8]='RIGHT';Align[Align['TOP_LEFT']=3]='TOP_LEFT';Align[Align['TOP_RIGHT']=10]='TOP_RIGHT';Align[Align['TOP_CENTER']=2]='TOP_CENTER';Align[Align['RIGHT_CENTER']=8]='RIGHT_CENTER';Align[Align['LEFT_CENTER']=1]='LEFT_CENTER';Align[Align['BOTTOM_CENTER']=4]='BOTTOM_CENTER';Align[Align['BOTTOM_LEFT']=5]='BOTTOM_LEFT';Align[Align['BOTTOM_RIGHT']=12]='BOTTOM_RIGHT';Align[Align['HORIZONTAL_MASK']=9]='HORIZONTAL_MASK';Align[Align['VERTICAL_MASK']=6]='VERTICAL_MASK';}(Shape.Align||(Shape.Align={})));var Align=Shape.Align;}(Shape=TGFW.Shape||(TGFW.Shape={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){function sdk(){return TGFW.TApp.sdk;}TGFW.sdk=sdk;function app(){return TApp._instance;}TGFW.app=app;var AppDialogs=function(){function AppDialogs(){this.loading=null;this.loadingPopup=null;this.loadingRetry=null;this.mainMenu=null;this.payment=null;this.cancelSubscription=null;this.chooseLanguage=null;this.quitConfirmation=null;this.newGameConfirmation=null;this.profiles=null;this.enterProfileName=null;this.deleteProfileConfirmation=null;this.howToPlay=null;this.topScores=null;this.gameMenu=null;this.game=null;this.gamePause=null;this.demoOver=null;}AppDialogs.prototype.initialize=function(){for(var key in this){if(this.hasOwnProperty(key)){var name=key;if(name&&TGFW.SceneManager.getLayout(name)){this[key]=TGFW.UIManager.getDialog(name);}else{this[key]=null;}}}};return AppDialogs;}();TGFW.AppDialogs=AppDialogs;var _overrideProductSettings;var _overrideOwnerProductId=null;function setProductSettings(productSettings,ownerProductId){_overrideProductSettings=productSettings;_overrideOwnerProductId=ownerProductId;}TGFW.setProductSettings=setProductSettings;var TApp=function(_super){__extends(TApp,_super);function TApp(desc,dialogs,debugOptions){var _this=this;if(debugOptions===undefined){debugOptions=null;}_super.call(this,desc);{debugOptions=new TGFW.DebugOptions();}this._debugOptions=debugOptions;this._created=false;document.body.style.backgroundColor=desc.backgroundColor.toStyle();TGFW.LocalizationManager.init(desc.languagesPool,desc.stringPool);var _startInitSDK=function(){if(_overrideProductSettings&&_overrideProductSettings.productId){_this.desc.productId=_overrideProductSettings.productId;}var productSettings=_overrideProductSettings||{};productSettings.supportedLanguages=TGFW.LocalizationManager.getSupportedLanguageCodes();productSettings.audio=desc.audio.settings;productSettings.version=desc.version;TGH5.Api.init(desc.productId,productSettings,_overrideOwnerProductId).done(function(api){TApp.sdk=api;_this._onSDKInitializedAsync(function(){TGFW.LocalizationManager.change(sdk().getLanguage());if(desc.deferedDescs&&TGFW.Utils.isArray(desc.deferedDescs)){for(var i=0;i<desc.deferedDescs.length;i++){var dd=desc.deferedDescs[i];dd.descOwner[dd.descName]=dd.descCreator(api.getPlatformName());}}_this._onSDKInitialized();_this._init(dialogs);});}).fail(function(error){console.log('TGH5 SDK Initialization fail: '+error);});};if(typeof window['_TGFW_beforeMain']==='function'){window['_TGFW_beforeMain'](_startInitSDK);}else{_startInitSDK();}TApp._instance=this;}TApp.prototype.isDemo=function(){return sdk().getProductSettings().payment.status===TGH5.Payment.ProductStatus.Demo;};TApp.prototype.isFree=function(){return sdk().getProductSettings().payment.status===TGH5.Payment.ProductStatus.Free;};TApp.prototype.hasDemoLimit=function(){return TGFW.Utils.isNumber(sdk().getProductSettings().payment.demoLimit);};TApp.prototype.getDemoLimit=function(){return sdk().getProductSettings().payment.demoLimit;};TApp.prototype.getDeviceId=function(){return this._deviceUid;};TApp.prototype.getVersion=function(){var version;switch(sdk().getPlatformName()){case TGH5.Platforms.SAMSUNG:version=this.desc.samsungVersion;break;default:version=this.desc.version;break;}if(this.desc.cheatsEnabled===true){version+='c';}return version;};TApp.prototype.getPaymentManager=function(){return this._paymentManager;};TApp.prototype.getFrameworkVersion=function(){return'1.28';};TApp.prototype.getDataBase=function(){return this._dataBase;};TApp.prototype.getDebugOptions=function(){return this._debugOptions;};TApp.prototype.exit=function(request){sdk().exit(request);};TApp.prototype._init=function(dialogs){sdk().console.log('framework version: '+this.getFrameworkVersion());var productSettings=sdk().getProductSettings(this.desc.productId);if(productSettings&&typeof productSettings.maxFPS!='undefined'){var updateMSec=_Math.round(1000/productSettings.maxFPS);this.desc.minimumTimerInterval=updateMSec;this.desc.renderUpdateInterval=updateMSec;this.desc.animationUpdateInterval=updateMSec;}if(productSettings&&typeof productSettings.useRAF!='undefined'){this.desc.useRAF=productSettings.useRAF;}TGFW.TimerManager.init(this.desc.minimumTimerInterval);TGFW.FontManager.init(this.desc.fontPool);TGFW.TextureManager.init(this.desc.texturePool);TGFW.RenderManager.init(this.desc.renderUpdateInterval);var _sdk=sdk();if(_sdk.isLowEndDevice&&_sdk.isLowEndDevice()&&this.desc.loaderLowEnd){TGFW.Loader.init(this.desc.loaderLowEnd);}else{TGFW.Loader.init(this.desc.loader);}this._dataBase=TGFW.Base.create(this.desc.dataBase);this._dataBase.init();TGFW.SceneManager.init(this.desc.scene);TGFW.RenderManager.getRender().init(TGFW.SceneManager.getRoot());TGFW.UIManager.init();dialogs.initialize();this.dialogs=dialogs;TGFW.Animation.ClipManager.init(this.desc.animationUpdateInterval);this._showLoadingDialog();};TApp.prototype._showLoadingDialog=function(){var _this=this;TGFW.Loader.loadResources(['loading'],[],false,function(){_this.dialogs.loading.create();_this.dialogs.loading.show();_this._startLoadingApp();});};TApp.prototype._startLoadingApp=function(){var _this=this;TGFW.Loader.loadResources(['mainMenu'],[],false,function(){if(app().getDebugOptions().loader.stopOnLoading){return;}sdk().synchronize().always(function(){if(_this._created){_this.dialogs.loading.setProgress(1);return;}_this.dialogs.loading.setProgress(0.85);var _next=function(){_this._onSDKSynchronized();_this._created=true;TGFW.SceneManager.create();_this._dataBase.load(function(result){_this.dialogs.loading.setProgress(0.9);_this.initializePayment(function(){_this._create();TGFW.Utils.PerformanceMonitor.start();_this._onLoadingFinished();});sdk().reportAppEvent(TGH5.Reporting.AppEvents.Version,_this.getVersion());});};sdk().getSystem().getUserUID().done(function(uid){if(typeof uid==='string'&&uid){_this._deviceUid=uid;}_next();}).fail(function(){_this._deviceUid=null;_next();});});},function(type,param){if(type==TGH5.Resources.ProgressEvents.Progress){_this.dialogs.loading.setProgress(param*0.8);}});};TApp.prototype._beforeStart=function(){};TApp.prototype.initializePayment=function(onDone){this._paymentManager=TGFW.PaymentManager.I();this._paymentManager.requestProducts(onDone);};TApp.prototype._initAsync=function(onDone){onDone();};TApp.prototype._onLoadingFinished=function(){var _this=this;this._beforeStart();this._checkLoadingRetry(function(){_this._initAsync(function(){var dataBase=_this.getDataBase();if(dataBase.getMaxProfilesCount()>0&&dataBase.getProfilesCount()<=0){dataBase.createNewProfile(sdk().getDefaultUserName(),true);sdk().setDefaultUserName(dataBase.getCurrentProfile().getName());}_this._paymentManager.applyProducts(function(){TApp.sdk.requestAd(TGH5.Ads.Type.PreRoll).always(function(){TGFW.Loader.loadResources([],['loading'],false);_this.startPlayMusic();app().dialogs.mainMenu.show();TGFW.SceneManager.suspendLayout('loading');app().dialogs.mainMenu.updateUserName();_this._start();});});_this.dialogs.loading.setProgress(1);});});};TApp.prototype.startPlayMusic=function(){TApp.sdk.playMusic();};TApp.prototype._checkLoadingRetry=function(callback){var that=this;if(!this.desc.allowedLoadingRetry){callback();return;}var resourceManager=TApp.sdk.getResourceManager(),notLoadedResources=resourceManager.getNotLoadedResourcesNames();if(notLoadedResources.length>0){if(this.dialogs.loadingRetry){this.dialogs.loadingRetry.show();}var _startLoadUnloaded=function(){var notLoadedResources=resourceManager.getNotLoadedResourcesNames();if(notLoadedResources.length>0){TApp.sdk.processLater(function(){resourceManager.unloadResources(notLoadedResources).always(function(){TApp.sdk.getResourceManager().loadResources(notLoadedResources,true).always(_startLoadUnloaded);});});}else{that.dialogs.loadingRetry.hide();callback();}};_startLoadUnloaded();}else{that.dialogs.loadingRetry.hide();callback();}};TApp.prototype._onSDKInitialized=function(){};TApp.prototype._onSDKInitializedAsync=function(onDone){onDone();};TApp.prototype._onSDKSynchronized=function(){if(app().getDebugOptions().storage.checkMaxSaveSize){this.getDataBase()._cheatCheckMaxSaveSize();}};TApp.sdk=null;TApp._instance=null;return TApp;}(TGFW.Base);TGFW.TApp=TApp;var App=function(_super){__extends(App,_super);function App(){_super.apply(this,arguments);}return App;}(TApp);TGFW.App=App;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var LocalizationManager=function(){function LocalizationManager(languagesPool,stringPool){this._languageIndex=0;this._stringPool=stringPool;this._languagesPool=languagesPool;}LocalizationManager.init=function(languagesPool,stringPool){if(LocalizationManager._instance===null){LocalizationManager._instance=new LocalizationManager(languagesPool,stringPool);}};LocalizationManager.getSupportedLanguageCodes=function(){return TGFW.Utils.sliceArray(LocalizationManager._instance._languagesPool,0);};LocalizationManager.getAllowedLanguageCodes=function(){return TGFW.sdk().getAllowedLanguages();};LocalizationManager.getTextByLanguageCode=function(key,languageCode){var index=LocalizationManager._instance._languagesPool.indexOf(languageCode);if(index>=0&&key in LocalizationManager._instance._stringPool&&index in LocalizationManager._instance._stringPool[key]){return LocalizationManager._instance._stringPool[key][index];}return key;};LocalizationManager.getText=function(key){if(key in LocalizationManager._instance._stringPool){return LocalizationManager._instance._stringPool[key][LocalizationManager._instance._languageIndex];}return key;};LocalizationManager.hasText=function(key){return key in LocalizationManager._instance._stringPool;};LocalizationManager.change=function(newLanguageCode){var instance=LocalizationManager._instance;instance._languageIndex=instance._languagesPool.indexOf(newLanguageCode);if(instance._languageIndex<0)instance._languageIndex=0;TGFW.sdk().setLanguage(newLanguageCode);LocalizationManager.onLanguageChanged.dispatch(TGFW.sdk().getLanguage());};LocalizationManager.onLanguageChanged=new TGFW.Signal();LocalizationManager._instance=null;return LocalizationManager;}();TGFW.LocalizationManager=LocalizationManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){(function(DialogResult){DialogResult[DialogResult['OK']=1]='OK';DialogResult[DialogResult['CANCEL']=2]='CANCEL';DialogResult[DialogResult['YES']=3]='YES';DialogResult[DialogResult['NO']=4]='NO';}(UI.DialogResult||(UI.DialogResult={})));var DialogResult=UI.DialogResult;var TDialog=function(_super){__extends(TDialog,_super);function TDialog(desc){this._navigation=null;this._semiTransparentShape=null;this._inputEnabled=false;this._onResultCallback=null;this._modalMode=false;_super.call(this,desc);}TDialog.prototype.setDesc=function(desc){if(desc.navigation){this._navigation=TGFW.Base.create(desc.navigation);this._navigation.setDialog(this);}TGFW.Utils.setDefault(desc,'isPopup',false);TGFW.Utils.setDefault(desc,'semiTransparentLayer',false);_super.prototype.setDesc.call(this,desc);};TDialog.prototype.onClick=function(button){if(button&&button.getAction()){this.onAction(button.getAction(),button);}};TDialog.prototype.isPopup=function(){return this.desc.isPopup;};TDialog.prototype.isSemiTransparentLayer=function(){return this.desc.semiTransparentLayer;};TDialog.prototype.hideSemiTransparentLayer=function(){if(this._semiTransparentShape)this._semiTransparentShape.hide();};TDialog.prototype.showSemiTransparentLayer=function(){if(this._semiTransparentShape)this._semiTransparentShape.show();};TDialog.prototype.getButton=function(buttonName){if(!buttonName)return null;return this.getBaseShape(buttonName);};TDialog.prototype.getNavigation=function(){return this._navigation;};TDialog.prototype.create=function(){this._createSemiTransparentLayer();_super.prototype.create.call(this);};TDialog.prototype.isInputEnabled=function(){return this._inputEnabled;};TDialog.prototype.enableInput=function(){this._inputEnabled=true;};TDialog.prototype.disableInput=function(){this._inputEnabled=false;};TDialog.prototype.hide=function(){this._beforeHide();_super.prototype.hide.call(this);this._afterHide();TGFW.SceneManager.detachFromRender(this);TGFW.UIManager.unregisterDialog(this);TGFW.UIManager.updateSemiTransparent();};TDialog.prototype._showShapes=function(){_super.prototype.show.call(this);};TDialog.prototype.showModal=function(onResultCallback){this._onResultCallback=onResultCallback;this.show();this._modalMode=true;};TDialog.prototype.show=function(){if(TGFW.UIManager.registerDialog(this)){this._modalMode=false;TGFW.SceneManager.attachToRender(this);this._beforeShow();this._showShapes();this.hideSemiTransparentLayer();this._afterShow();this.onFocus();TGFW.UIManager.updateSemiTransparent();if(TGFW.sdk().reportGameAnalyticsScreenEvent&&this.desc.postGameAnalyticsScreenEvent&&this.desc.name){TGFW.sdk().reportGameAnalyticsScreenEvent(this.desc.name);}}};TDialog.prototype.onAction=function(action,button){if(this._modalMode){switch(action){case Dialog.yesAction:this._onResult(DialogResult.YES);return;break;case Dialog.noAction:this._onResult(DialogResult.NO);return;break;case Dialog.cancelAction:this._onResult(DialogResult.CANCEL,{key:this.getNavigation().getLastKey()});return;break;case Dialog.okAction:this._onResult(DialogResult.OK);return;break;}}if(button){action.invokeArgs(button);}else{action.invoke();}};TDialog.prototype.onKeyDown=function(key){if(this._navigation&&this.isInputEnabled()){this._navigation.onKeyDown(key);}};TDialog.prototype.onKeyUp=function(key){if(this._navigation&&this.isInputEnabled()){this._navigation.onKeyUp(key);}};TDialog.prototype.onMouseEvent=function(type,x,y,shape){if(this._navigation&&this.isInputEnabled()){this._navigation.onMouseEvent(type,x,y,shape);}};TDialog.prototype.simulateNavigation=function(key){if(this._navigation){var isNE=this.isInputEnabled();if(!isNE)this.enableInput();this.onKeyDown(key);if(!isNE)this.disableInput();}};TDialog.prototype.onFocus=function(){this.enableInput();if(this.desc.stashWhenBlur){this.stashVisibility(true);}if(this._navigation){this._navigation.onFocus();}};TDialog.prototype.onBlur=function(){this.disableInput();if(this._navigation){this._navigation.onBlur();}if(this.desc.stashWhenBlur){this.stashVisibility(false);}};TDialog.prototype.suspend=function(){if(this._navigation){this._navigation.suspend();this._navigation=null;}this.disableInput();_super.prototype.suspend.call(this);};TDialog.prototype.onFocusButton=function(from,to){};TDialog.prototype._onResult=function(dialogResult,customData){if(customData===undefined){customData=null;}if(this._onResultCallback){this._onResultCallback(this,dialogResult,customData);this._onResultCallback=null;}};TDialog.prototype._beforeShow=function(){this.enableInput();};TDialog.prototype._afterShow=function(){if(this._navigation){this._navigation.init();}};TDialog.prototype._beforeHide=function(){this.disableInput();};TDialog.prototype._afterHide=function(){this._onResultCallback=null;};TDialog.prototype._createSemiTransparentLayer=function(){if(this.isSemiTransparentLayer()){var rect=this.bound;this._semiTransparentShape=new TGFW.Shape.Box({x:-rect.getX(),y:-rect.getY(),width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:TGFW.app().desc.semiTransparentLayerColor});this.append(this._semiTransparentShape);}};TDialog.dummyAction=new TGFW.Action();TDialog.okAction=new TGFW.Action();TDialog.yesAction=new TGFW.Action();TDialog.noAction=new TGFW.Action();TDialog.cancelAction=new TGFW.Action();return TDialog;}(TGFW.Shape.TLayout);UI.TDialog=TDialog;var Dialog=function(_super){__extends(Dialog,_super);function Dialog(){_super.apply(this,arguments);}return Dialog;}(TDialog);UI.Dialog=Dialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var Easing=function(){function Easing(){}Easing.backIn=function(t){var s=1.70158;return t*t*((s+1)*t-s);};Easing.backInOut=function(t){var s=2.5949095;if((t*=2)<1){return 0.5*(t*t*((s+1)*t-s));}return 0.5*((t-=2)*t*((s+1)*t+s)+2);};Easing.backOut=function(t){var s=1.70158;return--t*t*((s+1)*t+s)+1;};Easing.bounceOut=function(t){var a=0.36363636363636365;var b=0.7272727272727273;var c=0.9;var ca=12.066481994459833;var cb=19.63545706371191;var cc=8.898060941828255;var t2=t*t;return t<a?7.5625*t2:t<b?9.075*t2-9.9*t+3.4:t<c?ca*t2-cb*t+cc:10.8*t*t-20.52*t+10.72;};Easing.bounceIn=function(t){return 1-Easing.bounceOut(1-t);};Easing.bounceInOut=function(t){return t<0.5?0.5*(1-Easing.bounceOut(1-t*2)):0.5*Easing.bounceOut(t*2-1)+0.5;};Easing.circIn=function(t){return 1-_Math.sqrt(1-t*t);};Easing.circInOut=function(t){if((t*=2)<1)return-0.5*(_Math.sqrt(1-t*t)-1);return 0.5*(_Math.sqrt(1-(t-=2)*t)+1);};Easing.circOut=function(t){return _Math.sqrt(1- --t*t);};Easing.cubicIn=function(t){return t*t*t;};Easing.cubicInOut=function(t){return t<0.5?4*t*t*t:0.5*_Math.pow(2*t-2,3)+1;};Easing.cubicOut=function(t){var f=t-1;return f*f*f+1;};Easing.elasticIn=function(t){return _Math.sin(13*t*_Math.PI/2)*_Math.pow(2,10*(t-1));};Easing.elasticInOut=function(t){return t<0.5?0.5*_Math.sin(13*_Math.PI/2*2*t)*_Math.pow(2,10*(2*t-1)):0.5*_Math.sin(-13*_Math.PI/2*(2*t-1+1))*_Math.pow(2,-10*(2*t-1))+1;};Easing.elasticOut=function(t){return _Math.sin(-13*(t+1)*_Math.PI/2)*_Math.pow(2,-10*t)+1;};Easing.expoIn=function(t){return t===0?t:_Math.pow(2,10*(t-1));};Easing.expoInOut=function(t){return t===0||t===1?t:t<0.5?0.5*_Math.pow(2,20*t-10):-0.5*_Math.pow(2,10-t*20)+1;};Easing.expoOut=function(t){return t===1?t:1-_Math.pow(2,-10*t);};Easing.linear=function(t){return t;};Easing.quadIn=function(t){return t*t;};Easing.quadInOut=function(t){t/=0.5;if(t<1)return 0.5*t*t;t--;return-0.5*(t*(t-2)-1);};Easing.quadOut=function(t){return-t*(t-2);};Easing.quarticIn=function(t){return _Math.pow(t,4);};Easing.quarticInOut=function(t){return t<0.5?8*_Math.pow(t,4):-8*_Math.pow(t-1,4)+1;};Easing.quarticOut=function(t){return _Math.pow(t-1,3)*(1-t)+1;};Easing.qinticIn=function(t){return t*t*t*t*t;};Easing.qinticInOut=function(t){if((t*=2)<1)return 0.5*t*t*t*t*t;return 0.5*((t-=2)*t*t*t*t+2);};Easing.qinticOut=function(t){return--t*t*t*t*t+1;};Easing.sineIn=function(t){return 1-_Math.cos(t*_Math.PI/2);};Easing.sineInOut=function(t){return-0.5*(_Math.cos(_Math.PI*t)-1);};Easing.sineOut=function(t){return _Math.sin(t*_Math.PI/2);};return Easing;}();Animation.Easing=Easing;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TKey=function(_super){__extends(TKey,_super);function TKey(desc){this._time=0;this._delay=0;this._dynamicData=null;this._finished=true;_super.call(this,desc);}TKey.prototype.setDynamicData=function(dynamicData){this._dynamicData=dynamicData;};TKey.prototype.getLengthMSec=function(){return this._delay+this._time;};TKey.prototype.setDesc=function(desc){_super.prototype.setDesc.call(this,desc);this._easing=TGFW.Utils.isFunction(desc.easing)?desc.easing:Animation.Easing.linear;TGFW.Utils.setIfNumber(this,'_time',desc.time,0);TGFW.Utils.setIfNumber(this,'_delay',desc.delay,0);};TKey.prototype.update=function(time){if(!this._finished){if(time<this._delay)return true;time=time-this._delay;if(this._time===0){this.updateObject(0);this._finished=true;}else{var k=time/this._time;if(k>1)k=1;if(k<0)k=0;this.updateObject(this._easing(k));if(time>=this._time){this._finished=true;}}}return!this._finished;};TKey.prototype.setContainer=function(container){this._obj=container[this.desc.name];};TKey.prototype.getObject=function(){return this._obj;};TKey.prototype.start=function(){this._finished=false;};return TKey;}(TGFW.Base);Animation.TKey=TKey;var Key=function(_super){__extends(Key,_super);function Key(){_super.apply(this,arguments);}return Key;}(TKey);Animation.Key=Key;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var Frame=function(){function Frame(keysDesc){this._keys=new Array(keysDesc.length);for(var i=0;i<keysDesc.length;i++){this._keys[i]=TGFW.Base.create(keysDesc[i]);}}Frame.prototype.start=function(){for(var _i=0,_a=this._keys;_i<_a.length;_i++){var key=_a[_i];key.start();}};Frame.prototype.update=function(dTime){for(var _i=0,_a=this._keys;_i<_a.length;_i++){var key=_a[_i];key.update(dTime);}};Frame.prototype.setContainer=function(container){for(var _i=0,_a=this._keys;_i<_a.length;_i++){var key=_a[_i];key.setContainer(container);}};Frame.prototype.setDynamicData=function(dynamicData){for(var _i=0,_a=this._keys;_i<_a.length;_i++){var key=_a[_i];key.setDynamicData(dynamicData);}};Frame.prototype.getLengthMSec=function(){return this._keys[0].getLengthMSec();};return Frame;}();Animation.Frame=Frame;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TTimeLine=function(_super){__extends(TTimeLine,_super);function TTimeLine(desc){this._frames=[];this._state=Animation.State.IDLE;this._currentFrameIndex=0;this._time=0;_super.call(this,desc);this._createFrames();}TTimeLine.prototype.getState=function(){return this._state;};TTimeLine.prototype.setState=function(state){this._state=state;};TTimeLine.prototype.getCurrentFrame=function(){return this._frames[this._currentFrameIndex];};TTimeLine.prototype.setCurrentFrame=function(index){if(index<0||index>=this._frames.length)return false;this._currentFrameIndex=index;this.getCurrentFrame().start();return true;};TTimeLine.prototype.moveToNextFrame=function(){if(!this.setCurrentFrame(this._currentFrameIndex+1))return null;return this.getCurrentFrame();};TTimeLine.prototype.getFramesCount=function(){return this._frames.length;};TTimeLine.prototype.play=function(){this._time=0;if(this._frames.length<=0){this.doComplete();return false;}else{this.setState(Animation.State.PLAYING);this.setCurrentFrame(0);}return true;};TTimeLine.prototype.setFrame=function(frameId,container,dynamicData){if(frameId<0||frameId>=this._frames.length)return false;this._currentFrameIndex=frameId;var frame=this.getCurrentFrame();frame.setContainer(container);frame.start();if(typeof dynamicData!=='undefined')frame.setDynamicData(dynamicData);frame.update(0);return true;};TTimeLine.prototype.update=function(dTime){};TTimeLine.prototype.setContainer=function(container){for(var _i=0,_a=this._frames;_i<_a.length;_i++){var frame=_a[_i];frame.setContainer(container);}};TTimeLine.prototype.doComplete=function(){this.setState(Animation.State.FINISHED);};TTimeLine.prototype._createFrames=function(){this._frames.length=0;for(var _i=0,_a=this.desc.frames;_i<_a.length;_i++){var frame=_a[_i];this._frames.push(new Animation.Frame(frame));}};return TTimeLine;}(TGFW.Base);Animation.TTimeLine=TTimeLine;var TimeLine=function(_super){__extends(TimeLine,_super);function TimeLine(){_super.apply(this,arguments);}return TimeLine;}(TTimeLine);Animation.TimeLine=TimeLine;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TClip=function(_super){__extends(TClip,_super);function TClip(desc){this._dynamicData=null;this._onFinish=null;this._activeTLCount=0;this._paused=false;this._timeLines=[];this._state=Animation.State.IDLE;this._group=typeof desc.group==='undefined'?Clip.defaultGroup:desc.group;_super.call(this,desc);this._createItems();}TClip.prototype.setDynamicData=function(dynamicData){this._dynamicData=dynamicData;};TClip.prototype.suspend=function(){this._onFinish=null;};TClip.prototype.isInputDisabled=function(){return this.desc.disableInput===true;};TClip.prototype.isPaused=function(){return this._paused;};TClip.prototype.setGroup=function(group){this._group=group;};TClip.prototype.getGroup=function(){return this._group;};TClip.prototype.isGroupEqual=function(group){return group===Clip.anyGroup||this._group===Clip.anyGroup||this._group===group;};TClip.prototype.getState=function(){return this._state;};TClip.prototype.setFrame=function(frameId,container,dynamicData){for(var _i=0,_a=this._timeLines;_i<_a.length;_i++){var timeLine=_a[_i];if(frameId<timeLine.getFramesCount()){timeLine.setFrame(frameId,container,dynamicData);}}};TClip.prototype.setContainer=function(container){for(var _i=0,_a=this._timeLines;_i<_a.length;_i++){var timeLine=_a[_i];timeLine.setContainer(container);}};TClip.prototype.play=function(container,onFinish,dynamicData){if(onFinish===undefined){onFinish=null;}this._paused=false;if(container)this.setContainer(container);this._onFinish=onFinish;if(typeof dynamicData!=='undefined')this.setDynamicData(dynamicData);this._playTimeLines();Animation.ClipManager.registerClip(this);};TClip.prototype._playTimeLines=function(){this._activeTLCount=this._timeLines.length;this._state=Animation.State.PLAYING;for(var _i=0,_a=this._timeLines;_i<_a.length;_i++){var timeLine=_a[_i];timeLine.play();}};TClip.prototype.stop=function(){this._state=Animation.State.FINISHED;if(this._onFinish)this._onFinish();};TClip.prototype.interrupt=function(){this._state=Animation.State.FINISHED;};TClip.prototype.update=function(dTime){if(this.isPaused()||this.getState()!==Animation.State.PLAYING)return;for(var _i=0,_a=this._timeLines;_i<_a.length;_i++){var timeLine=_a[_i];if(timeLine.getState()==Animation.State.FINISHED)continue;timeLine.update(dTime);if(timeLine.getState()==Animation.State.FINISHED){this._onFinishTimeLine();}}};TClip.prototype.pause=function(){this._paused=true;};TClip.prototype.resume=function(){this._paused=false;};TClip.prototype._onFinishTimeLine=function(){this._activeTLCount--;if(this._activeTLCount==0){if(this.desc.looped===true){this._playTimeLines();}else{this._state=Animation.State.FINISHED;}if(this._onFinish)this._onFinish();}};TClip.prototype._createItems=function(){this._timeLines.length=0;for(var _i=0,_a=this.desc.timeLines;_i<_a.length;_i++){var timeLine=_a[_i];this._timeLines.push(TGFW.Base.create(timeLine));}};TClip.defaultGroup=function(){};TClip.anyGroup=function(){};return TClip;}(TGFW.Base);Animation.TClip=TClip;var Clip=function(_super){__extends(Clip,_super);function Clip(){_super.apply(this,arguments);}return Clip;}(TClip);Animation.Clip=Clip;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TKeyMoveCardinal=function(_super){__extends(TKeyMoveCardinal,_super);function TKeyMoveCardinal(desc){this._points=[];this._tangents=[];this._timeMarks=[];this._currentPoint=new TGFW.Math.Point(TGFW.Math.Point.NOT_SET,TGFW.Math.Point.NOT_SET);_super.call(this,desc);}TKeyMoveCardinal.prototype.start=function(){var currentPosition=this.getObject().getPosition();TGFW.Utils.copyArray(this._points,this.desc.points);if(this.desc.relative){for(var _i=0,_a=this._points;_i<_a.length;_i++){var point=_a[_i];point.add(currentPosition);}}if(this.desc.startFromCurrent){this._points.unshift(currentPosition.clone());}this._calculateTangents(this._points,TGFW.Utils.isNumber(this.desc.curveTightness)?this.desc.curveTightness:0.5);this._calculateTimeMarks(this._points);_super.prototype.start.call(this);};TKeyMoveCardinal.prototype.updateObject=function(k){var resultPoint=this._currentPoint;this._calculateCardinalSpline(resultPoint,this._points,this._tangents,k);this.getObject().setPosition(resultPoint.x,resultPoint.y);};TKeyMoveCardinal.prototype._calculateCardinalSpline=function(resultPoint,points,tangents,k){var pointsCount=points.length;var rightPoint=0,frac=1,markIndex;for(markIndex=0;markIndex<this._timeMarks.length;markIndex++){var leftPoint=rightPoint;rightPoint+=this._timeMarks[markIndex];if(k<=rightPoint){frac=(k-leftPoint)/this._timeMarks[markIndex];break;}}var i0=markIndex,i1=markIndex+1;if(i1>=pointsCount){frac=1;i0=pointsCount-2;i1=pointsCount-1;}var kPow2=frac*frac,oneMinusK=1-frac,oneMinusKPow2=oneMinusK*oneMinusK,kPlusK=2*frac,h00=(1+kPlusK)*oneMinusKPow2,h10=frac*oneMinusKPow2,h01=kPow2*(3-kPlusK),h11=kPow2*(frac-1),point0=points[i0],point1=points[i1],tangent0=tangents[i0],tangent1=tangents[i1];resultPoint.x=h00*point0.x+h10*tangent0.x+h01*point1.x+h11*tangent1.x;resultPoint.y=h00*point0.y+h10*tangent0.y+h01*point1.y+h11*tangent1.y;};TKeyMoveCardinal.prototype._calculateTangents=function(points,curveTightness){this._tangents.length=0;var n=points.length;for(var i=0;i<n;i++){this._tangents.push(new TGFW.Math.Point(TGFW.Math.Point.NOT_SET,TGFW.Math.Point.NOT_SET));}for(var i=0;i<n;i++){var leftPoint=i-1>=0?points[i-1]:points[i],rightPoint=i+1<=n-1?points[i+1]:points[i];this._tangents[i].x=curveTightness*(rightPoint.x-leftPoint.x);this._tangents[i].y=curveTightness*(rightPoint.y-leftPoint.y);}};TKeyMoveCardinal.prototype._calculateTimeMarks=function(points){this._timeMarks.length=0;var total=0,p2=points[0];for(var pointIndex=1;pointIndex<points.length;pointIndex++){var p1=p2;p2=points[pointIndex];var dx=p2.x-p1.x,dy=p2.y-p1.y,l=_Math.sqrt(dx*dx+dy*dy);total+=l;this._timeMarks.push(l);}for(var markIndex=0;markIndex<this._timeMarks.length;markIndex++){this._timeMarks[markIndex]/=total;}};return TKeyMoveCardinal;}(Animation.TKey);Animation.TKeyMoveCardinal=TKeyMoveCardinal;var KeyMoveCardinal=function(_super){__extends(KeyMoveCardinal,_super);function KeyMoveCardinal(){_super.apply(this,arguments);}return KeyMoveCardinal;}(TKeyMoveCardinal);Animation.KeyMoveCardinal=KeyMoveCardinal;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var propertyGetMap={'opacity':function(shape){return shape.getOpacity();},'x':function(shape){return shape.getX();},'y':function(shape){return shape.getY();},'size':function(shape){return shape.getFontSize();},'scaleX':function(shape){return shape.getScale().getX();},'scaleY':function(shape){return shape.getScale().getY();},'rotate':function(shape){return shape.getRotate();},'rotateX':function(shape){return shape.getRotateX();},'rotateY':function(shape){return shape.getRotateY();}};var propertySetMap={'opacity':function(shape,opacity){return shape.setOpacity(opacity);},'x':function(shape,x){return shape.setX(x);},'y':function(shape,y){return shape.setY(y);},'size':function(shape,size){return shape.setFontSize(size);},'scaleX':function(shape,scaleX){return shape.setScaleX(scaleX);},'scaleY':function(shape,scaleY){return shape.setScaleY(scaleY);},'rotate':function(shape,rotate){return shape.setRotate(rotate);},'rotateX':function(shape,rotate){return shape.setRotateX(rotate);},'rotateY':function(shape,rotate){return shape.setRotateY(rotate);}};var TKeyTransition=function(_super){__extends(TKeyTransition,_super);function TKeyTransition(desc){this._propertyNames=null;this._current={};_super.call(this,desc);}TKeyTransition.prototype.start=function(){this._propertyNames=Object.keys(this.desc.change);for(var _i=0,_a=this._propertyNames;_i<_a.length;_i++){var propertyName=_a[_i];var item=this.desc.change[propertyName];var startValue=this._getPropertyValue(propertyName);if(item.relative){this._current[propertyName]={start:startValue+item.start,end:startValue+item.end};}else{if(item.startFromCurrent){this._current[propertyName]={start:startValue,end:item.end};}else{this._current[propertyName]={start:item.start,end:item.end};}}}_super.prototype.start.call(this);};TKeyTransition.prototype.updateObject=function(k){for(var _i=0,_a=this._propertyNames;_i<_a.length;_i++){var propertyName=_a[_i];var item=this._current[propertyName],current=item.start+(item.end-item.start)*k;this._setPropertyValue(propertyName,current);}};TKeyTransition.prototype._getPropertyValue=function(propertyName){return propertyGetMap[propertyName](this.getObject());};TKeyTransition.prototype._setPropertyValue=function(propertyName,value){return propertySetMap[propertyName](this.getObject(),value);};return TKeyTransition;}(Animation.TKey);Animation.TKeyTransition=TKeyTransition;var KeyTransition=function(_super){__extends(KeyTransition,_super);function KeyTransition(){_super.apply(this,arguments);}return KeyTransition;}(TKeyTransition);Animation.KeyTransition=KeyTransition;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TKeyProperty=function(_super){__extends(TKeyProperty,_super);function TKeyProperty(desc){this._wasUpdated=false;_super.call(this,desc);}TKeyProperty.prototype.start=function(){this._wasUpdated=false;_super.prototype.start.call(this);};TKeyProperty.prototype.updateObject=function(k){if(this._wasUpdated)return;this.getObject().setDesc(this.desc);this._wasUpdated=true;};return TKeyProperty;}(Animation.TKey);Animation.TKeyProperty=TKeyProperty;var KeyProperty=function(_super){__extends(KeyProperty,_super);function KeyProperty(){_super.apply(this,arguments);}return KeyProperty;}(TKeyProperty);Animation.KeyProperty=KeyProperty;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TKeyVisibility=function(_super){__extends(TKeyVisibility,_super);function TKeyVisibility(desc){this._wasUpdated=false;_super.call(this,desc);}TKeyVisibility.prototype.start=function(){this._wasUpdated=false;_super.prototype.start.call(this);};TKeyVisibility.prototype.updateObject=function(k){if(this._wasUpdated)return;this.getObject().setVisibility(this.desc.visible);this._wasUpdated=true;};return TKeyVisibility;}(Animation.TKey);Animation.TKeyVisibility=TKeyVisibility;var KeyVisibility=function(_super){__extends(KeyVisibility,_super);function KeyVisibility(){_super.apply(this,arguments);}return KeyVisibility;}(TKeyVisibility);Animation.KeyVisibility=KeyVisibility;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TSerialTimeLine=function(_super){__extends(TSerialTimeLine,_super);function TSerialTimeLine(desc){_super.call(this,desc);}TSerialTimeLine.prototype.update=function(dTime){if(this.getState()!=Animation.State.PLAYING)return;this._time+=dTime;var frame=this.getCurrentFrame();while(this._time>=frame.getLengthMSec()){var delta=frame.getLengthMSec();frame.update(delta);this._time-=delta;frame=this.moveToNextFrame();if(!frame){this.doComplete();return;}}frame.update(this._time);};return TSerialTimeLine;}(Animation.TTimeLine);Animation.TSerialTimeLine=TSerialTimeLine;var SerialTimeLine=function(_super){__extends(SerialTimeLine,_super);function SerialTimeLine(){_super.apply(this,arguments);}return SerialTimeLine;}(TSerialTimeLine);Animation.SerialTimeLine=SerialTimeLine;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){var TParallelTimeLine=function(_super){__extends(TParallelTimeLine,_super);function TParallelTimeLine(desc){_super.call(this,desc);}TParallelTimeLine.prototype.update=function(dTime){if(this.getState()!==Animation.State.PLAYING)return;this._time+=dTime;var doComplete=true;for(var _i=0,_a=this._frames;_i<_a.length;_i++){var frame=_a[_i];if(frame.update(this._time)){doComplete=false;}}if(doComplete)this.doComplete();};return TParallelTimeLine;}(Animation.TTimeLine);Animation.TParallelTimeLine=TParallelTimeLine;var ParallelTimeLine=function(_super){__extends(ParallelTimeLine,_super);function ParallelTimeLine(){_super.apply(this,arguments);}return ParallelTimeLine;}(TParallelTimeLine);Animation.ParallelTimeLine=ParallelTimeLine;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Animation;(function(Animation){(function(State){State[State['IDLE']=0]='IDLE';State[State['PLAYING']=1]='PLAYING';State[State['FINISHED']=2]='FINISHED';}(Animation.State||(Animation.State={})));var State=Animation.State;var ClipManager=function(){function ClipManager(animationUpdateInterval){this._clipPool=[];if(TGFW.app().desc.useRAF){TGFW.onNewFrame.add(this._update.bind(this));}else{this._animationTimer=new TGFW.Timer(this._update.bind(this));this._animationTimer.start(animationUpdateInterval,true);}}ClipManager.init=function(animationUpdateInterval){if(ClipManager._instance===null){ClipManager._instance=new ClipManager(animationUpdateInterval);}};ClipManager.pause=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)){clip.pause();}}};ClipManager.resume=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)){clip.resume();}}};ClipManager.isInputDisabled=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)&&clip.isInputDisabled()){return true;}}return false;};ClipManager.stopAllClips=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)){clip.stop();}}ClipManager._instance._clipPool.length=0;};ClipManager.interruptAllClips=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)){clip.interrupt();}}ClipManager._instance._clipPool.length=0;};ClipManager.getRegisteredClipCount=function(group){if(group===undefined){group=Animation.Clip.defaultGroup;}var counter=0;for(var _i=0,_a=ClipManager._instance._clipPool;_i<_a.length;_i++){var clip=_a[_i];if(clip.isGroupEqual(group)){counter++;}}return ClipManager._instance._clipPool.length;};ClipManager.createClip=function(clip){return TGFW.Base.create(clip);};ClipManager.registerClip=function(clip){if(ClipManager._instance._clipPool.indexOf(clip)<=0){ClipManager._instance._clipPool.push(clip);}};ClipManager.debugGetClipPool=function(){return ClipManager._instance._clipPool;};ClipManager.prototype._update=function(dTime){var clipPool=this._clipPool,len=clipPool.length;while(len--){clipPool[len].update(dTime);if(clipPool[len].getState()===State.FINISHED){clipPool.splice(len,1);}}};ClipManager._instance=null;return ClipManager;}();Animation.ClipManager=ClipManager;}(Animation=TGFW.Animation||(TGFW.Animation={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){(function(ButtonState){ButtonState[ButtonState['REGULAR']=0]='REGULAR';ButtonState[ButtonState['DISABLED']=1]='DISABLED';ButtonState[ButtonState['FOCUSED']=2]='FOCUSED';ButtonState[ButtonState['PRESSED']=4]='PRESSED';ButtonState[ButtonState['CHECKED']=8]='CHECKED';ButtonState[ButtonState['SELECTED']=16]='SELECTED';}(UI.ButtonState||(UI.ButtonState={})));var ButtonState=UI.ButtonState;var TButton=function(_super){__extends(TButton,_super);function TButton(desc){this._state=ButtonState.REGULAR;this._layoutClip=null;this._data=null;_super.call(this,desc);}TButton.isButton=function(obj){return obj instanceof TButton;};TButton.prototype.create=function(){_super.prototype.create.call(this);if(this.desc.layoutClip){this._layoutClip=TGFW.Base.create(this.desc.layoutClip.clip);this._layoutClip.setContainer(this.layout);}if(!this.bound.isValid()){this.update();}};TButton.prototype.getCaptionShape=function(){var name=this.desc.captionShapeName;return name?this.getTextShape(name):null;};TButton.prototype.setData=function(data){this._data=data;};TButton.prototype.getData=function(){return this._data;};TButton.prototype.clearState=function(state){this._state=this._state&~state;this._updateClip();};TButton.prototype.addState=function(state){this.setState(this._state|state);};TButton.prototype.setState=function(state){this._state=state;this._updateClip();};TButton.prototype.getState=function(){return this._state;};TButton.prototype.checkState=function(state){return(this._state&state)!=0;};TButton.prototype.reset=function(){this.setState(ButtonState.REGULAR);};TButton.prototype.disable=function(){this.setState(this._state|ButtonState.DISABLED);};TButton.prototype.enable=function(){this.clearState(ButtonState.DISABLED);};TButton.prototype.isEnabled=function(){return!this.checkState(ButtonState.DISABLED);};TButton.prototype.isNavigable=function(){return this.desc.navigateIfDisabled||this.isEnabled();};TButton.prototype.focus=function(){this.setState(this._state|ButtonState.FOCUSED);};TButton.prototype.blur=function(){this.clearState(ButtonState.FOCUSED);};TButton.prototype.isFocused=function(){return this.checkState(ButtonState.FOCUSED);};TButton.prototype.press=function(){this.setState(this._state|ButtonState.PRESSED);};TButton.prototype.release=function(){this.clearState(ButtonState.PRESSED);};TButton.prototype.isPressed=function(){return this.checkState(ButtonState.PRESSED);};TButton.prototype.check=function(){this.setState(this._state|ButtonState.CHECKED);};TButton.prototype.unCheck=function(){this.clearState(ButtonState.CHECKED);};TButton.prototype.isChecked=function(){return this.checkState(ButtonState.CHECKED);};TButton.prototype.getAction=function(){return this.desc.action;};TButton.prototype.getClipFrameByState=function(){if(!this.desc.layoutClip||!this.desc.layoutClip.frameStates){return-1;}var frameStates=this.desc.layoutClip.frameStates,state=this._state;if((state&ButtonState.PRESSED)!==0)state|=ButtonState.FOCUSED;for(var i=0;i<frameStates.length;i++){var tState=frameStates[i];if(state==ButtonState.REGULAR&&tState==ButtonState.REGULAR){return i;}if((tState&ButtonState.PRESSED)!==0)tState|=ButtonState.FOCUSED;if(state==tState){return i;}}return-1;};TButton.prototype._updateClip=function(){if(this._layoutClip&&this._visible){var frameId=this.getClipFrameByState();if(frameId>=0)this._layoutClip.setFrame(frameId,this.layout,this.getData());}};return TButton;}(TGFW.Shape.TLayout);UI.TButton=TButton;var Button=function(_super){__extends(Button,_super);function Button(){_super.apply(this,arguments);}return Button;}(TButton);UI.Button=Button;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){(function(MouseEventType){MouseEventType[MouseEventType['DOWN']=1]='DOWN';MouseEventType[MouseEventType['UP']=2]='UP';MouseEventType[MouseEventType['OVER']=3]='OVER';MouseEventType[MouseEventType['OUT']=4]='OUT';MouseEventType[MouseEventType['MOVE']=5]='MOVE';}(UI.MouseEventType||(UI.MouseEventType={})));var MouseEventType=UI.MouseEventType;(function(SoundClickSource){SoundClickSource[SoundClickSource['KEY_ENTER']=1]='KEY_ENTER';SoundClickSource[SoundClickSource['KEY_NAVIGATION']=2]='KEY_NAVIGATION';}(UI.SoundClickSource||(UI.SoundClickSource={})));var SoundClickSource=UI.SoundClickSource;var TNavigation=function(_super){__extends(TNavigation,_super);function TNavigation(desc){this._dialog=null;this._focusedButtonName=null;this._lastValidFocusedButtonName=null;this._lastKey=null;this._beforeBlur=null;_super.call(this,desc);}TNavigation.prototype.getButton=function(name){return this._dialog.getButton(name);};TNavigation.prototype.navigateToButton=function(buttonName,state){if(state===undefined){state=UI.ButtonState.REGULAR|UI.ButtonState.FOCUSED;}if(buttonName===this._focusedButtonName)return;var from=this.getButton(this._lastValidFocusedButtonName),to=null,button=null;if(buttonName){button=this.getButton(buttonName);if(button&&!button.isNavigable())return;}this._blurButton(this._lastValidFocusedButtonName);if(button){this._focusedButtonName=buttonName;this._lastValidFocusedButtonName=this._focusedButtonName;button.addState(state);to=button;}this._dialog.onFocusButton(from,to);};TNavigation.prototype.getFocusedButton=function(){return this._focusedButtonName?this.getButton(this._focusedButtonName):null;};TNavigation.prototype.getFocusedButtonName=function(){return this._focusedButtonName;};TNavigation.prototype.setDialog=function(dialog){this._dialog=dialog;};TNavigation.prototype.init=function(){this._beforeBlur=null;if(this.desc.buttonNames){var defaultFocusButtonName=this._getDefaultFocusButtonName();this.desc.buttonNames.forEach(function(buttonName){if(buttonName===defaultFocusButtonName){this._focusedButtonName=null;this.navigateToButton(buttonName,UI.ButtonState.FOCUSED);}else{this.getButton(buttonName).blur();}},this);}};TNavigation.prototype.getNextActionOrButtonName=function(fromButtonName,key,keyDownEvent,buttonNamesToIgnore){if(buttonNamesToIgnore===undefined){buttonNamesToIgnore=[];}var result=null,map=keyDownEvent?this.desc.onKeyDown:this.desc.onKeyUp;if(map&&key in map){var mapItem=map[key];if(TGFW.Action.isAction(mapItem)){result=mapItem;}else{result=this._findMapActionFromButtonByMapItem(fromButtonName,mapItem,key,keyDownEvent,buttonNamesToIgnore);}}return result!==fromButtonName?result:null;};TNavigation.prototype.getLastKey=function(){return this._lastKey;};TNavigation.prototype.onKeyUp=function(key){if(key==TGH5.KeyNames.KEY_ENTER){var btn=this.getFocusedButton();this._initiateClick();}else{this._navigateByKey(key,false);}this._lastKey=key;};TNavigation.prototype.onKeyDown=function(key){this._lastKey=key;if(key==TGH5.KeyNames.KEY_ENTER){if(this._focusedButtonName){this.getButton(this._focusedButtonName).press();}}else{this._navigateByKey(key,true);}};TNavigation.prototype.onBlur=function(){var btn=this.getFocusedButton();if(btn){this._beforeBlur={buttonName:this._focusedButtonName,buttonState:btn.getState()};this.navigateToButton(null);}else{this._beforeBlur=null;}};TNavigation.prototype.onFocus=function(){this.restoreButtonFocusAfterBlur();};TNavigation.prototype.restoreButtonFocusAfterBlur=function(){if(this._beforeBlur){this.navigateToButton(this._beforeBlur.buttonName,this._beforeBlur.buttonState);this._beforeBlur=null;}};TNavigation.prototype.onMouseEvent=function(type,x,y,shape){var buttonName=this._getButtonNameByShape(shape);switch(type){case MouseEventType.OVER:this.navigateToButton(buttonName);break;case MouseEventType.OUT:this._blurButton(buttonName);break;case TGFW.UI.MouseEventType.DOWN:if(this._focusedButtonName&&buttonName!=this._focusedButtonName){this.navigateToButton(buttonName);}if(this._focusedButtonName){this.getButton(this._focusedButtonName).press();}break;case MouseEventType.UP:if(this._focusedButtonName&&buttonName!=this._focusedButtonName){this.navigateToButton(buttonName);}else{this._initiateClick();}break;}};TNavigation.prototype._debugDrawButtonsBounds=function(){};TNavigation.prototype._getDefaultFocusButtonName=function(){if(this.desc.buttonNames&&this.desc.buttonNames.length>0)return this.desc.buttonNames[0];return null;};TNavigation.prototype._blurButton=function(buttonName){if(!buttonName)return;var button=this.getButton(buttonName);button.clearState(UI.ButtonState.FOCUSED|UI.ButtonState.PRESSED);this._focusedButtonName=null;};TNavigation.prototype._findMapActionFromButtonByMapItem=function(buttonName,mapItem,key,keyDownEvent,buttonNamesToIgnore){var result=null;buttonNamesToIgnore.push(buttonName);if(buttonName&&mapItem[buttonName]){var t=mapItem[buttonName],navigateTo=TGFW.Utils.isArray(t)?t:[t];var chainButtonNames=[];for(var navigateToIndex=0,ln=navigateTo.length;!result&&navigateToIndex<ln;navigateToIndex++){var item=navigateTo[navigateToIndex];switch(true){case TGFW.Action.isAction(item):result=item;break;case TGFW.Utils.isString(item):if(buttonNamesToIgnore.indexOf(item)<0){if(this.getButton(item).isNavigable()){result=item;}else{chainButtonNames.push(item);}}break;}}if(!result){for(var _i=0;_i<chainButtonNames.length;_i++){var buttonName_1=chainButtonNames[_i];result=this.getNextActionOrButtonName(buttonName_1,key,keyDownEvent,buttonNamesToIgnore);if(result){break;}}}}buttonNamesToIgnore.pop();return result;};TNavigation.prototype._getButtonNameByShape=function(shape){if(!shape)return null;var buttonNames=this.desc.buttonNames||[];for(var _i=0;_i<buttonNames.length;_i++){var buttonName=buttonNames[_i];if(this.getButton(buttonName).hasShape(shape)){return buttonName;}}return null;};TNavigation.prototype._playClickSound=function(source,from,to){var soundId=undefined;if(UI.Button.isButton(to)){switch(source){case SoundClickSource.KEY_ENTER:soundId=to.getDesc().soundClickId;break;case SoundClickSource.KEY_NAVIGATION:soundId=to.getDesc().soundNavigateId;break;}}TGFW.Audio.play(soundId||TGFW.app().desc.audio.clickSoundId,TGH5.Sound.PlayMode.MIX_OR_SKIP);};TNavigation.prototype._initiateClick=function(){var button=this.getFocusedButton();if(button&&button.isEnabled()){this._playClickSound(SoundClickSource.KEY_ENTER,button,button);button.release();this._dialog.onClick(button);}else{this._dialog.onClick(null);}};TNavigation.prototype._navigateByKey=function(key,keyDownEvent){if(!this._focusedButtonName&&this._lastValidFocusedButtonName){this.navigateToButton(this._lastValidFocusedButtonName,UI.ButtonState.FOCUSED);}var focusedButton=this.getFocusedButton(),nextActionOrButtonName=this.getNextActionOrButtonName(this._focusedButtonName,key,keyDownEvent);if(TGFW.Action.isAction(nextActionOrButtonName)){this._dialog.onAction(nextActionOrButtonName,focusedButton);}else if(TGFW.Utils.isString(nextActionOrButtonName)){var btn=this.getButton(nextActionOrButtonName),soundId=btn?btn.getDesc().soundNavigateId:undefined;this._playClickSound(SoundClickSource.KEY_NAVIGATION,focusedButton,btn);this.navigateToButton(nextActionOrButtonName,UI.ButtonState.FOCUSED);}};return TNavigation;}(TGFW.Base);UI.TNavigation=TNavigation;var Navigation=function(_super){__extends(Navigation,_super);function Navigation(){_super.apply(this,arguments);}return Navigation;}(TNavigation);UI.Navigation=Navigation;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TAutoNavigation=function(_super){__extends(TAutoNavigation,_super);function TAutoNavigation(desc){_super.call(this,desc);}TAutoNavigation.prototype.getNextActionOrButtonName=function(fromButtonName,key,keyDownEvent){var result=_super.prototype.getNextActionOrButtonName.call(this,fromButtonName,key,keyDownEvent);if(result)return result;if(!keyDownEvent)return null;var focusedButton=this.getFocusedButton();if(!focusedButton)return null;var direction=null;switch(key){case TGH5.KeyNames.KEY_DOWN:direction=new TGFW.Math.Point(0,1);break;case TGH5.KeyNames.KEY_UP:direction=new TGFW.Math.Point(0,-1);break;case TGH5.KeyNames.KEY_RIGHT:direction=new TGFW.Math.Point(1,0);break;case TGH5.KeyNames.KEY_LEFT:direction=new TGFW.Math.Point(-1,0);break;}if(!direction)return null;var bound=focusedButton.bound;result=this._findNearest(key,bound,bound,direction);if(!result&&this.desc.looped){var testBound=bound.clone();testBound.getPosition().add(direction.clone().inverse().multiply(TGFW.RenderManager.resolutionWidth+TGFW.RenderManager.resolutionHeight));result=this._findNearest(key,bound,testBound,direction,true);}return result;};TAutoNavigation.prototype._getDistance=function(key,from,to){var fromLeft=0+from.getLeft(),toLeft=0+to.getLeft(),fromRight=0+from.getRight(),toRight=0+to.getRight(),toTop=0+to.getTop(),fromBottom=0+from.getBottom(),toBottom=0+to.getBottom(),fromTop=0+from.getTop(),dist,midPointX,midPointY;switch(key){case TGH5.KeyNames.KEY_DOWN:dist=toTop-fromBottom;if(dist<0)return-1;if(fromLeft<=toRight&&fromLeft>=toLeft)return dist;if(fromRight<=toRight&&fromRight>=toLeft)return dist;if(toLeft<=fromRight&&toLeft>=fromLeft)return dist;if(toRight<=fromRight&&toRight>=fromLeft)return dist;midPointX=(fromRight+fromLeft)*0.5;return _Math.min(_Math.abs(midPointX-toLeft),_Math.abs(midPointX-toRight))+dist;break;case TGH5.KeyNames.KEY_UP:dist=fromTop-toBottom;if(dist<0)return-1;if(fromLeft<=toRight&&fromLeft>=toLeft)return dist;if(fromRight<=toRight&&fromRight>=toLeft)return dist;if(toLeft<=fromRight&&toLeft>=fromLeft)return dist;if(toRight<=fromRight&&toRight>=fromLeft)return dist;midPointX=(fromRight+fromLeft)*0.5;return _Math.min(_Math.abs(midPointX-toLeft),_Math.abs(midPointX-toRight))+dist;break;case TGH5.KeyNames.KEY_RIGHT:dist=toLeft-fromRight;if(dist<0)return-1;if(fromTop<=toBottom&&fromTop>=toTop)return dist;if(fromBottom<=toBottom&&fromBottom>=toTop)return dist;if(toTop<=fromBottom&&toTop>=fromTop)return dist;if(toBottom<=fromBottom&&toBottom>=fromTop)return dist;midPointY=(fromTop+fromBottom)*0.5;return _Math.min(_Math.abs(midPointY-toTop),_Math.abs(midPointY-toBottom))+dist;break;case TGH5.KeyNames.KEY_LEFT:dist=fromLeft-toRight;if(dist<0)return-1;if(fromTop<=toBottom&&fromTop>=toTop)return dist;if(fromBottom<=toBottom&&fromBottom>=toTop)return dist;if(toTop<=fromBottom&&toTop>=fromTop)return dist;if(toBottom<=fromBottom&&toBottom>=fromTop)return dist;midPointY=(fromTop+fromBottom)*0.5;return _Math.min(_Math.abs(midPointY-toTop),_Math.abs(midPointY-toBottom))+dist;break;}return-1;};TAutoNavigation.prototype._findNearest=function(key,originalBound,currBound,direction,tryLoop){var originCenter=originalBound.getCenter(),minDist=Number.MAX_VALUE,result=null,minSqDistance=Number.MAX_VALUE;for(var _i=0,_a=this.desc.buttonNames;_i<_a.length;_i++){var buttonName=_a[_i];var button=this.getButton(buttonName);if(!button.isVisible())continue;if(buttonName!==this.getFocusedButtonName()&&button.isNavigable()){var bound=button.bound;if(tryLoop){if(_Math.abs(bound.getCenter().subtract(originCenter).normalize().dot(direction))<=0){continue;}}var dist=this._getDistance(key,currBound,bound);if(dist<0)continue;if(!result||dist<minDist){minDist=dist;result=buttonName;minSqDistance=TGFW.Math.Point.getSqDistance(originCenter,bound.getCenter());}else{if(dist==minDist){var sqDistance=TGFW.Math.Point.getSqDistance(originCenter,bound.getCenter());if(sqDistance<minSqDistance){minDist=dist;result=buttonName;minSqDistance=sqDistance;}}}}}return result;};return TAutoNavigation;}(UI.TNavigation);UI.TAutoNavigation=TAutoNavigation;var AutoNavigation=function(_super){__extends(AutoNavigation,_super);function AutoNavigation(){_super.apply(this,arguments);}return AutoNavigation;}(TAutoNavigation);UI.AutoNavigation=AutoNavigation;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UIManager=function(){function UIManager(){this._currentPopups=[];this._currentDialog=null;TGFW.sdk().addKeyDownListener(function(key){if(TGFW.Animation.ClipManager.isInputDisabled())return;var dlg=UIManager._instance._getCurrentDialog();if(dlg&&dlg.isInputEnabled()){dlg.onKeyDown(key);}});TGFW.sdk().addKeyUpListener(function(key){if(TGFW.Animation.ClipManager.isInputDisabled())return;var dlg=UIManager._instance._getCurrentDialog();if(dlg&&dlg.isInputEnabled()){dlg.onKeyUp(key);}});var currentMouseShape=null;TGFW.sdk().addMouseListener(function(event){if(TGFW.Animation.ClipManager.isInputDisabled())return;if(typeof event.target=='undefined')return;var dlg=UIManager._instance._getCurrentDialog();if(dlg&&dlg.isInputEnabled()){var renderer=TGFW.RenderManager.getRender();TGFW.Utils.PerformanceMonitor.time('M');var shape=renderer.getShapeByMouseEvent(event);TGFW.Utils.PerformanceMonitor.timeEnd('M');if(shape){var eventType=UIManager._mouseEventSDK2FrameworkMap[event.type];if(renderer.isSimulateOverOutForMouseNeeded()){switch(eventType){case TGFW.UI.MouseEventType.DOWN:case TGFW.UI.MouseEventType.UP:case TGFW.UI.MouseEventType.MOVE:if(currentMouseShape!==shape){dlg.onMouseEvent(TGFW.UI.MouseEventType.OUT,event.x,event.y,currentMouseShape);currentMouseShape=shape;dlg.onMouseEvent(TGFW.UI.MouseEventType.OVER,event.x,event.y,currentMouseShape);}break;}}if(eventType===TGFW.UI.MouseEventType.DOWN||eventType===TGFW.UI.MouseEventType.UP){dlg.onMouseEvent(TGFW.UI.MouseEventType.MOVE,event.x,event.y,shape);}dlg.onMouseEvent(eventType,event.x,event.y,shape);}}});}UIManager.init=function(){if(UIManager._instance===null){UIManager._instance=new UIManager();}};UIManager.getDialog=function(name){var dialog=TGFW.SceneManager.getLayout(name);return dialog;};UIManager.hideAllPopups=function(){TGFW.Utils.sliceArray(UIManager._instance._currentPopups,0).forEach(function(dialog){dialog.hide();});UIManager._instance._currentPopups=[];if(UIManager._instance._currentDialog){UIManager._instance._currentDialog.onFocus();}};UIManager.updateSemiTransparent=function(){var semi=false;UIManager._instance._currentPopups.forEach(function(dlg){if(dlg.isSemiTransparentLayer()&&!semi){dlg.showSemiTransparentLayer();semi=true;}else{dlg.hideSemiTransparentLayer();}});};UIManager.unregisterDialog=function(dialog){if(!dialog.isPopup()){UIManager._instance._currentDialog=null;}else{var id=UIManager._instance._currentPopups.indexOf(dialog);if(id>=0){UIManager._instance._currentPopups.splice(id,1);}}var lastDlg=UIManager._instance._getCurrentDialog();if(lastDlg)lastDlg.onFocus();};UIManager.registerDialog=function(dialog){if(UIManager._instance._currentDialog===dialog){return false;}if(!dialog.isPopup()){if(UIManager._instance._currentDialog){UIManager._instance._currentDialog.hide();}UIManager._instance._currentDialog=dialog;}else{var lastDlg=UIManager._instance._getCurrentDialog();if(lastDlg){lastDlg.onBlur();}UIManager._instance._currentPopups.push(dialog);}return true;};UIManager.prototype._getCurrentDialog=function(){if(this._currentPopups.length>0){return this._currentPopups[this._currentPopups.length-1];}else{return this._currentDialog;}};UIManager._instance=null;UIManager._mouseEventSDK2FrameworkMap=(_a={},_a[TGH5.Mouse.Event.MouseDown]=TGFW.UI.MouseEventType.DOWN,_a[TGH5.Mouse.Event.MouseUp]=TGFW.UI.MouseEventType.UP,_a[TGH5.Mouse.Event.MouseMove]=TGFW.UI.MouseEventType.MOVE,_a[TGH5.Mouse.Event.MouseOver]=TGFW.UI.MouseEventType.OVER,_a[TGH5.Mouse.Event.MouseOut]=TGFW.UI.MouseEventType.OUT,_a);return UIManager;var _a;}();TGFW.UIManager=UIManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var SceneManager=function(){function SceneManager(layouts){this._root=new TGFW.Shape.ViewShape({x:0,y:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,visible:true});this._layouts={};for(var _i=0,_a=Object.keys(layouts);_i<_a.length;_i++){var key=_a[_i];this._layouts[key]=TGFW.Base.create(layouts[key]);this._layouts[key].setName(key);this._root.append(this._layouts[key]);}}SceneManager.init=function(layouts){if(SceneManager._instance===null){SceneManager._instance=new SceneManager(layouts);}};SceneManager.attachToRender=function(element){element.attachToRender(SceneManager._instance._root);};SceneManager.detachFromRender=function(element){element.removeFromRender(SceneManager._instance._root);};SceneManager.getLayout=function(name){return SceneManager._instance._layouts[name];};SceneManager.suspendLayout=function(name){var layout=SceneManager._instance._layouts[name];if(layout){SceneManager._instance._root.remove(layout);layout.suspend();SceneManager._instance._layouts[name]=null;}};SceneManager.getRoot=function(){return SceneManager._instance._root;};SceneManager.create=function(){var layouts=SceneManager._instance._layouts;for(var _i=0,_a=Object.keys(layouts);_i<_a.length;_i++){var shapeName=_a[_i];layouts[shapeName].create();}};SceneManager._instance=null;return SceneManager;}();TGFW.SceneManager=SceneManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Profile=function(){function Profile(name,id){this.clean();if(TGFW.Utils.isString(name)){this.setName(name);}if(TGFW.Utils.isNumber(id)){this.setId(id);}}Profile.prototype.setName=function(name){this._name=name;};Profile.prototype.setId=function(id){this._id=id;};Profile.prototype.getId=function(){return this._id;};Profile.prototype.compare=function(profile){if(!profile)return false;return this._name==profile._name&&this._id==profile._id;};Profile.prototype.writeTo=function(data){data.write(this._name);data.write(this._id);};Profile.prototype.readFrom=function(data){this.setName(data.readString());this.setId(data.readInteger());};Profile.prototype.getName=function(){return this._name;};Profile.prototype.clean=function(){this._id=-1;};return Profile;}();TGFW.Profile=Profile;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var GameData=function(){function GameData(){}GameData.getStorageSlotName=function(profileId,gameMode){return TGFW.Utils.numberToString64(profileId)+'_'+TGFW.Utils.numberToString64(gameMode);};GameData.prototype.set=function(profileId,gameMode,data){this._profileId=profileId;this._gameMode=gameMode;this._data=data;};GameData.prototype.readFrom=function(data,readGameData){this._profileId=data.readInteger();this._gameMode=data.readInteger();if(readGameData){this._data=data.readString();}return!!(this._profileId!==null&&this._gameMode!==null);};GameData.prototype.writeTo=function(data,writeGameData){data.write(this._profileId);data.write(this._gameMode);if(writeGameData){data.write(this._data);}};GameData.prototype.removeFromSlot=function(){TGFW.sdk().getStorage().remove(GameData.getStorageSlotName(this._profileId,this._gameMode));};GameData.prototype.saveToSlot=function(){var p=new TGH5.PackedStream();p.write(this._data);TGFW.sdk().getStorage().save(p,GameData.getStorageSlotName(this._profileId,this._gameMode));};GameData.prototype.readFromSlot=function(){var p=TGFW.sdk().getStorage().load(GameData.getStorageSlotName(this._profileId,this._gameMode));if(p){this._data=p.readString();}else{this._data=null;}};GameData.prototype.compare=function(profileId,gameMode){return this._profileId==profileId&&this._gameMode==gameMode;};GameData.prototype.getGameMode=function(){return this._gameMode;};GameData.prototype.getProfileId=function(){return this._profileId;};GameData.prototype.getData=function(){return this._data;};GameData.prototype.setData=function(data){this._data=data;};return GameData;}();TGFW.GameData=GameData;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var TopScoresRecord=function(){function TopScoresRecord(profileId,name,score,data){this.profileId=profileId;this.name=name;this.score=score;if(data)this.data=data;}return TopScoresRecord;}();TGFW.TopScoresRecord=TopScoresRecord;var TTopScores=function(_super){__extends(TTopScores,_super);function TTopScores(desc){_super.call(this,desc);}TTopScores.prototype.init=function(topScoreId){TGFW.sdk().getLeaderboards().createLeaderBoard(topScoreId,this.desc.type,this.desc.numRecords);this._topScoresId=topScoreId;};TTopScores.prototype.addScore=function(profileId,name,score,data){var stream=new TGFW.Utils.TypedBitStream();stream.writeIntInRange(profileId,0,TTopScores._maxProfileId);stream.writeString(name,false);if(TGFW.Utils.isString(data)){stream.writeBit(1);stream.writeString(data,false);}else{stream.writeBit(0);}return TGFW.sdk().getLeaderboards().addScore(this._topScoresId,stream.toString(),score);};TTopScores.prototype.removeRecord=function(index){return TGFW.sdk().getLeaderboards().removeRecord(this._topScoresId,index);};TTopScores.prototype.getRecordsCount=function(){var records=TGFW.sdk().getLeaderboards().getRecords(this._topScoresId);return records?records.length:0;};TTopScores.prototype.getRecord=function(index){var record=TGFW.sdk().getLeaderboards().getRecords(this._topScoresId)[index],stream=new TGFW.Utils.TypedBitStream(record.getName());var profileId=stream.readIntInRange(0,TTopScores._maxProfileId),name=stream.readString(false),data=null;if(stream.readBit()===1){data=stream.readString(false);}return this._createRecord(profileId,name,record.getScore(),data);};TTopScores.prototype._createRecord=function(profileId,name,score,data){return new TopScoresRecord(profileId,name,score,data);};TTopScores.Type={ALLTIME:TGH5.Leaderboards.Type.ALLTIME,WEEKLY:TGH5.Leaderboards.Type.WEEKLY,MONTHLY:TGH5.Leaderboards.Type.MONTHLY};TTopScores._maxProfileId=63;return TTopScores;}(TGFW.Base);TGFW.TTopScores=TTopScores;var TopScores=function(_super){__extends(TopScores,_super);function TopScores(){_super.apply(this,arguments);}return TopScores;}(TTopScores);TGFW.TopScores=TopScores;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){TGFW.onProfileChanged=new TGFW.Signal();var TDataBase=function(_super){__extends(TDataBase,_super);function TDataBase(desc){this._profiles=[];this._currentProfile=null;this._topScores=[];this._gameData=[];this._socialProfile=null;this._socialProfileData=null;this._socialSkipTournament=false;_super.call(this,desc);}TDataBase.prototype.init=function(){this._reset();};TDataBase.prototype.save=function(){var data=new TGH5.PackedStream();data.write(this.desc.saveVersion);var length=this._profiles.length;data.write(this._profiles.indexOf(this._currentProfile));data.write(length);for(var i=0;i<length;i++){this._profiles[i].writeTo(data);}data.write(this._gameData.length);this._gameData.forEach(function(gd){gd.writeTo(data,!this.desc.gameDataFilesSeparated);},this);TGFW.sdk().getLeaderboards().writeTo(data);var saveResult=TGFW.sdk().getStorage().save(data,'db');TGFW.app().getDebugOptions().storage.showStorageSize;return saveResult;};TDataBase.prototype.onSocialProfileSelected=function(profile){this._socialProfile=profile;this._socialProfileData=null;this._currentProfile=new TGFW.Profile(profile.playerName,0);this._socialSkipTournament=false;TGFW.onProfileChanged.dispatch(profile);};TDataBase.prototype.load=function(onDone){var _this=this;TGFW.sdk().getStorage().load('db',function(data){if(!data){onDone(false);return;}TGFW.app().getDebugOptions().storage.showStorageSize;var version=data.readInteger();if(version!==_this.desc.saveVersion){var storage=TGFW.sdk().getStorage();storage.remove('db');for(var i=0;i<_this.desc.maxProfilesCount;i++){for(var j=0;j<_this.desc.gameModesCount;j++){var slotName=TGFW.GameData.getStorageSlotName(i,j);storage.remove(slotName);}}onDone(null);return;}var loadFail=false;data.onError=function(){loadFail=true;};var _currentProfileIndex=data.readInteger(),numProfiles=data.readInteger();if(numProfiles>0){_this._profiles=TGFW.Utils.createArray(numProfiles,TGFW.Profile);if(_currentProfileIndex>=0){_this._currentProfile=_this._profiles[_currentProfileIndex];}else{_this._currentProfile=_this._profiles[0];}for(var i=0;i<numProfiles;i++){_this._profiles[i].readFrom(data);}}else{_this._currentProfile=null;}var numGameData=data.readInteger();for(var i=0;i<numGameData;i++){var gameData=_this._createGameData(data,!_this.desc.gameDataFilesSeparated);if(gameData&&_this.desc.gameDataFilesSeparated){gameData.readFromSlot();}if(gameData){_this._gameData.push(gameData);}}TGFW.sdk().getLeaderboards().readFrom(data);if(loadFail){_this._reset();onDone(false);return;}onDone();});};TDataBase.prototype.setCurrentProfile=function(profile){if(this._currentProfile!==profile){this._currentProfile=profile;this.save();if(!TGFW.app().isDemo()&&!TGFW.app().isFree()){TGFW.sdk().setDefaultUserName(profile.getName());}}};TDataBase.prototype.createNewProfile=function(name,makeCurrent,customData){if(makeCurrent===undefined){makeCurrent=false;}var profile=new TGFW.Profile(name,this._getUniqueId());this._profiles.push(profile);if(makeCurrent){this._currentProfile=profile;}if(customData){this.setGameData(customData,profile.getId());}this.save();return profile;};TDataBase.prototype.removeProfile=function(profile){if(this._currentProfile===profile){this._currentProfile=null;}var index=this._profiles.indexOf(profile);if(index>=0){this._removeGameData(profile.getId(),0,true);this._profiles.splice(index,1);this.save();}};TDataBase.prototype.isProfileNameAlreadyUsed=function(name){for(var _i=0,_a=this._profiles;_i<_a.length;_i++){var profile=_a[_i];if(profile.getName()===name)return true;}return false;};TDataBase.prototype.getProfilesCount=function(){return this._profiles.length;};TDataBase.prototype.getMaxProfilesCount=function(){return this.desc.maxProfilesCount;};TDataBase.prototype.getProfiles=function(){return this._profiles;};TDataBase.prototype.getCurrentProfile=function(){return this._currentProfile;};TDataBase.prototype.removeGameData=function(profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}if(TGFW.sdk().getSocialManager().isEnabled()){TGFW.sdk().getSocialManager().removeGameData(this._socialGetSlotName(gameMode));}else{if(this._removeGameData(profileId,gameMode)){this.save();}}};TDataBase.prototype._socialGetGameMode=function(gameMode){if(gameMode===undefined){gameMode=TDataBase.noGameMode;}if(gameMode<0)return'';return TGFW.sdk().getProductSettings().gameModes[gameMode];};TDataBase.prototype._socialGetSlotName=function(gameMode){if(gameMode===undefined){gameMode=TDataBase.noGameMode;}return DataBase.SOCIAL_SLOT_NAME+this._socialGetGameMode(gameMode);};TDataBase.prototype._getGameDataSocial=function(profileId,gameMode){var _this=this;if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}var result=new TGH5.Deferred(TGFW.sdk());if(gameMode<0){if(this._socialProfileData){result.resolve(this._socialProfileData);}else{TGFW.sdk().getSocialManager().loadGameData(DataBase.SOCIAL_SLOT_NAME).always(function(data){if(data&&data.getStream()){_this._socialProfileData=data.getStream().readString();}else{_this._socialProfileData=null;}result.resolve(_this._socialProfileData);});}}else{this._socialSkipTournament=false;TGFW.sdk().getSocialManager().loadGameData(this._socialGetSlotName(gameMode)).always(function(data){if(data&&data.getStream()){_this._socialSkipTournament=!data.isAllowTournament();result.resolve(data.getStream().readString());}else{result.resolve(null);}result.resolve(_this._socialProfileData);});}return result;};TDataBase.prototype._getGameDataStorage=function(profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}var result=new TGH5.Deferred(TGFW.sdk());var gameData=this._findGameData(profileId,gameMode);result.resolve(gameData?gameData.getData():null);return result;};TDataBase.prototype.getGameData=function(profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}if(TGFW.sdk().getSocialManager().isEnabled()){return this._getGameDataSocial(profileId,gameMode);}else{return this._getGameDataStorage(profileId,gameMode);}};TDataBase.prototype._setGameDataSocial=function(data,profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}var gameData=new TGH5.Social.GameData(this._socialGetSlotName(gameMode),this._socialGetGameMode(gameMode),gameMode>=0),pData=new TGH5.PackedStream();pData.write(data);gameData.setStream(pData);if(gameMode<0){this._socialProfileData=data;}TGFW.sdk().getSocialManager().saveGameData(gameData);};TDataBase.prototype._setGameDataStorage=function(data,profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}var gameData=this._findGameData(profileId,gameMode);if(this.desc.gameDataFilesSeparated){if(!gameData){gameData=this._createGameData(profileId,gameMode,data);this._gameData.push(gameData);this.save();}else{gameData.setData(data);}gameData.saveToSlot();}else{if(gameData){gameData.setData(data);}else{this._gameData.push(this._createGameData(profileId,gameMode,data));}this.save();}};TDataBase.prototype.setGameData=function(data,profileId,gameMode){if(profileId===undefined){profileId=TDataBase.noProfileId;}if(gameMode===undefined){gameMode=TDataBase.noGameMode;}if(TGFW.sdk().getSocialManager().isEnabled()){this._setGameDataSocial(data,profileId,gameMode);}else{this._setGameDataStorage(data,profileId,gameMode);}};TDataBase.prototype.getTopScores=function(topScoresId){return this._topScores[topScoresId];};TDataBase.prototype.addScore=function(topScoreId,score,data){if(TGFW.sdk().getSocialManager().isEnabled()){return TGFW.sdk().getSocialManager().submitScore(this._socialGetGameMode(topScoreId),score,this._socialSkipTournament);}else{var result=new TGH5.Deferred(TGFW.sdk());var ts=this.getTopScores(topScoreId);if(ts){if(ts.addScore(this._currentProfile.getId(),this.getCurrentProfile().getName(),score,data)){this.save();result.resolve(true);return result;}}result.reject();return result;}};TDataBase.prototype._createGameData=function(){var gameData=new TGFW.GameData();switch(arguments.length){case 2:var data=arguments[0],readGameData=arguments[1];if(!gameData.readFrom(data,readGameData)){return null;}break;case 3:var profileId=arguments[0],gameMode=arguments[1],data=arguments[2];gameData.set(profileId,gameMode,data);break;}return gameData;};TDataBase.prototype._findGameData=function(profileId,gameMode){for(var _i=0,_a=this._gameData;_i<_a.length;_i++){var gameData=_a[_i];if(gameData.compare(profileId,gameMode)){return gameData;}}return null;};TDataBase.prototype._removeGameData=function(profileId,gameMode,filterByProfileIdOnly){if(filterByProfileIdOnly===undefined){filterByProfileIdOnly=false;}var result=false;for(var i=this._gameData.length-1;i>=0;i--){var data=this._gameData[i];if(data.getProfileId()===profileId){if(!filterByProfileIdOnly&&gameMode!==data.getGameMode())continue;result=true;if(this.desc.gameDataFilesSeparated){data.removeFromSlot();}this._gameData.splice(i,1);}}return result;};TDataBase.prototype._reset=function(){this._profiles.length=0;this._currentProfile=null;this._topScores.length=0;this._gameData.length=0;for(var i=0;i<this.desc.topScores.length;i++){this._topScores[i]=TGFW.Base.create(this.desc.topScores[i]);this._topScores[i].init(i);}};TDataBase.prototype._getUniqueId=function(){var allId=[];for(var _i=0,_a=this._profiles;_i<_a.length;_i++){var profile=_a[_i];allId.push(profile.getId());}for(var _b=0,_c=this._topScores;_b<_c.length;_b++){var ts=_c[_b];var recordsCount=ts.getRecordsCount();for(var j=0;j<recordsCount;j++){allId.push(ts.getRecord(j).profileId);}}allId.sort();for(var i=0;i<allId.length-1;i++){if(allId[i+1]-allId[i]>1){return allId[i]+1;}}if(allId.length>0)return allId[allId.length-1]+1;return 0;};TDataBase.prototype._cheatCheckMaxSaveSize=function(){while(this.getProfiles().length>0){this.removeProfile(this.getProfiles()[0]);}for(var playerIndex=0;playerIndex<this.desc.maxProfilesCount;playerIndex++){var name_1='WWWWWWWWWWW'+String.fromCharCode(65+playerIndex),profile=this.createNewProfile(name_1,playerIndex===0);for(var topScoreIndex=0;topScoreIndex<this.desc.topScores.length;topScoreIndex++){var topScore=this.desc.topScores[topScoreIndex];for(var scoreRecord=0;scoreRecord<topScore.numRecords;scoreRecord++){var score=2000000000+playerIndex*100+scoreRecord,ts=this.getTopScores(topScoreIndex);ts.addScore(profile.getId(),name_1,score);}}}this.save();};TDataBase.noGameMode=-1;TDataBase.noProfileId=-1;TDataBase.SOCIAL_SLOT_NAME='db';return TDataBase;}(TGFW.Base);TGFW.TDataBase=TDataBase;var DataBase=function(_super){__extends(DataBase,_super);function DataBase(){_super.apply(this,arguments);}return DataBase;}(TDataBase);TGFW.DataBase=DataBase;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Particles;(function(Particles){var Particle=function(){function Particle(){this.isAlive=false;this.color=new TGFW.Render.Color(255,255,255,1);}Particle.prototype.reset=function(){this.isAlive=false;};Particle.prototype.emit=function(){this._time=0;this.isAlive=true;this._prev=this.pos.clone();this._progress=0;};Particle.prototype.update=function(containerPos,containerPrevPos,doUpdateColor,dt,dtSec){this._time+=dt;this._progress=this._time/this._liveTime;if(this._progress>=1){this._progress=1;this.isAlive=false;}this._updatePos(containerPos,containerPrevPos,dtSec);this._updateScale();this._updateSpin(containerPos);this._updateColor(doUpdateColor);};Particle.prototype._updatePos=function(containerPos,containerPrevPos,dtSec){this._dir.add(this._gravity.clone().multiply(dtSec));this.pos.add(this._dir.clone().multiply(dtSec));if(this._relative===true){this.pos.add(containerPos.clone().subtract(containerPrevPos));}};Particle.prototype._updateScale=function(){this.scale=TGFW.Utils.interpolateNumber(this._scaleStart,this._scaleEnd,this._progress);};Particle.prototype._updateSpin=function(containerPos){if(this._rotationIsDir){var curPos=this.pos.clone();if(this._relative){curPos.subtract(containerPos);}var pos=curPos.clone();pos.subtract(this._prev);if(pos.x<0){this.spin=this._spinStart+_Math.atan(pos.y/pos.x)+_Math.PI;}else if(pos.x>0){this.spin=this._spinStart+_Math.atan(pos.y/pos.x);}else{if(pos.y<0){this.spin=this._spinStart-Particle.angle90inRads;}else if(pos.y>0){this.spin=this._spinStart+Particle.angle90inRads;}else{this.spin=this._spinStart;}}this._prev.setPoint(curPos);}else{this.spin=TGFW.Utils.interpolateNumber(this._spinStart,this._spinEnd,this._progress);}};Particle.prototype._updateColor=function(doUpdateColor){if(doUpdateColor){this.color.interpolate(this._colorStart,this._colorEnd,this._progress);}else{this.color.interpolateOpacity(this._colorStart,this._colorEnd,this._progress);}};Particle.angle90inRads=TGFW.Utils.degreesToRadians(90);return Particle;}();Particles.Particle=Particle;}(Particles=TGFW.Particles||(TGFW.Particles={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TLoadingDialog=function(_super){__extends(TLoadingDialog,_super);function TLoadingDialog(desc){_super.call(this,desc);}TLoadingDialog.prototype.create=function(){if(this._created)return;this._created=true;_super.prototype.create.call(this);};TLoadingDialog.prototype.show=function(){if(this.isVisible())return;_super.prototype.show.call(this);this.getProgressElement().hide();};TLoadingDialog.prototype.getProgressRect=function(){return this._progressRect;};TLoadingDialog.prototype.getProgressElement=function(){return this.getBaseShape(this.desc.progressShapeName);};TLoadingDialog.prototype.setDesc=function(desc){this._progressRect=desc.progressRect;_super.prototype.setDesc.call(this,desc);};TLoadingDialog.prototype.setProgress=function(percent){var shape=this.getProgressElement();if(shape){var pbWidth=percent*this._progressRect.getWidth();shape.setSize(pbWidth,shape.size.getY());shape.show();}};return TLoadingDialog;}(UI.TDialog);UI.TLoadingDialog=TLoadingDialog;var LoadingDialog=function(_super){__extends(LoadingDialog,_super);function LoadingDialog(){_super.apply(this,arguments);}return LoadingDialog;}(TLoadingDialog);UI.LoadingDialog=LoadingDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TLoadingPopupDialog=function(_super){__extends(TLoadingPopupDialog,_super);function TLoadingPopupDialog(desc){this._timer=new TGFW.Timer(this._onTimer.bind(this));this._dotsNumber=0;_super.call(this,desc);}TLoadingPopupDialog.prototype.show=function(){_super.prototype.show.call(this);this._dotsNumber=0;this._update();this._timer.start(TLoadingPopupDialog._dotAnimationInterval,true);};TLoadingPopupDialog.prototype.hide=function(){_super.prototype.hide.call(this);this._timer.stop();};TLoadingPopupDialog.prototype._onTimer=function(){this._update();this._dotsNumber=(this._dotsNumber+1)%4;};TLoadingPopupDialog.prototype._update=function(){var layout=this.getArrangedLayout(this.desc.layoutShape);layout.getTextShape(this.desc.dotsShape).updateText({dots:'...'.substr(0,this._dotsNumber)});};TLoadingPopupDialog._dotAnimationInterval=250;return TLoadingPopupDialog;}(UI.TDialog);UI.TLoadingPopupDialog=TLoadingPopupDialog;var LoadingPopupDialog=function(_super){__extends(LoadingPopupDialog,_super);function LoadingPopupDialog(){_super.apply(this,arguments);}return LoadingPopupDialog;}(TLoadingPopupDialog);UI.LoadingPopupDialog=LoadingPopupDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TMainMenuDialog=function(_super){__extends(TMainMenuDialog,_super);function TMainMenuDialog(desc){this._quitRequest=null;_super.call(this,desc);}TMainMenuDialog.prototype.onFocus=function(){_super.prototype.onFocus.call(this);this.updateUserName();};TMainMenuDialog.prototype._beforeShow=function(){_super.prototype._beforeShow.call(this);};TMainMenuDialog.prototype.onKeyUp=function(key){switch(key){case TGH5.KeyNames.KEY_EXIT:if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showDemoOverDialog(TGH5.ExitRequest.broadcast);}else{this._showQuitConfirmationDialog(TGH5.ExitRequest.broadcast);}break;case TGH5.KeyNames.KEY_BACKSPACE:{var platformName=TGFW.sdk().getPlatformName();if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showDemoOverDialog(TGH5.ExitRequest.regular);}else{switch(platformName){case TGH5.Platforms.HOPPER:case TGH5.Platforms.COMCAST:case TGH5.Platforms.VIDEOTRON:case TGH5.Platforms.SHAW:case TGH5.Platforms.COX:case TGH5.Platforms.SAMSUNG:case TGH5.Platforms.SKY:this._showQuitConfirmationDialog(TGH5.ExitRequest.regular);break;default:TGFW.app().exit(TGH5.ExitRequest.regular);break;}}}break;default:_super.prototype.onKeyUp.call(this,key);break;}};TMainMenuDialog.prototype.onAction=function(action,button){var _this=this;var socialManager=TGFW.sdk().getSocialManager();switch(action){case TMainMenuDialog.chooseLanguageDialogAction:TGFW.app().dialogs.chooseLanguage.showModal(function(dialog,result,data){_this._onChooseLanguageResult(dialog,result,data);});break;case TMainMenuDialog.profilesDialogAction:if(socialManager.isEnabled()){if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showNotAvailableMessage(TGH5.Reporting.PaymentEventStatus.Profile);}else{socialManager.showProfileDialog();}}else{if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showNotAvailableMessage(TGH5.Reporting.PaymentEventStatus.Profile);}else{TGFW.app().dialogs.profiles.showModal(function(dialog,result,profileIndex){_this._onProfilesDialogResult(dialog,result,profileIndex);});}}break;case TMainMenuDialog.howToPlayDialogAction:TGFW.app().dialogs.howToPlay.showModal(function(dialog,result,data){_this._onHowToPlayResult(dialog,result,data);});break;case TMainMenuDialog.topScoresDialogAction:if(socialManager.isEnabled()){if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showNotAvailableMessage(TGH5.Reporting.PaymentEventStatus.TopScores);}else{socialManager.showLeaderboardDialog();}}else{if(TGFW.app().isDemo()||TGFW.app().isFree()){this._showNotAvailableMessage(TGH5.Reporting.PaymentEventStatus.TopScores);}else{TGFW.app().dialogs.topScores.showModal(function(dialog,result,data){_this._onTopScoresResult(dialog,result,data);});}}break;case TMainMenuDialog.quitConfirmationDialogAction:if(TGFW.sdk().getPlatformName()!=TGH5.Platforms.HOPPER&&(TGFW.app().isDemo()||TGFW.app().isFree())){this._showDemoOverDialog(TGH5.ExitRequest.regular);}else{this._showQuitConfirmationDialog(TGH5.ExitRequest.regular);}break;default:_super.prototype.onAction.call(this,action,button);break;}};TMainMenuDialog.prototype._showNotAvailableMessage=function(param){var _this=this;var btn=this.getNavigation().getFocusedButton(),beforeBlur;if(btn){beforeBlur={buttonName:btn.getName(),buttonState:btn.getState()};this.getNavigation().navigateToButton(null);}else{beforeBlur=null;}TGFW.sdk().requestPaymentScreen(TGH5.Payment.ScreenNames.NotAvailable,param).always(function(){_this.getNavigation().navigateToButton(beforeBlur.buttonName,beforeBlur.buttonState);});};TMainMenuDialog.prototype.updateUserName=function(){var text=this.getTextShape(this.desc.userNameShape);if(text){text.updateText({name:this._getPrintableUserName()});}};TMainMenuDialog.prototype._getPrintableUserName=function(){var profile=TGFW.app().getDataBase().getCurrentProfile();return profile?profile.getName():'';};TMainMenuDialog.prototype._onProfilesDialogResult=function(dlg,result,profileIndex){result==UI.DialogResult.OK;this.updateUserName();dlg.hide();};TMainMenuDialog.prototype._onChooseLanguageResult=function(dlg,result,data){switch(result){case UI.DialogResult.OK:TGFW.LocalizationManager.change(data.languageCode);break;case UI.DialogResult.CANCEL:if(data&&data.key){this._navigation.restoreButtonFocusAfterBlur();this.simulateNavigation(data.key);}break;}dlg.hide();};TMainMenuDialog.prototype._onHowToPlayResult=function(dlg,result,data){dlg.hide();};TMainMenuDialog.prototype._onTopScoresResult=function(dlg,result,data){dlg.hide();};TMainMenuDialog.prototype._onQuitConfirmationResult=function(dlg,result){if(result==UI.DialogResult.YES){TGFW.app().exit(this._quitRequest);}dlg.hide();};TMainMenuDialog.prototype._showDemoOverDialog=function(exitTo){TGFW.app().dialogs.demoOver.setExitTo(exitTo);TGFW.app().dialogs.demoOver.show();};TMainMenuDialog.prototype._showQuitConfirmationDialog=function(exitTo){var _this=this;this._quitRequest=exitTo;TGFW.app().dialogs.quitConfirmation.showModal(function(dialog,result){_this._onQuitConfirmationResult(dialog,result);});};TMainMenuDialog.chooseLanguageDialogAction=new TGFW.Action();TMainMenuDialog.profilesDialogAction=new TGFW.Action();TMainMenuDialog.howToPlayDialogAction=new TGFW.Action();TMainMenuDialog.topScoresDialogAction=new TGFW.Action();TMainMenuDialog.quitConfirmationDialogAction=new TGFW.Action();return TMainMenuDialog;}(UI.TDialog);UI.TMainMenuDialog=TMainMenuDialog;var MainMenuDialog=function(_super){__extends(MainMenuDialog,_super);function MainMenuDialog(){_super.apply(this,arguments);}return MainMenuDialog;}(TMainMenuDialog);UI.MainMenuDialog=MainMenuDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TPaymentDialog=function(_super){__extends(TPaymentDialog,_super);function TPaymentDialog(desc){_super.call(this,desc);this._openedFrom='main-screen';}TPaymentDialog.prototype.create=function(){var _this=this;_super.prototype.create.call(this);TGFW.LocalizationManager.onLanguageChanged.add(function(){_this._onLocalizeCallback();});};TPaymentDialog.prototype._updatePaymentItem=function(layout,product,group){layout.show();if(group.textShapeNames){for(var i=0;i<group.textShapeNames.length;i++){var shape=layout.getTextShape(group.textShapeNames[i]);if(shape){shape.updateText(product);}}}};TPaymentDialog.prototype._updatePaymentButton=function(button,product,group,isCancelButton){button.setData(product);this._updatePaymentItem(button,product,group);};TPaymentDialog.prototype._onLocalizeCallback=function(){TGFW.app().getPaymentManager().requestProducts();};TPaymentDialog.prototype.setOpenedFrom=function(openedFrom){this._openedFrom=openedFrom;};TPaymentDialog.prototype._updatePaymentButtons=function(){var products=TGFW.app().getPaymentManager().getProducts();var consumableProducts=products.filter(function(it){return!it.isSubscription;}),subscriptionProducts=products.filter(function(it){return it.isSubscription;});if(this.desc.consumableButtons){var names=this.desc.consumableButtons.names;for(var i=0;i<names.length;i++){var button=this.getButton(names[i]);if(i>=consumableProducts.length){button.hide();}else{this._updatePaymentButton(button,consumableProducts[i],this.desc.consumableButtons,false);}}}if(this.desc.subscriptionButtons){var names=this.desc.subscriptionButtons.names;for(var i=0;i<names.length;i++){var button=this.getButton(names[i]);if(i>=subscriptionProducts.length){button.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Purchased||product.status==TGH5.Payment.ProductStatus.Cancellation){button.hide();}else{this._updatePaymentButton(button,subscriptionProducts[i],this.desc.subscriptionButtons,false);}}}}if(this.desc.cancelSubscriptionButtons){var names=this.desc.cancelSubscriptionButtons.names;for(var i=0;i<names.length;i++){var button=this.getButton(names[i]);if(i>=subscriptionProducts.length){button.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Purchased){this._updatePaymentButton(button,subscriptionProducts[i],this.desc.cancelSubscriptionButtons,true);}else{button.hide();}}}}if(this.desc.cancelationItems){var names=this.desc.cancelationItems.names;for(var i=0;i<names.length;i++){var layout=this.getLayout(names[i]);if(i>=subscriptionProducts.length){layout.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Cancellation){this._updatePaymentItem(layout,subscriptionProducts[i],this.desc.cancelationItems);}else{layout.hide();}}}}};TPaymentDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this._updatePaymentButtons();};TPaymentDialog.prototype._onPaymentResult=function(isPurchased,productInfo){};TPaymentDialog.prototype._onSubscriptionCanceled=function(productInfo){};TPaymentDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case TPaymentDialog.buyDialogAction:var productInfo=button.getData();TGFW.app().getPaymentManager().buyProduct(this._openedFrom,productInfo.productId,function(result){if(result){_this._updatePaymentButtons();}_this._onPaymentResult(result,productInfo);});break;case TPaymentDialog.cancelSubscriptionDialogAction:var productInfo=button.getData();if(TGFW.app().dialogs.cancelSubscription){var dialog=TGFW.app().dialogs.cancelSubscription;dialog.setProduct(productInfo);dialog.showModal(function(dialog,result){dialog.hide();if(result==TGFW.UI.DialogResult.YES){_this._cancelSubscription(productInfo);}});}else{this._cancelSubscription(productInfo);}break;default:_super.prototype.onAction.call(this,action,button);}};TPaymentDialog.prototype._cancelSubscription=function(productInfo){var _this=this;TGFW.app().getPaymentManager().cancelSubscription(productInfo.productId,function(){TGFW.app().getPaymentManager().requestProducts(function(){_this._updatePaymentButtons();_this._onSubscriptionCanceled(productInfo);});});};TPaymentDialog.buyDialogAction=new TGFW.Action();TPaymentDialog.cancelSubscriptionDialogAction=new TGFW.Action();return TPaymentDialog;}(UI.TDialog);UI.TPaymentDialog=TPaymentDialog;var PaymentDialog=function(_super){__extends(PaymentDialog,_super);function PaymentDialog(){_super.apply(this,arguments);}return PaymentDialog;}(TPaymentDialog);UI.PaymentDialog=PaymentDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TCancelSubscriptionDialog=function(_super){__extends(TCancelSubscriptionDialog,_super);function TCancelSubscriptionDialog(){_super.apply(this,arguments);}TCancelSubscriptionDialog.prototype.setProduct=function(productInfo){this._productInfo=productInfo;};TCancelSubscriptionDialog.prototype.getProduct=function(){return this._productInfo;};TCancelSubscriptionDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);if(this.desc.productTextShapeNames&&this._productInfo){for(var i=0;i<this.desc.productTextShapeNames.length;i++){var shape=this.getTextShape(this.desc.productTextShapeNames[i]);shape.updateText(this._productInfo);}}};return TCancelSubscriptionDialog;}(UI.TDialog);UI.TCancelSubscriptionDialog=TCancelSubscriptionDialog;var CancelSubscriptionDialog=function(_super){__extends(CancelSubscriptionDialog,_super);function CancelSubscriptionDialog(){_super.apply(this,arguments);}return CancelSubscriptionDialog;}(TCancelSubscriptionDialog);UI.CancelSubscriptionDialog=CancelSubscriptionDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TMessageDialog=function(_super){__extends(TMessageDialog,_super);function TMessageDialog(desc){this._timer=new TGFW.Timer(this._onTimer.bind(this));_super.call(this,desc);}TMessageDialog.prototype.restartTimer=function(time){this._timer.start(time);};TMessageDialog.prototype.getLeaveTime=function(){return this.desc.leaveTime;};TMessageDialog.prototype.show=function(){_super.prototype.show.call(this);var lt=this.getLeaveTime();if(lt){this._timer.start(lt);}};TMessageDialog.prototype._onTimer=function(){var action=this.desc.action;if(action)action.invoke();};return TMessageDialog;}(UI.TDialog);UI.TMessageDialog=TMessageDialog;var MessageDialog=function(_super){__extends(MessageDialog,_super);function MessageDialog(){_super.apply(this,arguments);}return MessageDialog;}(TMessageDialog);UI.MessageDialog=MessageDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TPagedDialog=function(_super){__extends(TPagedDialog,_super);function TPagedDialog(desc){this._currentPage=0;_super.call(this,desc);}TPagedDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this._currentPage=0;this.setContentForPage(this._currentPage);};TPagedDialog.prototype._showShapes=function(){if(this.isVisible())return;this._visible=true;for(var _i=0,_a=this._children;_i<_a.length;_i++){var child=_a[_i];if(!this._skipShow(child.getName())){child.setVisibility(true);}}};TPagedDialog.prototype.setContentForPage=function(pageIndex){this.desc.pageShapeNames.forEach(function(pageName,index){if(index!==pageIndex)this.getBaseShape(pageName).setVisibility(false);},this);this.getBaseShape(this.desc.pageShapeNames[pageIndex]).setVisibility(true);};TPagedDialog.prototype.onAction=function(action){switch(action){case PagedDialog.nextPageAction:this._setPage(this._currentPage+1);break;case PagedDialog.previousPageAction:this._setPage(this._currentPage-1);break;default:_super.prototype.onAction.call(this,action);break;}};TPagedDialog.prototype._skipShow=function(shapeName){return this.desc.pageShapeNames.indexOf(shapeName)>=0;};TPagedDialog.prototype._setPage=function(pageId){var pagesNum=this.desc.pageShapeNames.length,lastPage=this._currentPage;if(this.desc.pagesLooped){this._currentPage=(pageId+pagesNum)%pagesNum;}else{this._currentPage=_Math.min(_Math.max(pageId,0),pagesNum-1);}if(lastPage!==this._currentPage){this.setContentForPage(this._currentPage);}};TPagedDialog.nextPageAction=new TGFW.Action();TPagedDialog.previousPageAction=new TGFW.Action();return TPagedDialog;}(UI.TDialog);UI.TPagedDialog=TPagedDialog;var PagedDialog=function(_super){__extends(PagedDialog,_super);function PagedDialog(){_super.apply(this,arguments);}return PagedDialog;}(TPagedDialog);UI.PagedDialog=PagedDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var THowToPlayDialog=function(_super){__extends(THowToPlayDialog,_super);function THowToPlayDialog(desc){_super.call(this,desc);}THowToPlayDialog.prototype.show=function(){_super.prototype.show.call(this);};THowToPlayDialog.prototype.create=function(){_super.prototype.create.call(this);this.getTextShape(this.desc.versionShapeName).updateText({version:TGFW.app().getVersion()});this._upButton=this.getButton(this.desc.upButtonName);this._downButton=this.getButton(this.desc.downButtonName);};THowToPlayDialog.prototype.setContentForPage=function(pageIndex){if(this._currentPage===0){this._upButton.release();}if(this._currentPage===this.desc.pageShapeNames.length-1){this._downButton.release();}_super.prototype.setContentForPage.call(this,pageIndex);this.getTextShape(this.desc.versionShapeName).setVisibility(pageIndex===0);var pageIndicator=this.getArrangedLayout(this.desc.pageIndicatorShapeName);pageIndicator.getTextShape(this.desc.currentPageShapeName).updateText({currentPage:pageIndex+1});pageIndicator.getTextShape(this.desc.pagesCountShapeName).updateText({pagesCount:this.desc.pageShapeNames.length});if(!pageIndicator.isVisible()){pageIndicator.show();}this._updateButtonsDisableState();};THowToPlayDialog.prototype.onKeyDown=function(key){if(this.isInputEnabled()){switch(key){case TGH5.KeyNames.KEY_ENTER:this.getNavigation().navigateToButton(this.desc.closeButtonName,UI.ButtonState.FOCUSED);break;case TGH5.KeyNames.KEY_UP:if(this._upButton.isEnabled()){this._upButton.press();this.onAction(TGFW.UI.PagedDialog.previousPageAction);}return;case TGH5.KeyNames.KEY_DOWN:if(this._downButton.isEnabled()){this._downButton.press();this.onAction(TGFW.UI.PagedDialog.nextPageAction);}return;}}_super.prototype.onKeyDown.call(this,key);};THowToPlayDialog.prototype.onKeyUp=function(key){if(this.isInputEnabled()){switch(key){case TGH5.KeyNames.KEY_UP:if(this._upButton.isEnabled()){this._upButton.reset();}break;case TGH5.KeyNames.KEY_DOWN:if(this._downButton.isEnabled()){this._downButton.reset();}break;}}_super.prototype.onKeyUp.call(this,key);};THowToPlayDialog.prototype._skipShow=function(shapeName){return shapeName==this.desc.pageIndicatorShapeName||_super.prototype._skipShow.call(this,shapeName);};THowToPlayDialog.prototype._updateButtonsDisableState=function(){if(this._currentPage>0){this._upButton.enable();}else{this._upButton.disable();}if(this._currentPage<this.desc.pageShapeNames.length-1){this._downButton.enable();}else{this._downButton.disable();}};return THowToPlayDialog;}(UI.TPagedDialog);UI.THowToPlayDialog=THowToPlayDialog;var HowToPlayDialog=function(_super){__extends(HowToPlayDialog,_super);function HowToPlayDialog(){_super.apply(this,arguments);}return HowToPlayDialog;}(THowToPlayDialog);UI.HowToPlayDialog=HowToPlayDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TTopScoresLine=function(_super){__extends(TTopScoresLine,_super);function TTopScoresLine(desc){this._scoreShapeName=desc.scoreShapeName;this._nameShapeName=desc.nameShapeName;this._rankShapeName=desc.rankShapeName;_super.call(this,desc);}TTopScoresLine.prototype.setContent=function(lineIndex,topScoresId,isVisible,showRank){var rankShape=this.getTextShape(this._rankShapeName),scoreShape=this.getTextShape(this._scoreShapeName),nameShape=this.getTextShape(this._nameShapeName);if(isVisible){var ts=TGFW.app().getDataBase().getTopScores(topScoresId),record=ts.getRecord(lineIndex);scoreShape.updateText({score:record.score});nameShape.updateText({name:record.name});}scoreShape.setVisibility(isVisible);nameShape.setVisibility(isVisible);rankShape.setVisibility(showRank);};return TTopScoresLine;}(TGFW.Shape.TLayout);UI.TTopScoresLine=TTopScoresLine;var TTopScoresDialog=function(_super){__extends(TTopScoresDialog,_super);function TTopScoresDialog(desc){_super.call(this,desc);}TTopScoresDialog.prototype.setContentForPage=function(pageIndex){_super.prototype.setContentForPage.call(this,pageIndex);var topScoresId=this.desc.topScoreIdsPerPage[pageIndex],ts=TGFW.app().getDataBase().getTopScores(topScoresId),recordsCount=ts.getRecordsCount();this.desc.lineShapeNames.forEach(function(lineShapeName,lineIndex){var element=this.getBaseShape(lineShapeName);if(lineIndex<recordsCount){element.setContent(lineIndex,topScoresId,true,recordsCount>0);}else{element.setContent(lineIndex,null,false,recordsCount>0);}},this);this.desc.pageShapeNames.forEach(function(ageShapeName,index){this.getBaseShape(ageShapeName).setVisibility(index===pageIndex);},this);};return TTopScoresDialog;}(UI.TPagedDialog);UI.TTopScoresDialog=TTopScoresDialog;var TopScoresDialog=function(_super){__extends(TopScoresDialog,_super);function TopScoresDialog(){_super.apply(this,arguments);}return TopScoresDialog;}(TTopScoresDialog);UI.TopScoresDialog=TopScoresDialog;var TopScoresLine=function(_super){__extends(TopScoresLine,_super);function TopScoresLine(){_super.apply(this,arguments);}return TopScoresLine;}(TTopScoresLine);UI.TopScoresLine=TopScoresLine;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var letterAction=function(_super){__extends(letterAction,_super);function letterAction(){_super.apply(this,arguments);}letterAction.prototype.getType=function(){return letterAction.type;};letterAction.type='AddLetterAction';return letterAction;}(TGFW.Action);UI.letterAction=letterAction;var EnterProfileNameDialogResult=function(){function EnterProfileNameDialogResult(name,data){this.name=name;this.data=data;}return EnterProfileNameDialogResult;}();UI.EnterProfileNameDialogResult=EnterProfileNameDialogResult;var TEnterProfileNameDialog=function(_super){__extends(TEnterProfileNameDialog,_super);function TEnterProfileNameDialog(desc){_super.call(this,desc);this._cursorTimer=new TGFW.Timer(this._onTimer.bind(this));}TEnterProfileNameDialog.prototype.updatePlayerName=function(){this.getTextShape(this.desc.editTextShapeName).updateText({text:this._playerName,cursor:this._cursorVisibility?'|':''});};TEnterProfileNameDialog.prototype.hide=function(){this._cursorTimer.stop();_super.prototype.hide.call(this);};TEnterProfileNameDialog.prototype.getPlayerName=function(){return this._playerName;};TEnterProfileNameDialog.prototype.onKeyDown=function(key){_super.prototype.onKeyDown.call(this,key);var buttonName=this._getButtonNameByKey(key);if(buttonName){this.getNavigation().navigateToButton(buttonName,UI.ButtonState.FOCUSED|UI.ButtonState.PRESSED);var btn=this.getNavigation().getButton(buttonName);btn.press();}};TEnterProfileNameDialog.prototype.onKeyUp=function(key){_super.prototype.onKeyUp.call(this,key);var buttonName=this._getButtonNameByKey(key),action=this._getActionByKey(key);if(buttonName){var btn=this.getNavigation().getButton(buttonName);btn.release();}if(action)this.onAction(action);};TEnterProfileNameDialog.prototype.onAction=function(action){switch(action){case TEnterProfileNameDialog.deleteLetterAction:this._deleteLetter();break;case TEnterProfileNameDialog.resetAction:this._deleteLetter(true);break;case TEnterProfileNameDialog.doneAction:this._onResult(UI.DialogResult.OK,new EnterProfileNameDialogResult(this._playerName,this._playerData));break;default:var letter=action.getArguments()[0];if(letter){this._addLetter(letter);}else{_super.prototype.onAction.call(this,action);}break;}};TEnterProfileNameDialog.prototype._beforeShow=function(){_super.prototype._beforeShow.call(this);this._playerName='';this._cursorVisibility=true;this.updatePlayerName();this._cursorTimer.start(TEnterProfileNameDialog.cursorTimeOut,true);};TEnterProfileNameDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this._updateDoneButtonState();};TEnterProfileNameDialog.prototype._addLetter=function(letter){if(this._playerName.length>=this.desc.maxPlayerNameLength)return;if(letter===' '&&this._playerName.length==0)return;this._playerName+=letter;this._updateDoneButtonState();this.updatePlayerName();};TEnterProfileNameDialog.prototype._updateDoneButtonState=function(){if(this._playerName.length<=0){this._navigation.getDoneButton().disable();}else{this._navigation.getDoneButton().enable();}};TEnterProfileNameDialog.prototype._deleteLetter=function(all){if(all!==true){this._playerName=this._playerName.substr(0,this._playerName.length-1);}else{this._playerName='';}this._updateDoneButtonState();this.updatePlayerName();};TEnterProfileNameDialog.prototype._onTimer=function(){this._cursorVisibility=!this._cursorVisibility;this.updatePlayerName();};TEnterProfileNameDialog.prototype._getButtonNameByKey=function(key){var action=this._getActionByKey(key),buttonName=null;if(action){for(var _i=0,_a=Object.keys(this.desc.layout);_i<_a.length;_i++){var key_1=_a[_i];var value=this.desc.layout[key_1];if(value&&value.action===action){buttonName=key_1;}}}return buttonName;};TEnterProfileNameDialog.prototype._getActionByKey=function(key){var result=null;switch(key){case TGH5.KeyNames.KEY_A:result=TEnterProfileNameDialog.aKeyAction;break;case TGH5.KeyNames.KEY_B:result=TEnterProfileNameDialog.bKeyAction;break;case TGH5.KeyNames.KEY_C:result=TEnterProfileNameDialog.cKeyAction;break;case TGH5.KeyNames.KEY_D:result=TEnterProfileNameDialog.dKeyAction;break;case TGH5.KeyNames.KEY_E:result=TEnterProfileNameDialog.eKeyAction;break;case TGH5.KeyNames.KEY_F:result=TEnterProfileNameDialog.fKeyAction;break;case TGH5.KeyNames.KEY_G:result=TEnterProfileNameDialog.gKeyAction;break;case TGH5.KeyNames.KEY_H:result=TEnterProfileNameDialog.hKeyAction;break;case TGH5.KeyNames.KEY_I:result=TEnterProfileNameDialog.iKeyAction;break;case TGH5.KeyNames.KEY_J:result=TEnterProfileNameDialog.jKeyAction;break;case TGH5.KeyNames.KEY_K:result=TEnterProfileNameDialog.kKeyAction;break;case TGH5.KeyNames.KEY_L:result=TEnterProfileNameDialog.lKeyAction;break;case TGH5.KeyNames.KEY_M:result=TEnterProfileNameDialog.mKeyAction;break;case TGH5.KeyNames.KEY_N:result=TEnterProfileNameDialog.nKeyAction;break;case TGH5.KeyNames.KEY_O:result=TEnterProfileNameDialog.oKeyAction;break;case TGH5.KeyNames.KEY_P:result=TEnterProfileNameDialog.pKeyAction;break;case TGH5.KeyNames.KEY_Q:result=TEnterProfileNameDialog.qKeyAction;break;case TGH5.KeyNames.KEY_R:result=TEnterProfileNameDialog.rKeyAction;break;case TGH5.KeyNames.KEY_S:result=TEnterProfileNameDialog.sKeyAction;break;case TGH5.KeyNames.KEY_T:result=TEnterProfileNameDialog.tKeyAction;break;case TGH5.KeyNames.KEY_U:result=TEnterProfileNameDialog.uKeyAction;break;case TGH5.KeyNames.KEY_V:result=TEnterProfileNameDialog.vKeyAction;break;case TGH5.KeyNames.KEY_W:result=TEnterProfileNameDialog.wKeyAction;break;case TGH5.KeyNames.KEY_X:result=TEnterProfileNameDialog.xKeyAction;break;case TGH5.KeyNames.KEY_Y:result=TEnterProfileNameDialog.yKeyAction;break;case TGH5.KeyNames.KEY_Z:result=TEnterProfileNameDialog.zKeyAction;break;case TGH5.KeyNames.KEY_0:result=TEnterProfileNameDialog.n0KeyAction;break;case TGH5.KeyNames.KEY_1:result=TEnterProfileNameDialog.n1KeyAction;break;case TGH5.KeyNames.KEY_2:result=TEnterProfileNameDialog.n2KeyAction;break;case TGH5.KeyNames.KEY_3:result=TEnterProfileNameDialog.n3KeyAction;break;case TGH5.KeyNames.KEY_4:result=TEnterProfileNameDialog.n4KeyAction;break;case TGH5.KeyNames.KEY_5:result=TEnterProfileNameDialog.n5KeyAction;break;case TGH5.KeyNames.KEY_6:result=TEnterProfileNameDialog.n6KeyAction;break;case TGH5.KeyNames.KEY_7:result=TEnterProfileNameDialog.n7KeyAction;break;case TGH5.KeyNames.KEY_8:result=TEnterProfileNameDialog.n8KeyAction;break;case TGH5.KeyNames.KEY_9:result=TEnterProfileNameDialog.n9KeyAction;break;case TGH5.KeyNames.KEY_SPACE:result=TEnterProfileNameDialog.spaceKeyAction;break;case TGH5.KeyNames.KEY_DELETE:result=TEnterProfileNameDialog.deleteLetterAction;break;case TGH5.KeyNames.KEY_EXCLAMATION_MARK:result=TEnterProfileNameDialog.exclamationMarkKeyAction;break;case TGH5.KeyNames.KEY_AT:result=TEnterProfileNameDialog.atKeyAction;break;case TGH5.KeyNames.KEY_HASH:result=TEnterProfileNameDialog.hashKeyAction;break;case TGH5.KeyNames.KEY_DOLLAR:result=TEnterProfileNameDialog.dollarKeyAction;break;case TGH5.KeyNames.KEY_PERCENT:result=TEnterProfileNameDialog.percentKeyAction;break;case TGH5.KeyNames.KEY_CARET:result=TEnterProfileNameDialog.caretKeyAction;break;case TGH5.KeyNames.KEY_AMPERSAND:result=TEnterProfileNameDialog.ampersandKeyAction;break;case TGH5.KeyNames.KEY_ASTERISK:result=TEnterProfileNameDialog.asteriskKeyAction;break;case TGH5.KeyNames.KEY_RIGHT_PARENTHESIS:result=TEnterProfileNameDialog.openParenthesisKeyAction;break;case TGH5.KeyNames.KEY_LEFT_PARENTHESIS:result=TEnterProfileNameDialog.closeParenthesisKeyAction;break;default:break;}return result;};TEnterProfileNameDialog.cursorTimeOut=500;TEnterProfileNameDialog.deleteLetterAction=new TGFW.Action();TEnterProfileNameDialog.resetAction=new TGFW.Action();TEnterProfileNameDialog.doneAction=new TGFW.Action();TEnterProfileNameDialog.aKeyAction=new letterAction('A');TEnterProfileNameDialog.bKeyAction=new letterAction('B');TEnterProfileNameDialog.cKeyAction=new letterAction('C');TEnterProfileNameDialog.dKeyAction=new letterAction('D');TEnterProfileNameDialog.eKeyAction=new letterAction('E');TEnterProfileNameDialog.fKeyAction=new letterAction('F');TEnterProfileNameDialog.gKeyAction=new letterAction('G');TEnterProfileNameDialog.hKeyAction=new letterAction('H');TEnterProfileNameDialog.iKeyAction=new letterAction('I');TEnterProfileNameDialog.jKeyAction=new letterAction('J');TEnterProfileNameDialog.kKeyAction=new letterAction('K');TEnterProfileNameDialog.lKeyAction=new letterAction('L');TEnterProfileNameDialog.mKeyAction=new letterAction('M');TEnterProfileNameDialog.nKeyAction=new letterAction('N');TEnterProfileNameDialog.oKeyAction=new letterAction('O');TEnterProfileNameDialog.pKeyAction=new letterAction('P');TEnterProfileNameDialog.qKeyAction=new letterAction('Q');TEnterProfileNameDialog.rKeyAction=new letterAction('R');TEnterProfileNameDialog.sKeyAction=new letterAction('S');TEnterProfileNameDialog.tKeyAction=new letterAction('T');TEnterProfileNameDialog.uKeyAction=new letterAction('U');TEnterProfileNameDialog.vKeyAction=new letterAction('V');TEnterProfileNameDialog.wKeyAction=new letterAction('W');TEnterProfileNameDialog.xKeyAction=new letterAction('X');TEnterProfileNameDialog.yKeyAction=new letterAction('Y');TEnterProfileNameDialog.zKeyAction=new letterAction('Z');TEnterProfileNameDialog.n0KeyAction=new letterAction('0');TEnterProfileNameDialog.n1KeyAction=new letterAction('1');TEnterProfileNameDialog.n2KeyAction=new letterAction('2');TEnterProfileNameDialog.n3KeyAction=new letterAction('3');TEnterProfileNameDialog.n4KeyAction=new letterAction('4');TEnterProfileNameDialog.n5KeyAction=new letterAction('5');TEnterProfileNameDialog.n6KeyAction=new letterAction('6');TEnterProfileNameDialog.n7KeyAction=new letterAction('7');TEnterProfileNameDialog.n8KeyAction=new letterAction('8');TEnterProfileNameDialog.n9KeyAction=new letterAction('9');TEnterProfileNameDialog.spaceKeyAction=new letterAction(' ');TEnterProfileNameDialog.exclamationMarkKeyAction=new letterAction('!');TEnterProfileNameDialog.atKeyAction=new letterAction('@');TEnterProfileNameDialog.hashKeyAction=new letterAction('#');TEnterProfileNameDialog.dollarKeyAction=new letterAction('$');TEnterProfileNameDialog.percentKeyAction=new letterAction('%');TEnterProfileNameDialog.caretKeyAction=new letterAction('^');TEnterProfileNameDialog.ampersandKeyAction=new letterAction('&');TEnterProfileNameDialog.asteriskKeyAction=new letterAction('*');TEnterProfileNameDialog.openParenthesisKeyAction=new letterAction('(');TEnterProfileNameDialog.closeParenthesisKeyAction=new letterAction(')');return TEnterProfileNameDialog;}(UI.TDialog);UI.TEnterProfileNameDialog=TEnterProfileNameDialog;var EnterProfileNameDialog=function(_super){__extends(EnterProfileNameDialog,_super);function EnterProfileNameDialog(){_super.apply(this,arguments);}return EnterProfileNameDialog;}(TEnterProfileNameDialog);UI.EnterProfileNameDialog=EnterProfileNameDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TEnterProfileNameNavigation=function(_super){__extends(TEnterProfileNameNavigation,_super);function TEnterProfileNameNavigation(){_super.apply(this,arguments);}TEnterProfileNameNavigation.prototype.getDoneButton=function(){return this.getButton(this.desc.doneButtonName);};return TEnterProfileNameNavigation;}(UI.TAutoNavigation);UI.TEnterProfileNameNavigation=TEnterProfileNameNavigation;var EnterProfileNameNavigation=function(_super){__extends(EnterProfileNameNavigation,_super);function EnterProfileNameNavigation(){_super.apply(this,arguments);}return EnterProfileNameNavigation;}(TEnterProfileNameNavigation);UI.EnterProfileNameNavigation=EnterProfileNameNavigation;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var ProfilesNavigation=function(_super){__extends(ProfilesNavigation,_super);function ProfilesNavigation(){_super.apply(this,arguments);}ProfilesNavigation.prototype.getNextActionOrButtonName=function(fromButtonName,key,keyDownEvent){if(keyDownEvent){var focusedBtnName=fromButtonName,desc=this._dialog.desc,deleteBtnNames=desc.deleteButtonNames,profile=this.getFocusedButton().getData();var isDeleteButton=false,isProfileButton=false,nextId;var index=desc.profileButtonNames.indexOf(focusedBtnName);if(index>=0){isProfileButton=true;}else{index=deleteBtnNames.indexOf(focusedBtnName);if(index>=0){isProfileButton=true;}}var selectedProfile=this._dialog.getSelectedProfile();switch(key){case TGH5.KeyNames.KEY_RIGHT:if(focusedBtnName===desc.doneButtonName){return null;}if(isProfileButton&&(!profile||selectedProfile.compare(profile))){return null;}break;case TGH5.KeyNames.KEY_LEFT:if(focusedBtnName===desc.doneButtonName){return null;}if(isProfileButton&&(!profile||selectedProfile.compare(profile))){return null;}break;case TGH5.KeyNames.KEY_UP:if(focusedBtnName===desc.doneButtonName){return desc.profileButtonNames[desc.profileButtonNames.length-1];}else if(isDeleteButton){nextId=-1;for(var i=index-1;i>=0;i--){var btnProfile=this.getButton(desc.deleteButtonNames[i]).getData();if(btnProfile&&!selectedProfile.compare(btnProfile)){nextId=i;break;}}if(nextId>=0){return deleteBtnNames[nextId];}}break;case TGH5.KeyNames.KEY_DOWN:if(focusedBtnName===desc.doneButtonName){return desc.profileButtonNames[0];}else if(isDeleteButton){nextId=-1;for(var i=index+1;i<deleteBtnNames.length;i++){var btnProfile=this.getButton(desc.deleteButtonNames[i]).getData();if(btnProfile&&!selectedProfile.compare(btnProfile)){nextId=i;break;}}if(nextId>=0){return deleteBtnNames[nextId];}}break;}}return _super.prototype.getNextActionOrButtonName.call(this,fromButtonName,key,keyDownEvent);};return ProfilesNavigation;}(UI.TAutoNavigation);UI.ProfilesNavigation=ProfilesNavigation;var TProfilesDialog=function(_super){__extends(TProfilesDialog,_super);function TProfilesDialog(desc){this._selectedProfile=null;this._buttonRowIndex=0;_super.call(this,desc);}TProfilesDialog.prototype.getSelectedProfile=function(){return this._selectedProfile;};TProfilesDialog.prototype.onFocusButton=function(from,to){if(from){var index=this.desc.deleteButtonNames.indexOf(from.getName());if(index>=0){this.getButton(this.desc.profileButtonNames[index]).clearState(UI.ButtonState.SELECTED);}}if(to){var index=this.desc.deleteButtonNames.indexOf(to.getName());if(index>=0){this.getButton(this.desc.profileButtonNames[index]).addState(UI.ButtonState.SELECTED);}}_super.prototype.onFocusButton.call(this,from,to);};TProfilesDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);var db=TGFW.app().getDataBase(),profiles=db.getProfiles();if(!db.getCurrentProfile()&&profiles.length>0){db.setCurrentProfile(profiles[0]);}this._selectedProfile=db.getCurrentProfile();for(var i=0;i<this.desc.profileButtonNames.length;i++){var profile=null;if(i<profiles.length){profile=profiles[i];}var btn=this.getButton(this.desc.profileButtonNames[i]);btn.setData(profile);this.getButton(this.desc.deleteButtonNames[i]).setData(profile);this._onRowUpdate(i);if(this._selectedProfile.compare(profile)){this.getNavigation().navigateToButton(btn.getName(),UI.ButtonState.FOCUSED);}}};TProfilesDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case TGFW.UI.Dialog.cancelAction:var db=TGFW.app().getDataBase();if(!db.getCurrentProfile()){db.setCurrentProfile(this._selectedProfile);}this._onResult(UI.DialogResult.CANCEL);break;case TProfilesDialog.saveAction:TGFW.app().getDataBase().setCurrentProfile(this._selectedProfile);this._onResult(UI.DialogResult.OK);break;case TProfilesDialog.deleteProfileAction:this._buttonRowIndex=this.desc.deleteButtonNames.indexOf(button.getName());TGFW.app().dialogs.deleteProfileConfirmation.showModal(function(dialog,result){_this._onDeleteConfirmationResult(dialog,result);});break;case TProfilesDialog.chooseProfileAction:var profile=button.getData();if(profile&&this._selectedProfile.compare(profile)){this.getNavigation().navigateToButton(this.desc.doneButtonName,UI.ButtonState.FOCUSED);}else{if(!profile){this._buttonRowIndex=this.desc.profileButtonNames.indexOf(button.getName());TGFW.app().dialogs.enterProfileName.showModal(function(dialog,result,data){_this._onEnterNameDialogResult(dialog,result,data);});}else{this._selectedProfile=profile;this._updateButtons(this.desc.doneButtonName);}}break;default:_super.prototype.onAction.call(this,action);break;}};TProfilesDialog.prototype._onRowUpdate=function(index){var profileButton=this.getButton(this.desc.profileButtonNames[index]),deleteButton=this.getButton(this.desc.deleteButtonNames[index]),text=profileButton.getCaptionShape();var profile=profileButton.getData();if(profile){if(text)text.updateText({name:profile.getName()});if(this._selectedProfile.compare(profile)){profileButton.check();deleteButton.disable();}else{profileButton.reset();deleteButton.enable();}}else{profileButton.reset();if(text)text.updateText({name:TGFW.LocalizationManager.getText(this.desc.defaultProfileButtonText)});deleteButton.disable();}};TProfilesDialog.prototype._updateButtons=function(focusButtonName){for(var i=0;i<this.desc.profileButtonNames.length;i++){this._onRowUpdate(i);}if(focusButtonName){this.getNavigation().navigateToButton(focusButtonName,UI.ButtonState.FOCUSED);}};TProfilesDialog.prototype._onEnterNameDialogResult=function(dlg,result,data){dlg.hide();if(result==UI.DialogResult.OK){var db=TGFW.app().getDataBase();if(!db.isProfileNameAlreadyUsed(data.name)){this._selectedProfile=db.createNewProfile(data.name,false,data.data);this.getButton(this.desc.deleteButtonNames[this._buttonRowIndex]).setData(this._selectedProfile);this.getButton(this.desc.profileButtonNames[this._buttonRowIndex]).setData(this._selectedProfile);this._updateButtons(this.desc.doneButtonName);}}};TProfilesDialog.prototype._onDeleteConfirmationResult=function(dlg,result){if(result==UI.DialogResult.YES){var db=TGFW.app().getDataBase(),deleteButton=this.getButton(this.desc.deleteButtonNames[this._buttonRowIndex]),profileButton=this.getButton(this.desc.profileButtonNames[this._buttonRowIndex]),profile=deleteButton.getData();deleteButton.setData(null);profileButton.setData(null);db.removeProfile(profile);this._updateButtons(profileButton.getName());}dlg.hide();};TProfilesDialog.chooseProfileAction=new TGFW.Action();TProfilesDialog.deleteProfileAction=new TGFW.Action();TProfilesDialog.saveAction=new TGFW.Action();return TProfilesDialog;}(UI.TDialog);UI.TProfilesDialog=TProfilesDialog;var ProfilesDialog=function(_super){__extends(ProfilesDialog,_super);function ProfilesDialog(){_super.apply(this,arguments);}return ProfilesDialog;}(TProfilesDialog);UI.ProfilesDialog=ProfilesDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TGameDialog=function(_super){__extends(TGameDialog,_super);function TGameDialog(desc){this._quitRequest=null;_super.call(this,desc);}TGameDialog.prototype.onKeyUp=function(key){switch(key){case TGH5.KeyNames.KEY_EXIT:this._showQuitConfirmationDialog(TGH5.ExitRequest.broadcast);break;default:_super.prototype.onKeyUp.call(this,key);break;}};TGameDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case GameDialog.quitConfirmationDialogAction:this._showQuitConfirmationDialog(TGH5.ExitRequest.regular);break;case GameDialog.gameMenuAction:this.onPause();TGFW.app().dialogs.gameMenu.showModal(function(dialog,result){_this._onGameMenuResult(dialog,result);});break;case GameDialog.pauseAction:this.onPause();TGFW.app().dialogs.gamePause.showModal(function(dialog,result){_this._onGameMenuResult(dialog,result);});break;case GameDialog.mainMenuAction:this.onPause();this.showMainMenu();break;default:_super.prototype.onAction.call(this,action,button);break;}};TGameDialog.prototype._onGameMenuResult=function(dlg,action){this.onResume();dlg.hide();};TGameDialog.prototype._showQuitConfirmationDialog=function(exitTo){var _this=this;this.onPause();this._quitRequest=exitTo;if(TGFW.app().isDemo()||TGFW.app().isFree()){TGFW.app().dialogs.demoOver.show();}else{TGFW.app().dialogs.quitConfirmation.showModal(function(dialog,result){_this._onQuitConfirmationResult(dialog,result);});}};TGameDialog.prototype._onQuitConfirmationResult=function(dlg,result){if(result==UI.DialogResult.YES){TGFW.app().exit(this._quitRequest);}else{this.onResume();}dlg.hide();};TGameDialog.quitConfirmationDialogAction=new TGFW.Action();TGameDialog.gameMenuAction=new TGFW.Action();TGameDialog.pauseAction=new TGFW.Action();TGameDialog.mainMenuAction=new TGFW.Action();return TGameDialog;}(UI.TDialog);UI.TGameDialog=TGameDialog;var GameDialog=function(_super){__extends(GameDialog,_super);function GameDialog(){_super.apply(this,arguments);}return GameDialog;}(TGameDialog);UI.GameDialog=GameDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TGameMenuDialog=function(_super){__extends(TGameMenuDialog,_super);function TGameMenuDialog(desc){_super.call(this,desc);}TGameMenuDialog.prototype.show=function(){_super.prototype.show.call(this);};TGameMenuDialog.prototype.onFocus=function(){_super.prototype.onFocus.call(this);this.getNavigation().init();};TGameMenuDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case TGameMenuDialog.howToPlayDialogAction:TGFW.app().dialogs.howToPlay.showModal(function(dialog,result){_this._onHowToPlayResult(dialog,result);});break;case TGameMenuDialog.continueGameAction:this._onResult(UI.DialogResult.OK);break;case TGameMenuDialog.mainMenuAction:TGFW.app().dialogs.game.showMainMenu();break;case TGameMenuDialog.quitConfirmationDialogAction:if(TGFW.app().isDemo()||TGFW.app().isFree()){TGFW.app().dialogs.demoOver.show();}else{TGFW.app().dialogs.quitConfirmation.showModal(function(dialog,result){_this._onQuitConfirmationResult(dialog,result);});}break;case TGameMenuDialog.newGameConfirmationDialogAction:TGFW.app().dialogs.newGameConfirmation.showModal(function(dialog,result){_this._onNewGameConfirmationResult(dialog,result);});break;default:_super.prototype.onAction.call(this,action,button);break;}};TGameMenuDialog.prototype._onQuitConfirmationResult=function(dlg,result){if(result==UI.DialogResult.YES){TGFW.app().exit();}dlg.hide();};TGameMenuDialog.prototype._onNewGameConfirmationResult=function(dlg,result){if(result==UI.DialogResult.YES){TGFW.UIManager.hideAllPopups();TGFW.app().dialogs.game.startNewGame();}else{dlg.hide();}};TGameMenuDialog.prototype._onHowToPlayResult=function(dlg,result){result==UI.DialogResult.YES;dlg.hide();};TGameMenuDialog.quitConfirmationDialogAction=new TGFW.Action();TGameMenuDialog.continueGameAction=new TGFW.Action();TGameMenuDialog.newGameConfirmationDialogAction=new TGFW.Action();TGameMenuDialog.howToPlayDialogAction=new TGFW.Action();TGameMenuDialog.mainMenuAction=new TGFW.Action();return TGameMenuDialog;}(UI.TDialog);UI.TGameMenuDialog=TGameMenuDialog;var GameMenuDialog=function(_super){__extends(GameMenuDialog,_super);function GameMenuDialog(){_super.apply(this,arguments);}return GameMenuDialog;}(TGameMenuDialog);UI.GameMenuDialog=GameMenuDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TNewGameConfirmationDialog=function(_super){__extends(TNewGameConfirmationDialog,_super);function TNewGameConfirmationDialog(desc){_super.call(this,desc);}TNewGameConfirmationDialog.prototype.onAction=function(action,button){if(action===this.desc.yesAction){this._onNewGameConfirmed();}if(!TGFW.app().isDemo()){_super.prototype.onAction.call(this,action,button);}};TNewGameConfirmationDialog.prototype._onNewGameConfirmed=function(){if(TGFW.app().isDemo()){this._onNewGameDemoOver();}else{this._onNewGameStart();}};TNewGameConfirmationDialog.prototype._onNewGameStart=function(){};TNewGameConfirmationDialog.prototype._onNewGameDemoOver=function(){TGFW.UIManager.hideAllPopups();TGFW.app().dialogs.demoOver.show();};return TNewGameConfirmationDialog;}(UI.TDialog);UI.TNewGameConfirmationDialog=TNewGameConfirmationDialog;var NewGameConfirmationDialog=function(_super){__extends(NewGameConfirmationDialog,_super);function NewGameConfirmationDialog(){_super.apply(this,arguments);}return NewGameConfirmationDialog;}(TNewGameConfirmationDialog);UI.NewGameConfirmationDialog=NewGameConfirmationDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TChooseLanguageDialog=function(_super){__extends(TChooseLanguageDialog,_super);function TChooseLanguageDialog(desc){_super.call(this,desc);}TChooseLanguageDialog.prototype._beforeShow=function(){var allowedLanguageCodes=TGFW.LocalizationManager.getAllowedLanguageCodes();this._currentLanguageIndex=allowedLanguageCodes.indexOf(TGFW.sdk().getLanguage());this._changeChooseLanguageTitle(0);_super.prototype._beforeShow.call(this);};TChooseLanguageDialog.prototype.onKeyDown=function(key){switch(key){case TGH5.KeyNames.KEY_RIGHT:this.getButton(this.desc.nextButtonName).press();return;case TGH5.KeyNames.KEY_LEFT:this.getButton(this.desc.previousButtonName).press();return;default:_super.prototype.onKeyDown.call(this,key);break;}};TChooseLanguageDialog.prototype.onKeyUp=function(key){switch(key){case TGH5.KeyNames.KEY_RIGHT:this.getButton(this.desc.nextButtonName).reset();this._changeChooseLanguageTitle(1);return;case TGH5.KeyNames.KEY_LEFT:this.getButton(this.desc.previousButtonName).reset();this._changeChooseLanguageTitle(-1);return;default:_super.prototype.onKeyUp.call(this,key);break;}};TChooseLanguageDialog.prototype.onAction=function(action,button){switch(action){case TChooseLanguageDialog.applyLanguageAction:var codes=TGFW.LocalizationManager.getAllowedLanguageCodes();this._onResult(UI.DialogResult.OK,{languageCode:codes[this._currentLanguageIndex]});break;case TChooseLanguageDialog.selectNextLanguageAction:this._changeChooseLanguageTitle(1);break;case TChooseLanguageDialog.selectPreviousLanguageAction:this._changeChooseLanguageTitle(-1);break;default:_super.prototype.onAction.call(this,action,button);break;}};TChooseLanguageDialog.prototype._getLanguageButton=function(){return this.getButton(this.desc.languageButtonName);};TChooseLanguageDialog.prototype._changeChooseLanguageTitle=function(languageIndexDelta){var codes=TGFW.LocalizationManager.getAllowedLanguageCodes(),len=codes.length;this._currentLanguageIndex=(this._currentLanguageIndex+languageIndexDelta+len)%len;var text=TGFW.LocalizationManager.getTextByLanguageCode('name',codes[this._currentLanguageIndex]);if(TGFW.Utils.isString(text)){this._getLanguageButton().getCaptionShape().setText(text,{});}};TChooseLanguageDialog.selectNextLanguageAction=new TGFW.Action();TChooseLanguageDialog.selectPreviousLanguageAction=new TGFW.Action();TChooseLanguageDialog.applyLanguageAction=new TGFW.Action();return TChooseLanguageDialog;}(UI.TDialog);UI.TChooseLanguageDialog=TChooseLanguageDialog;var ChooseLanguageDialog=function(_super){__extends(ChooseLanguageDialog,_super);function ChooseLanguageDialog(){_super.apply(this,arguments);}return ChooseLanguageDialog;}(TChooseLanguageDialog);UI.ChooseLanguageDialog=ChooseLanguageDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var UI;(function(UI){var TDemoOverDialog=function(_super){__extends(TDemoOverDialog,_super);function TDemoOverDialog(desc){_super.call(this,desc);this._exitTo=TGH5.ExitRequest.regular;}TDemoOverDialog.prototype.setExitTo=function(exitTo){this._exitTo=exitTo;};TDemoOverDialog.prototype.show=function(){_super.prototype.show.call(this);};TDemoOverDialog.prototype.onAction=function(action,button){switch(action){case TDemoOverDialog.demoOverCloseAction:TGFW.app().exit(this._exitTo);break;default:_super.prototype.onAction.call(this,action,button);break;}};TDemoOverDialog.demoOverCloseAction=new TGFW.Action();return TDemoOverDialog;}(UI.TDialog);UI.TDemoOverDialog=TDemoOverDialog;var DemoOverDialog=function(_super){__extends(DemoOverDialog,_super);function DemoOverDialog(){_super.apply(this,arguments);}return DemoOverDialog;}(TDemoOverDialog);UI.DemoOverDialog=DemoOverDialog;}(UI=TGFW.UI||(TGFW.UI={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Utils;(function(Utils){var PerformanceMonitor;(function(PerformanceMonitor){var ENABLE_PERFORMANCE_METER=false,ENABLE_DETAILED_REPORT=false;var shape_x=20,shape_y=585,shape_dy=16;var __performanceMeter=null;var __performanceRender=null;function start(){if(ENABLE_PERFORMANCE_METER){var totalTextNodes=ENABLE_DETAILED_REPORT?8:3,textNodes=new Array(totalTextNodes);for(var i=0;i<totalTextNodes;i++){var node=document.createTextNode(''),div=document.createElement('div');div.setAttribute('style',['position: absolute','left: '+shape_x+'px','top: '+(shape_y+i*shape_dy)+'px','color: #FFF','font-size: 16px','z-index: 99999999','text-shadow: 0 0 3px black'].join(';'));div.appendChild(node);document.body.appendChild(div);textNodes[i]=node;}var _pm=new Productivity();_pm.start();var timer=new TGFW.Timer(function(){var fpsStatistics='';if(__performanceMeter){var minFps=0,avgFps=0,stat=__performanceMeter.getDeltaTimeStatistics(),l=stat.length;for(var i=0;i<l;i++){var fps=1000/stat[i];minFps=minFps===0?fps:_Math.min(fps,minFps);avgFps+=fps;}avgFps/=l;fpsStatistics=' F: '+minFps.toFixed(1)+'/'+avgFps.toFixed(1);}textNodes[0].nodeValue='P: '+_Math.round(_pm.getPerformance()*100000)/1000+'%'+fpsStatistics;if(__performanceRender){var timers=__performanceRender.getTimers(),timerNames=Object.keys(timers).sort(),l=timerNames.length,t=[];if(l>0){for(var timerNameIndex=0;timerNameIndex<l;timerNameIndex++){t.push(timerNames[timerNameIndex]+': '+timers[timerNames[timerNameIndex]].totalTime.toFixed(1));}textNodes[1].nodeValue=t.join(' ');}else{textNodes[1].nodeValue='';}textNodes[2].nodeValue=__performanceRender.getAccumulator();}else{textNodes[1].nodeValue='';textNodes[2].nodeValue='';}if(ENABLE_DETAILED_REPORT){if(__performanceRender){textNodes[3].nodeValue='R: '+__performanceRender.getUniqueDivCount()+'/'+__performanceRender.getTotalDivCount()+' div/sec';}textNodes[4].nodeValue=TGFW.TimerManager._debugGetTimerStatistic();textNodes[5].nodeValue='A: '+TGFW.Animation.ClipManager.debugGetClipPool().length;if(__performanceMeter){textNodes[6].nodeValue='U: '+__performanceMeter.getCurrentResult()+' ms/sec';}textNodes[7].nodeValue=TGFW.RenderManager.getRender().getName();}});timer.start(1000,true);}}PerformanceMonitor.start=start;function enterInCode(){if(ENABLE_PERFORMANCE_METER){if(!__performanceMeter)__performanceMeter=new PerformanceMeter();__performanceMeter.enter();}}PerformanceMonitor.enterInCode=enterInCode;function leaveFromCode(){if(ENABLE_PERFORMANCE_METER){if(!__performanceMeter)__performanceMeter=new PerformanceMeter();__performanceMeter.leave();}}PerformanceMonitor.leaveFromCode=leaveFromCode;function registerDivChanges(div){if(ENABLE_PERFORMANCE_METER){if(!__performanceRender)__performanceRender=new PerformanceRender();__performanceRender.pushDiv(div);}}PerformanceMonitor.registerDivChanges=registerDivChanges;function updateDeltaTime(deltaTime){if(ENABLE_PERFORMANCE_METER){if(!__performanceMeter)__performanceMeter=new PerformanceMeter();__performanceMeter.updateDeltaTime(deltaTime);}}PerformanceMonitor.updateDeltaTime=updateDeltaTime;function time(timerName){if(ENABLE_PERFORMANCE_METER){if(!__performanceRender)__performanceRender=new PerformanceRender();__performanceRender.time(timerName);}}PerformanceMonitor.time=time;function timeEnd(timerName){if(ENABLE_PERFORMANCE_METER){if(!__performanceRender)__performanceRender=new PerformanceRender();__performanceRender.timeEnd(timerName);}}PerformanceMonitor.timeEnd=timeEnd;function accumulate(accumulatorType,obj){if(ENABLE_PERFORMANCE_METER){if(!__performanceRender)__performanceRender=new PerformanceRender();__performanceRender.accumulate(accumulatorType,obj);}}PerformanceMonitor.accumulate=accumulate;(function(AccumulatorType){AccumulatorType[AccumulatorType['MAX']=0]='MAX';AccumulatorType[AccumulatorType['MIN']=1]='MIN';AccumulatorType[AccumulatorType['SUM']=2]='SUM';AccumulatorType[AccumulatorType['AVG']=3]='AVG';}(PerformanceMonitor.AccumulatorType||(PerformanceMonitor.AccumulatorType={})));var AccumulatorType=PerformanceMonitor.AccumulatorType;PerformanceMonitor.now=typeof performance!=='undefined'&&typeof performance.now!=='undefined'?function(){return performance.now();}:function(){return Date.now();};var PerformanceRender=function(){function PerformanceRender(){this._accumulator={};this._timers={};this._startTime=0;this._uResult=0;this._divsCountResult=0;this._divsCount=0;this._uniqueDivs=[];var that=this;this._time=Date.now();this._interval=setInterval(function(){that._update();},PerformanceRender._calculatePeriod);}PerformanceRender.prototype.pushDiv=function(div){this._divsCount++;if(this._uniqueDivs.indexOf(div)<0){this._uniqueDivs.push(div);}};PerformanceRender.prototype.time=function(timerName){if(!this._timers[timerName]){this._timers[timerName]={startTime:PerformanceMonitor.now(),totalTime:0,totalCalls:0};}else{this._timers[timerName].startTime=PerformanceMonitor.now();}};PerformanceRender.prototype.timeEnd=function(timerName){if(this._timers[timerName]){this._timers[timerName].totalTime+=PerformanceMonitor.now()-this._timers[timerName].startTime;this._timers[timerName].totalCalls++;}};PerformanceRender.prototype.accumulate=function(accumulatorType,obj){for(var p in obj){if(obj.hasOwnProperty(p)){if(!this._accumulator[p]){this._accumulator[p]={t:accumulatorType,values:[]};}var item=this._accumulator[p];item.t=accumulatorType;item.values.push(obj[p]);if(item.values.length>10){item.values.shift();}}}};PerformanceRender.prototype._update=function(){var cTime=Date.now(),dTime=cTime-this._time;this._time=cTime;this._uResult=this._uniqueDivs.length*1000/dTime;this._divsCountResult=this._divsCount*1000/dTime;this._uniqueDivs.length=0;this._divsCount=0;};PerformanceRender.prototype.getUniqueDivCount=function(){return _Math.ceil(this._uResult);};PerformanceRender.prototype.getTotalDivCount=function(){return _Math.ceil(this._divsCountResult);};PerformanceRender.prototype.getTimers=function(){var timers=this._timers;this._timers={};return timers;};PerformanceRender.prototype.getAccumulator=function(){var accumulator=this._accumulator,names=Object.keys(accumulator),l=names.length,t=[];if(l>0){for(var nameIndex=0;nameIndex<l;nameIndex++){var name=names[nameIndex],sum=0,min=Infinity,max=-Infinity,item=accumulator[name];if(item.values.length>0){for(var i=0;i<item.values.length;i++){var value=item.values[i];sum+=value;if(min>value)min=value;if(max<value)max=value;}switch(item.t){case AccumulatorType.SUM:t.push(name+': '+Utils.numberToCommaString(sum|0));break;case AccumulatorType.AVG:t.push(name+': '+Utils.numberToCommaString(sum/ item.values.length|0));break;case AccumulatorType.MIN:t.push(name+': '+Utils.numberToCommaString(min|0));break;case AccumulatorType.MAX:t.push(name+': '+Utils.numberToCommaString(max|0));break;}}}}return t.join(' ');};PerformanceRender._calculatePeriod=1000;return PerformanceRender;}();var PerformanceMeter=function(){function PerformanceMeter(){this._deltaTimeStatistics=[];this._currentTime=0;this._startTime=-1;}PerformanceMeter.prototype.enter=function(){this._enterTime=Date.now();if(this._startTime<0){this._startTime=this._enterTime;}};PerformanceMeter.prototype.leave=function(){var time=Date.now();this._currentTime+=time-this._enterTime;var dTime=time-this._startTime;if(dTime>=PerformanceMeter._calculatePeriod&&this._currentTime>0){this._result=1000*this._currentTime/dTime;this._startTime=time;this._currentTime=0;}};PerformanceMeter.prototype.getCurrentResult=function(){return _Math.round(this._result*100)/100;};PerformanceMeter.prototype.updateDeltaTime=function(deltaTime){if(deltaTime>0.001){this._deltaTimeStatistics.push(deltaTime);if(this._deltaTimeStatistics.length>100){this._deltaTimeStatistics.shift();}}};PerformanceMeter.prototype.getDeltaTimeStatistics=function(){return this._deltaTimeStatistics;};PerformanceMeter._calculatePeriod=1000;return PerformanceMeter;}();var Productivity=function(){function Productivity(){this._started=false;this._performance=0;}Productivity.prototype.start=function(){this.end();this._started=true;this._startTime=Date.now();this._numUpdates=0;this._startTimer();};Productivity.prototype._update=function(){this._numUpdates++;if(this._started){this._startTimer();}var currTime=Date.now();if(currTime-this._startTime>1000){this._collectStatistic(currTime);}};Productivity.prototype._collectStatistic=function(currTime){var dTime=currTime-this._startTime;this._startTime=currTime;this._performance=this._numUpdates/(dTime/Productivity._updateTimerDelay|0);this._numUpdates=0;};Productivity.prototype._startTimer=function(){var that=this;setTimeout(function(){that._update.apply(that);},Productivity._updateTimerDelay);};Productivity.prototype.end=function(){this._started=false;};Productivity.prototype.getPerformance=function(){return this._performance;};Productivity._updateTimerDelay=40;return Productivity;}();}(PerformanceMonitor=Utils.PerformanceMonitor||(Utils.PerformanceMonitor={})));}(Utils=TGFW.Utils||(TGFW.Utils={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var Effects;(function(Effects){var Fade=function(){function Fade(){}Fade.getInstance=function(){if(!Fade._instance){Fade._instance=new Fade();Fade.create();}return Fade._instance;};Fade.prototype._create=function(){this.shape=TGFW.Base.create({className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:TGFW.Render.Color.black(1)});this.shape.create();TGFW.SceneManager.getRoot().append(this.shape);};Fade.create=function(){this.getInstance()._create();};Fade.prototype._fadeIn=function(timeMSec,onEnd){var _this=this;var clip=TGFW.Animation.ClipManager.createClip({className:TGFW.Animation.Clip,disableInput:true,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'shape',className:TGFW.Animation.KeyTransition,time:timeMSec,change:{opacity:{start:0,end:1}}}],[{name:'shape',className:TGFW.Animation.KeyVisibility,visible:false}]]}]});this.shape.setOpacity(0);this.shape.show();TGFW.SceneManager.attachToRender(this.shape);clip.play({shape:this.shape},function(){_this.shape.hide();TGFW.SceneManager.detachFromRender(_this.shape);if(onEnd)onEnd();});};Fade.prototype._fadeOut=function(timeMSec,onEnd){var _this=this;var clip=TGFW.Animation.ClipManager.createClip({className:TGFW.Animation.Clip,disableInput:true,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'shape',className:TGFW.Animation.KeyTransition,time:timeMSec,change:{opacity:{start:1,end:0}}}],[{name:'shape',className:TGFW.Animation.KeyVisibility,visible:false}]]}]});this.shape.setOpacity(1);this.shape.show();TGFW.SceneManager.attachToRender(this.shape);clip.play({shape:this.shape},function(){_this.shape.hide();TGFW.SceneManager.detachFromRender(_this.shape);if(onEnd)onEnd();});};Fade.setColor=function(color){this.getInstance().shape.setColor(color);};Fade.in=function(timeMSec,onEnd){this.getInstance()._fadeIn(timeMSec,onEnd);};Fade.out=function(timeMSec,onEnd){this.getInstance()._fadeOut(timeMSec,onEnd);};Fade._instance=null;return Fade;}();Effects.Fade=Fade;}(Effects=TGFW.Effects||(TGFW.Effects={})));}(TGFW||(TGFW={})));var TGFW;(function(TGFW){var PaymentManager=function(){function PaymentManager(desc){this.desc=desc;if(this.desc&&this.desc.productsIds&&this.desc.productsIds.length>0){this._enabled=true;}else{this._enabled=false;}}PaymentManager.I=function(){if(!PaymentManager._instance){PaymentManager._instance=new PaymentManager(TGFW.app().desc.payment);}return PaymentManager._instance;};PaymentManager.prototype.requestProducts=function(onDone){var _this=this;if(!this._enabled){if(onDone)onDone();}else{TGFW.sdk().getProductsPaymentInfo(this.desc.productsIds).always(function(resultProducts){if(!resultProducts||!TGFW.sdk().isArray(resultProducts)||resultProducts.length<1){_this._enabled=false;}else{_this.products=[];for(var i=0;i<_this.desc.productsIds.length;i++){for(var j=0;j<resultProducts.length;j++){if(resultProducts[j].productId===_this.desc.productsIds[i]){_this.products.push(resultProducts[j]);break;}}}}if(onDone)onDone();});}};PaymentManager.prototype.getProductValue=function(productId,index){if(index===undefined){index=0;}if(!this._enabled){return 0;}var product=this.getProduct(productId);if(product){if(product.values&&TGFW.sdk().isArray(product.values)&&product.values.length>index){return product.values[index];}}return 0;};PaymentManager.prototype.cancelSubscription=function(productId,onDone){TGFW.sdk().unsubscribe(productId).always(function(){if(onDone)onDone();});};PaymentManager.prototype.applyProducts=function(onDone){if(!this._enabled){if(onDone)onDone();}else{TGFW.sdk().applyPurchases(this.desc.productsIds).always(function(data){if(data&&TGFW.sdk().isArray(data)&&data.length>0){TGFW.app().applyPayment(data,function(){if(onDone)onDone();});}else{if(onDone)onDone();}});}};PaymentManager.prototype.getProduct=function(productId){for(var i=0;i<this.products.length;i++){var product=this.products[i];if(product.productId==productId){return product;}}return null;};PaymentManager.prototype.getProducts=function(){return this.products;};PaymentManager.prototype.buyProduct=function(openedFrom,productId,onDone){var _this=this;TGFW.sdk().startPayment(openedFrom,productId).done(function(result){if(result){var productInfo=_this.getProduct(productId);productInfo.status=TGH5.Payment.ProductStatus.Purchased;TGFW.app().applyPayment([productId],function(){TGFW.sdk().applyPurchases([productId]).always(function(data){onDone(true);});});}else{onDone(false);}});};PaymentManager.prototype.isEnabled=function(){return this._enabled;};PaymentManager._instance=null;return PaymentManager;}();TGFW.PaymentManager=PaymentManager;}(TGFW||(TGFW={})));var TGFW;(function(TGFW){TGFW.DOMLoader(function(){var app=new Game.App(Game.appDesc);});}(TGFW||(TGFW={})));var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p];};return extendStatics(d,b);};return function(d,b){if(typeof b!=='function'&&b!==null)throw new TypeError('Class extends value '+String(b)+' is not a constructor or null');extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __());};}();var Game;(function(Game){var GameMode;(function(GameMode){GameMode[GameMode['CLASSIC']=0]='CLASSIC';GameMode[GameMode['MEDIUM']=1]='MEDIUM';GameMode[GameMode['HARD']=2]='HARD';}(GameMode=Game.GameMode||(Game.GameMode={})));Game.languagesData={'en':{icon:'flag1',text:'English US'},'en_uk':{icon:'flag2',text:'English UK'},'en_ca':{icon:'flag3',text:'English CA'},'fr_ca':{icon:'flag3',text:'Français CA'},'it':{icon:'flag4',text:'Italiano'},'de':{icon:'flag5',text:'Deutsch'},'fr':{icon:'flag6',text:'Français'},'es':{icon:'flag7',text:'Español'}};Game.dictionariesConfig={'en_us':'dictionaries/us.json','en_uk':'dictionaries/uk.json','en_ca':'dictionaries/ca.json','fr_ca':'dictionaries/ca_fr.json','de':'dictionaries/de.json','it':'dictionaries/it.json','fr':'dictionaries/fr.json','es':'dictionaries/es.json'};Game.appDesc={productId:'trivia_crack',version:'1.48',samsungVersion:'1.001',cheatsEnabled:false,backgroundColor:TGFW.Render.Color.black(),semiTransparentLayerColor:new TGFW.Render.Color(0,0,0,0.7),minimumTimerInterval:25,animationUpdateInterval:25,renderUpdateInterval:25,payment:{productsIds:['trivia_crack_p1','trivia_crack_p2','trivia_crack_p3','trivia_crack_remove_ads','trivia_crack_p4','trivia_crack_endless_lives']},dataBase:{className:TGFW.DataBase,saveVersion:1,maxProfilesCount:5,gameModesCount:3,topScores:[{className:TGFW.TopScores,type:TGFW.TopScores.Type.ALLTIME,numRecords:10},{className:TGFW.TopScores,type:TGFW.TopScores.Type.ALLTIME,numRecords:10},{className:TGFW.TopScores,type:TGFW.TopScores.Type.ALLTIME,numRecords:10}]},audio:{settings:{extensions:['wav','mp3','mp4'],folderUrl:'sounds',spriteTrackId:'sounds_list',tracks:{'splash':{'start':4,'end':12.62501133786848}}},clickSoundId:'click'},texturePool:{},stringPool:{},languagesPool:[],fontPool:{},scene:{},deferedDescs:[],loader:null,useRAF:true,useFullRenderCanvas:true,webglTransparency:true,webglDisableTextureFilter:false};}(Game||(Game={})));Game.appDesc.fontPool={'mikado_bold':{'url':'fonts/mikado_bold.ttf','fontSizeToLineHeightCoefficient':1.1,'webgl':'1a~C+~CW~Œ~1f~1B~0~0~2~-1V~1j~j~R~1Z~0~1E~-3~-1Z~R~Ó~17~1Y~0~2q~2~-1s~1B~Ú~+~1Y~U~1E~5~-1s~17~À~16~1X~0~4P~0~-1s~17~Á~16~1X~0~5z~0~-1s~17~Í~U~1X~0~7X~1~-1s~W~Ô~17~1X~0~95~2~-1r~1B~Â~16~1W~X~7X~0~-1r~17~È~p~1W~0~Af~5~-1s~w~É~p~1W~s~Af~5~-1s~w~Ê~p~1W~1A~94~5~-1r~w~Î~b~1W~1i~Ad~-3~-1r~W~Ö~17~1W~19~4P~2~-1q~1B~Ü~+~1W~19~5y~5~-1q~17~Q~17~1V~1g~7V~2~-1V~1B~Ä~16~1V~2A~5y~0~-1q~17~Ñ~/~1V~1A~2p~5~-1q~1A~W~1T~1A~1V~1E~2~-1V~1W~$~t~1Q~20~91~2~-1d~x~{~V~1Q~2q~7U~0~-1X~W~}~V~1Q~2C~2R~1~-1X~W~[~V~1P~2J~3u~5~-1W~b~(~a~1O~2k~2R~2~-1X~c~)~a~1O~2K~AU~0~-1X~c~]~W~1O~2w~8x~1~-1V~a~/~k~1N~2r~3s~1~-1b~m~œ~1N~r~1i~0~2~-1A~1Q~M~1L~1A~2/~u~1~-1V~1O~ș~h~1K~3L~25~2~-1A~j~%~1H~1C~2x~AM~2~-1W~1K~©~1H~1G~3J~5G~2~-1Y~1L~k~q~1G~3c~3S~4~-1a~t~b~s~1F~43~25~3~-1a~x~l~I~1F~4T~3N~4~-1a~Q~w~1F~s~3J~6Z~1~-1B~1F~\\~g~1F~3M~7S~1~-1Z~h~d~t~1E~3T~8k~2~-1a~z~f~j~1E~43~7S~0~-1Z~e~h~p~1E~4N~0~4~-1a~x~m~1E~r~36~0~4~-1A~1M~i~K~1D~4F~9/~4~-1Z~R~ß~u~1D~4N~8j~4~-1X~z~&~11~1C~4F~BF~4~-1V~15~è~m~1C~4c~9z~2~-1X~o~é~m~1C~5J~BC~2~-1X~o~ê~m~1C~4d~4f~2~-1W~o~ò~r~1C~4o~3N~2~-1X~u~ó~r~1C~4d~5u~2~-1X~u~ô~r~1C~5Q~4c~2~-1W~u~ù~o~1C~4p~77~3~-1X~w~ú~o~1C~5V~5r~3~-1X~w~û~o~1C~5I~8M~3~-1W~w~ć~j~1C~5e~74~2~-1X~m~0~u~1B~5P~9b~3~-1V~z~6~r~1B~67~8J~2~-1V~u~8~s~1B~66~Ap~2~-1V~x~9~r~1B~6K~9X~1~-1V~u~C~+~1B~6/~Al~2~-1V~11~G~10~1B~4y~1H~2~-1V~15~H~11~1B~5D~0~5~-1V~1B~O~17~1B~5g~2V~2~-1V~1B~U~+~1B~5/~1E~5~-1V~18~q~s~1B~6H~0~2~-1A~y~y~s~1B~6I~3j~0~-1A~r~à~j~1B~6q~2S~1~-1X~o~á~j~1B~70~1E~1~-1X~o~â~j~1B~7A~0~1~-1W~o~ë~m~1B~6K~4x~2~-1V~o~ì~U~1B~6O~69~-3~-1X~R~í~U~1B~6v~69~0~-1X~R~î~b~1B~77~4x~-5~-1W~R~ö~r~1B~7B~3g~2~-1V~u~ü~o~1B~7a~2S~3~-1V~w~ź~f~1B~7m~1E~2~-1X~j~ž~f~1B~7w~0~2~-1W~j~!~N~1A~6/~7N~3~-1V~U~3~o~1A~7C~8a~1~-1V~r~4~w~1A~7P~7N~0~-1V~x~5~q~1A~7Q~69~1~-1V~s~?~h~1A~7l~4u~2~-1W~k~A~16~1A~83~3g~0~-1V~17~D~/~1A~8P~2S~5~-1U~16~J~i~1A~8S~1E~-1~-1V~m~K~z~1A~8c~0~5~-1U~12~N~/~1A~9B~1D~5~-1V~1A~R~x~1A~9c~0~5~-1U~12~S~t~1A~8H~65~2~-1V~w~V~12~1A~8T~4t~0~-1V~13~X~/~1A~9C~3f~0~-1V~/~Y~10~1A~9R~2Q~0~-1V~/~g~t~1A~AD~1D~2~-1A~z~p~t~1A~Aa~0~4~-1A~z~¡~N~1A~BU~0~2~-1A~S~¿~h~1A~Bu~0~1~-1A~j~ä~j~1A~B7~1D~1~-1V~o~ï~d~1A~Bt~1D~-6~-1V~R~ñ~p~1A~80~9n~4~-1V~w~ồ~r~1A~81~8a~4~-1W~z~#~w~19~8M~7I~2~-1V~z~£~p~19~9B~64~3~-1V~t~1~b~19~9Y~4s~-1~-1V~f~2~l~19~80~A+~2~-1V~q~7~l~19~8o~A+~1~-1U~m~B~v~19~8s~9n~5~-1U~10~E~p~19~8v~8U~5~-1U~w~F~p~19~9J~7G~5~-1U~v~I~L~19~A1~62~5~-1U~W~L~m~19~AA~4s~5~-1V~s~P~v~19~AE~3d~5~-1U~/~T~u~19~AU~2Q~0~-1V~v~Z~r~19~9l~8S~2~-1U~v~ã~j~19~A9~7E~1~-1V~o~ă~j~19~AP~62~1~-1U~o~Ł~t~19~Az~4p~-1~-1V~t~;~N~17~Cc~0~3~-19~T~ō~r~16~BA~3c~2~-1R~u~ç~j~15~BP~2Q~2~-1A~m~t~e~12~C9~2Q~1~-1N~f~÷~h~v~2x~Bb~2~-1H~m~v~t~s~C2~3Y~1~-1A~s~s~h~s~7C~9n~2~-1A~j~x~r~s~C2~4R~0~-1B~q~a~j~r~Bt~5K~1~-1A~o~c~j~r~9a~Az~2~-1A~m~e~m~r~9o~9e~2~-1A~o~n~p~r~B9~6C~4~-1A~w~o~r~r~B/~6C~2~-1A~u~u~o~r~B9~74~3~-1A~w~+~o~q~B+~74~2~-1E~s~:~N~q~Cd~5K~3~-19~T~r~a~q~6O~7N~4~-1A~e~z~f~q~4y~2V~2~-1A~j~ı~I~q~5g~3j~4~-1A~R~«~l~p~B+~7x~2~-1E~p~»~k~p~Av~7y~2~-1E~o~“~k~c~9a~Br~2~-1V~o~”~k~c~Bg~8n~2~-1V~o~„~k~c~Ad~8o~2~-h~p~×~i~i~AK~AW~3~-1A~m~–~i~F~3T~9/~4~-w~q~=~h~V~66~C1~4~-13~q~^~h~X~6/~Bz~2~-1X~l~−~h~B~1i~u~4~-w~q~º~g~f~Ab~9e~2~-1P~k~,~N~f~2r~5G~2~-i~S~‘~N~f~Cc~1A~2~-1V~R~’~N~f~4N~1H~2~-1V~R~"~Z~W~3f~Bb~3~-1X~f~°~Z~Z~CR~8n~2~-1W~c~_~Y~C~2Q~u~4~-K~g~\'~F~W~BO~8o~3~-1X~K~-~W~F~3f~C8~4~-x~e~´~U~L~1V~2R~A~-1X~o~•~R~Q~9o~AW~5~-11~a~.~N~N~CX~1s~2~-i~S~ ~0~0~1g~91~-1~-O~J'},'mikado_black':{'url':'fonts/mikado_black.ttf','fontSizeToLineHeightCoefficient':1.2,'webgl':'1G~Ae~Ae~Œ~1M~z~0~0~1~-1C~1O~j~O~1H~0~10~-3~-1G~N~Ó~x~1F~0~2K~1~-1U~y~Ú~q~1F~R~10~2~-1U~v~À~x~1E~0~3c~-1~-1U~w~Á~x~1E~0~4t~-1~-1U~w~Â~x~1E~0~68~-1~-1U~w~È~h~1E~0~7P~3~-1U~l~É~h~1E~0~8g~3~-1U~l~Í~P~1E~k~7P~1~-1U~R~Î~V~1E~k~8g~-2~-1U~R~Ô~x~1E~+~2I~1~-1U~y~Ö~x~1E~1I~10~1~-1T~y~Ü~q~1E~+~3Z~2~-1T~v~Q~x~1D~+~4q~1~-1C~y~Ä~x~1D~1r~3Z~-1~-1T~w~Ê~h~1D~1y~2H~3~-1U~l~W~1C~y~1P~0~0~-1C~1C~Ñ~r~1C~2G~/~3~-1T~y~$~k~18~+~64~1~-1I~m~{~R~18~2g~2E~-1~-1D~Q~}~R~18~1A~7F~0~-1D~Q~(~U~17~1G~8Q~1~-1D~U~)~U~17~1e~7F~-1~-1D~U~[~R~17~1l~64~3~-1C~T~]~R~17~1y~4p~0~-1C~S~œ~17~i~0~9x~0~-y~18~/~d~16~1n~8P~0~-1H~d~M~16~y~2e~0~0~-1C~17~ș~a~15~1n~9Y~0~-y~b~%~13~z~2O~9Y~1~-1C~15~w~12~i~29~7E~0~-y~11~k~j~11~2D~5z~2~-1G~j~m~11~h~2Q~4p~2~-y~15~©~11~10~2p~3P~1~-1E~13~\\~Z~11~2R~7z~0~-1F~a~b~k~10~31~7z~1~-1G~m~l~I~10~1G~9a~2~-1G~M~d~l~/~3U~90~1~-1G~n~f~c~/~2z~5X~-1~-1F~X~h~i~/~3U~4S~2~-1G~m~i~J~/~3E~6Z~2~-1G~N~è~e~/~3a~6Z~0~-1E~e~é~e~/~3c~5U~0~-1E~e~ò~i~/~3o~7b~0~-1E~j~ó~i~/~4F~6W~0~-1E~j~ù~h~/~4G~8d~2~-1E~l~ú~h~/~4G~9f~2~-1E~l~ć~c~/~4X~7Y~0~-1E~d~ß~l~+~4+~8a~2~-1D~n~à~c~+~4+~9b~0~-1E~e~á~c~+~5d~9b~0~-1E~e~ê~e~+~38~/~0~-1E~e~ì~P~+~38~20~-2~-1E~N~í~P~+~3a~20~0~-1E~N~ô~i~+~3t~31~0~-1E~j~û~h~+~4D~42~2~-1E~l~ź~Z~+~4H~53~1~-1E~b~&~t~z~4t~53~2~-1C~u~C~q~z~4+~63~1~-1C~q~G~s~z~5A~73~1~-1C~u~O~x~z~5m~83~1~-1C~y~g~l~z~6G~93~1~-x~n~p~l~z~3p~0~2~-y~o~q~j~z~3p~10~1~-y~m~y~k~z~40~20~-1~-y~i~â~c~z~4Z~10~0~-1E~e~ä~c~z~4b~0~0~-1D~e~ë~e~z~4c~30~0~-1D~e~î~V~z~4n~20~-4~-1E~N~ö~i~z~5C~10~0~-1D~j~ü~h~z~5E~0~2~-1D~l~ž~Z~z~4x~40~1~-1E~b~0~k~y~5H~30~1~-1C~n~3~g~y~5J~20~0~-1C~h~5~h~y~5x~10~-1~-1C~h~6~j~y~5y~0~1~-1C~j~8~j~y~60~1/~1~-1C~l~9~j~y~6f~/~0~-1C~j~;~L~y~6i~0~1~-y~O~?~a~y~74~0~1~-1C~b~H~t~y~5X~3/~3~-1C~z~J~c~y~62~2+~-1~-1B~d~K~q~y~5n~4+~3~-1B~s~R~o~y~6R~3z~3~-1B~r~U~q~y~6h~2+~2~-1C~v~V~u~y~6m~1+~-1~-1C~s~X~r~y~7P~/~-1~-1C~p~Y~r~y~7h~0~-1~-1C~p~¿~a~y~5r~5z~1~-y~b~ã~c~y~63~6y~0~-1D~e~ï~Y~y~6S~5z~-6~-1D~N~ñ~h~y~6e~4y~2~-1D~m~ồ~h~y~7G~3z~3~-1D~n~!~M~x~7Y~2z~1~-1C~P~#~l~x~7h~1+~1~-1B~m~£~g~x~8H~/~1~-1C~i~1~X~x~8Z~0~-1~-1C~Z~2~e~x~7x~2y~1~-1C~g~4~m~x~8T~1z~-1~-1C~l~7~e~x~8+~+~0~-1B~d~A~x~x~97~0~-1~-1C~w~D~q~x~6i~6y~3~-1B~u~E~h~x~71~5x~3~-1B~l~F~h~x~7M~4y~3~-1B~k~I~L~x~7+~3w~3~-1B~R~L~f~x~6k~7w~3~-1C~i~N~r~x~9f~+~3~-1C~y~P~m~x~9G~1y~3~-1B~p~S~k~x~9G~2w~1~-1C~l~T~l~x~72~8u~0~-1C~l~Z~i~x~7Q~7w~1~-1B~k~¡~M~x~A5~0~1~-y~O~ă~c~x~8c~2x~0~-1C~e~Ł~k~x~7Z~6v~-1~-1C~j~B~m~w~7l~5w~3~-1B~p~ō~i~w~84~4u~0~-19~j~ç~c~v~A1~2w~0~-y~d~t~Y~s~A3~1y~0~-16~X~÷~a~n~72~9s~1~-12~c~v~l~i~7f~9s~0~-y~j~x~k~j~8M~3w~-1~-y~i~:~L~j~7q~8u~1~-y~N~a~c~i~A1~3s~0~-y~e~c~c~i~9F~3u~0~-y~d~e~e~i~9u~4b~0~-y~e~o~i~i~97~4d~0~-x~j~s~a~i~9s~5K~0~-y~b~+~g~h~89~7t~1~-+~h~n~h~h~8K~6t~2~-y~m~r~W~h~8Y~63~2~-x~Y~u~h~h~95~5M~2~-x~l~z~Z~h~9p~63~1~-y~b~ı~I~h~95~64~2~-y~N~«~e~g~8C~8b~0~-+~g~»~d~g~8s~7b~1~-+~f~“~f~X~8C~9I~0~-1C~g~”~f~X~6G~A3~1~-1C~g~„~f~X~3U~A2~1~-a~g~×~b~b~92~6o~1~-y~d~–~b~E~8s~8I~2~-l~f~,~M~a~9Q~64~1~-b~N~=~a~R~2R~91~2~-s~f~^~a~R~8t~8Z~1~-1D~c~º~a~Z~8R~9s~1~-17~b~‘~L~a~8u~91~0~-1C~M~’~M~a~92~9e~1~-1C~M~−~a~A~2D~71~2~-l~f~"~V~Q~5A~83~1~-1D~X~°~T~T~5m~93~0~-1C~U~-~S~E~8K~7b~2~-m~X~_~S~B~8M~4g~2~-H~X~\'~E~Q~2z~6Z~1~-1D~G~´~P~I~32~90~8~-1E~e~•~O~N~2Q~5X~3~-r~T~.~M~L~3E~7b~1~-b~N~ ~0~0~2G~2E~-1~-J~E'},'brandon_text_regular':{'url':'fonts/brandon_text_regular.ttf','fontSizeToLineHeightCoefficient':1.2,'webgl':'1G~9O~9O~{~U~1F~0~0~1~-1G~W~}~U~1F~0~1I~1~-1G~W~[~K~1D~0~2a~5~-1F~Q~]~K~1D~0~3q~1~-1F~Q~j~G~1D~0~54~-2~-1E~I~Ñ~m~1C~0~6K~7~-1W~z~Ó~y~1C~J~54~3~-1W~12~Ô~y~1C~0~7Z~3~-1W~12~Ú~i~1C~p~6J~6~-1W~v~Q~y~1B~/~7Y~3~-1G~12~À~s~1B~N~2a~-1~-1W~r~Á~s~1B~N~3o~-1~-1W~r~Â~s~1B~X~0~-1~-1W~r~È~b~1B~X~1E~7~-1W~k~É~b~1B~19~1E~7~-1W~k~Ê~b~1B~1Q~0~7~-1W~k~Í~I~1B~1G~2S~2~-1W~M~Î~P~1B~1G~3g~-1~-1W~M~Ö~y~1A~1b~2S~3~-1U~12~Ü~i~1A~1n~1E~6~-1U~v~$~b~19~22~0~6~-1K~m~Ä~s~19~2W~1C~-1~-1U~r~Œ~17~y~2g~0~3~-1G~1D~W~14~y~1I~4u~1~-1G~17~œ~13~f~1i~3f~3~-z~18~(~N~11~2a~2O~3~-1G~R~)~N~11~1Y~5t~1~-1G~R~M~/~y~1y~5t~3~-1G~15~ș~R~z~2P~4L~3~-z~W~%~n~y~2t~3S~3~-1G~s~&~l~y~2+~2O~5~-1G~r~0~g~y~3P~/~5~-1G~p~3~b~y~3q~0~3~-1G~j~6~d~y~2t~4R~4~-1G~k~8~d~y~1+~6s~4~-1G~m~9~d~y~1+~7r~3~-1G~k~?~V~y~2e~6s~3~-1G~b~C~p~y~2+~5Q~3~-1G~u~G~p~y~3X~4R~3~-1G~x~N~m~y~3h~3N~7~-1G~z~O~y~y~3m~1+~3~-1G~12~S~b~y~46~/~3~-1G~h~©~y~y~4S~0~4~-1G~14~¿~V~y~4k~/~3~-z~a~ß~c~y~2e~7r~5~-1G~k~!~B~x~3A~6P~5~-1F~L~£~Y~x~3H~7N~7~-1G~m~2~b~x~3O~6P~3~-1G~i~4~k~x~3q~5Q~1~-1G~o~5~c~x~4N~4M~4~-1F~j~A~s~x~3H~8L~-1~-1G~r~J~V~x~3s~7N~0~-1F~b~U~i~x~40~6O~6~-1F~v~V~s~x~4b~5K~-1~-1F~r~b~a~x~4A~8L~5~-1F~i~d~a~x~4O~7M~3~-1F~i~f~X~x~4l~6I~1~-1G~U~p~a~x~4n~8K~5~-z~i~q~a~x~4/~7G~3~-z~i~¡~B~x~5J~6I~4~-z~J~ç~Z~x~5O~8E~3~-z~e~#~c~w~4U~2z~3~-1F~j~/~M~w~4l~1+~4~-1F~U~1~I~w~50~3w~2~-1F~R~7~c~w~57~2x~2~-1F~e~B~d~w~58~1+~7~-1F~o~D~n~w~5G~/~7~-1F~x~E~b~w~5R~0~7~-1F~k~F~b~w~63~0~7~-1F~j~H~l~w~5L~3u~7~-1F~y~I~8~w~5m~2x~7~-1F~M~K~f~w~5o~1y~7~-1F~m~L~X~w~64~z~7~-1F~d~P~d~w~5x~2v~7~-1F~l~R~g~w~6U~1w~7~-1F~q~T~d~w~6e~z~1~-1F~f~X~h~w~6h~0~2~-1F~k~Y~l~w~5U~4r~-1~-1F~k~Z~e~w~67~3s~1~-1F~g~h~X~w~6b~2t~5~-1F~h~k~X~w~5X~5o~5~-1F~d~l~8~w~5c~6l~6~-1F~J~y~c~w~5n~6l~1~-y~e~à~U~w~65~5o~2~-1E~c~á~U~w~6G~4p~2~-1E~c~â~U~w~5+~7i~2~-1E~c~ã~U~w~6Q~6l~2~-1E~c~ä~U~w~6c~5m~2~-1E~c~è~b~w~6n~4p~3~-1E~g~é~b~w~6o~3q~3~-1E~g~ê~b~w~79~2t~3~-1E~g~ë~b~w~7B~1w~3~-1E~g~ò~d~w~7I~z~3~-1E~j~ó~d~w~7P~0~3~-1E~j~ô~d~w~83~0~3~-1E~j~ö~d~w~8j~0~3~-1E~j~ù~W~w~6V~7i~5~-1E~g~ú~W~w~6x~6j~5~-1E~g~û~W~w~77~5m~5~-1E~g~ü~W~w~7P~4n~5~-1E~g~ć~Z~w~7Q~3q~3~-1E~e~Ł~b~w~7n~2t~3~-1F~d~ồ~g~w~7p~1w~3~-1F~m~\\~N~w~7y~z~4~-1F~V~g~a~v~8M~z~3~-z~i~i~B~v~8z~z~4~-1E~I~ì~I~v~8W~1v~0~-1E~I~í~I~v~8r~1v~0~-1E~I~î~P~v~8W~2r~-3~-1E~I~ï~Q~v~8y~2r~-4~-1E~I~ñ~X~v~8P~3n~5~-1E~h~ź~U~v~72~7g~2~-1E~X~ž~U~v~7U~6j~2~-1E~X~m~u~e~/~8m~5~-z~12~ă~U~u~7g~5k~2~-1C~c~ō~d~s~7y~4n~3~-1A~j~;~D~r~9B~z~5~-z~M~t~T~q~8c~4j~1~-18~U~w~q~f~5+~8f~2~-z~u~:~D~f~9B~1r~4~-z~L~a~U~f~6r~8f~2~-z~c~c~Z~f~7M~8c~3~-z~e~e~b~f~8c~5a~3~-z~g~o~d~f~7Z~7f~3~-z~j~s~R~f~8z~3n~3~-z~W~n~X~e~7/~6f~5~-z~h~r~P~e~7y~8L~5~-z~V~u~W~e~8Z~6G~5~-y~g~v~b~e~8Z~6x~1~-y~d~÷~Z~e~8D~7c~6~-16~m~x~Y~d~8p~7c~2~-y~c~z~U~d~8p~8G~2~-y~X~ı~8~d~96~6G~5~-y~I~^~b~R~8O~8w~2~-1G~g~+~Z~Z~1w~8q~6~-13~m~–~Z~6~4n~9I~4~-j~h~−~Z~7~5O~9C~6~-r~m~«~S~U~1i~4L~3~-u~Z~»~S~U~2W~8q~4~-u~Z~=~T~O~4U~3w~9~-v~m~_~T~6~7M~9I~4~-M~a~×~S~S~0~8o~A~-10~m~º~M~R~80~3q~3~-1G~S~“~R~O~2P~5L~3~-1G~X~”~R~O~50~4t~3~-1G~X~„~R~O~V~8o~4~-W~Y~,~C~O~7y~90~4~-W~J~°~O~O~8B~5g~3~-1G~T~‘~C~O~1I~5t~3~-1G~J~’~D~O~9B~6w~3~-1G~I~-~M~6~7Z~8L~4~-j~V~"~K~I~3P~1+~4~-1F~R~•~J~J~5c~7i~5~-q~U~\'~8~I~7/~7K~4~-1F~F~´~I~D~8z~4T~5~-1E~O~.~C~D~9B~7L~3~-X~J~ ~0~0~5U~5o~-1~-N~J'}};var Game;(function(Game){var maps=[{url:'images/backgrounds/background.png',width:1280,height:721,repeatX:false,repeatY:false},{url:'images/backgrounds/background2.png',width:1281,height:721,repeatX:false,repeatY:false},{url:'images/backgrounds/background3.png',width:1281,height:721,repeatX:false,repeatY:false},{url:'images/backgrounds/loading.png',width:1281,height:721,repeatX:false,repeatY:false},{url:'images/fonts/brandon_text_regular.png',width:600,height:600,repeatX:false,repeatY:false},{url:'images/fonts/mikado_black.png',width:680,height:680,repeatX:false,repeatY:false},{url:'images/fonts/mikado_bold.png',width:830,height:800,repeatX:false,repeatY:false},{url:'images/textureMap0.png',width:943,height:691,repeatX:false,repeatY:false},{url:'images/textureMap1.png',width:132,height:265,repeatX:false,repeatY:false},{url:'images/textureMap2.png',width:86,height:35,repeatX:false,repeatY:false},{url:'images/textureMap3.png',width:822,height:848,repeatX:false,repeatY:false},{url:'images/textureMap4.png',width:1756,height:963,repeatX:false,repeatY:false},{url:'images/textureMap5.png',width:1558,height:434,repeatX:false,repeatY:false},{url:'images/textureMap6.png',width:399,height:917,repeatX:false,repeatY:false},{url:'images/textureMap7.png',width:562,height:497,repeatX:false,repeatY:false},{url:'images/textureMap8.png',width:1006,height:417,repeatX:false,repeatY:false},{url:'images/textureMap9.png',width:498,height:234,repeatX:false,repeatY:false},{url:'images/textureMap10.png',width:452,height:657,repeatX:false,repeatY:false},{url:'images/textureMap11.png',width:659,height:494,repeatX:false,repeatY:false},{url:'images/textureMap12.png',width:672,height:303,repeatX:false,repeatY:false},{url:'images/textureMap13.png',width:1875,height:1059,repeatX:false,repeatY:false},{url:'images/textureMap14.png',width:1397,height:1047,repeatX:false,repeatY:false},{url:'images/textureMap15.png',width:505,height:767,repeatX:false,repeatY:false},{url:'images/textureMap16.png',width:258,height:959,repeatX:false,repeatY:false},{url:'images/textureMap17.png',width:1230,height:526,repeatX:false,repeatY:false},{url:'images/textureMap18.png',width:1010,height:250,repeatX:false,repeatY:false},{url:'images/textureMap19.png',width:1683,height:1060,repeatX:false,repeatY:false}];Game.appDesc.texturePool={'background':{map:maps[0],x:0,y:0,width:1280,height:721,opaque:true,trim:{left:0,right:0,top:0,bottom:0}},'background2':{map:maps[1],x:0,y:0,width:1281,height:721,opaque:true,trim:{left:0,right:0,top:0,bottom:0}},'background3':{map:maps[2],x:0,y:0,width:1281,height:721,opaque:true,trim:{left:0,right:0,top:0,bottom:0}},'loading':{map:maps[3],x:0,y:0,width:1281,height:721,opaque:true,trim:{left:0,right:0,top:0,bottom:0}},'brandon_text_regular':{map:maps[4],x:0,y:0,width:600,height:600,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'mikado_black':{map:maps[5],x:0,y:0,width:680,height:680,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'mikado_bold':{map:maps[6],x:0,y:0,width:830,height:800,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'science_category12fps0':{map:maps[7],x:0,y:215,width:178,height:242,opaque:false,trim:{left:8,right:2,top:31,bottom:0}},'science_category12fps1':{map:maps[7],x:0,y:0,width:178,height:242,opaque:false,trim:{left:6,right:2,top:30,bottom:0}},'science_category12fps2':{map:maps[7],x:0,y:429,width:178,height:242,opaque:false,trim:{left:11,right:3,top:27,bottom:0}},'science_category12fps3':{map:maps[7],x:789,y:0,width:178,height:242,opaque:false,trim:{left:20,right:4,top:21,bottom:0}},'science_category12fps4':{map:maps[7],x:789,y:459,width:178,height:242,opaque:false,trim:{left:25,right:7,top:11,bottom:0}},'science_category12fps5':{map:maps[7],x:789,y:224,width:178,height:242,opaque:false,trim:{left:25,right:7,top:10,bottom:0}},'science_category12fps6':{map:maps[7],x:173,y:464,width:178,height:242,opaque:false,trim:{left:18,right:8,top:15,bottom:0}},'science_category12fps7':{map:maps[7],x:173,y:0,width:178,height:242,opaque:false,trim:{left:16,right:8,top:15,bottom:0}},'science_category12fps8':{map:maps[7],x:330,y:0,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA0':{map:maps[7],x:330,y:231,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA1':{map:maps[7],x:173,y:230,width:178,height:242,opaque:false,trim:{left:20,right:8,top:11,bottom:0}},'science_category12fpsA2':{map:maps[7],x:330,y:462,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA3':{map:maps[7],x:483,y:0,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA4':{map:maps[7],x:483,y:231,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA5':{map:maps[7],x:483,y:462,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA6':{map:maps[7],x:636,y:0,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fpsA7':{map:maps[7],x:636,y:231,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'science_category12fps_blink0':{map:maps[7],x:636,y:462,width:178,height:242,opaque:false,trim:{left:20,right:8,top:14,bottom:0}},'black_box_left':{map:maps[8],x:49,y:176,width:37,height:79,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'black_box_right':{map:maps[8],x:93,y:176,width:36,height:79,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'popup_corner_bottom_left':{map:maps[8],x:2,y:129,width:40,height:40,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'popup_corner_bottom_right':{map:maps[8],x:49,y:129,width:40,height:40,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'popup_corner_top_left':{map:maps[8],x:2,y:176,width:40,height:40,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'popup_corner_top_right':{map:maps[8],x:2,y:223,width:40,height:40,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_bg_pattern':{map:maps[8],x:2,y:2,width:128,height:120,opaque:true,trim:{left:0,right:0,top:0,bottom:0}},'loading_bar_left':{map:maps[9],x:2,y:2,width:28,height:31,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'loading_bar_middle':{map:maps[9],x:37,y:2,width:12,height:31,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'loading_bar_right':{map:maps[9],x:56,y:2,width:28,height:31,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'movies_category12fps00':{map:maps[10],x:455,y:310,width:238,height:221,opaque:false,trim:{left:51,right:73,top:66,bottom:2}},'movies_category12fps01':{map:maps[10],x:186,y:156,width:238,height:221,opaque:false,trim:{left:10,right:73,top:69,bottom:1}},'movies_category12fps02':{map:maps[10],x:368,y:0,width:238,height:221,opaque:false,trim:{left:22,right:56,top:67,bottom:2}},'movies_category12fps03':{map:maps[10],x:0,y:507,width:238,height:221,opaque:false,trim:{left:25,right:56,top:68,bottom:2}},'movies_category12fps04':{map:maps[10],x:531,y:0,width:238,height:221,opaque:false,trim:{left:22,right:56,top:68,bottom:2}},'movies_category12fps05':{map:maps[10],x:344,y:156,width:238,height:221,opaque:false,trim:{left:27,right:56,top:74,bottom:2}},'movies_category12fps06':{map:maps[10],x:186,y:310,width:238,height:221,opaque:false,trim:{left:30,right:60,top:47,bottom:3}},'movies_category12fps07':{map:maps[10],x:0,y:340,width:238,height:221,opaque:false,trim:{left:3,right:66,top:55,bottom:2}},'movies_category12fps08':{map:maps[10],x:186,y:680,width:238,height:221,opaque:false,trim:{left:36,right:68,top:51,bottom:2}},'movies_category12fps09':{map:maps[10],x:572,y:310,width:238,height:221,opaque:false,trim:{left:46,right:78,top:66,bottom:2}},'movies_category12fps10':{map:maps[10],x:337,y:466,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps11':{map:maps[10],x:337,y:622,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps12':{map:maps[10],x:0,y:156,width:238,height:221,opaque:false,trim:{left:46,right:9,top:38,bottom:2}},'movies_category12fps13':{map:maps[10],x:453,y:466,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps14':{map:maps[10],x:0,y:661,width:238,height:221,opaque:false,trim:{left:3,right:79,top:66,bottom:0}},'movies_category12fps15':{map:maps[10],x:453,y:622,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps16':{map:maps[10],x:195,y:0,width:238,height:221,opaque:false,trim:{left:46,right:22,top:66,bottom:2}},'movies_category12fps17':{map:maps[10],x:0,y:0,width:238,height:221,opaque:false,trim:{left:46,right:0,top:66,bottom:2}},'movies_category12fps18':{map:maps[10],x:569,y:466,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps19':{map:maps[10],x:685,y:466,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps20':{map:maps[10],x:569,y:622,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps21':{map:maps[10],x:685,y:622,width:238,height:221,opaque:false,trim:{left:46,right:79,top:66,bottom:2}},'movies_category12fps22':{map:maps[10],x:689,y:310,width:238,height:221,opaque:false,trim:{left:47,right:77,top:68,bottom:1}},'movies_category12fps23':{map:maps[10],x:625,y:156,width:238,height:221,opaque:false,trim:{left:48,right:76,top:69,bottom:1}},'movies_category12fps24':{map:maps[10],x:694,y:0,width:238,height:221,opaque:false,trim:{left:40,right:70,top:68,bottom:1}},'movies_category12fps25':{map:maps[10],x:186,y:484,width:238,height:221,opaque:false,trim:{left:22,right:78,top:27,bottom:1}},'movies_category12fps26':{map:maps[10],x:337,y:310,width:238,height:221,opaque:false,trim:{left:45,right:78,top:67,bottom:1}},'movies_category12fps27':{map:maps[10],x:502,y:156,width:238,height:221,opaque:false,trim:{left:41,right:77,top:73,bottom:1}},'crown0':{map:maps[11],x:1519,y:0,width:224,height:292,opaque:false,trim:{left:0,right:0,top:0,bottom:6}},'crown_remote0':{map:maps[11],x:1221,y:0,width:316,height:326,opaque:false,trim:{left:7,right:14,top:0,bottom:3}},'crown_remote1':{map:maps[11],x:922,y:0,width:316,height:326,opaque:false,trim:{left:7,right:13,top:0,bottom:3}},'crown_remote2':{map:maps[11],x:619,y:326,width:316,height:326,opaque:false,trim:{left:7,right:11,top:0,bottom:3}},'crown_remote3':{map:maps[11],x:619,y:0,width:316,height:326,opaque:false,trim:{left:6,right:10,top:0,bottom:3}},'crown_remote4':{map:maps[11],x:311,y:326,width:316,height:326,opaque:false,trim:{left:6,right:8,top:0,bottom:3}},'crown_remote5':{map:maps[11],x:311,y:0,width:316,height:326,opaque:false,trim:{left:5,right:6,top:0,bottom:3}},'crown_remote6':{map:maps[11],x:0,y:326,width:316,height:326,opaque:false,trim:{left:5,right:5,top:0,bottom:3}},'crown_remote7':{map:maps[11],x:0,y:0,width:316,height:326,opaque:false,trim:{left:5,right:3,top:0,bottom:3}},'crown_waves_hand0':{map:maps[11],x:1480,y:777,width:56,height:76,opaque:false,trim:{left:31,right:0,top:2,bottom:0}},'crown_waves_hand3':{map:maps[11],x:1480,y:699,width:56,height:76,opaque:false,trim:{left:16,right:0,top:1,bottom:0}},'crown_waves_hand5':{map:maps[11],x:1480,y:640,width:56,height:76,opaque:false,trim:{left:0,right:0,top:20,bottom:0}},'crowncg0':{map:maps[11],x:1482,y:326,width:316,height:312,opaque:false,trim:{left:28,right:14,top:0,bottom:1}},'crowncg1':{map:maps[11],x:1203,y:640,width:316,height:312,opaque:false,trim:{left:29,right:13,top:0,bottom:1}},'crowncg2':{map:maps[11],x:922,y:640,width:316,height:312,opaque:false,trim:{left:29,right:11,top:0,bottom:1}},'crowncg3':{map:maps[11],x:1203,y:326,width:316,height:312,opaque:false,trim:{left:30,right:10,top:0,bottom:1}},'crowncg4':{map:maps[11],x:922,y:326,width:316,height:312,opaque:false,trim:{left:30,right:8,top:0,bottom:1}},'crowncg5':{map:maps[11],x:619,y:652,width:316,height:312,opaque:false,trim:{left:31,right:6,top:0,bottom:1}},'crowncg6':{map:maps[11],x:311,y:652,width:316,height:312,opaque:false,trim:{left:31,right:5,top:0,bottom:1}},'crowncg7':{map:maps[11],x:0,y:652,width:316,height:312,opaque:false,trim:{left:31,right:3,top:0,bottom:1}},'history_category12fps00':{map:maps[12],x:1123,y:0,width:169,height:238,opaque:false,trim:{left:21,right:5,top:12,bottom:13}},'history_category12fps01':{map:maps[12],x:974,y:209,width:169,height:238,opaque:false,trim:{left:19,right:5,top:13,bottom:13}},'history_category12fps02':{map:maps[12],x:822,y:208,width:169,height:238,opaque:false,trim:{left:16,right:7,top:16,bottom:13}},'history_category12fps03':{map:maps[12],x:668,y:216,width:169,height:238,opaque:false,trim:{left:12,right:8,top:19,bottom:13}},'history_category12fps04':{map:maps[12],x:822,y:0,width:169,height:238,opaque:false,trim:{left:12,right:8,top:20,bottom:13}},'history_category12fps05':{map:maps[12],x:974,y:0,width:169,height:238,opaque:false,trim:{left:14,right:9,top:19,bottom:13}},'history_category12fps06':{map:maps[12],x:1123,y:216,width:169,height:238,opaque:false,trim:{left:17,right:9,top:19,bottom:13}},'history_category12fps07':{map:maps[12],x:1415,y:221,width:169,height:238,opaque:false,trim:{left:19,right:8,top:14,bottom:13}},'history_category12fps08':{map:maps[12],x:1269,y:0,width:169,height:238,opaque:false,trim:{left:21,right:5,top:7,bottom:13}},'history_category12fps09':{map:maps[12],x:1415,y:0,width:169,height:238,opaque:false,trim:{left:21,right:5,top:7,bottom:13}},'history_category12fps10':{map:maps[12],x:1269,y:221,width:169,height:238,opaque:false,trim:{left:21,right:5,top:12,bottom:13}},'history_category12fps11':{map:maps[12],x:668,y:0,width:169,height:238,opaque:false,trim:{left:13,right:5,top:12,bottom:13}},'history_category12fpsA0':{map:maps[12],x:0,y:0,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'history_category12fpsA1':{map:maps[12],x:0,y:216,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:14}},'history_category12fpsA2':{map:maps[12],x:167,y:0,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'history_category12fpsA3':{map:maps[12],x:167,y:216,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'history_category12fpsA4':{map:maps[12],x:334,y:0,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:14}},'history_category12fpsA5':{map:maps[12],x:334,y:215,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'history_category12fpsA6':{map:maps[12],x:501,y:0,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'history_category12fps_blink0':{map:maps[12],x:501,y:216,width:169,height:238,opaque:false,trim:{left:0,right:5,top:12,bottom:13}},'art_category12fps0':{map:maps[13],x:0,y:0,width:199,height:238,opaque:false,trim:{left:1,right:0,top:1,bottom:3}},'art_category12fps3':{map:maps[13],x:0,y:474,width:199,height:238,opaque:false,trim:{left:1,right:0,top:9,bottom:3}},'art_category12fps4':{map:maps[13],x:201,y:703,width:199,height:238,opaque:false,trim:{left:1,right:0,top:28,bottom:3}},'art_category12fps5':{map:maps[13],x:0,y:703,width:199,height:238,opaque:false,trim:{left:1,right:0,top:21,bottom:3}},'art_category12fps6':{map:maps[13],x:201,y:474,width:199,height:238,opaque:false,trim:{left:1,right:0,top:9,bottom:3}},'art_category12fps7':{map:maps[13],x:201,y:0,width:199,height:238,opaque:false,trim:{left:1,right:0,top:1,bottom:3}},'art_category12fps_blink':{map:maps[13],x:0,y:237,width:199,height:238,opaque:false,trim:{left:1,right:0,top:1,bottom:3}},'art_category12fps_skull_blink':{map:maps[13],x:201,y:237,width:199,height:238,opaque:false,trim:{left:1,right:0,top:1,bottom:3}},'Tito_Victory_export_12fps00':{map:maps[14],x:0,y:200,width:300,height:350,opaque:false,trim:{left:17,right:7,top:183,bottom:16}},'Tito_Victory_export_12fps01':{map:maps[14],x:0,y:354,width:300,height:350,opaque:false,trim:{left:26,right:16,top:191,bottom:16}},'Tito_Victory_export_12fps02':{map:maps[14],x:302,y:252,width:300,height:350,opaque:false,trim:{left:21,right:24,top:54,bottom:76}},'Tito_Victory_export_12fps03':{map:maps[14],x:0,y:0,width:300,height:350,opaque:false,trim:{left:0,right:1,top:39,bottom:114}},'Tito_Victory_export_12fps04':{map:maps[14],x:302,y:0,width:300,height:350,opaque:false,trim:{left:22,right:18,top:84,bottom:17}},'Willy_Defeat0':{map:maps[15],x:443,y:250,width:146,height:164,opaque:false,trim:{left:2,right:2,top:1,bottom:0}},'Willy_Defeat1':{map:maps[15],x:844,y:196,width:146,height:164,opaque:false,trim:{left:2,right:2,top:1,bottom:0}},'Willy_Victory01':{map:maps[15],x:844,y:0,width:233,height:281,opaque:false,trim:{left:33,right:38,top:85,bottom:3}},'Willy_Victory03':{map:maps[15],x:650,y:235,width:233,height:281,opaque:false,trim:{left:30,right:35,top:96,bottom:3}},'Willy_Victory05':{map:maps[15],x:0,y:238,width:233,height:281,opaque:false,trim:{left:26,right:32,top:108,bottom:3}},'Willy_Victory08':{map:maps[15],x:223,y:194,width:233,height:281,opaque:false,trim:{left:3,right:19,top:61,bottom:3}},'Willy_Victory10':{map:maps[15],x:0,y:0,width:233,height:281,opaque:false,trim:{left:7,right:6,top:43,bottom:3}},'Willy_Victory12':{map:maps[15],x:443,y:0,width:233,height:281,opaque:false,trim:{left:9,right:20,top:31,bottom:3}},'Willy_Victory15':{map:maps[15],x:650,y:0,width:233,height:281,opaque:false,trim:{left:17,right:25,top:47,bottom:2}},'Willy_Victory17':{map:maps[15],x:223,y:0,width:233,height:281,opaque:false,trim:{left:6,right:10,top:87,bottom:3}},'time_bg':{map:maps[16],x:0,y:0,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'time_part':{map:maps[16],x:424,y:0,width:74,height:76,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'time_part_bg':{map:maps[16],x:424,y:79,width:74,height:76,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'time_part_warning':{map:maps[16],x:424,y:158,width:74,height:76,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer1':{map:maps[16],x:0,y:116,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer2':{map:maps[16],x:106,y:0,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer3':{map:maps[16],x:318,y:0,width:103,height:112,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer4':{map:maps[16],x:106,y:116,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer5':{map:maps[16],x:212,y:0,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer6':{map:maps[16],x:318,y:115,width:103,height:112,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'timer_top_bg':{map:maps[16],x:212,y:116,width:103,height:113,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'sports_categoryP10':{map:maps[17],x:0,y:243,width:131,height:268,opaque:false,trim:{left:18,right:4,top:23,bottom:8}},'sports_categoryP11':{map:maps[17],x:112,y:230,width:131,height:268,opaque:false,trim:{left:18,right:4,top:41,bottom:8}},'sports_categoryP12':{map:maps[17],x:224,y:230,width:131,height:268,opaque:false,trim:{left:17,right:4,top:55,bottom:8}},'sports_categoryP13':{map:maps[17],x:337,y:230,width:131,height:268,opaque:false,trim:{left:16,right:4,top:55,bottom:8}},'sports_categoryP205':{map:maps[17],x:337,y:438,width:131,height:268,opaque:false,trim:{left:12,right:4,top:59,bottom:8}},'sports_categoryP206':{map:maps[17],x:338,y:0,width:131,height:268,opaque:false,trim:{left:18,right:4,top:37,bottom:10}},'sports_categoryP207':{map:maps[17],x:112,y:0,width:131,height:268,opaque:false,trim:{left:17,right:4,top:4,bottom:37}},'sports_categoryP208':{map:maps[17],x:225,y:0,width:131,height:268,opaque:false,trim:{left:17,right:4,top:4,bottom:37}},'sports_categoryP209':{map:maps[17],x:0,y:0,width:131,height:268,opaque:false,trim:{left:18,right:4,top:8,bottom:20}},'sports_categoryP210':{map:maps[17],x:112,y:452,width:131,height:268,opaque:false,trim:{left:18,right:4,top:55,bottom:8}},'sports_categoryP211':{map:maps[17],x:224,y:438,width:131,height:268,opaque:false,trim:{left:17,right:4,top:55,bottom:8}},'cancer0':{map:maps[18],x:462,y:0,width:180,height:136,opaque:false,trim:{left:7,right:3,top:6,bottom:5}},'cancer1':{map:maps[18],x:113,y:153,width:180,height:136,opaque:false,trim:{left:7,right:3,top:6,bottom:5}},'cancer2':{map:maps[18],x:113,y:281,width:180,height:136,opaque:false,trim:{left:7,right:3,top:6,bottom:5}},'cancer3':{map:maps[18],x:286,y:153,width:180,height:136,opaque:false,trim:{left:7,right:3,top:8,bottom:5}},'cancer4':{map:maps[18],x:459,y:153,width:180,height:136,opaque:false,trim:{left:7,right:3,top:10,bottom:5}},'leaf1_1':{map:maps[18],x:0,y:171,width:87,height:167,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'leaf2_1':{map:maps[18],x:113,y:409,width:138,height:85,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'leaf3_1':{map:maps[18],x:0,y:341,width:99,height:127,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'leaf4_1':{map:maps[18],x:474,y:279,width:184,height:97,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'leaf5_1':{map:maps[18],x:286,y:388,width:179,height:103,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'leaf6_1':{map:maps[18],x:0,y:0,width:110,height:168,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'rightLeaf':{map:maps[18],x:474,y:379,width:185,height:88,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'ship':{map:maps[18],x:286,y:279,width:185,height:106,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'tree_shadow':{map:maps[18],x:113,y:0,width:346,height:150,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'category1':{map:maps[19],x:386,y:160,width:186,height:186,opaque:false,trim:{left:47,right:47,top:21,bottom:22}},'category1_off':{map:maps[19],x:492,y:159,width:186,height:186,opaque:false,trim:{left:49,right:45,top:21,bottom:22}},'category2':{map:maps[19],x:0,y:0,width:186,height:186,opaque:false,trim:{left:30,right:22,top:25,bottom:22}},'category2_off':{map:maps[19],x:0,y:142,width:186,height:186,opaque:false,trim:{left:30,right:22,top:25,bottom:22}},'category3':{map:maps[19],x:597,y:0,width:186,height:186,opaque:false,trim:{left:57,right:54,top:20,bottom:19}},'category3_off':{map:maps[19],x:597,y:150,width:186,height:186,opaque:false,trim:{left:57,right:54,top:20,bottom:19}},'category4':{map:maps[19],x:492,y:0,width:186,height:186,opaque:false,trim:{left:50,right:34,top:12,bottom:18}},'category4_off':{map:maps[19],x:386,y:0,width:186,height:186,opaque:false,trim:{left:50,right:33,top:11,bottom:18}},'category5':{map:maps[19],x:137,y:0,width:186,height:186,opaque:false,trim:{left:31,right:25,top:17,bottom:20}},'category5_off':{map:maps[19],x:137,y:152,width:186,height:186,opaque:false,trim:{left:31,right:25,top:17,bottom:20}},'category6':{map:maps[19],x:270,y:0,width:186,height:186,opaque:false,trim:{left:32,right:41,top:18,bottom:18}},'category6_off':{map:maps[19],x:270,y:153,width:186,height:186,opaque:false,trim:{left:32,right:41,top:18,bottom:18}},'aboutIcon':{map:maps[20],x:1003,y:404,width:77,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'backIcon':{map:maps[20],x:1003,y:497,width:77,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'black_dialog_cursor':{map:maps[20],x:1099,y:85,width:497,height:112,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'bomb_icon':{map:maps[20],x:1651,y:248,width:61,height:66,opaque:false,trim:{left:7,right:7,top:2,bottom:3}},'bomb_powerup_icon':{map:maps[20],x:367,y:1020,width:35,height:35,opaque:false,trim:{left:2,right:2,top:2,bottom:2}},'center_box':{map:maps[20],x:0,y:590,width:880,height:78,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'coin_icon':{map:maps[20],x:43,y:1020,width:41,height:42,opaque:false,trim:{left:2,right:1,top:2,bottom:1}},'coin_shadowed':{map:maps[20],x:1831,y:85,width:40,height:46,opaque:false,trim:{left:1,right:1,top:2,bottom:1}},'coin_shadowed_disabled':{map:maps[20],x:1831,y:131,width:40,height:46,opaque:false,trim:{left:1,right:1,top:2,bottom:1}},'double_powerup_icon':{map:maps[20],x:581,y:818,width:35,height:35,opaque:false,trim:{left:0,right:0,top:4,bottom:5}},'flag1':{map:maps[20],x:192,y:1020,width:33,height:38,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'flag2':{map:maps[20],x:227,y:1020,width:33,height:38,opaque:false,trim:{left:1,right:0,top:1,bottom:1}},'flag3':{map:maps[20],x:84,y:1020,width:33,height:38,opaque:false,trim:{left:0,right:0,top:1,bottom:0}},'flag4':{map:maps[20],x:262,y:1020,width:33,height:38,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'flag5':{map:maps[20],x:120,y:1020,width:33,height:38,opaque:false,trim:{left:0,right:0,top:1,bottom:0}},'flag6':{map:maps[20],x:156,y:1020,width:33,height:39,opaque:false,trim:{left:0,right:0,top:1,bottom:1}},'flag7':{map:maps[20],x:297,y:1020,width:33,height:38,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'flag_bg':{map:maps[20],x:332,y:1020,width:33,height:38,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'free_button':{map:maps[20],x:1099,y:315,width:485,height:100,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'green_button':{map:maps[20],x:1099,y:418,width:487,height:106,opaque:false,trim:{left:1,right:1,top:1,bottom:0}},'heart':{map:maps[20],x:0,y:1020,width:42,height:35,opaque:false,trim:{left:1,right:1,top:0,bottom:1}},'icon_1':{map:maps[20],x:1027,y:671,width:63,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'icon_2':{map:maps[20],x:1670,y:0,width:63,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'icon_3':{map:maps[20],x:912,y:504,width:64,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'icon_4':{map:maps[20],x:581,y:755,width:64,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'icon_5':{map:maps[20],x:571,y:850,width:64,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'icon_6':{map:maps[20],x:571,y:935,width:64,height:63,opaque:false,trim:{left:2,right:2,top:2,bottom:1}},'lang_icon':{map:maps[20],x:1016,y:770,width:77,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'left_box':{map:maps[20],x:1599,y:85,width:245,height:71,opaque:false,trim:{left:0,right:16,top:0,bottom:0}},'mainMenuBtnBg':{map:maps[20],x:1099,y:634,width:344,height:92,opaque:false,trim:{left:3,right:1,top:0,bottom:0}},'mainMenuBtnBgGlow':{map:maps[20],x:645,y:956,width:353,height:98,opaque:false,trim:{left:0,right:1,top:1,bottom:0}},'ocean_piece':{map:maps[20],x:1599,y:200,width:226,height:45,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'orange_button':{map:maps[20],x:1099,y:526,width:487,height:107,opaque:false,trim:{left:1,right:1,top:2,bottom:0}},'pa_bg':{map:maps[20],x:645,y:770,width:369,height:90,opaque:false,trim:{left:0,right:1,top:0,bottom:0}},'pa_bg_disabled':{map:maps[20],x:645,y:863,width:368,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'pa_cursor':{map:maps[20],x:645,y:671,width:379,height:96,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'party':{map:maps[20],x:1099,y:786,width:285,height:272,opaque:false,trim:{left:3,right:2,top:2,bottom:2}},'play_icon':{map:maps[20],x:401,y:1020,width:28,height:33,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'q_button':{map:maps[20],x:0,y:850,width:568,height:82,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'q_button_correct':{map:maps[20],x:0,y:935,width:568,height:82,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'q_button_cursor':{map:maps[20],x:0,y:755,width:578,height:92,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'q_button_wrong':{map:maps[20],x:1099,y:0,width:568,height:82,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'quastion_box':{map:maps[20],x:0,y:404,width:909,height:183,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'right_box':{map:maps[20],x:883,y:590,width:198,height:70,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'right_icon':{map:maps[20],x:571,y:998,width:62,height:66,opaque:false,trim:{left:2,right:0,top:12,bottom:4}},'score_box':{map:maps[20],x:1587,y:526,width:215,height:87,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'second_chance_icon':{map:maps[20],x:1789,y:0,width:61,height:66,opaque:false,trim:{left:5,right:5,top:10,bottom:2}},'shop_next':{map:maps[20],x:1732,y:0,width:54,height:57,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'smal_mm_cursor':{map:maps[20],x:912,y:404,width:90,height:98,opaque:false,trim:{left:1,right:1,top:1,bottom:0}},'square_button':{map:maps[20],x:1641,y:634,width:196,height:195,opaque:false,trim:{left:5,right:6,top:6,bottom:6}},'square_button_cursor':{map:maps[20],x:1442,y:634,width:196,height:195,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'square_button_off':{map:maps[20],x:1442,y:832,width:196,height:195,opaque:false,trim:{left:5,right:5,top:6,bottom:8}},'statisticIcon':{map:maps[20],x:1016,y:863,width:77,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'stats_bg':{map:maps[20],x:0,y:0,width:1096,height:401,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'stats_cursor':{map:maps[20],x:1099,y:729,width:293,height:54,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'stats_tab_off':{map:maps[20],x:1587,y:315,width:288,height:51,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'stats_tab_on':{map:maps[20],x:1587,y:418,width:288,height:51,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'storeIcon':{map:maps[20],x:1000,y:956,width:77,height:90,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'trivia_logo':{map:maps[20],x:0,y:671,width:650,height:92,opaque:false,trim:{left:4,right:4,top:7,bottom:4}},'video_icon':{map:maps[20],x:1599,y:248,width:49,height:50,opaque:false,trim:{left:0,right:0,top:0,bottom:1}},'white_dialog_cursor':{map:maps[20],x:1099,y:200,width:497,height:112,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'category1_q':{map:maps[21],x:1284,y:175,width:127,height:122,opaque:false,trim:{left:17,right:2,top:12,bottom:2}},'category2_q':{map:maps[21],x:1284,y:350,width:127,height:122,opaque:false,trim:{left:18,right:1,top:12,bottom:2}},'category3_q':{map:maps[21],x:1284,y:525,width:127,height:122,opaque:false,trim:{left:18,right:1,top:11,bottom:3}},'category4_q':{map:maps[21],x:1284,y:0,width:127,height:122,opaque:false,trim:{left:11,right:3,top:4,bottom:1}},'category5_q':{map:maps[21],x:1284,y:700,width:127,height:122,opaque:false,trim:{left:18,right:1,top:12,bottom:2}},'category6_q':{map:maps[21],x:1284,y:875,width:127,height:122,opaque:false,trim:{left:17,right:2,top:11,bottom:3}},'solid1':{map:maps[21],x:0,y:0,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'solid2':{map:maps[21],x:0,y:175,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'solid3':{map:maps[21],x:0,y:350,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'solid4':{map:maps[21],x:0,y:525,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'solid5':{map:maps[21],x:0,y:700,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'solid6':{map:maps[21],x:0,y:875,width:1281,height:172,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_box':{map:maps[22],x:187,y:0,width:172,height:326,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_box1':{map:maps[22],x:0,y:427,width:172,height:326,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_box2':{map:maps[22],x:175,y:427,width:172,height:326,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_box_cursor':{map:maps[22],x:0,y:0,width:184,height:424,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'shop_icon':{map:maps[22],x:362,y:299,width:176,height:176,opaque:false,trim:{left:20,right:20,top:33,bottom:34}},'shop_icon1':{map:maps[22],x:350,y:710,width:176,height:176,opaque:false,trim:{left:36,right:36,top:59,bottom:60}},'shop_icon2':{map:maps[22],x:350,y:427,width:176,height:176,opaque:false,trim:{left:10,right:11,top:16,bottom:17}},'shop_icon3':{map:maps[22],x:350,y:573,width:176,height:176,opaque:false,trim:{left:23,right:22,top:27,bottom:15}},'shop_icon4':{map:maps[22],x:362,y:158,width:176,height:176,opaque:false,trim:{left:23,right:18,top:25,bottom:13}},'shop_icon5':{map:maps[22],x:362,y:0,width:176,height:176,opaque:false,trim:{left:22,right:22,top:11,bottom:10}},'shop_price':{map:maps[22],x:187,y:329,width:172,height:94,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'bg_center':{map:maps[23],x:0,y:266,width:80,height:651,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'bg_left':{map:maps[23],x:83,y:266,width:80,height:651,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'bg_right':{map:maps[23],x:166,y:266,width:80,height:651,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'heart_cry':{map:maps[23],x:0,y:0,width:258,height:263,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'heart_cry_brows':{map:maps[23],x:83,y:920,width:63,height:12,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'heart_cry_eyes':{map:maps[23],x:0,y:920,width:55,height:39,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'heart_cry_mouth':{map:maps[23],x:166,y:920,width:88,height:30,opaque:false,trim:{left:1,right:1,top:1,bottom:1}},'heart_cry_tear':{map:maps[23],x:58,y:920,width:16,height:22,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'roulette':{map:maps[24],x:525,y:0,width:510,height:509,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'roulette_circle_updated':{map:maps[24],x:1038,y:0,width:230,height:230,opaque:false,trim:{left:19,right:19,top:0,bottom:20}},'roulette_cursor':{map:maps[24],x:0,y:0,width:522,height:526,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'albert_eyes_closed':{map:maps[25],x:978,y:168,width:30,height:42,opaque:false,trim:{left:2,right:0,top:16,bottom:11}},'albert_eyes_open':{map:maps[25],x:958,y:0,width:30,height:42,opaque:false,trim:{left:2,right:1,top:2,bottom:4}},'bonzo_eyes_closed':{map:maps[25],x:982,y:85,width:32,height:41,opaque:false,trim:{left:2,right:2,top:10,bottom:9}},'bonzo_eyes_open':{map:maps[25],x:988,y:0,width:32,height:40,opaque:false,trim:{left:5,right:5,top:3,bottom:1}},'hand_waves1':{map:maps[25],x:947,y:110,width:43,height:55,opaque:false,trim:{left:0,right:25,top:0,bottom:0}},'hand_waves2':{map:maps[25],x:968,y:110,width:43,height:55,opaque:false,trim:{left:1,right:24,top:0,bottom:0}},'hand_waves3':{map:maps[25],x:989,y:110,width:43,height:55,opaque:false,trim:{left:6,right:20,top:0,bottom:0}},'hand_waves4':{map:maps[25],x:924,y:110,width:43,height:55,opaque:false,trim:{left:9,right:14,top:0,bottom:0}},'hand_waves5':{map:maps[25],x:924,y:54,width:43,height:55,opaque:false,trim:{left:10,right:7,top:2,bottom:0}},'hand_waves6':{map:maps[25],x:924,y:0,width:43,height:55,opaque:false,trim:{left:10,right:2,top:4,bottom:0}},'pop_eyes_closed':{map:maps[25],x:947,y:168,width:32,height:35,opaque:false,trim:{left:2,right:2,top:12,bottom:7}},'pop_eyes_open':{map:maps[25],x:953,y:54,width:32,height:35,opaque:false,trim:{left:3,right:3,top:1,bottom:2}},'q_box':{map:maps[25],x:0,y:0,width:921,height:253,opaque:false,trim:{left:0,right:0,top:2,bottom:1}},'tina_eyes_closed':{map:maps[25],x:953,y:89,width:26,height:38,opaque:false,trim:{left:1,right:1,top:15,bottom:9}},'tina_eyes_open':{map:maps[25],x:924,y:168,width:26,height:37,opaque:false,trim:{left:3,right:3,top:3,bottom:2}},'tito_eyes_closed':{map:maps[25],x:958,y:39,width:26,height:34,opaque:false,trim:{left:1,right:1,top:14,bottom:8}},'tito_eyes_open':{map:maps[25],x:982,y:54,width:26,height:34,opaque:false,trim:{left:1,right:2,top:4,bottom:2}},'Albert_Victory00':{map:maps[26],x:836,y:455,width:125,height:201,opaque:false,trim:{left:7,right:27,top:13,bottom:1}},'Albert_Victory04':{map:maps[26],x:1188,y:624,width:125,height:201,opaque:false,trim:{left:7,right:27,top:15,bottom:0}},'Albert_Victory08':{map:maps[26],x:817,y:680,width:125,height:201,opaque:false,trim:{left:5,right:27,top:12,bottom:0}},'Albert_Victory12':{map:maps[26],x:1559,y:0,width:125,height:201,opaque:false,trim:{left:0,right:1,top:1,bottom:2}},'Albert_Victory16':{map:maps[26],x:1355,y:221,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Albert_Victory20':{map:maps[26],x:1482,y:221,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Albert_Victory24':{map:maps[26],x:1051,y:631,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Albert_Victory28':{map:maps[26],x:1051,y:830,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Albert_Victory32':{map:maps[26],x:1188,y:425,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Albert_Victory36':{map:maps[26],x:1315,y:425,width:125,height:201,opaque:false,trim:{left:0,right:1,top:3,bottom:2}},'Bonzo_Defeat1':{map:maps[26],x:243,y:703,width:80,height:148,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'Bonzo_Defeat2':{map:maps[26],x:1188,y:813,width:80,height:148,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'Bonzo_Defeat3':{map:maps[26],x:1539,y:869,width:80,height:148,opaque:false,trim:{left:1,right:0,top:1,bottom:0}},'Bonzo_Victory':{map:maps[26],x:1559,y:425,width:145,height:174,opaque:false,trim:{left:0,right:22,top:0,bottom:1}},'Bonzo_Victory0':{map:maps[26],x:495,y:737,width:25,height:72,opaque:false,trim:{left:2,right:1,top:35,bottom:0}},'Bonzo_Victory1':{map:maps[26],x:290,y:1019,width:25,height:72,opaque:false,trim:{left:2,right:1,top:31,bottom:0}},'Bonzo_Victory2':{map:maps[26],x:266,y:853,width:25,height:72,opaque:false,trim:{left:2,right:3,top:8,bottom:1}},'Bonzo_Victory3':{map:maps[26],x:243,y:853,width:25,height:72,opaque:false,trim:{left:2,right:3,top:1,bottom:0}},'Hector_Victory':{map:maps[26],x:827,y:886,width:122,height:155,opaque:false,trim:{left:23,right:1,top:0,bottom:0}},'Hector_Victory_hand0':{map:maps[26],x:469,y:737,width:32,height:46,opaque:false,trim:{left:8,right:1,top:3,bottom:0}},'Hector_Victory_hand1':{map:maps[26],x:498,y:692,width:32,height:46,opaque:false,trim:{left:7,right:1,top:4,bottom:6}},'Hector_Victory_hand2':{map:maps[26],x:290,y:932,width:32,height:46,opaque:false,trim:{left:3,right:1,top:6,bottom:0}},'Hector_Victory_hand3':{map:maps[26],x:289,y:896,width:32,height:46,opaque:false,trim:{left:0,right:1,top:8,bottom:6}},'Hector_Victory_hand4':{map:maps[26],x:289,y:853,width:32,height:46,opaque:false,trim:{left:1,right:1,top:6,bottom:0}},'Hector_Victory_hand5':{map:maps[26],x:290,y:975,width:32,height:46,opaque:false,trim:{left:4,right:1,top:5,bottom:0}},'Hector_Victory_hand6':{map:maps[26],x:469,y:692,width:32,height:46,opaque:false,trim:{left:5,right:1,top:4,bottom:0}},'Pop_Victory00':{map:maps[26],x:931,y:888,width:169,height:264,opaque:false,trim:{left:27,right:28,top:106,bottom:5}},'Pop_Victory05':{map:maps[26],x:549,y:924,width:169,height:264,opaque:false,trim:{left:21,right:24,top:142,bottom:5}},'Pop_Victory10':{map:maps[26],x:676,y:886,width:169,height:264,opaque:false,trim:{left:7,right:14,top:59,bottom:42}},'Pop_Victory15':{map:maps[26],x:1211,y:221,width:169,height:264,opaque:false,trim:{left:1,right:27,top:24,bottom:48}},'Pop_Victory20':{map:maps[26],x:549,y:455,width:169,height:264,opaque:false,trim:{left:0,right:26,top:15,bottom:27}},'Pop_Victory25':{map:maps[26],x:327,y:692,width:169,height:264,opaque:false,trim:{left:11,right:19,top:13,bottom:5}},'Pop_Victory30':{map:maps[26],x:549,y:680,width:169,height:264,opaque:false,trim:{left:22,right:23,top:18,bottom:5}},'Pop_Victory35':{map:maps[26],x:931,y:425,width:169,height:264,opaque:false,trim:{left:28,right:24,top:25,bottom:6}},'Pop_Victory40':{map:maps[26],x:931,y:661,width:169,height:264,opaque:false,trim:{left:27,right:28,top:35,bottom:5}},'Pop_Victory45':{map:maps[26],x:1442,y:425,width:169,height:264,opaque:false,trim:{left:27,right:28,top:64,bottom:5}},'Tina_Victory00':{map:maps[26],x:695,y:455,width:281,height:253,opaque:false,trim:{left:40,right:103,top:21,bottom:29}},'Tina_Victory05':{map:maps[26],x:676,y:680,width:281,height:253,opaque:false,trim:{left:37,right:106,top:22,bottom:28}},'Tina_Victory10':{map:maps[26],x:931,y:221,width:281,height:253,opaque:false,trim:{left:33,right:111,top:24,bottom:28}},'Tina_Victory15':{map:maps[26],x:1071,y:221,width:281,height:253,opaque:false,trim:{left:33,right:111,top:24,bottom:28}},'Tina_Victory20':{map:maps[26],x:1051,y:425,width:281,height:253,opaque:false,trim:{left:37,right:110,top:20,bottom:30}},'Tina_Victory25':{map:maps[26],x:1402,y:0,width:281,height:253,opaque:false,trim:{left:44,right:83,top:20,bottom:29}},'Tina_Victory30':{map:maps[26],x:1214,y:0,width:281,height:253,opaque:false,trim:{left:49,right:47,top:18,bottom:27}},'Tina_Victory35':{map:maps[26],x:0,y:703,width:281,height:253,opaque:false,trim:{left:41,right:0,top:19,bottom:8}},'Tina_Victory40':{map:maps[26],x:992,y:0,width:281,height:253,opaque:false,trim:{left:1,right:61,top:20,bottom:29}},'Tito_Defeat00':{map:maps[26],x:1562,y:624,width:143,height:120,opaque:false,trim:{left:0,right:25,top:1,bottom:0}},'Tito_Defeat01':{map:maps[26],x:1557,y:746,width:143,height:120,opaque:false,trim:{left:0,right:26,top:2,bottom:0}},'Tito_Defeat02':{map:maps[26],x:1420,y:869,width:143,height:120,opaque:false,trim:{left:0,right:27,top:5,bottom:0}},'Tito_Defeat03':{map:maps[26],x:145,y:932,width:143,height:120,opaque:false,trim:{left:0,right:1,top:3,bottom:0}},'Tito_Defeat04':{map:maps[26],x:0,y:932,width:143,height:120,opaque:false,trim:{left:0,right:1,top:0,bottom:0}},'Tito_Defeat05':{map:maps[26],x:1282,y:869,width:143,height:120,opaque:false,trim:{left:0,right:9,top:0,bottom:0}},'Tito_Defeat06':{map:maps[26],x:1282,y:746,width:143,height:120,opaque:false,trim:{left:0,right:8,top:0,bottom:0}},'Tito_Defeat07':{map:maps[26],x:1420,y:746,width:143,height:120,opaque:false,trim:{left:0,right:9,top:0,bottom:0}},'Tito_Defeat08':{map:maps[26],x:1423,y:624,width:143,height:120,opaque:false,trim:{left:0,right:7,top:1,bottom:0}},'Tito_Defeat09':{map:maps[26],x:327,y:941,width:143,height:120,opaque:false,trim:{left:0,right:5,top:1,bottom:0}},'Tito_Defeat10':{map:maps[26],x:1282,y:624,width:143,height:120,opaque:false,trim:{left:0,right:5,top:1,bottom:0}},'challenge_end_1':{map:maps[26],x:327,y:455,width:236,height:253,opaque:false,trim:{left:12,right:5,top:14,bottom:5}},'challenge_end_2':{map:maps[26],x:0,y:221,width:928,height:231,opaque:false,trim:{left:0,right:0,top:0,bottom:0}},'challenge_end_3':{map:maps[26],x:0,y:455,width:342,height:270,opaque:false,trim:{left:13,right:5,top:20,bottom:5}},'challenge_end_4':{map:maps[26],x:0,y:0,width:1019,height:249,opaque:false,trim:{left:14,right:16,top:22,bottom:9}}};}(Game||(Game={})));var Game;(function(Game){Game.appDesc.languagesPool=['en','de','fr','it','es'];Game.appDesc.stringPool={'name':['ENGLISH','GERMAN','FRENCH','ITALIAN','SPANISH'],'loading.copyright_etermax':['© {{year}} ETERMAX      www.triviacrack.com','© {{year}} ETERMAX      www.triviacrack.com','© {{year}} ETERMAX      www.triviacrack.com','© {{year}} ETERMAX      www.triviacrack.com','© {{year}} ETERMAX      www.triviacrack.com'],'loading.copyright':['© {{year}} PlayWorks Digital Limited. ALL RIGHTS RESERVED','© {{year}} PlayWorks Digital Limited. ALLE RECHTE VORBEHALTEN','© {{year}} PlayWorks Digital Limited. TOUS DROITS RÉSERVÉS','© {{year}} PlayWorks Digital Limited. TUTTI I DIRITTI RISERVATI','© {{year}} PlayWorks Digital Limited. ALL RIGHTS RESERVED'],'categories.history':['HISTORY','GESCHICHTE','HISTOIRE','STORIA','HISTORIA'],'categories.science':['SCIENCE','WISSENSCHAFT','SCIENCE','SCIENZA','CIENCIA'],'categories.geography':['GEOGRAPHY','GEOGRAPHIE','GÉOGRAPHIE','GEOGRAFIA','GEOGRAFÍA'],'categories.entertainment':['ENTERTAINMENT','UNTERHALTUNG','DIVERTISSEMENT','INTRATTENIMENTO','ENTRETENIMIENTO'],'categories.art':['ART','KUNST','ART','ARTE','ARTE'],'categories.sports':['SPORTS','SPORT','SPORTS','SPORT','DEPORTES'],'modes.classic':['Classic','Klassisch','Classique','Classica','Clásico'],'modes.challenge':['Challenge','Herausforderung','Défi','Sfida','Desafío'],'modes.party':['Party Mode','Party Modus','Mode Fête','Modalità Festa','Multijugador'],'modes.partyDialogTitle':['Party','Party','Fête','Festa','Multijugador'],'common.close':['Close','Schließen','Fermer','Chiudere','Cerrar'],'topMenu.statistics':['Statistics','Statistik','Statistiques','Statistiche','Estadísticas'],'topMenu.store':['Store','Laden','Boutique','Negozio','Tienda'],'topMenu.about':['About','Über','À propos','INFO','Información'],'topMenu.exit':['Exit','Beenden','Quitter','Uscire','Salir'],'topMenu.back':['Back','Zurück','Retour','Indietro','Atrás'],'mainMenu.lifes.endless':['Endless','Unendlich','Sans fin','Senza Fine','Infinitas'],'mainMenu.lifes.full':['Full','Voll','Plein','Pieno','Al máximo'],'mainMenu.description.classic':['Test your knowledge in random subjects, the more you get the better the rewards!','Teste dein Wissen in zufälligen Themen. Je mehr du erreichst, um so besser\nsind deine Belohnungen!','Testez vos connaissances sur des sujets aléatoires. Plus vous en obtenez, meilleures\nsont les récompenses!','Testa la tua conoscenza in materie casuali, più ne indovini migliori sono i premi!','Pon a prueba tu conocimiento sobre varios temas. Cuanto más aciertes, \n¡mejores serán las recompensas!'],'mainMenu.description.challenge':['Up for this challenge? Pick your category and see how far you can reach in this endless gauntlet','Wähle deine Kategorie und sieh wie weit du in diesem endlosen Spießrutenlauf kommst.',"Vous êtes prêt à relever ce défi? Choisissez votre catégorie et voyez jusqu'où vous\npouvez aller dans ce gant sans fin.",'Ci stai a questa sfida? Scegli la tua categoria\ne vedi quanto in là puoi arrivare!','¿Te animas a este desafío? Elige una categoría y avanza lo máximo posible \nen este modo interminable.'],'mainMenu.description.partyMode':['Who is the smartest among you? One way to find out! Enjoy this pass and play mode.\n(Costs {{coins}} coins)','Wer ist der Klügste unter euch? Eine Möglichkeit, das herauszufinden! Viel Spaß\nmit diesem Pass-and-Play-Modus. (Kostet {{coins}} Münzen)',"Qui est le plus intelligent d'entre vous? Une seule façon de le découvrir! Profitez\nde ce mode 'Passe et joue'. (Coûte {{coins}} pièces)","Chi è il più intelligente tra di voi? C'è solo un\nmodo per scoprirlo! Goditi questa modalità passa e gioca. (Costa 300 monete)",'¿Quién de ustedes sabe más? ¡Solo hay una forma de saberlo! Aprovecha este modo de juego \n(costo: {{coins}} monedas).'],'mainMenu.description.partyRemoteControl':['Who is the smartest among you? One way to find out! Enjoy this pass and play mode.','Who is the smartest among you? One way to find out! Enjoy this pass and play mode.','Who is the smartest among you? One way to find out! Enjoy this pass and play mode.','Who is the smartest among you? One way to find out! Enjoy this pass and play mode.','Who is the smartest among you? One way to find out! Enjoy this pass and play mode.'],'quitConf.title':['QUIT','BEENDEN','QUITTER','USCIRE','SALIR'],'quitConf.question':['Are you sure you want to leave?','Bist du sicher, dass du gehen willst?','Êtes-vous sûr de vouloir partir?','Sei sicuro di voler uscire?','¿SEGURO QUE QUIERES SALIR DEL JUEGO?'],'quitConf.yes':['Yes','Ja','Oui','Sì','Sí'],'quitConf.no':['No','Nein','Non','No','No'],'about.title':['ABOUT','ETWA','À PROPOS DE','Supporto','información'],'about.info':['For additional information please visit:','Für weitere Informationen zu den unten aufgeführten Punkten,\nbesuchen Sie bitte:','Pour de plus amples informations concernant les points ci-dessous,\nveuillez consulter le site:','Per maggiori informazioni riguardo qui sotto, per favore visita:','For additional information please visit:'],'about.support':['• SUPPORT - www.play.works/tv-games','• Unterstützung - www.play.works/tv-games','• Support - www.play.works/tv-games','• Supporto - www.play.works/tv-games','• SUPPORT - www.play.works/tv-games'],'about.terms':['• TERMS AND CONDITIONS - www.play.works/terms','• Geschäftsbedingungen - www.play.works/terms','• Termes et Conditions - www.play.works/terms','• Termini e Condizioni - www.play.works/terms','• TERMS AND CONDITIONS - www.play.works/terms'],'about.privacy':['• PRIVACY POLICY - www.play.works/privacy-policy','• Datenschutzbestimmungen - www.play.works/privacy-policy','• Politique de confidentialité - www.play.works/privacy-policy','• Politica sulla riservatezza - www.play.works/privacy-policy','• PRIVACY POLICY - www.play.works/privacy-policy'],'about.ok':['OK','OK','OK','OK','OK'],'about.copyright_etermax':['© {{year}} ETERMAX www.triviacrack.com','© {{year}} ETERMAX www.triviacrack.com','© {{year}} ETERMAX www.triviacrack.com','© {{year}} ETERMAX www.triviacrack.com','© {{year}} ETERMAX www.triviacrack.com'],'about.copyright':['© {{year}} PlayWorks Digital Limited. ALL RIGHTS RESERVED','© {{year}} PlayWorks Digital Limited. ALLE RECHTE VORBEHALTEN','© {{year}} PlayWorks Digital Limited. TOUS DROITS RÉSERVÉS','© {{year}} PlayWorks Digital Limited. TUTTI I DIRITTI RISERVATI','© {{year}} PlayWorks Digital Limited. ALL RIGHTS RESERVED'],'about.scan_me':['SCAN ME','SCAN MICH','SCANNE MOI','SCANSIONAMI','SCAN ME'],'about.did':['DID: {{did}}','DID: {{did}}','DID: {{did}}','DID: {{did}}','DID: 3a27870f-a65f-4783-b9bb-ea6261e9a3ac'],'about.version':['Version: {{version}}','Version: {{version}}','Version: {{version}}','Version: {{version}}','Version: {{version}}'],'spinAgain.extraSpin':['Extra Spin','Extra Drehung','Tour Extra','Giro Extra','Girar otra vez'],'spinAgain.play':['Play','Spielen','Jouer','Gioca','Jugar'],'statistics.title':['STATISTICS','STATISTIK','STATISTIQUES','STATISTICHE','ESTADÍSTICAS'],'statistics.ok':['OK','OK','OK','OK','OK'],'statistics.classic':['Classic','Klassisch','Classique','Classico','Clásico'],'statistics.challenge':['Challenge','Herausforderung','Défi','Sfida','Desafío'],'statistics.power_ups':['Power Ups','Power-Ups','Mise Sous tension','Potenziamento','Potenciadores'],'statistics.games_played_total':['Games Played: {{games}}','Gespielte Spiele: {{games}}','Jeux joués: {{games}}','Partite Giocate: {{games}}','Partidas jugadas: {{games}}'],'statistics.answered_correctly':['Answered Correctly','Richtig geantwortet','Réponse correcte','Risposto correttamente','Respuestas acertadas'],'statistics.answer_speed':['Answer Speed (Sec)','Antwortgeschwindigkeit\n(Sek)','Vitesse de réponse (Sec)','Velocità di risposta\n(secondi)','Velocidad de respuesta (segundos)'],'statistics.games_played':['Games Played','Gespielte Spiele','Jeux joués','Partite Giocate','Partidas jugadas'],'statistics.best_score':['Best Score','Bestes Ergebnis','Meilleur score','Punteggio Migliore','Mejor puntuación'],'statistics.bombs_used':['Bombs Used','Bomben benutzt','Bombes utilisées','Bombe usate','Bombas usadas'],'statistics.doubleup_used':['Double Chance\nUsed','Doppelte Chance\nverwendet','Double chance\nutilisé','Doppia possibilità\nUtilizzato','Multiplicadores\nusados'],'statistics.right_used':['Correct Answer\nUsed','Richtige Antwort\nverwendet','Réponse correcte\nutilisée','Risposta Corretta\nUsata','Hallar respuesta\nusados'],'statistics.categories.history':['History','Geschichte','Histoire','Storia','Historia'],'statistics.categories.science':['Science','Wissenschaft','Science','Scienza','Ciencia'],'statistics.categories.geography':['Geography','Geographie','Géographie','Geografia','Geografía'],'statistics.categories.entertainment':['Entertainment','Unterhaltung','Divertissement','Intrattenimento','Entretenimiento'],'statistics.categories.art':['Art','Kunst','Art','Arte','Arte'],'statistics.categories.sports':['Sports','Sport','Sports','Sport','Deportes'],'anotherChance.title':['NEED ANOTHER CHANCE?','BRAUCHST DU NOCH EINE CHANCE?',"BESOIN D'UNE AUTRE CHANCE?","HAI BISOGNO DI UN'ALTRA POSSIBILITÀ?",'¿QUIERES OTRA OPORTUNIDAD?'],'anotherChance.subTitle':['This will be your next question, watch a video to continue playing!','Das ist deine nächste Frage, schau dir ein Video an, um weiterzuspielen?','Ce sera votre prochaine question, regardez une vidéo pour continuer à jouer!','Questa sarà la tua prossima domanda, guarda un video per continuare!',' Esta será la próxima pregunta. ¿Quieres ver un video y seguir?'],'anotherChance.free':['Free','Kostenlos','Gratuit','Gratis',' Gratis'],'anotherChance.no_thanks':['No, thanks','Nein Danke','Non, merci','No, grazie',' Salir'],'outOfLifes.title':['YOU ARE OUT OF LIVES','DU HAST KEINE LEBEN MEHR',"VOUS N'AVEZ PLUS DE VIES",'HAI CONSUMATO LE VITE','NO TE QUEDAN VIDAS.'],'outOfLifes.watch_ad':['Watch Ad to get more','Sieh dir die Werbung an,\num mehr zu bekommen','Regardez la publicité pour\nen obtenir à nouveau','Guarda una pubblicità\nper ottenerne altre','Mira un anuncio para seguir.'],'outOfLifes.no_thanks':['No, thanks','Nein, danke','Non, merci','No, grazie','Salir'],'playerGetReady.title':["PLAYER #{{player}} YOU'RE UP!",'SPIELER #{{player}}, DU BIST DRAN!',"JOUEUR #{{player}}, C'EST À VOUS!",'GIOCATORE #{{player}}, È IL TUO TURNO!','PARTICIPANTE #{{player}}, ¡TE TOCA!'],'playerGetReady.titleRemoteControl':["{{player}} YOU'RE UP!","{{player}} YOU'RE UP!","{{player}} YOU'RE UP!","{{player}} YOU'RE UP!","{{player}} YOU'RE UP!"],'playerGetReady.ready':['READY','BEREIT','PRÊT','PRONTO','LISTO'],'selectCategory.pickCategory':['PICK YOUR CATEGORY','WÄHLE DEINE KATEGORIE','CHOISISSEZ VOTRE CATÉGORIE','SCEGLI LA TUA CATEGORIA','ELEGIR CATEGORÍA'],'selectNumOfPlayers.title':['SELECT NUMBER OF PLAYERS','ANZAHL DER SPIELER WÄHLEN','SÉLECTIONNEZ LE NOMBRE DE JOUEURS','SELEZIONA IL NUMERO DEI GIOCATORI','ELIGE LA CANTIDAD DE PARTICIPANTES'],'selectNumOfPlayers.titleRemoteControl':['CURRENTLY CONNECTED','CURRENTLY CONNECTED','CURRENTLY CONNECTED','CURRENTLY CONNECTED','CURRENTLY CONNECTED'],'selectNumOfPlayers.startGameBtn.startGame':['START GAME','START GAME','START GAME','START GAME','START GAME'],'selectGameLength.title':['SELECT GAME LENGTH','SPIELLÄNGE WÄHLEN','SÉLECTIONNEZ LA DURÉE DU JEU','SELEZIONA LUNGHEZZA DEL GIOCO','ELIGE LA DURACIÓN DE LA PARTIDA'],'selectGameLength.short':['SHORT','KURZE','COURTES','CORTE','CORTA'],'selectGameLength.medium':['MEDIUM','Mittlere','MOYENNES','MEDIE','MEDIA'],'selectGameLength.long':['LONG','LANGE','LONGUES','LUNGHE','LARGA'],'selectGameLength.3_questions':['3 Questions','3 Fragen','3 Questions','3 Domande','3 preguntas'],'selectGameLength.5_questions':['5 Questions','5 Fragen','5 Questions','5 Domande','5 preguntas'],'selectGameLength.7_questions':['7 Questions','7 Fragen','7 Questions','7 Domande','7 preguntas'],'partyStatistic.title':['GREAT GAME!','TOLLES SPIEL!','GRAND JEU!','GRANDE PARTITA!','¡BUENA PARTIDA!'],'partyStatistic.player':['PLAYER {{number}}','SPIELER {{number}}','JOUEUR {{number}}','GIOCATORE {{number}}','PARTICIPANTE {{number}}'],'shop.product_price':['{{price}}','{{price}}','{{price}}','{{price}}','{{price}}'],'shop.product_note':['{{price}}','{{price}}','{{price}}','{{price}}','{{price}}'],'shop.product_article':['{{product_desc}}','{{product_desc}}','{{product_desc}}','{{product_desc}}','{{product_desc}}'],'shop.product_desc':['{{desc}}','{{desc}}','{{desc}}','{{desc}}','{{desc}}'],'shop.cancelationInfo':['ends\n{{cancelationDate}}','ends\n{{cancelationDate}}','ends\n{{cancelationDate}}','ends\n{{cancelationDate}}','ends\n{{cancelationDate}}'],'shop.cancelSubscription':['cancel\nsubscription','cancel\nsubscription','cancel\nsubscription','cancel\nsubscription','cancel\nsubscription'],'victory_loss.victory':['VICTORY!','SIEG!','VICTOIRE!','VITTORIA!','GANASTE!'],'victory_loss.loss':['LOSS!','Verloren!','PERTE!','Sconfitta!','PERDISTE!'],'victory_loss.youEarned':['You answered {{correct}} correctly and earned {{coins}} coins!','Du hast {{correct}} richtig beantwortet und {{coins}} Münzen verdient!','Vous avez répondu correctement à {{correct}} et gagné {{coins}} pièces !','Hai risposto correttamente a {{correct}} risposte e hai guadagnato {{coins}} monete!',' ¡Respondiste bien {{correct}} y ganaste {{coins}} monedas!'],'victory_loss.doubleReward':['Double your reward','Verdopple deine\nBelohnung','Doublez votre\nrécompense','Raddoppia la tua\nricompensa','Duplicar recompensa'],'victory_loss.no_thanks':['No, thanks','Nein, danke','Non, merci','No, grazie','Salir'],'victory_loss.get_coins':['Get {{coins}} coins','Erhalte {{coins}} Münzen','Obtenez {{coins}} pièces','Ottieni {{coins}} monete','Obtén {{coins}} monedas'],'victory_loss.feedback1':['Keep trying, curiosity is the driving force behind discovery.','Versuche es weiter, Neugierde fördert die Entdeckung!',"Continuez d'essayer, la curiosité est le moteur de la découverte",'Continua a provare, la curiosità porta alla scoperta!','¡Sigue intentándolo! La curiosidad fomenta el descubrimiento.'],'victory_loss.feedback2':["Don't be discouraged! You'll do better next time!",'Lass dich nicht entmutigen! Nächstes Mal wirst du es besser machen!',"Ne vous découragez pas! L'erreur est humaine",'Non scoraggiarti! Errare è umano','¡No te desanimes! La próxima te irá mejor.'],'victory_loss.feedback3':['What were the odds of that?','Wie standen die Chancen dafür?','Ne vous inquiètez pas! Il faut se tromper pour apprendre.','Non preoccuparti! Sbagliando si impara','¿Quién lo hubiera imaginado?'],'victory_loss.feedback4':["Keep trying! I know you'll do better next time.",'Versuch es weiter! Ich weiß, dass es dir beim nächsten Mal besser gehen wird.',"Continue d'essayer! Je sais que vous ferez mieux la prochaine fois.","Per essere un umano, l'hai fatto molto bene!",'¡Sigue intentándolo! Seguro que la próxima te irá mejor.'],'victory_loss.feedback5':['Did you learn something interesting? I sure did!','Hast du etwas Interessantes gelernt? Das habe ich wirklich!',"Avez-vous appris quelque chose d'intéressant? Je pense que vous pouvez toujours vous battre.",'Ben fatto! E penso che puoi fare ancora meglio.','¿Aprendiste algo interesante? ¡Yo sí!'],'victory_loss.feedback6':["Good start! Don't forget, practice makes perfect.",'Guter Anfang! Vergiss nicht, Übung macht den Meister.',"Bon départ! N'oubliez pas que la pratique nous perfectionne.",'Buon inizio! Non dimenticare che chi molto pratica, molto impara.','¡Buen comienzo! Recuerda: La práctica hace al maestro.'],'victory_loss.feedback7':['Well played!','Gut gespielt!','Bien joué!','Che emozione!','¡Buen trabajo!'],'victory_loss.feedback8':['Well done!','Bravo!','Bien fait!','Ben fatto!','¡Bien hecho!'],'victory_loss.feedback9':['That was exciting!','Das war aufregend!',"C'était amusant!",'Che divertente!','¡Qué emocionante!'],'victory_loss.feedback10':['That was great!','Du warst toll!',"C'était génial!",'Eccellente!','¡Estuviste genial!'],'victory_loss.feedback11':['What a fun game!','Was für ein lustiges Spiel!','Quel jeu amusant!','Molto bene!','¡Qué divertido!'],'victory_loss.feedback12':['Amazing!','Erstaunlich!','Incroyable!','Magnifico!','¡Increíble!'],'victory_loss.feedback13':['What a fantastic performance!','Was für eine tolle Leistung!','Quelle performance fantastique!','Fantastico!','¡Lo hiciste muy bien!'],'victory_loss.feedback14':["You're on fire!",'Wunderbar!','Merveilleux!','Meraviglioso!','¡Sigue así!'],'victory_loss.feedback15':['Oh, congratulations! What an accomplishment!','Oh, herzlichen Glückwunsch! Was für eine Leistung!','Félicitations! Quel accomplissement!','Complimenti! Ottimo risultato!','¡Felicitaciones! ¡Qué gran logro!'],'victory_loss.feedback16':['This is incredible!','Das ist unglaublich!','Tout simplement génial!','Incredibile!','¡Asombroso!'],'wheel.spin':['SPIN','DREHEN','TOURNER','Gira','GIRAR'],'noAds.description':['AD IS NOT AVAILABLE','WERBUNG IST NICHT VERFÜGBAR',"LA PUBLICITÉ N'EST PAS DISPONIBLE",'LA PUBBLICITÀ NON È DISPONIBILE','ANUNCIO NO DISPONIBLE'],'noCoins.question':["You don't have enough coins. Want more?",'Du hast nicht genug Münzen. Willst du mehr?',"Vous n'avez pas assez de pièces. Vous en voulez plus?",'Non hai abbastanza monete, ne vuoi di più?','Te faltan monedas. ¿Comprar más?'],'noCoins.get_more':['Get More!','Mehr bekommen','Obtenez-en plus!','Prendere di più!','¡Sí!'],'noCoins.no_thanks':['No, thanks','Nein, danke','Non, merci','No, grazie','Salir'],'noCoins.text':["You don't have enough coins.",'Du hast nicht genug Münzen.',"Vous n'avez pas assez de pièces.",'Non hai abbastanza monete.','Te faltan monedas.'],'noCoins.ok':['OK','OK','OK','OK','OK'],'question.bomb':['BOMB','BOMBE','BOMBE','BOMBE','BOMBA'],'question.double_chance':['DOUBLE\nCHANCE','DOPPELTE\nCHANCE','DOUBLE\nCHANCE','DOPPIA\nPOSSIBILITÀ','DOBLE\nOPORTUNIDAD'],'question.right_answer':['CORRECT\nANSWER','RICHTIGE\nANTWORT','RÉPONSE\nCORRECTE','Risposta\ncorretta','HALLAR\nRESPUESTA'],'question.press':['Press','Drücken','Presse','Premere','Presionar'],'question.correct':['Correct!','Richtig!','Correct!','Corretto!','¡Correcto!'],'question.wrong':['Incorrect!','Falsch!','Incorrect!','Incorretta!','¡Incorrecto!'],'question.time_is_up':["Time's Up!",'Zeit abgelaufen!','Le temps est écoulé!','Tempo esaurito!','¡Se acabó el tiempo!']};}(Game||(Game={})));var Game;(function(Game){function getRandomInRange(range){return Math.floor(Math.random()*range);}Game.getRandomInRange=getRandomInRange;function bsearch(searchElement,elementsArray,compareFunction){var minIndex=0;var maxIndex=elementsArray.length-1;var currentIndex;var result;while(minIndex<=maxIndex){currentIndex=(minIndex+maxIndex)/2|0;result=compareFunction(searchElement,elementsArray[currentIndex]);if(result>0){minIndex=currentIndex+1;}else if(result<0){maxIndex=currentIndex-1;}else{return currentIndex;}}return-1;}Game.bsearch=bsearch;}(Game||(Game={})));var Game;(function(Game){Game.screenWidth=TGFW.RenderManager.resolutionWidth;Game.screenHeight=TGFW.RenderManager.resolutionHeight;Game.screenCenterX=Game.screenWidth/2;Game.screenCenterY=Game.screenHeight/2;Game.titleY=110;Game.GameModes={CLASSIC:'classic',CHALLENGE:'challenge',PARTY:'party'};Game.Categories={ART:'art',CROWN:'crown',ENTERTAINMENT:'entertainment',GEOGRAPHY:'geography',HISTORY:'history',SCIENCE:'science',SPORTS:'sports'};Game.PowerUps={BOMB:'bomb',DOUBLE_CHANCE:'double_chance',RIGHT_ANSWER:'right_answer'};Game.resultMsgStyle={'correct':{text:'question.correct',color:new TGFW.Render.Color(115,191,67),stroke:{color:new TGFW.Render.Color(68,119,35,1)}},'wrong':{text:'question.wrong',color:new TGFW.Render.Color(229,47,54),stroke:{color:new TGFW.Render.Color(140,27,35)}},'time_is_up':{text:'question.time_is_up',color:new TGFW.Render.Color(234,212,45),stroke:{color:new TGFW.Render.Color(95,56,19)}}};Game.modesBackgrouns={'classic':'','challenge':'background2','party':'background3'};Game.categories={'history':{name:'categories.history',topBg:'solid3',character:{name:'HECTOR',icon:'category5_q',timer:'timer5',color:new TGFW.Render.Color(248,221,65),texture:'history_category00'}},'science':{name:'categories.science',topBg:'solid2',character:{name:'ALBERT',icon:'category3_q',timer:'timer3',color:new TGFW.Render.Color(32,200,104),texture:'science_category00'}},'geography':{name:'categories.geography',topBg:'solid6',character:{name:'TITO',icon:'category2_q',timer:'timer2',color:new TGFW.Render.Color(22,117,206),texture:'Tito_Victory26'}},'entertainment':{name:'categories.entertainment',topBg:'solid1',character:{name:'POP',icon:'category6_q',timer:'timer6',color:new TGFW.Render.Color(243,83,175),texture:'movies_category00'}},'art':{name:'categories.art',topBg:'solid5',character:{name:'TINA',icon:'category4_q',timer:'timer4',color:new TGFW.Render.Color(243,39,50),texture:'art_category00'}},'sports':{name:'categories.sports',topBg:'solid4',character:{name:'BONZO',icon:'category1_q',timer:'timer1',color:new TGFW.Render.Color(255,148,0),texture:'Sports_category00'}}};Game.colors={blue:new TGFW.Render.Color(22,117,206),green:new TGFW.Render.Color(20,200,104),orange:new TGFW.Render.Color(244,90,22),yellow:new TGFW.Render.Color(232,204,30),magenta:new TGFW.Render.Color(229,43,160),purple:new TGFW.Render.Color(141,45,182),red:new TGFW.Render.Color(243,27,32),mint:new TGFW.Render.Color(31,187,166),white:new TGFW.Render.Color(255,255,255),black:new TGFW.Render.Color(46,47,48),textColor:new TGFW.Render.Color(46,47,48),textColorShadow:new TGFW.Render.Color(0,49,73,0.7),popupBorder:new TGFW.Render.Color(31,187,166),languageBtn:new TGFW.Render.Color(40,45,78),modeDescriptionBG:new TGFW.Render.Color(5,5,5,0.17),spinBtn:new TGFW.Render.Color(156,156,156),questionText:new TGFW.Render.Color(46,47,48),questionDisabledText:new TGFW.Render.Color(46,47,48,0.51),darkBlue:new TGFW.Render.Color(14,44,82),statsHeader:new TGFW.Render.Color(63,202,241),questionBottomBg:new TGFW.Render.Color(233,233,233),questionSeparator:new TGFW.Render.Color(187,187,187),color_p1:new TGFW.Render.Color(250,221,67),color_p2:new TGFW.Render.Color(254,148,0),color_p3:new TGFW.Render.Color(244,38,50),color_p4:new TGFW.Render.Color(245,82,175),color_p5:new TGFW.Render.Color(164,82,210),playerNumbers:{'2':new TGFW.Render.Color(245,195,0),'3':new TGFW.Render.Color(244,90,22),'4':new TGFW.Render.Color(181,20,25),'5':new TGFW.Render.Color(229,43,160),'6':new TGFW.Render.Color(252,205,142),'7':new TGFW.Render.Color(16,75,206)}};Game.fonts={default:{name:'mikado_bold',size:32},counters:{name:'mikado_bold',size:30},modeBtn:{name:'mikado_black',size:40},shopTitle:{name:'mikado_black',size:53},categoryName:{name:'mikado_black',size:18},topMenuBtn:{name:'mikado_bold',size:21},popupButton:{name:'mikado_black',size:32},popupTitle:{name:'mikado_black',size:44},popupTitleSmall:{name:'mikado_bold',size:40},characterName:{name:'mikado_bold',size:30},popupSubTitle:{name:'brandon_text_regular',size:25},popupRegular:{name:'brandon_text_regular',size:28},popupRegularBig:{name:'brandon_text_regular',size:36},scanMeText:{name:'brandon_text_regular',size:14},languageBtn:{name:'mikado_bold',size:24},statisticText:{name:'mikado_bold',size:20},shopProductName:{name:'mikado_black',size:24},questionDialogPrice:{name:'mikado_black',size:30},shopProductPrice:{name:'mikado_bold',size:32},modeDescription:{name:'mikado_bold',size:20},questionsCount:{name:'mikado_bold',size:36},wheelModeName:{name:'mikado_bold',size:40},spinBtn:{name:'mikado_black',size:32},statisticsTitleText:{name:'mikado_bold',size:40},statisticsText:{name:'mikado_bold',size:20},statisticsPlayedText:{name:'mikado_bold',size:24},gameLenghtButtonTitle:{name:'mikado_black',size:32},gameLenghtButtonSubTitle:{name:'mikado_bold',size:24},questionText:{name:'brandon_text_regular',size:25},questionTitle:{name:'mikado_black',size:44},questionCoins:{name:'mikado_black',size:24},questionTimer:{name:'mikado_bold',size:40},questionResult:{name:'mikado_bold',size:44},questionPowerUpName:{name:'mikado_bold',size:20},questionPowerUpPrice:{name:'mikado_bold',size:24},playerNambers:{name:'mikado_bold',size:100},playerWaitingList:{name:'mikado_black',size:40}};function imageDesc(texture,x,y,align,scaleX,scaleY,rotate){if(x===undefined){x=0;}if(y===undefined){y=0;}if(align===undefined){align=TGFW.Shape.Align.TOP_LEFT;}if(scaleX===undefined){scaleX=1;}if(scaleY===undefined){scaleY=1;}if(rotate===undefined){rotate=0;}return{className:TGFW.Shape.Image,x:x,y:y,texture:texture,align:align,scaleX:scaleX,scaleY:scaleY,rotate:rotate};}Game.imageDesc=imageDesc;function textDesc(text,x,y,color,align,font,spacing,width,height){if(color===undefined){color=Game.colors.black;}if(align===undefined){align=TGFW.Shape.Align.TOP_LEFT;}if(font===undefined){font=Game.fonts.default;}if(spacing===undefined){spacing=null;}if(width===undefined){width=850;}if(height===undefined){height=100;}return{className:TGFW.Shape.Text,x:x,y:y,text:text,color:color,align:align,font:font.name,lineLeading:font.size+5,size:font.size,spacing:spacing,height:height,width:width};}Game.textDesc=textDesc;function updateImprovedText(text,shape,style,data){if(style===undefined){style=null;}if(data===undefined){data=null;}if(shape){shape._children.forEach(function(el){el.setText(text);var type='';if(el.getName().indexOf('shadow')!==-1){type='shadow';}else if(el.getName().indexOf('stroke')!==-1){type='stroke';}else if(el.getName()==='text'){type='text';}if(style){if(style.stroke&&type==='stroke'){el.setColor(style.stroke.color);}if(style.shadow&&type==='shadow'){el.setColor(style.shadow.color);}if(style.color&&type==='text'){el.setColor(style.color);}}});return;var _shapes=[{shape:shape.getTextShape('shadowTop'),type:'shadow'},{shape:shape.getTextShape('shadowTopLeft'),type:'shadow'},{shape:shape.getTextShape('shadowTopRight'),type:'shadow'},{shape:shape.getTextShape('shadowBottom'),type:'shadow'},{shape:shape.getTextShape('shadowBottomLeft'),type:'shadow'},{shape:shape.getTextShape('shadowBottomRight'),type:'shadow'},{shape:shape.getTextShape('shadowLeft'),type:'shadow'},{shape:shape.getTextShape('shadowRight'),type:'shadow'},{shape:shape.getTextShape('shadowText'),type:'shadow'},{shape:shape.getTextShape('strokeTop'),type:'stroke'},{shape:shape.getTextShape('strokeTopLeft'),type:'stroke'},{shape:shape.getTextShape('strokeTopRight'),type:'stroke'},{shape:shape.getTextShape('strokeBottom'),type:'stroke'},{shape:shape.getTextShape('strokeBottomLeft'),type:'stroke'},{shape:shape.getTextShape('strokeBottomRight'),type:'stroke'},{shape:shape.getTextShape('strokeLeft'),type:'stroke'},{shape:shape.getTextShape('strokeRight'),type:'stroke'},{shape:shape.getTextShape('text'),type:'text'}];for(var i=0;i<_shapes.length;i++){if(_shapes[i].shape){_shapes[i].shape.setText(text);if(data){_shapes[i].shape.updateText(data);}if(style){if(style.stroke&&_shapes[i].type==='stroke'){_shapes[i].shape.setColor(style.stroke.color);}if(style.shadow&&_shapes[i].type==='shadow'){_shapes[i].shape.setColor(style.shadow.color);}if(style.color&&_shapes[i].type==='text'){_shapes[i].shape.setColor(style.color.color);}}}}}}Game.updateImprovedText=updateImprovedText;function updateImprovedTextShadow(shape,style){if(shape){shape._children.forEach(function(el){var type='';if(el.getName().indexOf('shadow')!==-1){el.setColor(style.color);}});return;var _shapes=[{shape:shape.getTextShape('shadowTop'),type:'shadow'},{shape:shape.getTextShape('shadowTopLeft'),type:'shadow'},{shape:shape.getTextShape('shadowTopRight'),type:'shadow'},{shape:shape.getTextShape('shadowBottom'),type:'shadow'},{shape:shape.getTextShape('shadowBottomLeft'),type:'shadow'},{shape:shape.getTextShape('shadowBottomRight'),type:'shadow'},{shape:shape.getTextShape('shadowLeft'),type:'shadow'},{shape:shape.getTextShape('shadowRight'),type:'shadow'},{shape:shape.getTextShape('shadowText'),type:'shadow'}];for(var i=0;i<_shapes.length;i++){if(_shapes[i].shape){if(style){if(style.shadow&&_shapes[i].type==='shadow'){_shapes[i].shape.setColor(style.shadow.color);}}}}}}Game.updateImprovedTextShadow=updateImprovedTextShadow;function improvedTextDesc(text,x,y,color,align,font,spacing,stroke,shadow,width,height){if(color===undefined){color=Game.colors.black;}if(align===undefined){align=TGFW.Shape.Align.TOP_LEFT;}if(font===undefined){font=Game.fonts.default;}if(spacing===undefined){spacing=null;}if(stroke===undefined){stroke=null;}if(shadow===undefined){shadow=null;}if(width===undefined){width=900;}var layout={};var isStroked=false;if(stroke&&stroke.size&&stroke.color){layout['strokeTop']=textDesc(text,0,-stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeTopLeft']=textDesc(text,-stroke.size,-stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeTopRight']=textDesc(text,stroke.size,-stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeBottom']=textDesc(text,0,stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeBottomLeft']=textDesc(text,-stroke.size,stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeBottomRight']=textDesc(text,stroke.size,stroke.size,stroke.color,align,font,spacing,width,height);layout['strokeLeft']=textDesc(text,-stroke.size,0,stroke.color,align,font,spacing,width,height);layout['strokeRight']=textDesc(text,stroke.size,0,stroke.color,align,font,spacing,width,height);isStroked=true;}if(shadow&&shadow.color){if(!shadow.xOffset)shadow.xOffset=0;if(!shadow.yOffset)shadow.yOffset=0;if(!shadow.includeStroke&&shadow.includeStroke&&isStroked){layout['shadowTop']=textDesc(text,shadow.xOffset,shadow.yOffset-stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowTopLeft']=textDesc(text,shadow.xOffset-stroke.size,shadow.yOffset-stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowTopRight']=textDesc(text,shadow.xOffset+stroke.size,shadow.yOffset-stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowBottom']=textDesc(text,shadow.xOffset,shadow.yOffset+stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowBottomLeft']=textDesc(text,shadow.xOffset,shadow.yOffset+stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowBottomRight']=textDesc(text,shadow.xOffset-stroke.size,shadow.yOffset+stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowLeft']=textDesc(text,shadow.xOffset+stroke.size,shadow.yOffset+stroke.size,shadow.color,align,font,spacing,width,height);layout['shadowRight']=textDesc(text,shadow.xOffset+stroke.size,shadow.yOffset,shadow.color,align,font,spacing,width,height);}else{layout['shadowText']=textDesc(text,shadow.xOffset,shadow.yOffset,shadow.color,align,font,spacing,width,height);}}layout['text']=textDesc(text,0,0,color,align,font,spacing,width,height);return{className:TGFW.Shape.Layout,x:x,y:y,layout:layout};}Game.improvedTextDesc=improvedTextDesc;function boxDesc(x,y,width,height,color,align){if(align===undefined){align=TGFW.Shape.Align.TOP_LEFT;}return{className:TGFW.Shape.Box,x:x,y:y,width:width,height:height,color:color,align:align};}Game.boxDesc=boxDesc;function commonButton(x,y,texture,cursor,shapes,action,dx,dy,replaceShapes,width,height,isMainMenuButton){if(dx===undefined){dx=0;}if(dy===undefined){dy=0;}if(replaceShapes===undefined){replaceShapes=false;}if(width===undefined){width=20;}if(height===undefined){height=20;}if(isMainMenuButton===undefined){isMainMenuButton=false;}var layout={};if(!replaceShapes){layout['cursor']=imageDesc(cursor,0,0,TGFW.Shape.Align.CENTER,isMainMenuButton?0:1,isMainMenuButton?0:1);layout['background']=imageDesc(texture,dx,dy,TGFW.Shape.Align.CENTER,isMainMenuButton?0:1,isMainMenuButton?0:1);}if(shapes){if(!shapes.length){layout['shapes']=shapes;}else{for(var i=0;i<shapes.length;i++){layout['shape'+i]=shapes[i];}}}return{className:TGFW.UI.Button,x:x,y:y,action:action,layout:layout,width:width,height:height,layoutClip:standartButtonlayoutClip()};}Game.commonButton=commonButton;function modeButtonText(modeName,x,y,font,width,height){if(x===undefined){x=0;}if(y===undefined){y=-35;}if(font===undefined){font=Game.fonts.modeBtn;}if(width===undefined){width=344;}if(height===undefined){height=75;}return improvedTextDesc(modeName,x,y+4,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,font,null,{color:Game.colors.black,size:2},{color:new TGFW.Render.Color(46,47,48,0.52),xOffset:0,yOffset:6,includeStroke:false},width,height);}Game.modeButtonText=modeButtonText;function mainMenuModeButton(x,y,shapes,action,width,height){if(width===undefined){width=20;}if(height===undefined){height=20;}return commonButton(x,y,'mainMenuBtnBg','mainMenuBtnBgGlow',shapes,action,-1,3,false,width,height,true);}Game.mainMenuModeButton=mainMenuModeButton;function greenButton(x,y,shapes,action,cursor){if(cursor===undefined){cursor='white_dialog_cursor';}return commonButton(x,y,'green_button',cursor,shapes,action,0,1);}Game.greenButton=greenButton;function orangeButton(x,y,shapes,action,cursor){if(cursor===undefined){cursor='white_dialog_cursor';}commonButton(x,y,'orange_button',cursor,shapes,action,0,1);}Game.orangeButton=orangeButton;function standartButtonlayoutClip(){return{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED,TGFW.UI.ButtonState.CHECKED]};}Game.standartButtonlayoutClip=standartButtonlayoutClip;function createTilesAnimationSpinAgain(shape,frames,timePerFrame,addReverse,delays){if(addReverse===undefined){addReverse=false;}if(delays===undefined){delays=null;}var _frames=[];for(var i=0;i<frames.length;i++){var frame=frames[i];var delay=0;if(frame.delay)delay=frame.delay;var time=timePerFrame;if(frame.time)time=frame.time;_frames.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'',time:time,delay:delay}]);}if(addReverse){var framesCount=_frames.length-1;for(var i=framesCount;i>=0;i--){var frame=_frames[i];_frames.push(frame);}}return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:_frames}]};}Game.createTilesAnimationSpinAgain=createTilesAnimationSpinAgain;function createTilesAnimation(shape,frames,timePerFrame,addReverse,delays){if(addReverse===undefined){addReverse=false;}if(delays===undefined){delays=null;}var _frames=[];for(var i=0;i<frames.length;i++){var frame=frames[i];var delay=0;if(frame.delay)delay=frame.delay;var time=timePerFrame;if(frame.time)time=frame.time;_frames.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:frame.texture,time:time,delay:delay}]);}if(addReverse){var framesCount=_frames.length-1;for(var i=framesCount;i>=0;i--){var frame=_frames[i];_frames.push(frame);}}return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:_frames}]};}Game.createTilesAnimation=createTilesAnimation;function coinsLayout(name,x,y){return{className:TGFW.Shape.Layout,name:name,x:x,y:y,layout:{coinIcon:imageDesc('coin_icon',0,0),coins_count:textDesc('',45,4,Game.colors.white,TGFW.Shape.Align.TOP_LEFT,Game.fonts.counters,null,150,39)}};}Game.coinsLayout=coinsLayout;function shopBackground(){return{className:TGFW.Shape.Layout,layout:{bg_top:boxDesc(0,0,Game.screenWidth,165,Game.colors.statsHeader)}};}Game.shopBackground=shopBackground;function shopBg(){var shop_bg_pattern_size={w:126,h:118};var layout=[];for(var j=0;j<6;j++){var y=j*shop_bg_pattern_size.h;for(var i=0;i<11;i++){var x=i*shop_bg_pattern_size.w;layout['patern_'+j+'_'+i]=imageDesc('shop_bg_pattern',x,y);}}return{className:TGFW.Shape.Layout,x:0,y:165,layout:layout};}Game.shopBg=shopBg;function lifesLayout(name,x,y){return{className:TGFW.Shape.Layout,x:x,y:y,name:name,layout:{heartIcon:imageDesc('heart',0,0),lifes_count:textDesc('',45,0,Game.colors.white,TGFW.Shape.Align.TOP_LEFT,Game.fonts.counters)}};}Game.lifesLayout=lifesLayout;function modeDescText(x,y,width,height){return textDesc('',x,y,Game.colors.white,TGFW.Shape.Align.CENTER,Game.fonts.modeDescription);}Game.modeDescText=modeDescText;function createContainerLayout(x,y,width,height,innerShape,bg){if(bg===undefined){bg=null;}var layout={};if(!bg){layout['leftSide']=imageDesc('black_box_left',0,0,TGFW.Shape.Align.TOP_LEFT,1,height/79);layout['rightSide']=imageDesc('black_box_right',width-37,0,TGFW.Shape.Align.TOP_LEFT,1,height/79);layout['bg']=boxDesc(37,0,width-74,height-1,Game.colors.modeDescriptionBG);}else{layout['bg']=imageDesc(bg);}if(innerShape){if(innerShape.name){layout[innerShape.name]=innerShape;}else{layout['innerShape']=innerShape;}}return{className:TGFW.Shape.Layout,x:x,y:y,layout:layout};}Game.createContainerLayout=createContainerLayout;function createTreeLayout(x,y){return{x:x,y:y,className:TGFW.Shape.Layout,layout:{leaf1_1:imageDesc('leaf1_1',-20,0,TGFW.Shape.Align.BOTTOM_CENTER),leaf2_1:imageDesc('leaf2_1',-5,0,TGFW.Shape.Align.TOP_RIGHT),leaf3_1:imageDesc('leaf3_1',-10,0,TGFW.Shape.Align.TOP_LEFT),leaf4_1:imageDesc('leaf4_1',-10,0,TGFW.Shape.Align.LEFT_CENTER),leaf5_1:imageDesc('leaf5_1',0,10,TGFW.Shape.Align.BOTTOM_RIGHT),leaf6_1:imageDesc('leaf6_1',0,-15,TGFW.Shape.Align.TOP_CENTER),tree_shadow:imageDesc('tree_shadow',-40,250,TGFW.Shape.Align.TOP_CENTER)}};}Game.createTreeLayout=createTreeLayout;function createShipLayout(x,y){return{x:x,y:y,className:TGFW.Shape.Layout,layout:{ship:imageDesc('ship'),ocean_piece:imageDesc('ocean_piece',0,90,TGFW.Shape.Align.TOP_LEFT,1,0.8)}};}Game.createShipLayout=createShipLayout;function createCancerLayout(x,y){return{className:TGFW.Shape.Layout,layout:{cancerLegs:{x:x,y:y,className:TGFW.Shape.Layout,layout:{cancer0:imageDesc('cancer0')}}}};}Game.createCancerLayout=createCancerLayout;function createTopIcons(x,y){return{x:x,y:y,className:TGFW.Shape.Layout,layout:{}};}Game.createTopIcons=createTopIcons;function createExitButton(x,y,isBack,action,isInMainMenu){if(isBack===undefined){isBack=false;}if(isInMainMenu===undefined){isInMainMenu=false;}var name='exit';if(isBack)name='back';return{x:x,y:y,className:TGFW.UI.Button,width:20,height:20,action:action,layout:{background:imageDesc('backIcon',0,0,TGFW.Shape.Align.TOP_CENTER,isInMainMenu?0:1,isInMainMenu?0:1),cursor:imageDesc('smal_mm_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER,isInMainMenu?0:1,isInMainMenu?0:1)},layoutClip:standartButtonlayoutClip()};}Game.createExitButton=createExitButton;function selMultiplayerGameLenghtButton(x,y,header,label,action,_color,count){return{className:TGFW.UI.Button,x:x,y:y,width:20,height:20,action:action,count:count,layout:{square_button_cursor:imageDesc('square_button_cursor',0,0,TGFW.Shape.Align.CENTER),square_button_off:imageDesc('square_button_off',0,0,TGFW.Shape.Align.CENTER),square_button:imageDesc('square_button',0,0,TGFW.Shape.Align.CENTER),header:textDesc(header,-98,-113,_color,TGFW.Shape.Align.CENTER,Game.fonts.gameLenghtButtonTitle,null,196,196),label:textDesc(label,-98,-83,_color,TGFW.Shape.Align.CENTER,Game.fonts.gameLenghtButtonSubTitle,null,196,196)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED,TGFW.UI.ButtonState.CHECKED]}};}Game.selMultiplayerGameLenghtButton=selMultiplayerGameLenghtButton;function selNumOfPlayersButton(x,y,number,color,action,playerCount){return{className:TGFW.UI.Button,x:x,y:y,width:20,height:20,action:action,playerCount:playerCount,layout:{square_button_cursor:imageDesc('square_button_cursor',0,0,TGFW.Shape.Align.CENTER),square_button_off:imageDesc('square_button_off',0,0,TGFW.Shape.Align.CENTER),square_button:imageDesc('square_button',0,0,TGFW.Shape.Align.CENTER),text:textDesc(number,-92.5,-92.5,color,TGFW.Shape.Align.CENTER,Game.fonts.playerNambers,null,185,185)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'square_button_cursor',className:TGFW.Animation.KeyProperty,visible:false}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED,TGFW.UI.ButtonState.CHECKED]}};}Game.selNumOfPlayersButton=selNumOfPlayersButton;function popupDialogBackground(width,height,color){if(width===undefined){width=800;}if(height===undefined){height=300;}if(color===undefined){color=Game.colors.white;}var cornerW=40;var cornerH=40;var borderSize=5;var alignKoefForDivRender=5;var borderColor=Game.colors.mint;var layout={};layout['bg_rect_vert_border']=boxDesc(cornerW-alignKoefForDivRender,0,width-2*cornerW+alignKoefForDivRender*2,height,borderColor);layout['bg_rect_hor_boder']=boxDesc(0,cornerH-alignKoefForDivRender,width,height-2*cornerH+alignKoefForDivRender*2,borderColor);layout['bg_rect_vert']=boxDesc(cornerW-alignKoefForDivRender,borderSize,width-2*cornerW+alignKoefForDivRender*2,height-2*borderSize,color);layout['bg_rect_hor']=boxDesc(borderSize,cornerH-alignKoefForDivRender,width-2*borderSize,height-2*cornerH+alignKoefForDivRender*2,color);layout['corner_top_left']=imageDesc('popup_corner_top_left',0,0);layout['corner_top_right']=imageDesc('popup_corner_top_right',width-cornerW,0);layout['corner_bottom_left']=imageDesc('popup_corner_bottom_left',0,height-cornerH);layout['corner_bottom_right']=imageDesc('popup_corner_bottom_right',width-cornerW,height-cornerH);return{className:TGFW.Shape.Layout,x:(1280-width)/2,y:(720-height)/2,layout:layout};}Game.popupDialogBackground=popupDialogBackground;function updateButtonsAlignmentFixed(button,template,values,maxWidth,spacing,_outerBtnElements,earnedCoins){if(maxWidth===undefined){maxWidth=485;}if(spacing===undefined){spacing=20;}var iconShape=button.getImageShape('icon'),textShape=button.getTextShape('text');var iconWidth=0;if(iconShape.getTexture()){iconWidth=iconShape.getTexture().width*iconShape.getScale().x+spacing;}var text=TGFW.LocalizationManager.getText(template);if(values){text=TGFW.Utils.stringParser(text,values);}var textDesc=textShape.getDesc();var textWidth=Game.getTextWidth(text,textDesc.font,textDesc.size);var width=iconWidth+textWidth;var paddingLeft=(maxWidth-width)/2;iconShape.setX(paddingLeft-maxWidth/2);textShape.setX(paddingLeft+iconWidth-maxWidth/2);}Game.updateButtonsAlignmentFixed=updateButtonsAlignmentFixed;function updateButtonsAlignment(_btns,_maxW,_spacing,_outerBtnElements,callDialog){if(_maxW===undefined){_maxW=485;}if(_spacing===undefined){_spacing=20;}for(var i=0;i<_btns.length;i++){var btn=_btns[i];var icon=btn.getImageShape('icon');var text=btn.getTextShape('text');var textDesc_1=text.desc;var _textTemplate=TGFW.LocalizationManager.getText(textDesc_1.text);var _textFontSize=textDesc_1.size;var _textFontName=textDesc_1.font;var iconW=0;if(icon.getTexture()){iconW=icon.getTexture().width;}if(!iconW)_spacing=0;var iconScaleX=icon.getScale().x;var textW=Game.getTextWidth(_textTemplate,_textFontName,_textFontSize);var totalW=iconW*iconScaleX+_spacing+textW;var pl=(_maxW-totalW)/2;icon.setX(pl-_maxW/2);text.setX(pl+iconW+_spacing-_maxW/2);}}Game.updateButtonsAlignment=updateButtonsAlignment;function shadowtext(x,y,text,fontName,strokeSize,width,height){if(fontName===undefined){fontName=Game.fonts.default;}if(strokeSize===undefined){strokeSize=1;}if(width===undefined){width=1280;}if(height===undefined){height=52;}var layout={};layout['left']=textDesc(text,-strokeSize,0,Game.colors.black,TGFW.Shape.Align.TOP_CENTER,fontName,null,width,height);layout['top']=textDesc(text,0,+strokeSize,Game.colors.black,TGFW.Shape.Align.TOP_CENTER,fontName,null,width,height);layout['right']=textDesc(text,strokeSize,0,Game.colors.black,TGFW.Shape.Align.TOP_CENTER,fontName,null,width,height);layout['bottom']=textDesc(text,0,-strokeSize,Game.colors.black,TGFW.Shape.Align.TOP_CENTER,fontName,null,width,height);layout['main']=textDesc(text,0,0,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,fontName,null,width,height);return{className:TGFW.Shape.Layout,layout:layout,x:x,y:y};}Game.shadowtext=shadowtext;function selCategoryButton(x,y,categoryRegular,categoryOff,action,actionName){return{className:TGFW.UI.Button,x:x,y:y,width:196,height:195,action:action,actionName:actionName,layout:{cursor:imageDesc('square_button_cursor',0,0,TGFW.Shape.Align.CENTER),bg_off:imageDesc('square_button_off',0,0,TGFW.Shape.Align.CENTER),bg_regular:imageDesc('square_button',0,0,TGFW.Shape.Align.CENTER),icon_off:imageDesc(categoryOff,0,0,TGFW.Shape.Align.CENTER),icon_regular:imageDesc(categoryRegular,0,0,TGFW.Shape.Align.CENTER)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'bg_regular',className:TGFW.Animation.KeyProperty,visible:true},{name:'icon_regular',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true},{name:'bg_regular',className:TGFW.Animation.KeyProperty,visible:true},{name:'icon_regular',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'bg_regular',className:TGFW.Animation.KeyProperty,visible:false},{name:'icon_regular',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'bg_regular',className:TGFW.Animation.KeyProperty,visible:true},{name:'icon_regular',className:TGFW.Animation.KeyProperty,visible:true}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED,TGFW.UI.ButtonState.CHECKED]}};}Game.selCategoryButton=selCategoryButton;function addWindowListeners(){document.addEventListener('pause',function(){TGFW.sdk().console.log('Application on pause');TGFW.Animation.ClipManager.pause();TGFW.sdk().stopMusic();});document.addEventListener('resume',function(){TGFW.sdk().console.log('Application on resume');TGFW.Animation.ClipManager.resume();TGFW.sdk().playMusic();});}Game.addWindowListeners=addWindowListeners;function remapNumKeyToArrow(key){switch(key){case TGH5.KeyNames.KEY_8:key=TGH5.KeyNames.KEY_DOWN;break;case TGH5.KeyNames.KEY_2:key=TGH5.KeyNames.KEY_UP;break;case TGH5.KeyNames.KEY_6:key=TGH5.KeyNames.KEY_RIGHT;break;case TGH5.KeyNames.KEY_4:key=TGH5.KeyNames.KEY_LEFT;break;case TGH5.KeyNames.KEY_5:key=TGH5.KeyNames.KEY_ENTER;break;}return key;}Game.remapNumKeyToArrow=remapNumKeyToArrow;}(Game||(Game={})));var Game;(function(Game){function CreateScaleClipDesc(startScale,endScale,delay,time){return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'shape',className:TGFW.Animation.KeyTransition,time:0,change:{scale:{start:startScale,end:endScale}}}],[{name:'shape',className:TGFW.Animation.KeyTransition,time:time,change:{scale:{start:endScale,end:startScale}}}]]}]};}Game.CreateScaleClipDesc=CreateScaleClipDesc;function scaleLayoutClip(layout){var startScale=1;var endScale=0;return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:name,className:TGFW.Animation.KeyTransition,time:200,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}}]]}]};}Game.scaleLayoutClip=scaleLayoutClip;function CreateScaleLayoutClipDesc(shapeName,delay,time,scaleUp){var startScale=0.001;var endScale=1;if(!scaleUp){startScale=1;endScale=0.001;}return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:shapeName,className:TGFW.Animation.KeyTransition,time:0,change:{}}],[{name:shapeName,className:TGFW.Animation.KeyTransition,time:0,change:{}}]]}]};}Game.CreateScaleLayoutClipDesc=CreateScaleLayoutClipDesc;function setDataForCancerAnimation(){var obj={first:[[1500,1280,500,1280,500],[2000,1000,500],[1500,880,450],[1200,730,470],[1200,580,550],[2500,280,720],[1500,280,720],[2000,780,720],[3500,1280,500],[2500,1280,500]],second:[[2200,1280,500,1000,460],[1700,800,470],[1700,550,530],[2200,200,630],[2200,-100,570],[2200,-480,320],[2700,-480,320]],third:[[2000,-200,480,100,510],[1500,300,480],[1500,500,440],[1000,650,420],[300,650,420],[1500,850,460],[1500,1050,490],[3000,2330,500],[2500,2330,500]]};var arr=[];for(var item in obj){arr.push([{name:'cancerLegs',className:TGFW.Animation.KeyTransition,time:obj[item][0][0],easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:obj[item][0][1],end:obj[item][0][3]},y:{start:obj[item][0][2],end:obj[item][0][4]}}}]);var counter=obj[item].length-1;for(var i=1;i<=counter;i++){arr.push([{name:'cancerLegs',className:TGFW.Animation.KeyTransition,time:obj[item][i][0],easing:TGFW.Animation.Easing.sineInOut,change:{x:{startFromCurrent:true,end:obj[item][i][1]},y:{startFromCurrent:true,end:obj[item][i][2]}}}]);}}return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.setDataForCancerAnimation=setDataForCancerAnimation;function setDataForShipAnimation(){return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'ship',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:0},y:{start:0,end:8},rotate:{start:0,end:2*Math.PI/180}}}],[{name:'ship',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:0},y:{start:8,end:0},rotate:{start:2*Math.PI/180,end:0}}}],[{name:'ship',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:0},y:{start:0,end:8},rotate:{start:0,end:2*Math.PI/180}}}],[{name:'ship',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:0},y:{start:8,end:0},rotate:{start:2*Math.PI/180,end:0}}}]]}]};}Game.setDataForShipAnimation=setDataForShipAnimation;function setDataForTreeAnimation(){return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-20,end:-16},y:{start:0,end:-8},rotate:{start:0,end:-8*Math.PI/180}}},{name:'leaf2_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-5,end:-1},y:{start:0,end:-8},rotate:{start:0,end:10*Math.PI/180}}},{name:'leaf3_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-10,end:-6},y:{start:0,end:-8},rotate:{start:0,end:-12*Math.PI/180}}},{name:'leaf4_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-10,end:-6},y:{start:0,end:-8},rotate:{start:0,end:-6*Math.PI/180}}},{name:'leaf5_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:4},y:{start:10,end:2},rotate:{start:0,end:7*Math.PI/180}}},{name:'leaf6_1',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:4},y:{start:-15,end:-23},rotate:{start:0,end:-4*Math.PI/180}}},{name:'tree_shadow',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-40,end:-36},y:{start:250,end:244},rotate:{start:0,end:0}}}],[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,easing:TGFW.Animation.Easing.sineInOut,time:200,change:{x:{start:-16,end:-16},y:{start:-8,end:-8}}}],[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-16,end:-20},y:{start:-8,end:0},rotate:{start:-8*Math.PI/180,end:0}}},{name:'leaf2_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-1,end:-5},y:{start:-8,end:0},rotate:{start:10*Math.PI/180,end:0}}},{name:'leaf3_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-6,end:-10},y:{start:-8,end:0},rotate:{start:-12*Math.PI/180,end:0}}},{name:'leaf4_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-6,end:-10},y:{start:-8,end:0},rotate:{start:-6*Math.PI/180,end:0}}},{name:'leaf5_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:4,end:0},y:{start:2,end:10},rotate:{start:7*Math.PI/180,end:0}}},{name:'leaf6_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:4,end:0},y:{start:-23,end:-15},rotate:{start:-4*Math.PI/180,end:0}}},{name:'tree_shadow',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-36,end:-41},y:{start:244,end:250},rotate:{start:0,end:0}}}],[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-20,end:-16},y:{start:0,end:-8},rotate:{start:0,end:-8*Math.PI/180}}},{name:'leaf2_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-5,end:-1},y:{start:0,end:-8},rotate:{start:0,end:10*Math.PI/180}}},{name:'leaf3_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-10,end:-6},y:{start:0,end:-8},rotate:{start:0,end:-12*Math.PI/180}}},{name:'leaf4_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-10,end:-6},y:{start:0,end:-8},rotate:{start:0,end:-6*Math.PI/180}}},{name:'leaf5_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:4},y:{start:10,end:2},rotate:{start:0,end:7*Math.PI/180}}},{name:'leaf6_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:0,end:4},y:{start:-15,end:-23},rotate:{start:0,end:-4*Math.PI/180}}},{name:'tree_shadow',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-41,end:-36},y:{start:250,end:242},rotate:{start:0,end:0}}}],[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,time:200,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-16,end:-16},y:{start:-8,end:-8}}}],[{name:'leaf1_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-16,end:-20},y:{start:-8,end:0},rotate:{start:-8*Math.PI/180,end:0}}},{name:'leaf2_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-1,end:-5},y:{start:-8,end:0},rotate:{start:10*Math.PI/180,end:0}}},{name:'leaf3_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-6,end:-10},y:{start:-8,end:0},rotate:{start:-12*Math.PI/180,end:0}}},{name:'leaf4_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-6,end:-10},y:{start:-8,end:0},rotate:{start:-6*Math.PI/180,end:0}}},{name:'leaf5_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:4,end:0},y:{start:2,end:10},rotate:{start:7*Math.PI/180,end:0}}},{name:'leaf6_1',className:TGFW.Animation.KeyTransition,time:2000,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:4,end:0},y:{start:-23,end:-15},rotate:{start:-4*Math.PI/180,end:0}}},{name:'tree_shadow',className:TGFW.Animation.KeyTransition,time:2500,easing:TGFW.Animation.Easing.sineInOut,change:{x:{start:-36,end:-41},y:{start:242,end:248},rotate:{start:0,end:0}}}]]}]};}Game.setDataForTreeAnimation=setDataForTreeAnimation;function OnNewCategoryClipDesc(){var angle=30*Math.PI/180;return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'bg',className:TGFW.Animation.KeyTransition,time:100,change:{rotate:{start:0,end:angle}}}],[{name:'bg',className:TGFW.Animation.KeyTransition,time:100,change:{rotate:{start:angle,end:0}}}]]}]};}Game.OnNewCategoryClipDesc=OnNewCategoryClipDesc;function setCrownAnimation(shape,texture,count){var arr=[];arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crowncg7',time:250}]);for(var i=count;i>=0;i--){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:50}]);}arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crowncg0',time:500}]);for(var i=0;i<=count;i++){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:50}]);}arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crowncg7',time:4000}]);return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.setCrownAnimation=setCrownAnimation;function setCrownRemoteAnimation(shape,texture,count){var arr=[];arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crown_remote7',time:250}]);for(var i=count;i>=0;i--){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:50}]);}arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crown_remote0',time:500}]);for(var i=0;i<=count;i++){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:50}]);}arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:'crown_remote7',time:500}]);return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.setCrownRemoteAnimation=setCrownRemoteAnimation;function setCanserLegsAnimation(shape,texture,count,delays,fps){if(fps===undefined){fps=200;}var arr=[];for(var i=0;i<=count;i++){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:fps}]);}for(var i=count;i<=0;i--){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:fps}]);}if(delays){arr.unshift([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+'0',time:delays[0]}]);arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+'0',time:delays[1]}]);}return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.setCanserLegsAnimation=setCanserLegsAnimation;function setNumOfPlayerAnimation(shape,texture,count,delays,fps){if(fps===undefined){fps=50;}var arr=[];for(var i=0;i<=count;i++){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:fps}]);}if(shape==='willy'){for(var i=0;i<=count;i++){arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+i.toString(),time:fps}]);}}if(delays){arr.unshift([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+'0',time:delays[0]}]);arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+'0',time:delays[1]}]);}return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.setNumOfPlayerAnimation=setNumOfPlayerAnimation;function slideAnimation(shape,texture,count,checkZero){if(checkZero===undefined){checkZero=true;}var arr=[];for(var i=0;i<=count;i++){var iter='0';if(checkZero){if(i.toString().length===1&&count>10){iter+=i.toString();}else{iter+=i.toString();}}else{iter=i.toString();}arr.push([{name:shape,className:TGFW.Animation.KeyProperty,texture:texture+iter,time:75}]);}return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:arr}]};}Game.slideAnimation=slideAnimation;function moveDialog(startX,endX){return{className:TGFW.Animation.Clip,looped:false,disableInput:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:Game.app().isLowEnd()?[[{name:'back',className:TGFW.Animation.KeyTransition,time:0,change:{x:{start:endX,end:endX},y:{start:0,end:0}}}]]:[[{name:'back',className:TGFW.Animation.KeyTransition,time:300,change:{x:{start:startX,end:endX},y:{start:0,end:0}}}]]}]};}Game.moveDialog=moveDialog;function moveDialogBg(shape,startX,endX){return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:shape,className:TGFW.Animation.KeyProperty,visible:true,time:0}],[{name:shape,className:TGFW.Animation.KeyTransition,time:300,change:{x:{start:startX,end:endX},y:{start:0,end:0}}}],[{name:shape,className:TGFW.Animation.KeyProperty,visible:true,time:50}]]}]};}Game.moveDialogBg=moveDialogBg;}(Game||(Game={})));var Game;(function(Game){var MainMenuDialog=function(_super){__extends(MainMenuDialog,_super);function MainMenuDialog(desc){return _super.call(this,desc)||this;}MainMenuDialog.prototype.create=function(){_super.prototype.create.call(this);this._model=Game.app().getGameModel();this.isFirstload=true;this.showClasicButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showChalangeButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showPartyButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showPartyButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showLogo=TGFW.Animation.ClipManager.createClip(scaleLogo(500,true));this.showStatisticButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showStoreButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showAboutButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.showLanguageButton=TGFW.Animation.ClipManager.createClip(scaleLanguageButton(500,true));this.showExitButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,true));this.hideClasicButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hideChalangeButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hidePartyButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hidePartyButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hideLogo=TGFW.Animation.ClipManager.createClip(scaleLogo(500,false));this.hideStatisticButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hideStoreButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hideAboutButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.hideLanguageButton=TGFW.Animation.ClipManager.createClip(scaleLanguageButton(500,false));this.hideExitButton=TGFW.Animation.ClipManager.createClip(scaleButton(500,false));this.cancerAnimation=TGFW.Animation.ClipManager.createClip(Game.setDataForCancerAnimation());this.shipAnimation=TGFW.Animation.ClipManager.createClip(Game.setDataForShipAnimation());this.treeAnimation=TGFW.Animation.ClipManager.createClip(Game.setDataForTreeAnimation());this.cancerLegsAnimation=TGFW.Animation.ClipManager.createClip(Game.setCanserLegsAnimation('cancer0','cancer',4,[50,50],100));this._showBGanimation=TGFW.Animation.ClipManager.createClip(Game.moveDialogBg('shopBackground',Game.screenWidth,0));this._hideBGanimation=TGFW.Animation.ClipManager.createClip(Game.moveDialogBg('shopBackground',0,Game.screenWidth));var speedAppirience=400;this._lifesTimer=new TGFW.Timer(this._onLifesTimer.bind(this));this._soundTimer=new TGFW.Timer(this._onSoundTimer.bind(this));this._time='';this._timerCount=0;this._firstLaunch=true;};MainMenuDialog.prototype.hideLayoutText=function(){this.getLayout('classic.shapes').setVisibility(false);this.getLayout('challenge.shapes').setVisibility(false);this.getLayout('partyMode.shapes').setVisibility(false);this.getLayout('messageContainer').setVisibility(false);this.getImageShape('languageButton.languageFlag').setVisibility(false);};MainMenuDialog.prototype.showLayoutText=function(){this.getLayout('classic.shapes').setVisibility(true);this.getLayout('challenge.shapes').setVisibility(true);this.getLayout('partyMode.shapes').setVisibility(true);this.getLayout('messageContainer').setVisibility(true);this.getImageShape('languageButton.languageFlag').setVisibility(true);};MainMenuDialog.prototype._checkLifesTimerOnStart=function(){if(!this._model.isMaxLifes()){var _lastSavedTime=this._model.getSavedLifesTime();var _currentTime=new Date();var _delta=Math.floor(_currentTime/1000)-_lastSavedTime;var _parts=Math.floor(_delta/300);var _timeLeft=_delta%300;this._timerCount=_timeLeft;this._model.addLifes(_parts);this._model.markLifesTime(Math.floor(_currentTime/1000)-_timeLeft);}};MainMenuDialog.prototype._onLifesTimer=function(){if(this._model.isUnlimitedLifesMode()||this._model.isMaxLifes()){if(this._model.isUnlimitedLifesMode()){this._time='mainMenu.lifes.endless';}else{if(this._model.isMaxLifes()){this._time='mainMenu.lifes.full';}}this._lifesTimer.stop();this._updateLifesContainer();}else{var timeout=Game.GameModel.nextLifeTimeout/1000;var timeLeft=timeout-this._timerCount;var minutes=Math.floor(timeLeft/60);var seconds=timeLeft-minutes*60;this._time='+';if(minutes<10)this._time+='0';this._time+=minutes.toString()+':';if(seconds<10)this._time+='0';this._time+=seconds.toString();this._timerCount+=1;this._updateLifesContainer();if(timeLeft<2){this._timerCount=0;this._model.markLifesTime();this._model.addLifes();}}};MainMenuDialog.prototype.setData=function(data){this._data=data;};MainMenuDialog.prototype.showMainMenuElements=function(){var _this=this;this.hideLayoutText();this.showClasicButton.play(this.getLayout('classic').layout);this.showChalangeButton.play(this.getLayout('challenge').layout);this.showLogo.play(this.layout);this.showStatisticButton.play(this.getLayout('statisticsButton').layout);this.showStoreButton.play(this.getLayout('storeButton').layout);this.showAboutButton.play(this.getLayout('aboutButton').layout);this.showLanguageButton.play(this.getLayout('languageButton').layout);this.showExitButton.play(this.getLayout('exitButton').layout);this.showPartyButton.play(this.getLayout('partyMode').layout,function(){_this.showLayoutText();_this._updateGameModeDescription();});this.getNavigation().navigateToButton('classic',TGFW.UI.ButtonState.FOCUSED);this.getButton('classic').setState(TGFW.UI.ButtonState.FOCUSED);this.getButton('challenge').setState(TGFW.UI.ButtonState.REGULAR);this.getButton('partyMode').setState(TGFW.UI.ButtonState.REGULAR);};MainMenuDialog.prototype.hideMainMenuElements=function(cb){if(cb===undefined){cb=null;}this.hideLayoutText();this.hideClasicButton.play(this.getLayout('classic').layout);this.hideChalangeButton.play(this.getLayout('challenge').layout);this.hideLogo.play(this.layout);this.hideStatisticButton.play(this.getLayout('statisticsButton').layout);this.hideStoreButton.play(this.getLayout('storeButton').layout);this.hideAboutButton.play(this.getLayout('aboutButton').layout);this.hideLanguageButton.play(this.getLayout('languageButton').layout);this.hideExitButton.play(this.getLayout('exitButton').layout);this.hidePartyButton.play(this.getLayout('partyMode').layout,function(){if(cb)cb();});};MainMenuDialog.prototype._beforeShow=function(){_super.prototype._beforeShow.call(this);if(TGFW.sdk().getPlatformName()==='fauricia'){Game.addWindowListeners();}};MainMenuDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);if(!TGFW.sdk().isExitAvailable()||false||true||Game.App.mobileRemoteControlMode){this.getButton('exitButton').disable();this.getButton('exitButton').hide();var y=67,x=1167,btnWidth=103,topButtonsNames=['languageButton','aboutButton','statisticsButton','storeButton'];for(var i=topButtonsNames.length;i>0;i--){this.getButton(topButtonsNames[i-1]).setPosition(x-btnWidth*(i-1),y);}}if(this._firstLaunch){this._checkLifesTimerOnStart();this._firstLaunch=false;}this.hideLayoutText();this._lifesTimer.start(1000,true);this.updateGameModeBG();this._updateLanguageIcon();this._updateContainers();this.hideShopBg();this.getButton('storeButton').setVisibility(Game.app().getPaymentManager().isEnabled());this.animateAppirience(this._launchBGanimations.bind(this));this._updateGameModeDescription();if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});}};MainMenuDialog.prototype.checkContainersFromShop=function(){this._checkLifesTimerOnStart();this._onLifesTimer();this._lifesTimer.start(1000,true);};MainMenuDialog.prototype.updateGameModeBG=function(hideBG){if(hideBG===undefined){hideBG=true;}if(hideBG){this.getImageShape('modeBg').hide();}else{var _mode=this._model.getMode();var _bg=Game.modesBackgrouns[_mode];if(_bg){this.getImageShape('modeBg').setTexture(_bg);this.getImageShape('modeBg').show();}}};MainMenuDialog.prototype._updateLanguageIcon=function(){TGFW.sdk().console.log(this._model.getLocalLanguage());this.getImageShape('languageButton.languageFlag').setTexture(Game.languagesData[this._model.getLocalLanguage()].icon);};MainMenuDialog.prototype.hideShopBg=function(){this.getImageShape('shopBackground').setVisibility(false);};MainMenuDialog.prototype.showShopBg=function(){this.getImageShape('shopBackground').setVisibility(true);this._hideBGanimation.play(this.layout);};MainMenuDialog.prototype._onSoundTimer=function(){TGFW.Audio.stop();TGFW.sdk().stopMusic().always(function(){TGFW.sdk().playMusic('trivia_crack_menu').always(function(){});});};MainMenuDialog.prototype.animateAppirience=function(callback){var _this=this;if(callback===undefined){callback=null;}if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['party','victory','challenge','question_top_bg','science','willy','sports','entertainment','selectCategory','wheel'],false,function(){_this._updatePromoButton();_this._updateCoinsContainer();_this.showMainMenuElements();var _callback=_this._onMainMenuShowCallback;if(callback)_callback=callback;if(_this.isFirstload){_this.isFirstload=false;_callback();_this._soundTimer.start(0,false);}else{_callback();TGFW.sdk().stopMusic().always(function(){TGFW.sdk().playMusic('trivia_crack_menu');});}});}else{this._updatePromoButton();this._updateCoinsContainer();this.showMainMenuElements();var _callback=this._onMainMenuShowCallback;if(callback)_callback=callback;if(this.isFirstload){this.isFirstload=false;_callback();this._soundTimer.start(0,false);}else{_callback();TGFW.sdk().stopMusic().always(function(){TGFW.sdk().playMusic('trivia_crack_menu');});}}};MainMenuDialog.prototype._onMainMenuShowCallback=function(){};MainMenuDialog.prototype._updateContainers=function(){this._updateCoinsContainer();this._updateLifesContainer();};MainMenuDialog.prototype._updateCoinsContainer=function(){var coinsCount=this._model.getCoins();this.getTextShape('coinsContainer.coins.coins_count').setText(coinsCount.toString());};MainMenuDialog.prototype._updateLifesContainer=function(){var _lifesCount,_time;if(Game.App.mobileRemoteControlMode){this.getLayout('lifesContainer').setVisibility(false);}else{_lifesCount=this._model.getLifes();_time=_lifesCount.toString()+' '+this._time;if(this._model.isUnlimitedLifesMode()||this._model.isMaxLifes()){_time=this._time;}this.getTextShape('lifesContainer.lifes.lifes_count').setText(_time);Game.app().dialogs.shop.updateLifesContainer(_time);}};MainMenuDialog.prototype._launchBGanimations=function(){if(!Game.app().isLowEnd()){this.cancerAnimation.play(this.getLayout('cancerBody').layout);this.shipAnimation.play(this.getLayout('ship').layout);this.treeAnimation.play(this.getLayout('animatedTree').layout);this.cancerLegsAnimation.play(this.getLayout('cancerBody.cancerLegs').layout);}};MainMenuDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);};MainMenuDialog.prototype._startGame=function(){};MainMenuDialog.prototype.onMouseEvent=function(type,x,y,shape){_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(type===TGFW.UI.MouseEventType.OVER&&y<460){this._updateGameModeDescription();}};MainMenuDialog.prototype.onKeyDown=function(key){_super.prototype.onKeyDown.call(this,Game.remapNumKeyToArrow(key));if(key===TGH5.KeyNames.KEY_LEFT||key===TGH5.KeyNames.KEY_RIGHT||key===TGH5.KeyNames.KEY_UP||key===TGH5.KeyNames.KEY_DOWN){this._updateGameModeDescription();}};MainMenuDialog.prototype.onKeyUp=function(key){_super.prototype.onKeyUp.call(this,Game.remapNumKeyToArrow(key));};MainMenuDialog.prototype.onAction=function(action,button){if(action===MainMenuDialog.statisticsAction){this._onStatisticsAction();}else if(action===MainMenuDialog.shopAction){if(TGFW.app().getPaymentManager().isEnabled())this._onShopAction();}else if(action===MainMenuDialog.aboutAction){this._onAboutAction();}else if(action===MainMenuDialog.changeLanguageAction){this._onChangeLanguageAction();}else if(action===MainMenuDialog.exitAction){this._onExitAction();}else if(action===MainMenuDialog.playClassic){this._onStartGameAction(Game.GameModel.GameMode.CLASSIC,button);}else if(action===MainMenuDialog.playChallenge){this._onStartGameAction(Game.GameModel.GameMode.CHALLENGE,button);}else if(action===MainMenuDialog.playPartyMode){this._onStartGameAction(Game.GameModel.GameMode.PARTY,button);}else if(action===MainMenuDialog.promoAction){this.onDeeplinkAction();}};MainMenuDialog.prototype.onDeeplinkAction=function(){if(!this.curretBanner.crossPromotion)return;var reloadUrl=this.curretBanner.crossPromotion.url;if(!reloadUrl)return;reloadUrl=TGFW.sdk().resolvePath(reloadUrl);TGFW.sdk().reportEvent('cross-promotion','launch',this.curretBanner.crossPromotion.name?this.curretBanner.crossPromotion.name:'no_name_defiden');TGFW.sdk().changeLocation(reloadUrl,true);};MainMenuDialog.prototype._onStatisticsAction=function(){this._showBGanimation.play(this.layout,this.showStatisticsDialog);};MainMenuDialog.prototype.showStatisticsDialog=function(){Game.app().dialogs.statistics.show();};MainMenuDialog.prototype._showNoCoinsDialog=function(){var _this=this;Game.app().dialogs.noCoins.showModal(function(dialog,result){dialog.hide();result==TGFW.UI.DialogResult.YES?_this._onShopAction():null;});};MainMenuDialog.prototype._onShopAction=function(){var _this=this;if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['shop'],[],false,function(){_this._showBGanimation.play(_this.layout,_this.showShopDialog.bind(_this));});}else{this._showBGanimation.play(this.layout,this.showShopDialog.bind(this));}};MainMenuDialog.prototype.showShopDialog=function(){Game.app().dialogs.shop.setData({timerCount:this._timerCount});Game.app().dialogs.shop.show();};MainMenuDialog.prototype._onAboutAction=function(){Game.app().dialogs.about.show();};MainMenuDialog.prototype._onChangeLanguageAction=function(){Game.app().dialogs.language.show();};MainMenuDialog.prototype._onExitAction=function(){var _this=this;var data={title:'EXIT',msg:'Are you sure you want to exit game?'};Game.app().dialogs.quitConfirmation.showModal(function(dialog,result){dialog.hide();result==TGFW.UI.DialogResult.YES?_this._quitConfirmationAction():null;});};MainMenuDialog.prototype._quitConfirmationAction=function(){Game.app().exit(TGH5.ExitRequest.regular);};MainMenuDialog.prototype._updateGameModeDescription=function(){var description='';var partyModeCost=this._model.getPartyModeCost();var btnName=this.getNavigation().getFocusedButtonName();if(btnName==='classic'||btnName==='challenge'||btnName==='partyMode'){this.getLayout('messageContainer').setVisibility(true);description='mainMenu.description.'+btnName;if(Game.App.mobileRemoteControlMode&&btnName=='partyMode'){description='mainMenu.description.partyRemoteControl';}}else{this.getLayout('messageContainer').setVisibility(false);}this.getTextShape('messageContainer.innerShape').setText(description,{coins:partyModeCost});};MainMenuDialog.prototype.updateLifeTimerAfterPayment=function(){if(!this._model.isUnlimitedLifesMode()){this._model.markLifesTime(this._timeLeft);}if(this._lifesTimer._isFinished()){this._lifesTimer.start(1000,true);}this._time='';};MainMenuDialog.prototype._onStartGameAction=function(_gameMode,btn){var _this=this;this._model.setMode(_gameMode);if(_gameMode===Game.GameModel.GameMode.CLASSIC||_gameMode===Game.GameModel.GameMode.CHALLENGE){var lifesCount=this._model.getLifes();if(lifesCount<=0&&!this._model.isUnlimitedLifesMode()){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['outOfLifes'],[],false,function(){Game.app().dialogs.outOfLife.show();});}else{Game.app().dialogs.outOfLife.show();}}else{{TGFW.sdk().requestAd(TGH5.Ads.Type.MidRoll).always(function(){if(!_this._model.isUnlimitedLifesMode()){_this._model.markLifesTime(_this._timeLeft);_this._model.useLife();}if(_this._lifesTimer._isFinished()){_this._lifesTimer.start(1000,true);}if(_this._time!=='mainMenu.lifes.endless'){_this._time='';}if(_gameMode===Game.GameModel.GameMode.CLASSIC){TGFW.sdk().gameplayStart();_this._model.startGame();TGFW.Audio.stop();_this._soundTimer.stop();TGFW.sdk().stopMusic().always(function(){TGFW.sdk().playMusic('trivia_crack_classic').always(function(){_this._onWheelShowCallback();});});}else{TGFW.Audio.stop();_this._soundTimer.stop();TGFW.sdk().stopMusic().always(function(){TGFW.sdk().playMusic('trivia_crack_challenge').always(function(){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['challenge','selectCategory'],[],false,function(){_this.getButton('promoButton').disable();_this.getButton('promoButton').setVisibility(false);_this._onSelectCategoryShowCallback();});}else{_this.getButton('promoButton').disable();_this.getButton('promoButton').setVisibility(false);_this._onSelectCategoryShowCallback();}});});}});}}}else{if(!this._model.canBuyPartyMode()&&!Game.App.mobileRemoteControlMode){this._showNoCoinsDialog();}else{TGFW.Audio.stop();this._soundTimer.stop();TGFW.sdk().stopMusic().always(function(){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.sdk().playMusic('trivia_crack_party').always(function(){TGFW.Loader.loadResources(['party','willy','selectCategory','playersGetReady'],[],false,function(){_this.getButton('promoButton').disable();_this.getButton('promoButton').setVisibility(false);_this._updateCoinsContainer();_this._onSelNumOfPlayersShowCallback();});});}else{TGFW.sdk().requestAd(TGH5.Ads.Type.MidRoll).always(function(){TGFW.sdk().playMusic('trivia_crack_party').always(function(){_this.getButton('promoButton').disable();_this.getButton('promoButton').setVisibility(false);_this._updateCoinsContainer();_this._onSelNumOfPlayersShowCallback();});});}});}}};MainMenuDialog.prototype._onWheelShowCallback=function(){var _this=this;if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['wheel'],[],false,function(){_this.getButton('promoButton').disable();_this.getButton('promoButton').setVisibility(false);_this._updateLifesContainer();_this.hideMainMenuElements(function(){_this.updateGameModeBG(false);Game.app().dialogs.wheel.show();});});}else{this.getButton('promoButton').disable();this.getButton('promoButton').setVisibility(false);this._updateLifesContainer();this.hideMainMenuElements(function(){_this.updateGameModeBG(false);Game.app().dialogs.wheel.show();});}};MainMenuDialog.prototype._onSelectCategoryShowCallback=function(){var _this=this;this._updateLifesContainer();this.hideMainMenuElements(function(){_this.updateGameModeBG(false);Game.app().dialogs.selectCategory.show();});};MainMenuDialog.prototype._onSelNumOfPlayersShowCallback=function(){var _this=this;this.hideMainMenuElements(function(){_this.updateGameModeBG(false);Game.app().dialogs.selNumOfPlayers.show();});};MainMenuDialog.prototype._onWheelStop=function(data){if(data.category==='crown'){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['selectCategory'],[],false,function(){Game.app().dialogs.selectCategory.show();});}else{Game.app().dialogs.selectCategory.show();}}else{if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],[],false,function(){Game.app().dialogs.question.show();});}else{Game.app().dialogs.question.show();}}};MainMenuDialog.prototype.sendPixelUrl=function(url){if(!url)return;var b=document.createElement('img');b.width=1;b.height=1;b.src=url;b.onload=b.onerror=function(){b.onload=null;b.onerror=null;};};MainMenuDialog.prototype.updateUserName=function(){};MainMenuDialog.prototype._updatePromoButton=function(){var _this=this;this.getButton('promoButton').disable();this.getButton('promoButton').setVisibility(false);var promoSettings=Game.app().getPromoSettings();if(!promoSettings||!promoSettings.enabled||!promoSettings.items.length){return;}if(!this.smartRandom){this.smartRandom=new TGFW.Math.SmartRandom(0,promoSettings.items.length-1);if(Math.random()>0.5){this.smartRandom.next();}}var index=this.smartRandom.next();this.curretBanner=promoSettings.items[index];var resourceManager=TGFW.sdk().getResourceManager();if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['banner_'+index],[],false,function(){var url=resourceManager.resolvePath(_this.curretBanner.imageUrl);var img=resourceManager.getResourceHTMLElement(url);if(img){var texture=Game.appDesc.texturePool['banner_'+index];texture.width=texture.map.width=img.width;texture.height=texture.map.height=img.height;}_this.updateUIElements();_this.getImageShape('promoButton.promoImage').setTexture('banner_'+index);_this.getBoxShape('promoButton.cursor').setDesc({width:img.width+10,height:img.height+10});_this.getButton('promoButton').enable();_this.getButton('promoButton').setVisibility(true);_this.getButton('promoButton').setState(TGFW.UI.ButtonState.REGULAR);if(_this.curretBanner.crossPromotion.url!='')_this.addPromoButton();TGFW.sdk().reportEvent('cross-promotion','view',_this.curretBanner.name);_this.sendPixelUrl(_this.curretBanner.pixelUrl);});}else{var url=resourceManager.resolvePath(this.curretBanner.imageUrl);var img=resourceManager.getResourceHTMLElement(url);if(img){var texture=Game.appDesc.texturePool['banner_'+index];texture.width=texture.map.width=img.width;texture.height=texture.map.height=img.height;}this.updateUIElements();this.getImageShape('promoButton.promoImage').setTexture('banner_'+index);this.getBoxShape('promoButton.cursor').setDesc({width:img.width+10,height:img.height+10});this.getButton('promoButton').enable();this.getButton('promoButton').setVisibility(true);this.getButton('promoButton').setState(TGFW.UI.ButtonState.REGULAR);if(this.curretBanner.crossPromotion.url!='')this.addPromoButton();TGFW.sdk().reportEvent('cross-promotion','view',this.curretBanner.name);this.sendPixelUrl(this.curretBanner.pixelUrl);}};MainMenuDialog.prototype.addPromoButton=function(){this._navigation.desc.buttonNames.push('promoButton');this._navigation.desc.onKeyDown['Down']['classic']='promoButton';this._navigation.desc.onKeyDown['Down']['challenge']='promoButton';this._navigation.desc.onKeyDown['Down']['partyMode']='promoButton';this._navigation.desc.onKeyDown['Up']['promoButton']='challenge';};MainMenuDialog.prototype.updateUIElements=function(){};MainMenuDialog.statisticsAction=new TGFW.Action();MainMenuDialog.shopAction=new TGFW.Action();MainMenuDialog.aboutAction=new TGFW.Action();MainMenuDialog.changeLanguageAction=new TGFW.Action();MainMenuDialog.exitAction=new TGFW.Action();MainMenuDialog.playClassic=new TGFW.Action();MainMenuDialog.playChallenge=new TGFW.Action();MainMenuDialog.playPartyMode=new TGFW.Action();MainMenuDialog.promoAction=new TGFW.Action();return MainMenuDialog;}(TGFW.UI.TMainMenuDialog);Game.MainMenuDialog=MainMenuDialog;function scaleButton(time,scaleUp){if(time===undefined){time=500;}if(scaleUp===undefined){scaleUp=false;}var startScale=0;var endScale=1;if(!scaleUp){startScale=1;endScale=0;}return{className:TGFW.Animation.Clip,looped:false,disableInput:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'background',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}},{name:'cursor',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}}]]}]};}Game.scaleButton=scaleButton;function scaleLanguageButton(time,scaleUp){if(time===undefined){time=500;}if(scaleUp===undefined){scaleUp=false;}var startScale=0;var endScale=1;if(!scaleUp){startScale=1;endScale=0;}return{className:TGFW.Animation.Clip,looped:false,disableInput:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'background',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}},{name:'cursor',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}},{name:'languageFlag',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}}]]}]};}Game.scaleLanguageButton=scaleLanguageButton;function scaleLogo(time,scaleUp){if(time===undefined){time=500;}if(scaleUp===undefined){scaleUp=false;}var startScale=0;var endScale=1;if(!scaleUp){startScale=1;endScale=0;}return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'logo',className:TGFW.Animation.KeyTransition,time:time,change:{scaleX:{start:startScale,end:endScale},scaleY:{start:startScale,end:endScale}}}]]}]};}Game.scaleLogo=scaleLogo;}(Game||(Game={})));var Game;(function(Game){var GameModel=function(){function GameModel(){this.skipUpdate=false;this.mr_startedPlayerList=[];this._coins=GameModel.coinsInitialValue;this._lifes=GameModel.lifesInitialValue;this._lifes_time=0;this._maxLifes=GameModel.maxLifesCount;this._isUnlimitedLifes=false;this._isNoAds=false;this._collectedCoins=0;this._spinDuration=GameModel.spinDuration;this._isFinished=true;this._spinsNumber=GameModel.fullSpinsCount;this._rotation=0;this._time=0;this._startRotate=0;this._endRotate=0;this._spinResult={rotation:this._rotation,category:this._getCategoryByRotation(this._rotation)};this._playersNumber=1;this._currentPlayer=0;this._questionsNumber=1;this._questionCount=0;this._players=[];this._timeForQuestion=GameModel.timePerQuestion;this._isTimerStarted=false;this._categories=GameModel.categories;this._answeredQuestions={};this._fullStatistics=[];this._powerUpsAvailable={'bomb':true,'double_chance':true,'right_answer':true};this._statistics={classic:{games:0,answers:[0,0,0,0,0,0],correct:[0,0,0,0,0,0],speed:[0,0,0,0,0,0]},challenge:{games:[0,0,0,0,0,0],answers:[0,0,0,0,0,0],score:[0,0,0,0,0,0],speed:[0,0,0,0,0,0]},power_ups:{bomb:[0,0,0,0,0,0],double_chance:[0,0,0,0,0,0],right_answer:[0,0,0,0,0,0]}};this.easyQuestionsCount=0;}GameModel.prototype.getSavedLanguageCode=function(){return this._savedLanguage;};GameModel.prototype.getSavedLifesTime=function(){return this._lifes_time;};GameModel.prototype.markLifesTime=function(_time){if(_time===undefined){_time=null;}if(!_time){var _currentTime=new Date();_time=Math.floor(_currentTime/1000);}this._lifes_time=_time;this.saveGame();};GameModel.prototype.saveLanguageCode=function(_code){this._savedLanguage=_code;this.saveGame();};GameModel.prototype.saveGame=function(){var bitStream=new TGFW.Utils.TypedBitStream();bitStream.writeUInt(this._coins,32);bitStream.writeUInt(this._lifes,16);bitStream.writeUInt(this._lifes_time,32);bitStream.writeUInt(this._maxLifes,32);bitStream.writeUInt(+this._isUnlimitedLifes,2);bitStream.writeUInt(this._statistics['classic'].games,16);for(var i=0;i<this._statistics['classic'].answers.length;i++){bitStream.writeUInt(this._statistics['classic'].answers[i],16);}for(var i=0;i<this._statistics['classic'].correct.length;i++){bitStream.writeUInt(this._statistics['classic'].correct[i],16);}for(var i=0;i<this._statistics['classic'].speed.length;i++){bitStream.writeUInt(this._statistics['classic'].speed[i],16);}for(var i=0;i<this._statistics['challenge'].games.length;i++){bitStream.writeUInt(this._statistics['challenge'].games[i],16);}for(var i=0;i<this._statistics['challenge'].answers.length;i++){bitStream.writeUInt(this._statistics['challenge'].answers[i],16);}for(var i=0;i<this._statistics['challenge'].score.length;i++){bitStream.writeUInt(this._statistics['challenge'].score[i],16);}for(var i=0;i<this._statistics['challenge'].speed.length;i++){bitStream.writeUInt(this._statistics['challenge'].speed[i],16);}for(var i=0;i<this._statistics['power_ups'].bomb.length;i++){bitStream.writeUInt(this._statistics['power_ups'].bomb[i],16);}for(var i=0;i<this._statistics['power_ups'].double_chance.length;i++){bitStream.writeUInt(this._statistics['power_ups'].double_chance[i],16);}for(var i=0;i<this._statistics['power_ups'].right_answer.length;i++){bitStream.writeUInt(this._statistics['power_ups'].right_answer[i],16);}bitStream.writeString(this._localLanguage,false);var dataBase=Game.app().getDataBase();dataBase.setGameData(bitStream.toString());};GameModel.prototype.saveGameStreem=function(){var streem=new TGH5.PackedStream();streem.write(this._coins);streem.write(this._lifes);streem.write(this._lifes_time);streem.write(this._maxLifes);streem.write(+this._isUnlimitedLifes);streem.write(this._statistics['classic'].games);for(var i=0;i<this._statistics['classic'].answers.length;i++){streem.write(this._statistics['classic'].answers[i]);}for(var i=0;i<this._statistics['classic'].correct.length;i++){streem.write(this._statistics['classic'].correct[i]);}for(var i=0;i<this._statistics['classic'].speed.length;i++){streem.write(this._statistics['classic'].speed[i]);}for(var i=0;i<this._statistics['challenge'].games.length;i++){streem.write(this._statistics['challenge'].games[i]);}for(var i=0;i<this._statistics['challenge'].answers.length;i++){streem.write(this._statistics['challenge'].answers[i]);}for(var i=0;i<this._statistics['challenge'].score.length;i++){streem.write(this._statistics['challenge'].score[i]);}for(var i=0;i<this._statistics['challenge'].speed.length;i++){streem.write(this._statistics['challenge'].speed[i]);}for(var i=0;i<this._statistics['power_ups'].bomb.length;i++){streem.write(this._statistics['power_ups'].bomb[i]);}for(var i=0;i<this._statistics['power_ups'].double_chance.length;i++){streem.write(this._statistics['power_ups'].double_chance[i]);}for(var i=0;i<this._statistics['power_ups'].right_answer.length;i++){streem.write(this._statistics['power_ups'].right_answer[i]);}streem.write(this._localLanguage);var dataBase=Game.app().getDataBase();dataBase.setGameData(streem.toString(false));};GameModel.prototype._loadGameDataStreem=function(cb){var _this=this;if(cb===undefined){cb=null;}this._coins=GameModel.coinsInitialValue;this._lifes=GameModel.lifesInitialValue;this._lifes_time=0;this._maxLifes=GameModel.maxLifesCount;this._isUnlimitedLifes=false;this._statistics['classic'].games=0;this._statistics['classic'].answers=[0,0,0,0,0,0];this._statistics['classic'].correct=[0,0,0,0,0,0];this._statistics['classic'].speed=[0,0,0,0,0,0];this._statistics['challenge'].games=[0,0,0,0,0,0];this._statistics['challenge'].answers=[0,0,0,0,0,0];this._statistics['challenge'].score=[0,0,0,0,0,0];this._statistics['challenge'].speed=[0,0,0,0,0,0];this._statistics['power_ups'].bomb=[0,0,0,0,0,0];this._statistics['power_ups'].double_chance=[0,0,0,0,0,0];this._statistics['power_ups'].right_answer=[0,0,0,0,0,0];this._localLanguage=TGFW.sdk().getLanguage();var dataBase=Game.app().getDataBase();dataBase.getGameData().always(function(gameData){if(gameData){var bitStream=new TGFW.Utils.TypedBitStream(gameData);var streem=new TGH5.PackedStream();streem.init(gameData);_this._coins=streem.readInteger();_this._lifes=streem.readInteger();_this._lifes_time=streem.readInteger();_this._maxLifes=streem.readInteger();_this._isUnlimitedLifes=Boolean(streem.readInteger());_this._statistics['classic'].games=streem.readInteger();for(var i=0;i<_this._statistics['classic'].answers.length;i++){_this._statistics['classic'].answers[i]=streem.readInteger();}for(var i=0;i<_this._statistics['classic'].correct.length;i++){_this._statistics['classic'].correct[i]=streem.readInteger();}for(var i=0;i<_this._statistics['classic'].speed.length;i++){_this._statistics['classic'].speed[i]=streem.readInteger();}for(var i=0;i<_this._statistics['challenge'].games.length;i++){_this._statistics['challenge'].games[i]=streem.readInteger();}for(var i=0;i<_this._statistics['challenge'].answers.length;i++){_this._statistics['challenge'].answers[i]=streem.readInteger();}for(var i=0;i<_this._statistics['challenge'].score.length;i++){_this._statistics['challenge'].score[i]=streem.readInteger();}for(var i=0;i<_this._statistics['challenge'].speed.length;i++){_this._statistics['challenge'].speed[i]=streem.readInteger();}for(var i=0;i<_this._statistics['power_ups'].bomb.length;i++){_this._statistics['power_ups'].bomb[i]=streem.readInteger();}for(var i=0;i<_this._statistics['power_ups'].double_chance.length;i++){_this._statistics['power_ups'].double_chance[i]=streem.readInteger();}for(var i=0;i<_this._statistics['power_ups'].right_answer.length;i++){_this._statistics['power_ups'].right_answer[i]=streem.readInteger();}_this._localLanguage=streem.readString();if(_this._localLanguage.substr(0,2)!==TGFW.sdk().getLanguage())_this._localLanguage=TGFW.sdk().getLanguage();}if(cb)cb();});};GameModel.prototype._loadGameData=function(cb){var _this=this;if(cb===undefined){cb=null;}this._coins=GameModel.coinsInitialValue;this._lifes=GameModel.lifesInitialValue;this._lifes_time=0;this._maxLifes=GameModel.maxLifesCount;this._isUnlimitedLifes=false;this._statistics['classic'].games=0;this._statistics['classic'].answers=[0,0,0,0,0,0];this._statistics['classic'].correct=[0,0,0,0,0,0];this._statistics['classic'].speed=[0,0,0,0,0,0];this._statistics['challenge'].games=[0,0,0,0,0,0];this._statistics['challenge'].answers=[0,0,0,0,0,0];this._statistics['challenge'].score=[0,0,0,0,0,0];this._statistics['challenge'].speed=[0,0,0,0,0,0];this._statistics['power_ups'].bomb=[0,0,0,0,0,0];this._statistics['power_ups'].double_chance=[0,0,0,0,0,0];this._statistics['power_ups'].right_answer=[0,0,0,0,0,0];this._localLanguage=TGFW.sdk().getLanguage();if(TGFW.sdk().getPlatformName()===TGH5.Platforms.SKY&&TGFW.sdk().getLanguage()==='en'){this._localLanguage='en_uk';}var dataBase=Game.app().getDataBase();dataBase.getGameData().always(function(gameData){if(gameData){var bitStream=new TGFW.Utils.TypedBitStream(gameData);_this._coins=bitStream.readUInt(32);_this._lifes=bitStream.readUInt(16);_this._lifes_time=bitStream.readUInt(32);_this._maxLifes=bitStream.readUInt(32);_this._isUnlimitedLifes=Boolean(bitStream.readUInt(2));_this._statistics['classic'].games=bitStream.readUInt(16);for(var i=0;i<_this._statistics['classic'].answers.length;i++){_this._statistics['classic'].answers[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['classic'].correct.length;i++){_this._statistics['classic'].correct[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['classic'].speed.length;i++){_this._statistics['classic'].speed[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['challenge'].games.length;i++){_this._statistics['challenge'].games[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['challenge'].answers.length;i++){_this._statistics['challenge'].answers[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['challenge'].score.length;i++){_this._statistics['challenge'].score[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['challenge'].speed.length;i++){_this._statistics['challenge'].speed[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['power_ups'].bomb.length;i++){_this._statistics['power_ups'].bomb[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['power_ups'].double_chance.length;i++){_this._statistics['power_ups'].double_chance[i]=bitStream.readUInt(16);}for(var i=0;i<_this._statistics['power_ups'].right_answer.length;i++){_this._statistics['power_ups'].right_answer[i]=bitStream.readUInt(16);}_this._localLanguage=bitStream.readString(false);if(_this._localLanguage.substr(0,2)!==TGFW.sdk().getLanguage())_this._localLanguage=TGFW.sdk().getLanguage();}if(cb)cb();});};GameModel.prototype.setLocalLanguage=function(val){this._localLanguage=val;};GameModel.prototype.getLocalLanguage=function(){var lang=this._localLanguage;if(!lang){return TGFW.sdk().getLanguage();}return this._localLanguage;};GameModel.prototype.isNoAdsMode=function(){return this._isNoAds;};GameModel.prototype.setNoAdsMode=function(_value){this._isNoAds=_value;};GameModel.prototype.getPartyModeCost=function(){return GameModel.partyModePrice;};GameModel.prototype.isPowerUpAvailable=function(powerUp){var cost=this.getPowerUpCost(powerUp);var result=this._powerUpsAvailable[powerUp]&&this._coins>=cost;if(this._mode===GameModel.GameMode.PARTY&&powerUp===GameModel.PowerUps.RIGHT_ANSWER)result=false;return result;};GameModel.prototype.canBuyPartyMode=function(){return this.getCoins()>=GameModel.partyModePrice;};GameModel.prototype.payForPartyMode=function(){var coins=this.getPartyModeCost();TGFW.sdk().reportGameAnalyticsResourceSpent('coins',coins,'StartMode','party_mode');this.useCoins(coins);};GameModel.prototype.usePowerUp=function(powerUp){var coins=this.getPowerUpCost(powerUp);var categoryIndex=this._categories[this._spinResult.category].index;this._statistics.power_ups[powerUp][categoryIndex]+=1;TGFW.sdk().reportGameAnalyticsResourceSpent('coins',coins,'PowerUp',powerUp);this.useCoins(coins);this._powerUpsAvailable[powerUp]=false;this._players[this._currentPlayer].history[this._players[this._currentPlayer].history.length-1].usedPowerUp=powerUp;};GameModel.prototype.getPowerUpCost=function(powerUp){var cost=GameModel.powerUpsCost[powerUp];if(!cost)cost=GameModel.powerUpDefaultCost;if(this._mode===GameModel.GameMode.PARTY)cost=0;return cost;};GameModel.prototype._onDictionaryLoaded=function(data){this._dictionary=data;if(this._dictionary){var keys=Object.keys(this._dictionary.categories);for(var i=0;i<keys.length;i++){this._categories[keys[i]].regular={};this._categories[keys[i]].easy={};this._categories[keys[i]].regular.questions=[];for(var j=0;j<this._dictionary.categories[keys[i]].length;j++){var question=this._dictionary.categories[keys[i]][j];question.id=keys[i]+'_'+j.toString();this._categories[keys[i]].regular.questions.push(question);}}if(this._dictionary.easyCategories){for(var i=0;i<keys.length;i++){this._categories[keys[i]].easy={};this._categories[keys[i]].easy.questions=[];for(var j=0;j<this._dictionary.easyCategories[keys[i]].length;j++){var question=this._dictionary.easyCategories[keys[i]][j];question.id=keys[i]+'_easy_'+j.toString();this._categories[keys[i]].easy.questions.push(question);}}}}};GameModel.prototype.useCoins=function(coins){this._coins-=coins;this.saveGame();};GameModel.prototype.getCoins=function(){return this._coins;};GameModel.prototype.useLife=function(lifes){if(lifes===undefined){lifes=1;}this._lifes-=lifes;this.saveGame();};GameModel.prototype.getLifes=function(){return this._lifes;};GameModel.prototype.resetLifes=function(){this._lifes=this._maxLifes;};GameModel.prototype.addLifes=function(lifes){if(lifes===undefined){lifes=1;}if(!this.isMaxLifes()){this._lifes+=lifes;if(this._lifes>this._maxLifes)this._lifes=this._maxLifes;this.saveGame();}};GameModel.prototype.isUnlimitedLifesMode=function(){if(Game.App.mobileRemoteControlMode){return true;}if(Game.app().getPaymentManager().getProducts()){var product=Game.app().getPaymentManager().getProducts().filter(function(product){return product.productId==='trivia_crack_endless_lives';})[0];if(product)return product.status==TGH5.Payment.ProductStatus.Purchased||product.status==TGH5.Payment.ProductStatus.Cancellation;}return false;};GameModel.prototype.setEndlessLifes=function(_value){this._isUnlimitedLifes=_value;this.saveGame();};GameModel.prototype.setIncreasedMaxLifes=function(){this._maxLifes=GameModel.increasedMaxLifesCount;this.saveGame();};GameModel.prototype.isIncreasedLifes=function(){return this._maxLifes===GameModel.increasedMaxLifesCount;};GameModel.prototype.resetMaxLifes=function(){this._maxLifes=GameModel.maxLifesCount;this.saveGame();};GameModel.prototype.isMaxLifes=function(){return this._lifes>=this._maxLifes||this.isUnlimitedLifesMode();};GameModel.prototype.isFullMaxLifes=function(){return this._maxLifes>=GameModel.increasedMaxLifesCount;};GameModel.prototype.setMode=function(mode){this._mode=mode;};GameModel.prototype.getMode=function(){return this._mode;};GameModel.prototype.startGame=function(playersCount,questionsNumber){if(playersCount===undefined){playersCount=1;}if(questionsNumber===undefined){questionsNumber=GameModel.classicQuestionsCount;}var length;this._players=[];this._questionCount=0;this._collectedCoins=0;this._playersNumber=playersCount;this._questionsNumber=questionsNumber;this._currentPlayer=0;for(var i=0;i<playersCount;i++){this._players.push({index:i,pickedCategories:{},history:[]});}if(this._mode===GameModel.GameMode.CLASSIC){TGFW.sdk().reportGameAnalyticsDesignEvent('classicGame');this._statistics.classic.games+=1;}else if(this._mode===GameModel.GameMode.CHALLENGE){TGFW.sdk().reportGameAnalyticsDesignEvent('challengeGame:'+this._spinResult.category);this._statistics.challenge.games[this._categories[this._spinResult.category].index]+=1;}else if(this._mode===GameModel.GameMode.PARTY){length='short';if(questionsNumber===5){length='medium';}else if(questionsNumber===7){length='long';}TGFW.sdk().reportGameAnalyticsDesignEvent('partyGame:'+length+':'+playersCount);}};GameModel.prototype.getPlayersCount=function(){return this._playersNumber;};GameModel.prototype.getCurrentQuestionIndex=function(){return this._questionCount;};GameModel.prototype.getQuestionsCount=function(){return this._questionsNumber;};GameModel.prototype.nextQuestion=function(){this._questionCount+=1;};GameModel.prototype.isLastQuestion=function(){return this._questionCount>=this._questionsNumber-1;};GameModel.prototype.getCurrentPlayer=function(){return this._players[this._currentPlayer];};GameModel.prototype.mr_getCurrentPlayerName=function(){var playerName=this.mr_startedPlayerList[this._currentPlayer].name;return playerName;};GameModel.prototype.mr_getCurrentPlayerDeviceId=function(){var playerDeviceId;if(this.mr_startedPlayerList[this._currentPlayer]!=undefined){playerDeviceId=this.mr_startedPlayerList[this._currentPlayer].id;}else playerDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();return playerDeviceId;};GameModel.prototype.mr_getTheFirstPlayerDeviceId=function(){for(var i=0;i<this._players.length;i++){if(this.mr_startedPlayerList[i].connected==true){return this.mr_startedPlayerList[i].id;}}return 0;};GameModel.prototype.mr_getStartedPlayerList=function(){return this.mr_startedPlayerList;};GameModel.prototype.mr_checkTheNextRemotePlayer=function(){if(this._currentPlayer>=this._players.length-1){this._currentPlayer=0;}else{this._currentPlayer+=1;}for(var i=this._currentPlayer;i<this._players.length;i++){if(this.mr_startedPlayerList[this._currentPlayer].connected==false){this.prepareQuestion();this.checkAnswer('5',false);this._currentPlayer+=1;if(this._currentPlayer>this._players.length-1){this._currentPlayer=0;}}}};GameModel.prototype.mr_numberOfConnectedPlayers=function(){var n=0;for(var i=0;i<this._players.length;i++){if(this.mr_startedPlayerList[i].connected==true){n++;}}return n;};GameModel.prototype.nextPlayer=function(){if(Game.App.mobileRemoteControlMode){this.mr_checkTheNextRemotePlayer();}else{if(this._currentPlayer>=this._players.length-1){this._currentPlayer=0;}else{this._currentPlayer+=1;}}};GameModel.prototype.mr_setUserConnectionStatus=function(deviceId,connected){for(var i=0;i<this.mr_startedPlayerList.length;i++){if(this.mr_startedPlayerList[i].id==deviceId){this.mr_startedPlayerList[i].connected=connected;}}};GameModel.prototype.isLastPlayer=function(){if(Game.App.mobileRemoteControlMode){var isLast=true;for(var i=this._currentPlayer+1;i<this._players.length;i++){if(i>=this._players.length)return true;if(this.mr_startedPlayerList[i].connected==false){isLast=true;continue;}else{isLast=false;break;}}return isLast;}return this._currentPlayer===this._players.length-1;};GameModel.prototype.stopTheWheel=function(){this._isFinished=true;this._spinResult={rotation:this._rotation,category:this._getCategoryByRotation(this._rotation)};};GameModel.prototype.spinTheWheel=function(onUpdateCallback,onFinishCallback){var part,additionalRotation;if(!this._isFinished)return;this._spinResult=null;this._onFinishCallback=onFinishCallback;this._onUpdateCallback=onUpdateCallback;this._isFinished=false;this._rotation=0;this._time=0;additionalRotation=this.randomInt(0,360);if(this._mode===GameModel.GameMode.CLASSIC){if((this._questionCount+1)%3===0){additionalRotation=this.randomInt(GameModel.categoriesAngles.crown.min,GameModel.categoriesAngles.crown.max);}else{part=this.randomInt(0,2);if(part===0){additionalRotation=this.randomInt(0,GameModel.categoriesAngles.crown.min);}else{additionalRotation=this.randomInt(GameModel.categoriesAngles.crown.max,360);}}}this._endRotate=-this._spinsNumber*360-additionalRotation;this._updateRotation(this._startRotate);};GameModel.prototype.randomInt=function(min,max){return Math.floor(Math.random()*(max-min)+min);};GameModel.prototype._updateRotation=function(time){var k=time/this._spinDuration;if(k>1)k=1;if(k<0)k=0;k=TGFW.Animation.Easing.quarticOut(k);this._rotation=this._startRotate+k*(this._endRotate-this._startRotate);if(this._onUpdateCallback)this._onUpdateCallback({rotation:this._rotation,category:this._getCategoryByRotation(this._rotation)});};GameModel.prototype.checkAnswer=function(answerIndex,isPowerUp){var result=answerIndex===this._question.a-1;this._players[this._currentPlayer].history[this._players[this._currentPlayer].history.length-1].isRightAnswer=result;this._players[this._currentPlayer].history[this._players[this._currentPlayer].history.length-1].time=this._time;var categoryIndex=this._categories[this._spinResult.category].index;if(this._mode===GameModel.GameMode.CLASSIC){this._statistics.classic.answers[categoryIndex]+=1;if(result){var correctCount=this._statistics.classic.correct[categoryIndex];this._statistics.classic.correct[categoryIndex]=correctCount+1;var answerSpeed=this._statistics.classic.speed[categoryIndex];this._statistics.classic.speed[categoryIndex]=(answerSpeed*correctCount+this._time)/(correctCount+1);}}else if(this._mode===GameModel.GameMode.CHALLENGE){var answersCount=this._statistics.challenge.answers[categoryIndex];var answerSpeed=this._statistics.challenge.speed[categoryIndex];this._statistics.challenge.answers[categoryIndex]=answersCount+1;this._statistics.challenge.speed[categoryIndex]=(answerSpeed*answersCount+this._time)/(answersCount+1);}this.saveGame();return result;};GameModel.prototype.collectCoins=function(){var reward,usedPowerUps,partyReward;if(this._mode===GameModel.GameMode.CLASSIC){reward=GameModel.questionsRewards[this._questionCount];}else if(this._mode===GameModel.GameMode.PARTY){usedPowerUps=0;reward=0;for(var powerUpKey in this._powerUpsAvailable){if(!this._powerUpsAvailable[powerUpKey]){usedPowerUps+=1;}}partyReward=GameModel.partyRewards[usedPowerUps];if(partyReward){reward=partyReward;}}else{reward=GameModel.challengeRegularReward;if((this._questionCount+1)%3===0){reward=GameModel.challengeBonusReward;}}this._collectedCoins+=reward;TGFW.sdk().reportGameAnalyticsResourceEarned('coins',reward,'Question','correct_answer');this.addCoins(reward);};GameModel.prototype.buyCoins=function(coins,itemId){if(itemId===undefined){itemId=null;}TGFW.sdk().reportGameAnalyticsResourceEarned('coins',coins,'Store',itemId);this.addCoins(coins);};GameModel.prototype.doubleCollectedCoins=function(){TGFW.sdk().reportGameAnalyticsResourceEarned('coins',this._collectedCoins,'ResultScreen','double_reward');this.addCoins(this._collectedCoins);};GameModel.prototype.getCoinsForLossReward=function(){return GameModel.lossRewardCoins;};GameModel.prototype.addCoinsWhenZeroAnswers=function(){var _coins=GameModel.lossRewardCoins;TGFW.sdk().reportGameAnalyticsResourceEarned('coins',_coins,'ResultScreen','double_reward');this.addCoins(_coins);};GameModel.prototype.addCoins=function(coins){this._coins+=coins;this.saveGame();};GameModel.prototype.getCollectedCoins=function(){return this._collectedCoins;};GameModel.prototype._getUniqueQuestion=function(category){var uniqueQuestions=[];var questionType='regular';var sdkSettings=TGFW.sdk().getProductSettings();var useEasyQuestion=sdkSettings.useEasyQuestion;if(useEasyQuestion&&useEasyQuestion.enabled&&useEasyQuestion.questionCount&&useEasyQuestion.languages&&useEasyQuestion.languages.length){var language='';if(this._localLanguage==='en'){language='en_us';}else{language=this._localLanguage;}if(useEasyQuestion.languages.indexOf(language)!==-1){if(this._categories[category]['easy']&&this.easyQuestionsCount<useEasyQuestion.questionCount&&this.easyQuestionsCount<this._categories[category]['easy'].questions.length){questionType='easy';this.easyQuestionsCount++;}}}for(var i=0;i<this._categories[category][questionType].questions.length;i++){var question=this._categories[category][questionType].questions[i];if(!this._answeredQuestions[category]||!this._answeredQuestions[category][question.id]){uniqueQuestions.push(question);if(!this._answeredQuestions[category]){this._answeredQuestions[category]={};}}}var count=uniqueQuestions.length;if(count<=0){this._answeredQuestions[category]={};uniqueQuestions=this._categories[category][questionType].questions;}var result=uniqueQuestions[Math.floor(Math.random()*count)];this._answeredQuestions[category][result.id]=true;return result;};GameModel.prototype.prepareQuestion=function(incrementQuestion,resetPowerUps){if(incrementQuestion===undefined){incrementQuestion=true;}if(resetPowerUps===undefined){resetPowerUps=true;}var category=this._spinResult.category;if(resetPowerUps){for(var powerUp in this._powerUpsAvailable){this._powerUpsAvailable[powerUp]=true;}}this._question=this._getUniqueQuestion(category);this._players[this._currentPlayer].history.push({questionId:this._question.id,categoryName:category,isRightAnswer:false,usedPowerUp:null,time:this._timeForQuestion});};GameModel.prototype.getQuestion=function(){return this._question;};GameModel.prototype.getCategory=function(){return this._spinResult.category;};GameModel.prototype.getCategoryData=function(){return this._categories[this._spinResult.category];};GameModel.prototype.setCategory=function(categoryName){if(this._mode===GameModel.GameMode.CLASSIC){this.getCurrentPlayer().pickedCategories[categoryName]=true;}this._spinResult.category=categoryName;};GameModel.prototype.startQuestionTimer=function(onUpdateCallback,onFinishCallback){this._onTimerUpdateCallback=onUpdateCallback;this._onTimerEndCallback=onFinishCallback;this._time=0;this._isTimerStarted=true;};GameModel.prototype.pauseTimer=function(){this._isTimerStarted=false;};GameModel.prototype.resumeTimer=function(){this._isTimerStarted=true;};GameModel.prototype.update=function(dTime){this.skipUpdate=!this.skipUpdate;if(!this._isFinished){this._time+=dTime;if(this._time>=this._spinDuration){this._time=this._spinDuration;if(!this.skipUpdate){this._updateRotation(this._time);this._isFinished=true;this._spinResult={rotation:this._rotation,category:this._getCategoryByRotation(this._rotation)};}if(this._onFinishCallback)this._onFinishCallback(this._spinResult);return;}if(!this.skipUpdate){this._updateRotation(this._time);}}if(this._isTimerStarted){this._time+=dTime;if(this._onTimerUpdateCallback)this._onTimerUpdateCallback({time:this._timeForQuestion-this._time});if(this._time>=this._timeForQuestion){this._time=this._timeForQuestion;this._isTimerStarted=false;if(this._onTimerEndCallback)this._onTimerEndCallback();}}};GameModel.prototype.getSpinResult=function(){return this._spinResult;};GameModel.prototype._getCategoryByRotation=function(r){var result='';var rotation=Math.abs(Math.floor(r%360));if(rotation<=GameModel.categoriesAngles.history.max&&rotation>=0||rotation<=360&&rotation>GameModel.categoriesAngles.history.min){result=GameModel.Categories.HISTORY;}else if(rotation>GameModel.categoriesAngles.science.min&&rotation<=GameModel.categoriesAngles.science.max){result=GameModel.Categories.SCIENCE;}else if(rotation>GameModel.categoriesAngles.geography.min&&rotation<=GameModel.categoriesAngles.geography.max){result=GameModel.Categories.GEOGRAPHY;}else if(rotation>GameModel.categoriesAngles.crown.min&&rotation<=GameModel.categoriesAngles.crown.max){result=GameModel.Categories.CROWN;}else if(rotation>GameModel.categoriesAngles.entertainment.min&&rotation<=GameModel.categoriesAngles.entertainment.max){result=GameModel.Categories.ENTERTAINMENT;}else if(rotation>GameModel.categoriesAngles.art.min&&rotation<=GameModel.categoriesAngles.art.max){result=GameModel.Categories.ART;}else if(rotation>GameModel.categoriesAngles.sports.min&&rotation<=GameModel.categoriesAngles.sports.max){result=GameModel.Categories.SPORTS;}return result;};GameModel.prototype.getPlayerGameResult=function(){var result={correct:0,total:0,powerUps:0,earned:this._collectedCoins};var playerHistory=this._players[this._currentPlayer].history;result.total=playerHistory.length;var _game={gameId:this.randomInt(1000000,9999999),mode:this._mode,questions:[]};for(var game in playerHistory){if(playerHistory[game].isRightAnswer){result.correct+=1;}if(playerHistory[game].usedPowerUp){result.powerUps+=1;}_game.questions.push(game);}_game.questions.pop();if(this._mode===GameModel.GameMode.CHALLENGE){TGFW.sdk().reportGameAnalyticsDesignEvent('challengeEnd',result.correct);var categoryIndex=this._categories[this._spinResult.category].index;var bestScore=this._statistics.challenge.score[categoryIndex];if(result.correct>bestScore){this._statistics.challenge.score[categoryIndex]=result.correct;this.saveGame();}}this._fullStatistics.push(_game);return result;};GameModel.prototype.getPartyModeStatistic=function(){var result=[];this._players.forEach(function(player){var playerData={index:player.index,correctQuestions:0,totalQuestions:player.history.length};for(var game in player.history){if(player.history[game].isRightAnswer)playerData.correctQuestions+=1;}result.push(playerData);});return result;};GameModel.prototype.getStatistics=function(){var classicGames=this._statistics.classic.games;var challengeGames=0;for(var i=0;i<this._statistics.challenge.games.length;i++){challengeGames+=this._statistics.challenge.games[i];}var totalGames=classicGames+challengeGames;return{gamesPlayed:{classic:classicGames,challange:challengeGames,powerUps:totalGames},categories:{Geography:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['geography'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['geography'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['geography'].index],highScore:this._statistics.challenge.score[this._categories['geography'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['geography'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['geography'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['geography'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['geography'].index]}}},Science:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['science'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['science'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['science'].index],highScore:this._statistics.challenge.score[this._categories['science'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['science'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['science'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['science'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['science'].index]}}},Sports:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['sports'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['sports'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['sports'].index],highScore:this._statistics.challenge.score[this._categories['sports'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['sports'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['sports'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['sports'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['sports'].index]}}},History:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['history'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['history'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['history'].index],highScore:this._statistics.challenge.score[this._categories['history'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['history'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['history'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['history'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['history'].index]}}},Pop:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['entertainment'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['entertainment'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['entertainment'].index],highScore:this._statistics.challenge.score[this._categories['entertainment'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['entertainment'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['entertainment'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['entertainment'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['entertainment'].index]}}},Art:{classic:{correctAnswers:this._statistics.classic.correct[this._categories['art'].index],answerTime:Math.floor(this._statistics.classic.speed[this._categories['art'].index]/1000)},challange:{gamesPlayed:this._statistics.challenge.games[this._categories['art'].index],highScore:this._statistics.challenge.score[this._categories['art'].index],answerTime:Math.floor(this._statistics.challenge.speed[this._categories['art'].index]/1000)},powerUps:{bomb:{powerUpsUsed:this._statistics.power_ups.bomb[this._categories['art'].index]},doubleUp:{powerUpsUsed:this._statistics.power_ups.double_chance[this._categories['art'].index]},rightAnswer:{powerUpsUsed:this._statistics.power_ups.right_answer[this._categories['art'].index]}}}}};};GameModel.partyModePrice=300;GameModel.lossRewardCoins=50;GameModel.maxPlayersCount=7;GameModel.coinsInitialValue=0;GameModel.lifesInitialValue=15;GameModel.maxLifesCount=15;GameModel.increasedMaxLifesCount=20;GameModel.nextLifeTimeout=300000;GameModel.spinDuration=6000;GameModel.fullSpinsCount=5;GameModel.timePerQuestion=20000;GameModel.classicQuestionsCount=18;GameModel.powerUpDefaultCost=300;GameModel.adsFrequency={classic:[6,12],challenge:5,party:{'2':2,'3':2,'4':2,'5':1,'6':1,'7':1}};GameModel.powerUpsCost={bomb:200,double_chance:100,right_answer:500};GameModel.categoriesAngles={history:{max:25.71,min:334.29},science:{max:77.14,min:25.71},geography:{max:128.57,min:77.14},crown:{max:180,min:128.57},entertainment:{max:231.43,min:180},art:{max:282.86,min:231.43},sports:{max:334.29,min:282.86}};GameModel.questionsRewards=[50,50,100,50,50,100,50,50,100,50,50,100,50,50,100,50,150,300];GameModel.challengeRegularReward=50;GameModel.challengeBonusReward=75;GameModel.partyRewards=[100,50,25];GameModel.categories={'history':{name:'history',index:0},'science':{name:'science',index:1},'geography':{name:'geography',index:2},'entertainment':{name:'entertainment',index:3},'art':{name:'art',index:4},'sports':{name:'sports',index:5}};GameModel.GameMode={CLASSIC:'classic',CHALLENGE:'challenge',PARTY:'party'};GameModel.Categories={ART:'art',CROWN:'crown',ENTERTAINMENT:'entertainment',GEOGRAPHY:'geography',HISTORY:'history',SCIENCE:'science',SPORTS:'sports'};GameModel.PowerUps={BOMB:'bomb',DOUBLE_CHANCE:'double_chance',RIGHT_ANSWER:'right_answer'};return GameModel;}();Game.GameModel=GameModel;}(Game||(Game={})));var Game;(function(Game){function wrapText(text,shape,maxLines){var sizeTo=shape.getSize(),font=shape.getFont(),fontSize=shape.getFontSize(),words=text.split(' '),currentWidth=0,spaceWidth=getTextWidth('t t',font,fontSize)-getTextWidth('tt',font,fontSize),resultLines=[],line='';for(var i=0;i<words.length;i++){var word=words[i],ww=spaceWidth+getTextWidth(word,font,fontSize);if(currentWidth+ww>sizeTo.x||word.indexOf('\n')>=0){resultLines.push(line);if(TGFW.Utils.isNumber(maxLines)){if(resultLines.length>=maxLines){resultLines[resultLines.length-1]+='...';line='';break;}}line='';currentWidth=0;}line+=word+' ';currentWidth+=ww;}if(line)resultLines.push(line);return resultLines;}Game.wrapText=wrapText;function autoWrapText(text,shape,maxLines,data){var lines=wrapText(text,shape,maxLines);shape.setText(lines.join('\n'),data);return lines.length;}Game.autoWrapText=autoWrapText;function getLayoutShapesName(layout,pref,names){if(pref===undefined){pref='';}if(names===undefined){names=[];}var parentName=layout.getName();var children=layout.getChildren();pref;if(children.length>0){for(var i=0;i<children.length;i++){getLayoutShapesName(children[i],parentName,names);}}else{names.push(parentName);}return names;}Game.getLayoutShapesName=getLayoutShapesName;var _measureTextEl=null;function getTextWidth(text,font,size){var arr=text.split('\n').sort(function(a,b){return b.length-a.length;});text=arr[0];if(!_measureTextEl){_measureTextEl=document.createElement('span');_measureTextEl.style.position='fixed';_measureTextEl.style.left='-1000px';_measureTextEl.style.top='-1000px';document.body.appendChild(_measureTextEl);}_measureTextEl.style.fontSize=''+size+'px';_measureTextEl.style.fontFamily=font;_measureTextEl.innerHTML=text;var rect=_measureTextEl.getBoundingClientRect();if(!rect||!rect.width){return text.length*size;}var scale=1;if(TGFW.sdk().getSystem().getResolutionK){scale=TGFW.sdk().getSystem().getResolutionK();}return rect.width/scale;}Game.getTextWidth=getTextWidth;}(Game||(Game={})));var Game;(function(Game){var Quit=function(_super){__extends(Quit,_super);function Quit(){return _super!==null&&_super.apply(this,arguments)||this;}Quit.prototype.create=function(){_super.prototype.create.call(this);};Quit.prototype.onKeyDown=function(key){_super.prototype.onKeyDown.call(this,Game.remapNumKeyToArrow(key));};Quit.prototype.onKeyUp=function(key){_super.prototype.onKeyUp.call(this,Game.remapNumKeyToArrow(key));};Quit.prototype.onAction=function(action,button){if(action===TGFW.UI.Dialog.yesAction){TGFW.sdk().gameplayStop();}_super.prototype.onAction.call(this,action,button);};return Quit;}(TGFW.UI.Dialog);Game.Quit=Quit;}(Game||(Game={})));var Game;(function(Game){var GameDialog=function(_super){__extends(GameDialog,_super);function GameDialog(desc){var _this=_super.call(this,desc)||this;TGFW.onAction.add(function(action){TGFW.app().dialogs.game.onAction(action);});return _this;}GameDialog.prototype.create=function(){_super.prototype.create.call(this);};GameDialog.prototype.init=function(){};GameDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this._model=Game.app().getGameModel();};GameDialog.prototype.startNewGame=function(){};GameDialog.prototype.showMainMenu=function(){};GameDialog.prototype.onPause=function(){};GameDialog.prototype.onResume=function(){};return GameDialog;}(TGFW.UI.TGameDialog);Game.GameDialog=GameDialog;}(Game||(Game={})));var Game;(function(Game){var wheelDialog=function(_super){__extends(wheelDialog,_super);function wheelDialog(desc){return _super.call(this,desc)||this;}wheelDialog.prototype.create=function(){_super.prototype.create.call(this);this._startSpin=false;this._afterWheelSpinTimer=new TGFW.Timer(this._afterWheelSpin.bind(this));this._onNewCategoryClip=TGFW.Animation.ClipManager.createClip(Game.OnNewCategoryClipDesc());this._model=Game.app().getGameModel();TGFW.onNewFrame.add(this._update.bind(this));};wheelDialog.prototype._afterShow=function(){var _this=this;_super.prototype._afterShow.call(this);var unloadCategoryAfterShowAd=undefined;if(this._data&&this._data.unloadImage)unloadCategoryAfterShowAd=this._data.unloadImage;this.setImages();this._updateWheelRotation(0);this.getButton('spin_btn').getImageShape('cursor').setVisibility(true);if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['question_top_bg','playersGetReady','selectCategory',unloadCategoryAfterShowAd],false,function(){_this._updateScreenElements();});}else{this._updateScreenElements();}if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});this.getButton('exit').disable();this.getButton('exit').hide();}};wheelDialog.prototype.setImages=function(){this.getImageShape('roulette').setTexture('roulette');var spin_btn=this.getLayout('spin_btn');spin_btn.getImageShape('bg').setTexture('roulette_circle_updated');spin_btn.getImageShape('cursor').setTexture('roulette_cursor');};wheelDialog.prototype._updateScreenElements=function(){Game.app().dialogs.mainMenu._updateCoinsContainer();this._updateWheelRotation(0);var mode=this._model.getMode();if(mode==='party'){mode='partyDialogTitle';}Game.updateImprovedText('modes.'+mode,this.getLayout('classic'));var qNumb=this._model.getCurrentQuestionIndex();var maxQNumb=this._model.getQuestionsCount();Game.updateImprovedText((qNumb+1).toString()+'/'+maxQNumb.toString(),this.getTextShape('qCount'));this._startSpin=false;};wheelDialog.prototype._update=function(dt){if(this.isVisible()){this._model.update(dt);}};wheelDialog.prototype._updateWheelRotation=function(rotation){this.getImageShape('roulette').setRotate(rotation);};wheelDialog.prototype.onAction=function(action,button){if(action===wheelDialog.spinAction){this._startSpinTheWheel();}else if(action===wheelDialog.back){this._onBackAction();}else{_super.prototype.onAction.call(this,action,button);}};wheelDialog.prototype._onBackAction=function(){TGFW.sdk().gameplayStop();this.hide();this._model.stopTheWheel();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();};wheelDialog.prototype.setData=function(data){this._data=data;};wheelDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);if(this._data&&this._data.usePartyCoins&&!Game.App.mobileRemoteControlMode)this._model.payForPartyMode();this._data=null;if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});}};wheelDialog.prototype.onKeyDown=function(key){_super.prototype.onKeyDown.call(this,key);};wheelDialog.prototype.onKeyUp=function(key){_super.prototype.onKeyUp.call(this,key);};wheelDialog.prototype._startSpinTheWheel=function(){this.getButton('spin_btn').getImageShape('cursor').setVisibility(false);if(!this._startSpin){this._startSpin=true;this._model.spinTheWheel(this.onWheelUpdate.bind(this),this.onWheelStopSpin.bind(this));}};wheelDialog.prototype.onWheelUpdate=function(data){if(data){if(this._lastCategory!==data.category){this._lastCategory=data.category;this._onNewCategory();}this._updateWheelRotation(-data.rotation*3.14/180);}};wheelDialog.prototype.onWheelStopSpin=function(data){if(data){this._spinResult=data;this._afterWheelSpinTimer.start(100,false);}};wheelDialog.prototype._afterWheelSpin=function(){var _this=this;if(this._spinResult.category===Game.Categories.CROWN){if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['selectCategory'],[],false,function(){_this.hide();Game.app().dialogs.selectCategory.show();});}else{this.hide();Game.app().dialogs.selectCategory.show();}}else{var category=this._model.getCategoryData().name;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([category],[],false,function(){_this.hide();Game.app().dialogs.spinAgain.show();});}else{this.hide();Game.app().dialogs.spinAgain.show();}}};wheelDialog.prototype._onNewCategory=function(){this._onNewCategoryClip.play(this.getLayout('spin_btn').layout);};wheelDialog.spinAction=new TGFW.Action();wheelDialog.back=new TGFW.Action();return wheelDialog;}(TGFW.UI.Dialog);Game.wheelDialog=wheelDialog;}(Game||(Game={})));var Game;(function(Game){var SelectCategoryDialog=function(_super){__extends(SelectCategoryDialog,_super);function SelectCategoryDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();return _this;}SelectCategoryDialog.prototype.create=function(){_super.prototype.create.call(this);this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));};SelectCategoryDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.getImageShape('entertainment.icon_regular').setTexture('category5');this.getImageShape('entertainment.icon_off').setTexture('category5_off');this.getImageShape('art.icon_regular').setTexture('category4');this.getImageShape('art.icon_off').setTexture('category4_off');this.getImageShape('sports.icon_regular').setTexture('category1');this.getImageShape('sports.icon_off').setTexture('category1_off');this.getImageShape('history.icon_regular').setTexture('category6');this.getImageShape('history.icon_off').setTexture('category6_off');this.getImageShape('science.icon_regular').setTexture('category3');this.getImageShape('science.icon_off').setTexture('category3_off');this.getImageShape('geography.icon_regular').setTexture('category2');this.getImageShape('geography.icon_off').setTexture('category2_off');this._updateCategoriesButtons();this.showDialog(this.startAnimation.bind(this));if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});}};SelectCategoryDialog.prototype._updateCategoriesButtons=function(){var buttonNames=['entertainment','art','sports','history','science','geography'];var firstEnabledBtnName=null;var pickedCategories=[];if(pickedCategories.length===6)return;if(this._model.getMode()!==Game.GameModel.GameMode.CHALLENGE){pickedCategories=Object.keys(this._model.getCurrentPlayer().pickedCategories);}for(var i=0;i<buttonNames.length;i++){var button=this.getButton(buttonNames[i]);if(button){if(this._model.getMode()===Game.GameModel.GameMode.CLASSIC&&pickedCategories.indexOf(buttonNames[i])!==-1){button.disable();}else{button.enable();if(!firstEnabledBtnName){firstEnabledBtnName=buttonNames[i];this.getNavigation().navigateToButton(firstEnabledBtnName);}}}}};SelectCategoryDialog.prototype.showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){cb();});};SelectCategoryDialog.prototype.hideDialog=function(cb){this._hideDialogAnimation.play({back:this},function(){cb();});};SelectCategoryDialog.prototype.startAnimation=function(){Game.app().dialogs.mainMenu.updateGameModeBG(false);};SelectCategoryDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case SelectCategoryDialog.back:this.hideDialog(function(){_this.hide();Game.app().dialogs.mainMenu.animateAppirience();Game.app().dialogs.mainMenu.updateGameModeBG();});break;default:var loadResoueses=['question_top_bg'];var desc=button.desc;var category=desc.actionName;this._model.setCategory(category);if(this._model.getMode()===Game.GameModel.GameMode.PARTY){loadResoueses.push('playersGetReady');}else{if(this._model.getMode()!=Game.GameModel.GameMode.CLASSIC){TGFW.sdk().gameplayStart();}}if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(loadResoueses,[],false,function(){_this.hideDialog(function(){_this.hide();if(_this._model.getMode()===Game.GameModel.GameMode.PARTY){Game.app().dialogs.playersGetReady.show();}else{if(_this._model.getMode()===Game.GameModel.GameMode.CHALLENGE){_this._model.startGame();}Game.app().dialogs.question.show();}});});}else{this.hideDialog(function(){_this.hide();if(_this._model.getMode()===Game.GameModel.GameMode.PARTY){Game.app().dialogs.playersGetReady.show();}else{if(_this._model.getMode()===Game.GameModel.GameMode.CHALLENGE){_this._model.startGame();}Game.app().dialogs.question.show();}});}break;}};SelectCategoryDialog.back=new TGFW.Action();SelectCategoryDialog.entertainment=new TGFW.Action();SelectCategoryDialog.art=new TGFW.Action();SelectCategoryDialog.sports=new TGFW.Action();SelectCategoryDialog.history=new TGFW.Action();SelectCategoryDialog.science=new TGFW.Action();SelectCategoryDialog.geography=new TGFW.Action();return SelectCategoryDialog;}(TGFW.UI.Dialog);Game.SelectCategoryDialog=SelectCategoryDialog;}(Game||(Game={})));var Game;(function(Game){var SpinAgainDialog=function(_super){__extends(SpinAgainDialog,_super);function SpinAgainDialog(desc){return _super.call(this,desc)||this;}SpinAgainDialog.prototype.create=function(){_super.prototype.create.call(this);this._model=Game.app().getGameModel();this._clip=null;this._clips={};var clipsDesc=this.desc.animationFramesDesc;for(var descKey in clipsDesc){var clipDesc=clipsDesc[descKey];var clip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimationSpinAgain(clipDesc.shape,clipDesc.frames,clipDesc.timePerFrame,clipDesc.reverse,clipDesc.delays));this._clips[descKey]=clip;}this._iconButtons=[this.getButton('reward'),this.getButton('no')];this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));};SpinAgainDialog.prototype.startAnimation=function(){var category=this._model.getCategoryData();this._clip=this._clips[category.name];for(var i=0;i<this._clip.desc.timeLines[0].frames.length;i++){this._clip.desc.timeLines[0].frames[i][0].texture=this.desc.animationFramesDesc[category.name].frames[i].texture;}if(this._clip){this._clip.play(this.layout);}};SpinAgainDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);var category=this._model.getCategoryData();var categoryImg=this.desc.animationFramesDesc[category.name].frames[0].texture;var data=Game.categories[category.name];this.getTextShape('categoryName').setText(data.name);this.getTextShape('characterName').setText(data.character.name);this.getImageShape('characterImg').setTexture(categoryImg);if(category.name===Game.GameModel.Categories.GEOGRAPHY){this.getImageShape('characterImg').setScale(0.8,0.8);}else{this.getImageShape('characterImg').setScale(1,1);}Game.updateButtonsAlignment(this._iconButtons,485,20,null,'spinAgain');this.updateButtons();this.showDialog(this.startAnimation.bind(this));};SpinAgainDialog.prototype.updateButtons=function(){if(!Game.app().getIsAdExist()){this.getButton('reward').setVisibility(false);this.getButton('no').setX(640);this.getNavigation().navigateToButton('no');}else{this.getButton('reward').setVisibility(true);this.getButton('no').setX(900);}};SpinAgainDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);if(this._clip)this._clip.interrupt();};SpinAgainDialog.prototype.onMouseEvent=function(type,x,y,shape){var _this=this;_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(type===TGFW.UI.MouseEventType.OVER){if(shape.getName().indexOf('no')!=-1){this.getNavigation().navigateToButton('no');}else if(shape.getName().indexOf('reward')!=-1){this.getNavigation().navigateToButton('reward');}}else if(type===TGFW.UI.MouseEventType.UP){if(shape.getName().indexOf('no')!=-1){if(this._model.getMode()===Game.GameModel.GameMode.PARTY){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['playersGetReady'],['wheel'],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});});}else{this._hideDialogAnimation.play({back:this},function(){_this._goToQuestionDialog();});}}else{if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],['wheel'],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});});}else{this._hideDialogAnimation.play({back:this},function(){_this._goToQuestionDialog();});}}}else if(shape.getName().indexOf('reward')!=-1){if(Game.app().getIsAdExist()){this._playRewardedVideo();}}}};SpinAgainDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case SpinAgainDialog.play:if(this._model.getMode()===Game.GameModel.GameMode.PARTY){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['playersGetReady'],['wheel'],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});});}else{this._hideDialogAnimation.play({back:this},function(){_this._goToQuestionDialog();});}}else{if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],['wheel'],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});});}else{this._hideDialogAnimation.play({back:this},function(){_this._goToQuestionDialog();});}}break;case SpinAgainDialog.reward:if(Game.app().getIsAdExist()){this._playRewardedVideo();}break;default:_super.prototype.onAction.call(this,action,button);}};SpinAgainDialog.prototype._playRewardedVideo=function(){var _this=this;var sdk=TGFW.sdk();sdk.gameplayStop();sdk.requestAd(TGH5.Ads.Type.Rewarded).always(function(result){sdk.gameplayStart();if(result){_this._goToWheelDialog();}});};SpinAgainDialog.prototype._goToWheelDialog=function(){var _this=this;if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['wheel'],[],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this.hide();Game.app().dialogs.wheel.setData({unloadImage:_this._model.getCategoryData().name});Game.app().dialogs.wheel.show();});});}else{this._hideDialogAnimation.play({back:this},function(){_this.hide();Game.app().dialogs.wheel.setData({unloadImage:_this._model.getCategoryData().name});Game.app().dialogs.wheel.show();});}};SpinAgainDialog.prototype._goToQuestionDialog=function(){this.hide();if(this._model.getMode()===Game.GameModel.GameMode.PARTY){Game.app().dialogs.playersGetReady.show();}else{Game.app().dialogs.question.show();}};SpinAgainDialog.prototype.showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){cb();});};SpinAgainDialog.reward=new TGFW.Action();SpinAgainDialog.play=new TGFW.Action();return SpinAgainDialog;}(TGFW.UI.TDialog);Game.SpinAgainDialog=SpinAgainDialog;}(Game||(Game={})));var Game;(function(Game){var QuestionDialog=function(_super){__extends(QuestionDialog,_super);function QuestionDialog(desc){return _super.call(this,desc)||this;}QuestionDialog.prototype.create=function(){TGFW.onNewFrame.add(this._update.bind(this));_super.prototype.create.call(this);this._resultMsgClip=TGFW.Animation.ClipManager.createClip(CreateResultScaleClipDesc());this._model=Game.app().getGameModel();this._answers=[];this._isDoubleChance=false;this._rightAnswerBtn=null;this._answerButtons=[this.getButton('answer1'),this.getButton('answer2'),this.getButton('answer3'),this.getButton('answer4')];this._answerButtonsStatus=[this.getButton('answer1').isEnabled(),this.getButton('answer2').isEnabled(),this.getButton('answer3').isEnabled(),this.getButton('answer4').isEnabled()];this._powerUps=[{layoutName:'bomb_powerup',type:Game.PowerUps.BOMB},{layoutName:'doub_powerup',type:Game.PowerUps.DOUBLE_CHANCE},{layoutName:'righ_powerup',type:Game.PowerUps.RIGHT_ANSWER}];this._disabledPowerUpOpacity=0.5;this._questionBoxTextW=900;this._bombMaxCount=2;this._correctMsg='correct';this._wrongMsg='wrong';this._timeIsUpMsg='time_is_up';this._regularBtnTexture='q_button';this._correctBtnTexture='q_button_correct';this._wrongBtnTexture='q_button_wrong';this._regularTimerPart='time_part_bg';this._warningTimerPart='time_part_warning';this._timerParts=[{shape:'timerLayout.timer_part_1',hide:false,rotate:false,rotateFrom:0},{shape:'timerLayout.timer_part_2',hide:false,rotate:false,rotateFrom:90},{shape:'timerLayout.timer_part_3',hide:false,rotate:false,rotateFrom:180},{shape:'timerLayout.timer_part_4',hide:false,rotate:false,rotateFrom:270,warning:true}];this._time=0;};QuestionDialog.prototype._update=function(dt){if(this.isVisible()){this._model.update(dt);}};QuestionDialog.prototype._onTimerUpdate=function(data){var total=Game.GameModel.timePerQuestion;var rotation=-(total-data.time)*360/total;if(data.time<=5000){if(this._time!==Math.floor(data.time/1000)){this._time=Math.floor(data.time/1000);}}if(Game.app().isLowEnd()){Game.updateImprovedText((1+Math.floor(data.time/1000)).toString(),this.getLayout('timerLayout.text'));return;}for(var i=0;i<this._timerParts.length;i++){var part=this._timerParts[i];if(!part.rotate&&Math.abs(rotation)>=part.rotateFrom){part.rotate=true;if(this._timerParts[i-1]){this._timerParts[i-1].hide=true;}}}for(var i=0;i<this._timerParts.length;i++){var shape=this.getImageShape(this._timerParts[i].shape);if(this._timerParts[i].hide&&shape.isVisible()){shape.hide();}else{if(this._timerParts[i].rotate&&shape.isVisible()){shape.setRotate(-rotation/180*3.14);if(this._timerParts[i].warning&&this._timerParts[i].warning===true){shape.setTexture(this._warningTimerPart);}}}}Game.updateImprovedText((1+Math.floor(data.time/1000)).toString(),this.getLayout('timerLayout.text'));};QuestionDialog.prototype._onTimerFinish=function(){this.disableInput();this._result=false;this._isDoubleChance=false;this._playResultMsg(this._timeIsUpMsg,this._goToNextScreen.bind(this));};QuestionDialog.prototype._playResultMsg=function(msg,callback){var text='';if(this._isDoubleChance===false){this.getTextShape('question_text').setText('');}var textStyle=Game.resultMsgStyle[msg];if(textStyle){text=textStyle.text;}Game.updateImprovedText(text,this.getTextShape('result_msg'),textStyle);this._resultMsgClip.play({shape:this.getLayout('result_msg')},callback);};QuestionDialog.prototype.setData=function(data){this._data=data;};QuestionDialog.prototype._afterShow=function(){var _this=this;_super.prototype._afterShow.call(this);var category=this._model.getCategoryData().name;this.getImageShape('timerLayout.timer_icon').setTexture('timer1');this.getImageShape('timerLayout.time_bg').setTexture('time_bg');this.getImageShape('timerLayout.timer_part_4').setTexture('time_part_bg');this.getImageShape('timerLayout.timer_part_3').setTexture('time_part_bg');this.getImageShape('timerLayout.timer_part_2').setTexture('time_part_bg');this.getImageShape('timerLayout.timer_part_1_bg').setTexture('time_part');this.getImageShape('timerLayout.timer_part_1').setTexture('time_part_bg');this.getImageShape('timerLayout.timer_top').setTexture('timer_top_bg');this._prepareQuestion(this._data);this._updateScreenElements();this._time=0;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],[category,'willy','selectCategory','playersGetReady'],false,function(){_this._model.startQuestionTimer(_this._onTimerUpdate.bind(_this),_this._onTimerFinish.bind(_this));});}else{this._model.startQuestionTimer(this._onTimerUpdate.bind(this),this._onTimerFinish.bind(this));}};QuestionDialog.prototype._beforeHide=function(){this._data=null;_super.prototype._beforeHide.call(this);};QuestionDialog.prototype._playAds=function(callback){var mode=this._model.getMode();var currentQ=this._model.getCurrentQuestionIndex()+1;var adsFrequency=Game.GameModel.adsFrequency[mode];var isNoAdsMode=this._model.isNoAdsMode();var playAd=false;if(!isNoAdsMode&&true){if(mode===Game.GameModel.GameMode.CLASSIC){playAd=adsFrequency.indexOf(currentQ)>=0;}else if(mode===Game.GameModel.GameMode.CHALLENGE){playAd=currentQ%adsFrequency===0;}else if(mode===Game.GameModel.GameMode.PARTY){var playersCount=this._model.getPlayersCount();adsFrequency=adsFrequency[playersCount.toString()];playAd=currentQ%adsFrequency===0&&this._model.isLastPlayer()==true;}}if(playAd){TGFW.sdk().requestAd(TGH5.Ads.Type.MidRoll).always(callback);}else{if(callback){callback();}}};QuestionDialog.prototype._prepareQuestion=function(data){if(data===undefined){data=null;}if(!data||data.prepareQuestion&&data.prepareQuestion===true){this._model.prepareQuestion();}};QuestionDialog.prototype._updateScreenElements=function(){this._updateCoinsContainer();this._updateQuestionElements();this._setPowerUpPrices();this._setPowerUpsPosition();this._updatePowerUpsStatus();Game.updateImprovedText('',this.getTextShape('result_msg'));};QuestionDialog.prototype._setUpTimer=function(data){this.getImageShape('timerLayout.timer_icon').setTexture(data.character.timer);for(var i=0;i<this._timerParts.length;i++){var part=this._timerParts[i];part.hide=false;part.rotate=false;var shape=this.getImageShape(part.shape);if(shape){shape.setTexture(this._regularTimerPart);shape.setRotate(part.rotateFrom/180*Math.PI);shape.show();}}};QuestionDialog.prototype._updateCoinsContainer=function(){var coinsCount=this._model.getCoins();this.getTextShape('coins').setText(coinsCount.toString());};QuestionDialog.prototype._updateQuestionElements=function(){this._answers=[];this._isDoubleChance=false;this._rightAnswerBtn=null;var spinResult=this._model.getSpinResult();var question=this._model.getQuestion();var category=this._model.getCategoryData();var data=Game.categories[category.name];this.getTextShape('category_name').setText('categories.'+spinResult.category);Game.autoWrapText(' '+question.q,this.getTextShape('question_text'));if(this._model.getMode()===Game.GameModel.GameMode.PARTY&&!Game.App.mobileRemoteControlMode){var _playerIndex=this._model.getCurrentPlayer().index+1;this.getTextShape('player_count').updateText({player:_playerIndex});this.getTextShape('player_count').show();}else{this.getTextShape('player_count').hide();}for(var i=1;i<=this._answerButtons.length;i++){var button=this._answerButtons[i-1];var btnData={answerIndex:i-1,question:question.v[i-1]};this._answers.push(btnData);if(button){button.getCaptionShape().setText(question.v[i-1]);button.setData(btnData);button.getImageShape('back').setTexture(this._regularBtnTexture);button.getTextShape('text').setColor(Game.colors.textColor);button.show();button.enable();if(i==question.a){this._rightAnswerBtn=button;}}}this._answerButtonsStatus=[this.getButton('answer1').isEnabled(),this.getButton('answer2').isEnabled(),this.getButton('answer3').isEnabled(),this.getButton('answer4').isEnabled()];this.getNavigation().navigateToButton('answer1');this.getImageShape('top_bg').setTexture(data.topBg);this.getImageShape('category_icon').setTexture(data.character.icon);this._setUpTimer(data);var currentQ=(this._model.getCurrentQuestionIndex()+1).toString();var maxQ=this._model.getQuestionsCount().toString();var text=currentQ+'/'+maxQ;if(this._model.getMode()===Game.GameModel.GameMode.CHALLENGE){text=currentQ;}this.getTextShape('questions_count').setText(text);};QuestionDialog.prototype._setPowerUpPrices=function(){for(var i=0;i<this._powerUps.length;i++){var price=this._model.getPowerUpCost(this._powerUps[i].type);var layout=this.getLayout(this._powerUps[i].layoutName);if(layout){Game.updateImprovedText(price.toString(),layout.getLayout('price'));}}};QuestionDialog.prototype._setPowerUpsPosition=function(){var _gameMode=this._model.getMode();if(_gameMode===Game.GameModel.GameMode.PARTY){this.getButton('bomb_powerup').setX(320);this.getButton('doub_powerup').setX(960);this.getButton('righ_powerup').setVisibility(false);}else{this.getButton('bomb_powerup').setX(213);this.getButton('doub_powerup').setX(639);this.getButton('righ_powerup').setVisibility(true);}};QuestionDialog.prototype._updatePowerUpsStatus=function(){for(var i=0;i<this._powerUps.length;i++){var isAvailable=this._model.isPowerUpAvailable(this._powerUps[i].type);var btn=this.getButton(this._powerUps[i].layoutName);if(isAvailable){btn.setState(TGFW.UI.ButtonState.REGULAR);btn.getImageShape('coin_icon').setTexture('coin_shadowed');Game.updateImprovedTextShadow(btn.getLayout('name'),{color:new TGFW.Render.Color(0,99,84),xOffset:0,yOffset:4,includeStroke:false});}else{btn.setState(TGFW.UI.ButtonState.DISABLED);btn.getImageShape('coin_icon').setTexture('coin_shadowed_disabled');Game.updateImprovedTextShadow(btn.getLayout('name'),{color:new TGFW.Render.Color(46,47,48),xOffset:0,yOffset:4,includeStroke:false});}}};QuestionDialog.prototype._navigateToFirstEnabledButton=function(){for(var i=0;i<this._answerButtons.length;i++){var btn=this._answerButtons[i];if(btn){if(btn.isEnabled()){this.getNavigation().navigateToButton(btn.getName());return;}}}};QuestionDialog.prototype.onAction=function(action,button){if(action===QuestionDialog.onAnswerAction){this._checkTheAnswer(button);}else if(action===QuestionDialog.powerUpsBomb||action===QuestionDialog.powerUpsDoubleChance||action===QuestionDialog.powerUpsRightUnswer){this._onPowerUpAction(action);}else if(action===QuestionDialog.onBack){this._onBackAction();}};QuestionDialog.prototype._checkTheAnswer=function(button,isPowerUp){if(isPowerUp===undefined){isPowerUp=false;}this.disableInput();this._model.pauseTimer();var btnTexture=this._wrongBtnTexture;var resTexture=this._wrongMsg;var selectedData=button.getData();this._result=this._model.checkAnswer(selectedData.answerIndex,isPowerUp);var spinResult=this._model.getSpinResult();if(this._result){resTexture=this._correctMsg;btnTexture=this._correctBtnTexture;this._isDoubleChance=false;var mode=this._model.getMode();if(mode!==Game.GameModel.GameMode.PARTY){this._model.collectCoins();this._updateCoinsContainer();}TGFW.sdk().reportGameAnalyticsDesignEvent('correct:'+spinResult.category);}else{TGFW.sdk().reportGameAnalyticsDesignEvent('incorrect:'+spinResult.category);if(this._isDoubleChance===false&&this._rightAnswerBtn){this._rightAnswerBtn.getImageShape('back').setTexture(this._correctBtnTexture);this._rightAnswerBtn.getTextShape('text').setColor(Game.colors.white);}}this.getNavigation().getFocusedButton().getImageShape('back').setTexture(btnTexture);this.getNavigation().getFocusedButton().getTextShape('text').setColor(Game.colors.white);this._playResultMsg(resTexture,this._goToNextScreen.bind(this));};QuestionDialog.prototype._goToNextScreen=function(){this.enableInput();if(this._isDoubleChance){this._doubleChanceSecondTry();}else{Game.app().dialogs.mainMenu._updateCoinsContainer();var mode=this._model.getMode();if(mode===Game.GameModel.GameMode.PARTY){if(Game.App.mobileRemoteControlMode){if(this._model.mr_numberOfConnectedPlayers()<=1){Game.app().dialogs.mainMenu.updateGameModeBG();this._onExitCallabck(true);return;}}if(this._model.isLastPlayer()){if(Game.App.mobileRemoteControlMode){var playerDeviceId=this._model.mr_getTheFirstPlayerDeviceId();var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(-1,'play_turn',{masterDeviceId:masterDeviceId,deviceId:playerDeviceId,playAllowed:true,isBackAvailable:true});}if(this._model.isLastQuestion()){this._goToPartyStatisticScreen();}else{this._playAds(this._goToPartyWheelScreen.bind(this));}}else{this._goToPartyPlayerGetReadyScreen();}}else{if(!this._result){if(Game.app().getIsAdExist()){this._goToAnotherChanceScreen();}else{this._goToResultScreen(this._result);}}else{if(mode===Game.GameModel.GameMode.CHALLENGE){this._playAds(this._goToNextChallengeQuestion.bind(this));}else{if(this._model.isLastQuestion()){this._goToResultScreen(this._result);}else{this._playAds(this._goToClassicWheelScreen.bind(this));}}}}}};QuestionDialog.prototype._doubleChanceSecondTry=function(){Game.updateImprovedText('',this.getTextShape('result_msg'));this._isDoubleChance=false;this.getNavigation().getFocusedButton().disable();this._navigateToFirstEnabledButton();this._model.resumeTimer();};QuestionDialog.prototype._goToPartyStatisticScreen=function(){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['victory'],[],false,function(){_this.hide();Game.app().dialogs.statistic.show();});}else{this.hide();Game.app().dialogs.statistic.show();}};QuestionDialog.prototype._goToPartyWheelScreen=function(result){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['wheel'],[],false,function(){_this.hide();_this.enableInput();_this._model.nextPlayer();_this._model.nextQuestion();Game.app().dialogs.wheel.show();});}else{this.hide();this.enableInput();this._model.nextPlayer();this._model.nextQuestion();Game.app().dialogs.wheel.show();}};QuestionDialog.prototype._goToPartyPlayerGetReadyScreen=function(){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['playersGetReady'],[],false,function(){_this.hide();_this._model.nextPlayer();Game.app().dialogs.playersGetReady.show();});}else{this.hide();this._model.nextPlayer();Game.app().dialogs.playersGetReady.show();}};QuestionDialog.prototype._goToAnotherChanceScreen=function(){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['anotherChance'],[],false,function(){_this.hide();Game.app().dialogs.anotherChance.show();});}else{this.hide();Game.app().dialogs.anotherChance.show();}};QuestionDialog.prototype._goToNextChallengeQuestion=function(result){if(result===undefined){result=null;}this.enableInput();this._model.nextQuestion();this._prepareQuestion();this._updateScreenElements();this._time=0;this._model.startQuestionTimer(this._onTimerUpdate.bind(this),this._onTimerFinish.bind(this));};QuestionDialog.prototype._goToResultScreen=function(result){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['victory'],[],false,function(){_this.hide();Game.app().dialogs.victory.setData({isWin:result});Game.app().dialogs.victory.show();});}else{this.hide();Game.app().dialogs.victory.setData({isWin:result});Game.app().dialogs.victory.show();}};QuestionDialog.prototype._goToClassicWheelScreen=function(result){var _this=this;if(result===undefined){result=null;}if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['wheel'],[],false,function(){_this.hide();_this.enableInput();_this._model.nextQuestion();Game.app().dialogs.wheel.show();});}else{this.hide();this.enableInput();this._model.nextQuestion();Game.app().dialogs.wheel.show();}};QuestionDialog.prototype._onPowerUpAction=function(action){var powerUp;if(action===QuestionDialog.powerUpsBomb){powerUp='bomb';}else if(action===QuestionDialog.powerUpsDoubleChance){powerUp='double_chance';}else if(action===QuestionDialog.powerUpsRightUnswer){powerUp='right_answer';}if(this._model.isPowerUpAvailable(powerUp)){this._model.usePowerUp(powerUp);TGFW.sdk().reportGameAnalyticsDesignEvent('powerUp:'+powerUp);if(powerUp===Game.PowerUps.BOMB){this._onBombPowerUp();}else if(powerUp===Game.PowerUps.DOUBLE_CHANCE){this._onDoublePowerUp();}else if(powerUp===Game.PowerUps.RIGHT_ANSWER){this._onRightAnswerPowerUp();}this._updateCoinsContainer();this._updatePowerUpsStatus();}};QuestionDialog.prototype.onKeyDown=function(key){var navigation=this.getNavigation();var focusedButton=navigation.getFocusedButtonName();if(key===TGH5.KeyNames.KEY_DOWN&&(focusedButton==='answer3'||focusedButton==='answer4')){if(focusedButton==='answer3'){if(this.getButton('bomb_powerup').isEnabled()){navigation.navigateToButton('bomb_powerup');}else if(this.getButton('doub_powerup').isEnabled()){navigation.navigateToButton('doub_powerup');}else if(this.getButton('righ_powerup').isEnabled()){navigation.navigateToButton('righ_powerup');}}else if(focusedButton==='answer4'){if(this.getButton('righ_powerup').isEnabled()){navigation.navigateToButton('righ_powerup');}else if(this.getButton('doub_powerup').isEnabled()){navigation.navigateToButton('doub_powerup');}else if(this.getButton('bomb_powerup').isEnabled()){navigation.navigateToButton('bomb_powerup');}}}else if(key===TGH5.KeyNames.KEY_RIGHT&&focusedButton==='answer1'){if(this.getButton('answer2').isEnabled()){navigation.navigateToButton('answer2');}else{navigation.navigateToButton('answer4');}}else if(key===TGH5.KeyNames.KEY_RIGHT&&focusedButton==='answer3'){if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else{navigation.navigateToButton('answer2');}}else if(key===TGH5.KeyNames.KEY_LEFT&&focusedButton==='answer2'){if(this.getButton('answer1').isEnabled()){navigation.navigateToButton('answer1');}else{navigation.navigateToButton('answer3');}}else if(key===TGH5.KeyNames.KEY_LEFT&&focusedButton==='answer4'){if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else{navigation.navigateToButton('answer1');}}else if(key===TGH5.KeyNames.KEY_UP&&(focusedButton==='answer3'||focusedButton==='answer4')){if(focusedButton==='answer3'){if(this.getButton('answer1').isEnabled()){navigation.navigateToButton('answer1');}else{navigation.navigateToButton('answer2');}}else{if(this.getButton('answer2').isEnabled()){navigation.navigateToButton('answer2');}else{navigation.navigateToButton('answer1');}}}else if(key===TGH5.KeyNames.KEY_DOWN&&(focusedButton==='answer1'||focusedButton==='answer2')){if(focusedButton==='answer1'){if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else{_super.prototype.onKeyDown.call(this,key);}}else if(focusedButton==='answer2'){if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else{_super.prototype.onKeyDown.call(this,key);}}}else if(key===TGH5.KeyNames.KEY_UP&&(focusedButton==='bomb_powerup'||focusedButton==='doub_powerup'||focusedButton==='righ_powerup')){if(focusedButton==='bomb_powerup'){if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else if(this.getButton('answer1').isEnabled()){navigation.navigateToButton('answer1');}else if(this.getButton('answer2').isEnabled()){navigation.navigateToButton('answer2');}}else if(focusedButton==='righ_powerup'){if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else if(this.getButton('answer2').isEnabled()){navigation.navigateToButton('answer2');}else if(this.getButton('answer1').isEnabled()){navigation.navigateToButton('answer1');}}else if(focusedButton==='doub_powerup'){if(this.getButton('answer3').isEnabled()){navigation.navigateToButton('answer3');}else if(this.getButton('answer4').isEnabled()){navigation.navigateToButton('answer4');}else if(this.getButton('answer1').isEnabled()){navigation.navigateToButton('answer1');}else if(this.getButton('answer2').isEnabled()){navigation.navigateToButton('answer2');}}}else{_super.prototype.onKeyDown.call(this,key);}};QuestionDialog.prototype._onBombPowerUp=function(){var question=this._model.getQuestion();var count=0;var answerButtons=[this.getButton('answer1'),this.getButton('answer2'),this.getButton('answer3'),this.getButton('answer4')];answerButtons.sort(function(){return Math.random()-0.5;});for(var i=0;i<answerButtons.length;i++){var button=answerButtons[i-1];if(button){var data=button.getData();if(count<this._bombMaxCount&&data.answerIndex!==question.a-1){button.disable();button.hide();count+=1;}}}this._navigateToFirstEnabledButton();};QuestionDialog.prototype._onDoublePowerUp=function(){this._isDoubleChance=true;this._navigateToFirstEnabledButton();};QuestionDialog.prototype._onRightAnswerPowerUp=function(){if(this._rightAnswerBtn){this.getNavigation().navigateToButton(this._rightAnswerBtn.getName());this._checkTheAnswer(this._rightAnswerBtn,true);}};QuestionDialog.prototype._onBackAction=function(){var _this=this;this._model.pauseTimer();Game.app().dialogs.quitConfirmation.showModal(function(dialog,result){dialog.hide();if(result==TGFW.UI.DialogResult.YES){Game.app().dialogs.mainMenu.updateGameModeBG();_this._onExitCallabck(true);}else{_this._model.resumeTimer();}});};QuestionDialog.prototype._onExitCallabck=function(res){if(res===undefined){res=false;}if(res){this.hide();Game.app().dialogs.mainMenu.animateAppirience();}else{this._model.resumeTimer();}return true;};QuestionDialog.onAnswerAction=new TGFW.Action();QuestionDialog.powerUpsBomb=new TGFW.Action();QuestionDialog.powerUpsDoubleChance=new TGFW.Action();QuestionDialog.powerUpsRightUnswer=new TGFW.Action();QuestionDialog.onBack=new TGFW.Action();return QuestionDialog;}(TGFW.UI.Dialog);Game.QuestionDialog=QuestionDialog;function CreateResultScaleClipDesc(){return{className:TGFW.Animation.Clip,looped:false,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'shape',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'shape',className:TGFW.Animation.KeyProperty,visible:true,delay:2000}]]}]};}}(Game||(Game={})));var Game;(function(Game){var AboutDialog=function(_super){__extends(AboutDialog,_super);function AboutDialog(desc){return _super.call(this,desc)||this;}AboutDialog.prototype.create=function(){_super.prototype.create.call(this);this.animation=TGFW.Animation.ClipManager.createClip(CreateScaleLayoutClipDesc(this.getLayout('ok')));};AboutDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.getTextShape('copyright1').updateText({year:getCurrentYear()});this.getTextShape('copyright2').updateText({year:getCurrentYear()});this.getTextShape('version').updateText({version:'1.48'});this.getTextShape('did').updateText({did:Game.app().getDeviceId()});this.startAnimation();};AboutDialog.prototype.onAction=function(action,button){if(action===AboutDialog.hide){this.hideDialog();}else{_super.prototype.onAction.call(this,action,button);}};AboutDialog.prototype.startAnimation=function(){};AboutDialog.prototype.hideDialog=function(){this.hide();};AboutDialog.hide=new TGFW.Action();return AboutDialog;}(TGFW.UI.Dialog);Game.AboutDialog=AboutDialog;function getCurrentYear(){var date=new Date();var year='2020';if(date.getFullYear){year=date.getFullYear().toString();}return year;}Game.getCurrentYear=getCurrentYear;function CreateScaleLayoutClipDesc(layout,time){if(time===undefined){time=1000;}return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'ok',className:Game.LayoutScaleClipKey,time:time,change:{scaleX:{start:0,end:1},scaleY:{start:0,end:1}}}]]}]};}}(Game||(Game={})));var Game;(function(Game){var AnotherChanceDialog=function(_super){__extends(AnotherChanceDialog,_super);function AnotherChanceDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();_this._clip=null;_this._clips={};var clipsDesc=_this.desc.animationFramesDesc;for(var descKey in clipsDesc){var clipDesc=clipsDesc[descKey];var clip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimation(clipDesc.shape,clipDesc.frames,clipDesc.timePerFrame,clipDesc.reverse,clipDesc.delays));_this._clips[descKey]=clip;}_this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));_this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));return _this;}AnotherChanceDialog.prototype.create=function(){_super.prototype.create.call(this);this._iconButtons=[this.getButton('reward'),this.getButton('no')];};AnotherChanceDialog.prototype.startAnimation=function(){for(var clip in this._clips){this._clips[clip].play(this.layout);}};AnotherChanceDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.setImages();this._model.prepareQuestion(false);var question=this._model.getQuestion();this.getTextShape('question_text').setText(question.q);Game.autoWrapText(' '+question.q,this.getTextShape('question_text'));Game.updateButtonsAlignment(this._iconButtons);this.showDialog(this.startAnimation.bind(this));TGFW.sdk().gameplayStop();};AnotherChanceDialog.prototype.setImages=function(){this.getImageShape('img').setTexture('q_box');this.getImageShape('bonzo_eyes').setTexture('bonzo_eyes_open');this.getImageShape('pop_eyes').setTexture('pop_eyes_open');this.getImageShape('albert_eyes').setTexture('albert_eyes_open');this.getImageShape('albert_eyes').setTexture('albert_eyes_open');this.getImageShape('hand').setTexture('hand_waves1');};AnotherChanceDialog.prototype.showDialog=function(cb){var _this=this;if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['question_top_bg'],false,function(){_this._showDialogAnimation.play({back:_this},function(){cb();});});}else{this._showDialogAnimation.play({back:this},function(){cb();});}};AnotherChanceDialog.prototype.onMouseEvent=function(type,x,y,shape){_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(shape.getName().indexOf('reward')!=-1){if(type===TGFW.UI.MouseEventType.OVER){this.getNavigation().navigateToButton('reward');}else if(type===TGFW.UI.MouseEventType.UP){this._playRewardedVideo();}}};AnotherChanceDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case AnotherChanceDialog.reward:this._playRewardedVideo();break;case AnotherChanceDialog.no:if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['victory'],[],false,function(){_this._hideDialogAnimation.play({back:_this},function(){for(var clip in _this._clips){_this._clips[clip].interrupt();}_this.hide();Game.app().dialogs.victory.setData({isWin:false});Game.app().dialogs.victory.show();});});}else{this._hideDialogAnimation.play({back:this},function(){for(var clip in _this._clips){_this._clips[clip].interrupt();}_this.hide();Game.app().dialogs.victory.setData({isWin:false});Game.app().dialogs.victory.show();});}break;default:_super.prototype.onAction.call(this,action,button);break;}};AnotherChanceDialog.prototype._playRewardedVideo=function(){var _this=this;if(Game.app().getIsAdExist()){var sdk_1=TGFW.sdk();sdk_1.requestAd(TGH5.Ads.Type.Rewarded).always(function(result){sdk_1.gameplayStart();if(result){if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],[],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});});}else{_this._hideDialogAnimation.play({back:_this},function(){_this._goToQuestionDialog();});}}});}};AnotherChanceDialog.prototype._goToQuestionDialog=function(){var _this=this;for(var clip in this._clips){this._clips[clip].interrupt();}if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],[],false,function(){_this.hide();Game.app().dialogs.question.setData({prepareQuestion:false});Game.app().dialogs.question.show();});}else{this.hide();Game.app().dialogs.question.setData({prepareQuestion:false});Game.app().dialogs.question.show();}};AnotherChanceDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);for(var clip in this._clips){this._clips[clip].interrupt();}};AnotherChanceDialog.reward=new TGFW.Action();AnotherChanceDialog.no=new TGFW.Action();return AnotherChanceDialog;}(TGFW.UI.TDialog);Game.AnotherChanceDialog=AnotherChanceDialog;}(Game||(Game={})));var Game;(function(Game){var NoAdsDialog=function(_super){__extends(NoAdsDialog,_super);function NoAdsDialog(desc){return _super.call(this,desc)||this;}NoAdsDialog.prototype.create=function(){_super.prototype.create.call(this);};return NoAdsDialog;}(TGFW.UI.Dialog);Game.NoAdsDialog=NoAdsDialog;}(Game||(Game={})));var Game;(function(Game){var NoCoinsDialog=function(_super){__extends(NoCoinsDialog,_super);function NoCoinsDialog(desc){return _super.call(this,desc)||this;}NoCoinsDialog.prototype.create=function(){_super.prototype.create.call(this);this._iconButtons=[this.getButton('yes'),this.getButton('no')];};NoCoinsDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);if(Game.app().getPaymentManager().isEnabled()){Game.updateButtonsAlignment(this._iconButtons);}else{this.getTextShape('title').setText('noCoins.text');this.getButton('yes').hide();var btn=this.getButton('no');btn.getTextShape('text').setText('noCoins.ok');btn.setX(640);this.getNavigation().navigateToButton('no');Game.updateButtonsAlignmentFixed(this.getButton('no'),'noCoins.ok');}};return NoCoinsDialog;}(TGFW.UI.Dialog);Game.NoCoinsDialog=NoCoinsDialog;}(Game||(Game={})));var Game;(function(Game){var OutOfLifeDialog=function(_super){__extends(OutOfLifeDialog,_super);function OutOfLifeDialog(desc){return _super.call(this,desc)||this;}OutOfLifeDialog.prototype.create=function(){_super.prototype.create.call(this);this._iconButtons=[this.getButton('reward')];this.outerBtnElements=[this.getImageShape('icon_reward'),this.getTextShape('text_reward')];this._model=Game.app().getGameModel();this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));this._heartCryClip=TGFW.Animation.ClipManager.createClip(heartCryClipDesc());};OutOfLifeDialog.prototype.startAnimation=function(){this._heartCryClip.play(this.getLayout('heart').layout);};OutOfLifeDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.setTextures();{this.getImageShape('icon_reward').hide();this.getTextShape('text_reward').hide();}Game.updateButtonsAlignment(this._iconButtons,485,20,this.outerBtnElements,'outOfLife');if(!Game.app().getIsAdExist()){this.getButton('reward').setVisibility(false);this.getButton('no').setX(640);var text=this.getButton('no').getTextShape('text');text.setText('Ok');text.desc.text='Ok';this.getNavigation().navigateToButton('no');}else{this.getButton('reward').setVisibility(true);this.getButton('no').setX(900);}this.showDialog(this.startAnimation.bind(this));};OutOfLifeDialog.prototype.setTextures=function(){var bg=this.getLayout('bg');bg.getImageShape('left').setTexture('bg_left');for(var i=1;i<13;i++){bg.getImageShape('part'+i).setTexture('bg_center');}bg.getImageShape('right').setTexture('bg_right');var heart=this.getLayout('heart');heart.getImageShape('body').setTexture('heart_cry');heart.getImageShape('tear').setTexture('heart_cry_tear');heart.getImageShape('brows').setTexture('heart_cry_brows');heart.getImageShape('eyes').setTexture('heart_cry_eyes');heart.getImageShape('mouth').setTexture('heart_cry_mouth');};OutOfLifeDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);this._heartCryClip.interrupt();};OutOfLifeDialog.prototype.showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){cb();});};OutOfLifeDialog.prototype.onMouseEvent=function(type,x,y,shape){_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(shape.getName().indexOf('reward')!=-1){if(type===TGFW.UI.MouseEventType.OVER){this.getNavigation().navigateToButton('reward');}else if(type===TGFW.UI.MouseEventType.UP){this._onRewardAction();}}};OutOfLifeDialog.prototype.onAction=function(action,button){var _this=this;switch(action){case OutOfLifeDialog.reward:this._onRewardAction();break;case OutOfLifeDialog.no:case OutOfLifeDialog.back:this._hideDialogAnimation.play({back:this},function(){_this.hide();if(true&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['outOfLifes'],false,function(){});}});break;default:_super.prototype.onAction.call(this,action,button);break;}};OutOfLifeDialog.prototype._onRewardAction=function(){var _this=this;if(Game.app().getIsAdExist()){var sdk_2=TGFW.sdk();sdk_2.gameplayStop();sdk_2.requestAd(TGH5.Ads.Type.Rewarded).always(function(result){sdk_2.gameplayStart();if(result){_this._model.addLifes();_this._hideDialogAnimation.play({back:_this},function(){_this.hide();});}});}};OutOfLifeDialog.reward=new TGFW.Action();OutOfLifeDialog.no=new TGFW.Action();OutOfLifeDialog.back=new TGFW.Action();return OutOfLifeDialog;}(TGFW.UI.Dialog);Game.OutOfLifeDialog=OutOfLifeDialog;function heartCryClipDesc(){var animationTime=600;return{className:TGFW.Animation.Clip,looped:true,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'tear',className:TGFW.Animation.KeyProperty,time:0,visible:true}],[{name:'tear',className:TGFW.Animation.KeyMoveCardinal,time:animationTime,points:[{x:100,y:120},{x:65,y:145},{x:85,y:210}]},{name:'tear',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{rotate:{start:-0.785,end:0.17444444444444443}}},{name:'brows',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:55,end:65}}},{name:'eyes',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:99,end:105}}},{name:'mouth',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:141,end:155},scaleY:{start:1,end:1.2}}}],[{name:'tear',className:TGFW.Animation.KeyProperty,time:0,visible:false}],[{name:'brows',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:65,end:55}}},{name:'eyes',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:105,end:99}}},{name:'mouth',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:155,end:141},scaleY:{start:1.2,end:1}}}],[{name:'brows',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:55,end:65}}},{name:'eyes',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:99,end:105}}},{name:'mouth',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:141,end:155},scaleY:{start:1,end:1.2}}}],[{name:'brows',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:65,end:55}}},{name:'eyes',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:105,end:99}}},{name:'mouth',className:TGFW.Animation.KeyTransition,time:animationTime,easing:TGFW.Animation.Easing.sineInOut,change:{y:{start:155,end:141},scaleY:{start:1.2,end:1}}}]]}]};}}(Game||(Game={})));var Game;(function(Game){var SelMultiplayerGameLenghtDialog=function(_super){__extends(SelMultiplayerGameLenghtDialog,_super);function SelMultiplayerGameLenghtDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();_this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));_this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));return _this;}SelMultiplayerGameLenghtDialog.prototype.setData=function(data){this._data=data;};SelMultiplayerGameLenghtDialog.prototype.create=function(){_super.prototype.create.call(this);};SelMultiplayerGameLenghtDialog.prototype._hideDialog=function(cb){this._hideDialogAnimation.play({back:this},function(){cb();});};SelMultiplayerGameLenghtDialog.prototype._showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){if(!cb)return;cb();});};SelMultiplayerGameLenghtDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this._showDialog(null);};SelMultiplayerGameLenghtDialog.prototype.onAction=function(action,button){if(action===SelMultiplayerGameLenghtDialog.back){this._onBackAction();}else{TGFW.sdk().gameplayStart();var desc=button.desc;this._onSelectAction(desc.count);}};SelMultiplayerGameLenghtDialog.prototype._onBackAction=function(){Game.app().dialogs.mainMenu.updateGameModeBG();this._hideDialog(this._goToMainMenu.bind(this));};SelMultiplayerGameLenghtDialog.prototype._goToMainMenu=function(){this.hide();Game.app().dialogs.mainMenu.animateAppirience();};SelMultiplayerGameLenghtDialog.prototype._onSelectAction=function(count){var _this=this;this.questionCount=count;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['wheel'],[],false,function(){_this._hideDialog(_this._goToWheelScreen.bind(_this));});}else{this._hideDialog(this._goToWheelScreen.bind(this));}};SelMultiplayerGameLenghtDialog.prototype._goToWheelScreen=function(){this.hide();this._model.startGame(this._data.players,this.questionCount);TGFW.sdk().reportGameAnalyticsDesignEvent('partyLength:'+this.questionCount);Game.app().dialogs.wheel.setData({'usePartyCoins':true});Game.app().dialogs.wheel.show();};SelMultiplayerGameLenghtDialog.back=new TGFW.Action();SelMultiplayerGameLenghtDialog.playerAction=new TGFW.Action();return SelMultiplayerGameLenghtDialog;}(TGFW.UI.Dialog);Game.SelMultiplayerGameLenghtDialog=SelMultiplayerGameLenghtDialog;}(Game||(Game={})));var Game;(function(Game){var PlayersGetReadyDialog=function(_super){__extends(PlayersGetReadyDialog,_super);function PlayersGetReadyDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();return _this;}PlayersGetReadyDialog.prototype.create=function(){_super.prototype.create.call(this);this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));this.timerForDelay=new TGFW.Timer(this.hideDialog.bind(this));};PlayersGetReadyDialog.prototype._beforeShow=function(){_super.prototype._beforeShow.call(this);if(TGFW.sdk().getPlatformName()==='crazygames'||Game.App.mobileRemoteControlMode){this.crownRemoteAnimation=TGFW.Animation.ClipManager.createClip(Game.setCrownAnimation('crowncg','crowncg',7));}else{this.crownRemoteAnimation=TGFW.Animation.ClipManager.createClip(Game.setCrownRemoteAnimation('crown_remote','crown_remote',7));}};PlayersGetReadyDialog.prototype._afterShow=function(){var _this=this;_super.prototype._afterShow.call(this);this.setImages();this.setOnShowData();if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['selectCategory'],false,function(){_this.showDialog(_this.startAnimation.bind(_this));_this.timerForDelay.start(4500,true);});}else{this.showDialog(this.startAnimation.bind(this));this.timerForDelay.start(4500,true);}};PlayersGetReadyDialog.prototype.setImages=function(){if(TGFW.sdk().getPlatformName()==='crazygames'||Game.App.mobileRemoteControlMode){this.getImageShape('crowncg').setTexture('crowncg7');}else{this.getImageShape('crown_remote').setTexture('crown_remote7');}};PlayersGetReadyDialog.prototype.showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){if(cb)cb();});};PlayersGetReadyDialog.prototype.hideDialog=function(cb){var _this=this;this.timerForDelay.stop();this.crownRemoteAnimation.interrupt();if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources(['question_top_bg'],[],false,function(){_this._hideDialogAnimation.play({back:_this},function(){_this.hide();Game.app().dialogs.question.show();});});}else{this._hideDialogAnimation.play({back:this},function(){_this.hide();Game.app().dialogs.question.show();});}};PlayersGetReadyDialog.prototype.startAnimation=function(){this.crownRemoteAnimation.play(this.layout);};PlayersGetReadyDialog.prototype.setOnShowData=function(){var player='',playerDeviceId,masterDeviceId;if(Game.App.mobileRemoteControlMode){player=this._model.mr_getCurrentPlayerName();this.getTextShape('title').setText('playerGetReady.titleRemoteControl');playerDeviceId=this._model.mr_getCurrentPlayerDeviceId();masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(-1,'play_turn',{masterDeviceId:masterDeviceId,deviceId:playerDeviceId,playAllowed:true,isBackAvailable:true});}else player=this._model.getCurrentPlayer()?this._model.getCurrentPlayer().index+1:'player1';this.getTextShape('title').updateText({player:player});};return PlayersGetReadyDialog;}(TGFW.UI.Dialog);Game.PlayersGetReadyDialog=PlayersGetReadyDialog;}(Game||(Game={})));var Game;(function(Game){var SelNumOfPlayersDialog=function(_super){__extends(SelNumOfPlayersDialog,_super);function SelNumOfPlayersDialog(desc){var _this=_super.call(this,desc)||this;_this._mr_maxPlayersNumber=0;_this._mr_p_settings=null;_this._mr_playersList=[];_this._model=Game.app().getGameModel();_this._clip=null;_this._clips={};var clipsDesc=_this.desc.animationFramesDesc;_this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));_this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));_this._crownAnimation=TGFW.Animation.ClipManager.createClip(Game.setCrownAnimation('crowncg','crowncg',7));_this._crownClip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimation('crown_waves_hand',clipsDesc.hand.frames,clipsDesc.hand.timePerFrame,clipsDesc.hand.reverse,clipsDesc.hand.delays));_this._willyClip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimation('willy',clipsDesc.willy.frames,clipsDesc.willy.timePerFrame,clipsDesc.willy.reverse,clipsDesc.willy.delays));return _this;}SelNumOfPlayersDialog.prototype.create=function(){_super.prototype.create.call(this);};SelNumOfPlayersDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);if(Game.App.mobileRemoteControlMode){this._mr_p_settings=this._mr_p_settings||TGFW.sdk().getProductSettings();if(this._mr_p_settings.mobileRemoteControlMode.maxPlayerNumber&&this._mr_p_settings.mobileRemoteControlMode.maxPlayerNumber>0){this._mr_maxPlayersNumber=this._mr_p_settings.mobileRemoteControlMode.maxPlayerNumber;}this.mr_updateView();}this.setImages();this.showDialog(this.startAnimation.bind(this));if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});}};SelNumOfPlayersDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);if(Game.App.mobileRemoteControlMode){var masterDeviceId=Game.App.multiControllerManager.getMasterControllerDeviceId();Game.App.multiControllerManager.sendMessage(masterDeviceId,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:false});}};SelNumOfPlayersDialog.prototype.mr_updateView=function(){var shapesNumber=5;var userName='';this.getTextShape('title').setText('selectNumOfPlayers.titleRemoteControl');this.getButton('startGameBtn').disable();this.getButton('startGameBtn').hide();for(var i=1;i<=shapesNumber;i++){this.getTextShape('player_'+i).setVisibility(false);}this.playersCount=this._mr_playersList.length;if(this.playersCount>0){for(var i=0;i<this.playersCount;i++){if(i>this._mr_maxPlayersNumber-1){this.playersCount=this._mr_maxPlayersNumber;break;}var s_idx=i+1;this.getTextShape('player_'+s_idx).setVisibility(true);userName=Game.App.multiControllerManager.getUsername(this._mr_playersList[i]);this.getTextShape('player_'+s_idx).setText(s_idx+'.'+userName);Game.App.multiControllerManager.setActivePlayers(i+1);}if(this.playersCount>1){this.getButton('startGameBtn').enable();this.getButton('startGameBtn').show();}}};SelNumOfPlayersDialog.prototype.mr_updatePlayerList=function(){this._mr_playersList=Game.App.multiControllerManager.getControllerDeviceIds();if(this._mr_playersList.length!=0)Game.App.multiControllerManager.setActivePlayers(this._mr_playersList.length);};SelNumOfPlayersDialog.prototype.mr_setModelStartedPlayerList=function(){var data={},_name='';this._model.mr_startedPlayerList=[];for(var i=0;i<this._mr_playersList.length;i++){if(i>this._mr_maxPlayersNumber-1)break;_name=Game.App.multiControllerManager.getUsername(this._mr_playersList[i]);data={id:this._mr_playersList[i],name:_name,connected:true};this._model.mr_startedPlayerList.push(data);}};SelNumOfPlayersDialog.prototype.setImages=function(){this.getImageShape('crown').setTexture('crown0');this.getImageShape('crown_waves_hand').setTexture('crown_waves_hand0');};SelNumOfPlayersDialog.prototype.onAction=function(action,button){if(action===SelNumOfPlayersDialog.back){this._onBackAction();}else if(action===SelNumOfPlayersDialog.startMultiPlayerGame){this._hideDialog(this._goToGameLenght.bind(this));this.mr_setModelStartedPlayerList();}else{this._onSelectAction(button);}};SelNumOfPlayersDialog.prototype._onBackAction=function(){Game.app().dialogs.mainMenu.updateGameModeBG();this._hideDialog(this._goToMainMenu.bind(this));};SelNumOfPlayersDialog.prototype._goToMainMenu=function(){this.hide();Game.app().dialogs.mainMenu.animateAppirience();};SelNumOfPlayersDialog.prototype._onSelectAction=function(button){var data=button.desc;this.playersCount=data.playerCount;this._hideDialog(this._goToGameLenght.bind(this));};SelNumOfPlayersDialog.prototype.startAnimation=function(){Game.app().dialogs.mainMenu.updateGameModeBG(false);this._crownClip.play(this.layout);this._willyClip.play(this.layout);};SelNumOfPlayersDialog.prototype._goToGameLenght=function(){this.hide();Game.app().dialogs.selMultiplayerGameLenght.setData({players:this.playersCount});Game.app().dialogs.selMultiplayerGameLenght.show();};SelNumOfPlayersDialog.prototype._hideDialog=function(cb){this._hideDialogAnimation.play({back:this},function(){cb();});};SelNumOfPlayersDialog.prototype.showDialog=function(cb){this._showDialogAnimation.play({back:this},function(){cb();});};SelNumOfPlayersDialog.twoPlayers=new TGFW.Action();SelNumOfPlayersDialog.threePlayers=new TGFW.Action();SelNumOfPlayersDialog.fourPlayers=new TGFW.Action();SelNumOfPlayersDialog.fivePlayers=new TGFW.Action();SelNumOfPlayersDialog.sixPlayers=new TGFW.Action();SelNumOfPlayersDialog.sevenPlayers=new TGFW.Action();SelNumOfPlayersDialog.back=new TGFW.Action();SelNumOfPlayersDialog.startMultiPlayerGame=new TGFW.Action();return SelNumOfPlayersDialog;}(TGFW.UI.TDialog);Game.SelNumOfPlayersDialog=SelNumOfPlayersDialog;}(Game||(Game={})));var Game;(function(Game){var StatisticDialog=function(_super){__extends(StatisticDialog,_super);function StatisticDialog(desc){var _this=_super.call(this,desc)||this;_this.isColumnsShow=false;_this.currentColumnItem=0;_this.currentTextItem=0;_this.isAnimationFinished=false;_this.currentColumnHeight=0;_this.currentColumnGrowSpeed=1;_this.showTextInterval=200;_this.showTextIntervalCurrentValue=0;_this._model=Game.app().getGameModel();_this._gameResult=null;_this.containerWidth=_this.desc.containerWidth;_this.marginRight=_this.desc.marginRight;_this.maxDiagramHeight=_this.desc.maxDiagramHeight;_this.diagramWidth=_this.desc.diagramWidth;_this.dialogWidth=_this.desc.dialogWidth;_this.maxPlayersCount=7;_this._clip=null;_this._clips={};var clipsDesc=_this.desc.animationFramesDesc;for(var descKey in clipsDesc){var clipDesc=clipsDesc[descKey];var clip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimation(clipDesc.shape,clipDesc.frames,clipDesc.timePerFrame,clipDesc.reverse,clipDesc.delays));_this._clips[descKey]=clip;}_this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));_this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));return _this;}StatisticDialog.prototype.create=function(){_super.prototype.create.call(this);TGFW.onNewFrame.add(this._update.bind(this));};StatisticDialog.prototype.onAction=function(action,button){var _this=this;TGFW.sdk().gameplayStop();if(action===StatisticDialog.back){this._hideDialogAnimation.play({back:this},function(){if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['willy','albert','pop','bonzo'],false,function(){_this.hide();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();});}else{_this.hide();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();}});}else{_super.prototype.onAction.call(this,action,button);}};StatisticDialog.prototype.onKeyUp=function(key){var _this=this;this._hideDialogAnimation.play({back:this},function(){_this.hide();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();});};StatisticDialog.prototype._update=function(dt){if(this.isVisible()&&!this.isAnimationFinished){if(this.currentTextItem===0){var columnPurposeHeight=this.diagramSingleHeight*this._gameResult[this.currentColumnItem].correctQuestions;if(this.currentColumnHeight<columnPurposeHeight){this.currentColumnHeight+=dt*this.currentColumnGrowSpeed;this.getBoxShape('container.item_'+(this.currentColumnItem+1).toString()+'.rect').setDesc({height:this.currentColumnHeight});}else{this.currentColumnHeight=columnPurposeHeight;this.getBoxShape('container.item_'+(this.currentColumnItem+1).toString()+'.rect').setDesc({height:this.currentColumnHeight});this.currentColumnItem++;if(this.currentColumnItem>=this._gameResult.length){this.currentTextItem++;return;}this.currentColumnHeight=0;}}else{this.showTextIntervalCurrentValue+=dt;if(this.showTextIntervalCurrentValue>=this.showTextInterval){this.showTextIntervalCurrentValue=0;this.getTextShape('container.item_'+this.currentTextItem.toString()+'.text').setVisibility(true);this.currentTextItem++;if(this.currentTextItem>this._gameResult.length){this.isAnimationFinished=true;}}}}};StatisticDialog.prototype.hideDiagramItems=function(){var items=this.getLayout('container').getChildren();for(var i=0;i<items.length;i++){items[i].setVisibility(false);}for(var i=1;i<=this.playerCount;i++){this.getTextShape('container.item_'+i.toString()+'.name').setX(this.startX+(i-1)*this.diagramWidth-55);}};StatisticDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.isColumnsShow=false;this.currentColumnItem=0;this.currentTextItem=0;this.isAnimationFinished=false;this.currentColumnHeight=0;this.showTextIntervalCurrentValue=1000;this._gameResult=this._model.getPartyModeStatistic();this.getImageShape('bonzo').setTexture('Bonzo_Victory');this.playerCount=this._gameResult.length;this.playersDiagramSizes=[];for(var i=0;i<this._gameResult.length;i++){this.playersDiagramSizes.push(this._gameResult[i].correctQuestions);}this.getLayout('container').setX(130);this.getImageShape('albert').show();this.getImageShape('willy').show();this.getImageShape('bonzo_hand').show();this.getImageShape('bonzo').show();this.getImageShape('pop').show();if(this.playerCount>=4&&this.playerCount<=6){this.getImageShape('albert').hide();this.getImageShape('bonzo_hand').hide();this.getImageShape('bonzo').hide();}else if(this.playerCount>=7){this.getImageShape('albert').hide();this.getImageShape('bonzo_hand').hide();this.getImageShape('bonzo').hide();this.getImageShape('pop').hide();this.getImageShape('container').setX(50);}this.maxQuestionsCount=this._gameResult[0].totalQuestions;this.startX=(this.dialogWidth-(this.playerCount-1)*this.diagramWidth)/2;this.diagramSingleHeight=385/this.maxQuestionsCount;this.hideDiagramItems();for(var i=1;i<=this.playerCount;i++){this.getLayout('container.item_'+i.toString()).setVisibility(true);var shape=this.getTextShape('container.item_'+i.toString()+'.text');shape.setText(this.playersDiagramSizes[i-1].toString()+'/'+this.maxQuestionsCount.toString());shape.setX(this.startX+(i-1)*this.diagramWidth-25);shape.setY((this.maxQuestionsCount-this.playersDiagramSizes[i-1])*this.diagramSingleHeight+15);shape.setVisibility(false);this.getBoxShape('container.item_'+i.toString()+'.rect').setX(this.startX+(i-1)*this.diagramWidth);this.getBoxShape('container.item_'+i.toString()+'.rect').setDesc({height:0});}var diagramContainer=this.getLayout('container');for(var i=1;i<=Game.GameModel.maxPlayersCount;i++){var playerLayout=diagramContainer.getLayout('item_'+i.toString());if(playerLayout){var playerName=playerLayout.getTextShape('name');if(playerName){if(Game.App.mobileRemoteControlMode){var userName='';if(this._model.mr_getStartedPlayerList()[i-1]){userName=this._model.mr_getStartedPlayerList()[i-1].name;playerName.setText(userName);}}else playerName.updateText({number:i.toString()});}}}this.showDialog(this.startAnimation.bind(this));};StatisticDialog.prototype.showDialog=function(cb){if(cb===undefined){cb=null;}this._showDialogAnimation.play({back:this},function(){cb();});};StatisticDialog.prototype.startAnimation=function(){for(var clip in this._clips){this._clips[clip].play(this.layout);}};StatisticDialog.prototype._beforeHide=function(){for(var clip in this._clips){this._clips[clip].interrupt();}_super.prototype._beforeHide.call(this);};StatisticDialog.back=new TGFW.Action();return StatisticDialog;}(TGFW.UI.TDialog);Game.StatisticDialog=StatisticDialog;}(Game||(Game={})));var Game;(function(Game){var StatisticsDialog=function(_super){__extends(StatisticsDialog,_super);function StatisticsDialog(desc){return _super.call(this,desc)||this;}StatisticsDialog.prototype.create=function(){_super.prototype.create.call(this);this._model=Game.app().getGameModel();this.buttonNames=['classic','challange','powerUps'];this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));};StatisticsDialog.prototype.showDialog=function(cb){if(cb===undefined){cb=null;}this._showDialogAnimation.play({back:this},function(){if(cb)cb();});};StatisticsDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);var data=this._model.getStatistics();if(data){this.getTextShape('statsclassic.gamesPlayed').updateText({games:data.gamesPlayed.classic.toString()});this.getTextShape('statschallange.gamesPlayed').updateText({games:data.gamesPlayed.challange.toString()});this.getTextShape('statspowerUps.gamesPlayed').updateText({games:data.gamesPlayed.powerUps.toString()});for(var n in data.categories){this.getTextShape('statsclassic.'+n+'Questins').setText(data.categories[n].classic.correctAnswers.toString());this.getTextShape('statsclassic.'+n+'Time').setText(data.categories[n].classic.answerTime.toString());this.getTextShape('statschallange.'+n+'GamesPlayed').setText(data.categories[n].challange.gamesPlayed.toString());this.getTextShape('statschallange.'+n+'HighScore').setText(data.categories[n].challange.highScore.toString());this.getTextShape('statschallange.'+n+'Time').setText(data.categories[n].challange.answerTime.toString());this.getTextShape('statspowerUps.'+n+'Bombs').setText(data.categories[n].powerUps.bomb.powerUpsUsed.toString());this.getTextShape('statspowerUps.'+n+'DoubleUp').setText(data.categories[n].powerUps.doubleUp.powerUpsUsed.toString());this.getTextShape('statspowerUps.'+n+'RightAnswer').setText(data.categories[n].powerUps.rightAnswer.powerUpsUsed.toString());}}this.changeTab();this.showDialog();if(Game.App.mobileRemoteControlMode){this.getButton('exit').disable();this.getButton('exit').hide();}};StatisticsDialog.prototype.onAction=function(action,button){var _this=this;if(action===StatisticsDialog.back){this._hideDialogAnimation.play({back:this},function(){_this.hide();});}else if(action===StatisticsDialog.tab){this.changeTab();}else{_super.prototype.onAction.call(this,action,button);}};StatisticsDialog.prototype.changeTab=function(){for(var i=0;i<this.buttonNames.length;i++){if(this.getNavigation().getFocusedButton().getName()!==this.buttonNames[i]){this.getLayout('stats'+this.buttonNames[i]).hide();}else{this.getLayout('stats'+this.buttonNames[i]).show();}}};StatisticsDialog.prototype.onKeyUp=function(key){if(key===TGH5.KeyNames.KEY_LEFT||key===TGH5.KeyNames.KEY_RIGHT){if(key===TGH5.KeyNames.KEY_RIGHT&&this.getNavigation().getFocusedButtonName()==='exit'){return;}this.changeTab();}else{_super.prototype.onKeyUp.call(this,key);}};StatisticsDialog.back=new TGFW.Action();StatisticsDialog.tab=new TGFW.Action();return StatisticsDialog;}(TGFW.UI.Dialog);Game.StatisticsDialog=StatisticsDialog;}(Game||(Game={})));var Game;(function(Game){var VictoryDialog=function(_super){__extends(VictoryDialog,_super);function VictoryDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();_this._gameResult=null;return _this;}VictoryDialog.prototype.create=function(){_super.prototype.create.call(this);this._noThanksBtnTextNormal='victory_loss.no_thanks';this._noThanksBtnTextSingle='common.close';this._clip=null;this._clips={};var clipsDesc=this.desc.animationFramesDesc;for(var descKey in clipsDesc){var clipDesc=clipsDesc[descKey];var clip=TGFW.Animation.ClipManager.createClip(Game.createTilesAnimation(clipDesc.shape,clipDesc.frames,clipDesc.timePerFrame,clipDesc.reverse,clipDesc.delays));this._clips[descKey]=clip;if(!this._clips[clipsDesc[descKey].layout]){this._clips[clipsDesc[descKey].layout]=[clip];}else{this._clips[clipsDesc[descKey].layout].push(clip);}}this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));this._challengeFeedback={'zero':['feedback1','feedback2','feedback3'],'low':['feedback4','feedback5','feedback6'],'medium':['feedback7','feedback8','feedback9','feedback10','feedback11'],'high':['feedback12','feedback13','feedback14'],'perfect':['feedback15','feedback16']};this._challengeEndImg={'zero':'challenge_end_1','low':'challenge_end_2','medium':'challenge_end_3','high':'challenge_end_4'};this._noThanksBtnText=this.getTextShape('no.text');};VictoryDialog.prototype.setData=function(data){this._data=data;};VictoryDialog.prototype.setImages=function(){this.getImageShape('winLayout.tito').setTexture('Tito_Victory_export_12fps00');this.getImageShape('winLayout.hector_hand').setTexture('Hector_Victory_hand0');this.getImageShape('winLayout.hector').setTexture('Hector_Victory');this.getImageShape('winLayout.albert').setTexture('Albert_Victory00');this.getImageShape('winLayout.tina').setTexture('Tina_Victory00');this.getImageShape('winLayout.bonzo_hand').setTexture('Bonzo_Victory0');this.getImageShape('winLayout.bonzo').setTexture('Bonzo_Victory');this.getImageShape('winLayout.pop').setTexture('Pop_Victory00');this.getImageShape('defeatLayout.tito').setTexture('Tito_Defeat00');this.getImageShape('defeatLayout.bonzo').setTexture('Bonzo_Defeat1');this.getImageShape('defeatLayout.willy').setTexture('Willy_Defeat0');};VictoryDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.setImages();this._iconButtons=[this.getButton('reward'),this.getButton('no')];this._gameResult=this._model.getPlayerGameResult();var _correctAnswers=this._gameResult.correct;var _earnedCoins=this._gameResult.earned;var _isWin=this._data.isWin;if(_isWin){this.getImageShape('winLayout.hector').setTexture('Hector_Victory');this.getImageShape('winLayout.bonzo').setTexture('Bonzo_Victory');}this.getTextShape('subTitleText').updateText({correct:_correctAnswers.toString(),coins:_earnedCoins.toString()});this._updateRewardButton(this._gameResult.earned);if(this._data&&this._data.isWin!==undefined){var title='victory_loss.victory';var winLayout=this.getLayout('winLayout');var defeatLayout=this.getLayout('defeatLayout');var challengeEndLayout=this.getLayout('challengeEndLayout');winLayout.hide();defeatLayout.hide();challengeEndLayout.hide();if(this._model.getMode()===Game.GameModel.GameMode.CHALLENGE){var _feedbackVars=[title];var _feedbackImg='';var _isWin_1=true;if(_correctAnswers===0){_feedbackVars=this._challengeFeedback['zero'];_feedbackImg=this._challengeEndImg['zero'];_isWin_1=false;}else if(_correctAnswers===1||_correctAnswers===2){_feedbackVars=this._challengeFeedback['low'];_feedbackImg=this._challengeEndImg['low'];}else if(_correctAnswers===3||_correctAnswers===4){_feedbackVars=this._challengeFeedback['medium'];_feedbackImg=this._challengeEndImg['low'];}else if(_correctAnswers===5||_correctAnswers===6){_feedbackVars=this._challengeFeedback['high'];_feedbackImg=this._challengeEndImg['medium'];}else{_feedbackVars=this._challengeFeedback['perfect'];_feedbackImg=this._challengeEndImg['high'];}var _rIndex=Math.floor(Math.random()*_feedbackVars.length);title='victory_loss.'+_feedbackVars[_rIndex];challengeEndLayout.getImageShape('resultImg').setTexture(_feedbackImg);challengeEndLayout.show();}else{if(_isWin===false){title='victory_loss.loss';defeatLayout.show();}else{winLayout.show();}}this.getTextShape('title').setText(title);var lines=Game.wrapText(TGFW.LocalizationManager.getText(title),this.getTextShape('title'));Game.autoWrapText(TGFW.LocalizationManager.getText(title),this.getTextShape('title'));if(lines.length>1){this.getTextShape('title').setY(60);}else{this.getTextShape('title').setY(110);}}this._showDialog(_isWin);};VictoryDialog.prototype._updateRewardButton=function(earnedCoins){var buttonNo=this.getButton('no');var buttonReward=this.getButton('reward');if(Game.app().getIsAdExist()){buttonNo.getTextShape('text').setText('victory_loss.no_thanks');buttonNo.setX(900);Game.updateButtonsAlignmentFixed(buttonNo,'victory_loss.no_thanks');var values=undefined,text=undefined;if(earnedCoins>0){text='victory_loss.doubleReward';buttonReward.getImageShape('icon').setTexture('video_icon');values={coins:this._model.getCoinsForLossReward().toString()};}else{text='victory_loss.get_coins';values={coins:this._model.getCoinsForLossReward().toString()};}buttonReward.getTextShape('text').setText(text);buttonReward.getTextShape('text').updateText(values);Game.updateButtonsAlignmentFixed(buttonReward,text,values);}else{buttonReward.setVisibility(false);buttonNo.getTextShape('text').setText('common.close');buttonNo.setX(640);Game.updateButtonsAlignmentFixed(buttonNo,'common.close');this.getNavigation().navigateToButton('no');}};VictoryDialog.prototype._beforeHide=function(){_super.prototype._beforeHide.call(this);for(var clip in this._clips[this.layoutKey]){this._clips[this.layoutKey][clip].interrupt();}};VictoryDialog.prototype._startAnimation=function(){var layoutKey=this.layoutKey;if(this._model.getMode()!==Game.GameModel.GameMode.CHALLENGE){var _layout=this.getLayout(layoutKey);if(this._clips[layoutKey]===null||_layout===null){return;}for(var i=0;i<this._clips[layoutKey].length;i++){this._clips[layoutKey][i].play(_layout.layout);}}};VictoryDialog.prototype.onMouseEvent=function(type,x,y,shape){_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(shape.getName().indexOf('reward')!=-1){if(type===TGFW.UI.MouseEventType.OVER){this.getNavigation().navigateToButton('reward');}else if(type===TGFW.UI.MouseEventType.UP){if(Game.app().getIsAdExist()){this._playRewardedVideo();}}}};VictoryDialog.prototype.onAction=function(action,button){if(action===VictoryDialog.no||action===VictoryDialog.back){this.hideDialog(this._goToMainMenuDialog.bind(this));}else if(action===VictoryDialog.reward){if(Game.app().getIsAdExist()){this._playRewardedVideo();}}else{_super.prototype.onAction.call(this,action,button);}};VictoryDialog.prototype._playRewardedVideo=function(){var _this=this;var sdk=TGFW.sdk();sdk.gameplayStop();sdk.requestAd(TGH5.Ads.Type.Rewarded).always(function(result){sdk.gameplayStart();if(result){_this._onRewardedAd();}});};VictoryDialog.prototype._onRewardedAd=function(){if(this._gameResult.earned>0){this._model.doubleCollectedCoins();}else{this._model.addCoinsWhenZeroAnswers();}this.hideDialog(this._goToMainMenuDialog.bind(this));};VictoryDialog.prototype._goToMainMenuDialog=function(){var _this=this;if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['anotherChance'],false,function(){_this.hide();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();});}else{this.hide();Game.app().dialogs.mainMenu.updateGameModeBG();Game.app().dialogs.mainMenu.animateAppirience();}};VictoryDialog.prototype.hideDialog=function(callback){this._hideDialogAnimation.play({back:this},callback);};VictoryDialog.prototype._showDialog=function(_isWin){if(_isWin){this.layoutKey='winLayout';}else{this.layoutKey='defeatLayout';}this._showDialogAnimation.play({back:this},this._startAnimation.bind(this));};VictoryDialog.no=new TGFW.Action();VictoryDialog.back=new TGFW.Action();VictoryDialog.reward=new TGFW.Action();return VictoryDialog;}(TGFW.UI.TDialog);Game.VictoryDialog=VictoryDialog;}(Game||(Game={})));var Game;(function(Game){var ShopDialog=function(_super){__extends(ShopDialog,_super);function ShopDialog(desc){var _this=_super.call(this,desc)||this;_this._model=Game.app().getGameModel();return _this;}ShopDialog.prototype.create=function(){_super.prototype.create.call(this);this._time='';this._timerCount=0;this._showDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(1280,0));this._hideDialogAnimation=TGFW.Animation.ClipManager.createClip(Game.moveDialog(0,1280));};ShopDialog.prototype._updatePaymentButton=function(button,product,group,isCancelButton){_super.prototype._updatePaymentButton.call(this,button,product,group,isCancelButton);if(!isCancelButton&&product.isSubscription){button.getTextShape('price_2').setText(product.price.split('/')[0]);button.getTextShape('note.left').setText(product.price.split('/')[1]);button.getTextShape('note.right').setText(product.price.split('/')[1]);button.getTextShape('note.top').setText(product.price.split('/')[1]);button.getTextShape('note.bottom').setText(product.price.split('/')[1]);button.getTextShape('note.main').setText(product.price.split('/')[1]);}else{button.getLayout('note').hide();}};ShopDialog.prototype.showDialog=function(cb){if(cb===undefined){cb=null;}this._showDialogAnimation.play({back:this},function(){if(cb)cb();});};ShopDialog.prototype.setData=function(data){this._data=data;};ShopDialog.prototype._afterShow=function(){var _this=this;_super.prototype._afterShow.call(this);this.setTexturesToButtons();this.showDialog(function(){_this._updateCoinsContainer();_this.getLayout('coinsContainer').setVisibility(true);_this.getLayout('lifesContainer').setVisibility(true);_this.disabeleAddLifesButton();});};ShopDialog.prototype._updatePaymentButtons=function(){_super.prototype._updatePaymentButtons.call(this);console.log('_updatePaymentButtons');var products=Game.app().getPaymentManager().getProducts();var consumableProducts=products.filter(function(it){return!it.isSubscription;});var subscriptionProducts=products.filter(function(it){return it.isSubscription;});var activeButtons=[];if(this.desc.consumableButtons){var names=this.desc.consumableButtons.names;for(var i=0;i<names.length;i++){var button_1=this.getButton(names[i]);if(button_1.isVisible()){activeButtons.push(button_1);}}}if(this.desc.subscriptionButtons){var names=this.desc.subscriptionButtons.names;for(var i=0;i<names.length;i++){var button_2=this.getButton(names[i]);if(i>=subscriptionProducts.length){button_2.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Purchased||product.status==TGH5.Payment.ProductStatus.Cancellation){activeButtons.push({'notFill':product});}else{activeButtons.push(button_2);}}}}if(this.desc.cancelSubscriptionButtons){var names=this.desc.cancelSubscriptionButtons.names;for(var i=0;i<names.length;i++){var button=this.getButton(names[i]);if(i>=subscriptionProducts.length){button.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Purchased){activeButtons.forEach(function(el,i){if(el.notFill&&el.notFill.status==TGH5.Payment.ProductStatus.Purchased){activeButtons.splice(i,1,button);}});}}}}if(this.desc.cancelationItems){var names=this.desc.cancelationItems.names;for(var i=0;i<names.length;i++){var layout=this.getLayout(names[i]);if(i>=subscriptionProducts.length){layout.hide();}else{var product=subscriptionProducts[i];if(product.status==TGH5.Payment.ProductStatus.Cancellation){activeButtons.forEach(function(el,i){if(el.notFill&&el.notFill.status==TGH5.Payment.ProductStatus.Cancellation){activeButtons.splice(i,1,layout);}});}}}}this.disabeleAddLifesButton();var buttonCount=0;var lineWidth=0;var buttonWidth=TGFW.TextureManager.getTexture('shop_box').width;var buttonXInterval=13;for(var i=0;i<activeButtons.length;i++){if(activeButtons[i].isVisible()){buttonCount++;}}lineWidth=buttonWidth*buttonCount+buttonXInterval*(buttonCount-1);buttonCount=0;for(var i=0;i<activeButtons.length;i++){if(activeButtons[i].isVisible()){buttonCount++;var x=(1280-lineWidth)/2;if(buttonCount>1){x=x+(buttonWidth+buttonXInterval)*(buttonCount-1);}activeButtons[i].setX(x);}}};ShopDialog.prototype.setTexturesToButtons=function(){var _this=this;this.getLayout('coinsContainer').setVisibility(false);this.getLayout('lifesContainer').setVisibility(false);var productButtons=this.getNavigation().desc.buttonNames.filter(function(el){return el.indexOf('products')!==-1;});productButtons.forEach(function(el,index){var bgTexture='shop_box';if(index+1===3)bgTexture='shop_box1';if(index+1===6)bgTexture='shop_box2';var productsIcons=['shop_icon1','shop_icon','shop_icon2','shop_icon5','shop_icon4','shop_icon3'];_this.getLayout(el).getImageShape('bg').setTexture(bgTexture);_this.getLayout(el).getImageShape('img').setTexture(productsIcons[index]);_this.getLayout(el).getImageShape('shop_price').setTexture('shop_price');_this.getLayout(el).getImageShape('cursor').setTexture('shop_box_cursor');});var cancelSubscriptionAds=this.getLayout('cancelSubscriptionAds');cancelSubscriptionAds.getImageShape('bg').setTexture('shop_box');cancelSubscriptionAds.getImageShape('shop_price').setTexture('shop_price');cancelSubscriptionAds.getImageShape('img').setTexture('shop_icon5');cancelSubscriptionAds.getImageShape('cursor').setTexture('shop_box_cursor');var cancelSubscriptionEndlessLives=this.getLayout('cancelSubscriptionEndlessLives');cancelSubscriptionEndlessLives.getImageShape('bg').setTexture('shop_box2');cancelSubscriptionEndlessLives.getImageShape('shop_price').setTexture('shop_price');cancelSubscriptionEndlessLives.getImageShape('img').setTexture('shop_icon3');cancelSubscriptionEndlessLives.getImageShape('cursor').setTexture('shop_box_cursor');var cancelationInfoLayoutAds=this.getLayout('cancelationInfoLayoutAds');cancelationInfoLayoutAds.getImageShape('bg').setTexture('shop_box');cancelationInfoLayoutAds.getImageShape('shop_price').setTexture('shop_price');cancelationInfoLayoutAds.getImageShape('img').setTexture('shop_icon5');var cancelationInfoLayoutLives=this.getLayout('cancelationInfoLayoutLives');cancelationInfoLayoutLives.getImageShape('bg').setTexture('shop_box2');cancelationInfoLayoutLives.getImageShape('shop_price').setTexture('shop_price');cancelationInfoLayoutLives.getImageShape('img').setTexture('shop_icon5');};ShopDialog.prototype.disabeleAddLifesButton=function(){if(this._model.isIncreasedLifes()||this._model.isUnlimitedLifesMode()){this.getButton('products.product_5').disable();this.getButton('products.product_5').setVisibility(false);this.navigateToFirstEnabledButton();}};ShopDialog.prototype.navigateToFirstEnabledButton=function(){var buttonNames=this.getNavigation().desc.buttonNames;for(var i=0;i<buttonNames.length-1;i++){if(this.getButton(buttonNames[i]).isEnabled()){this.getNavigation().navigateToButton(buttonNames[i]);return;}}console.log(buttonNames);};ShopDialog.prototype.onAction=function(action,button){var _this=this;if(action===ShopDialog.back){this._hideDialogAnimation.play({back:this},function(){Game.app().dialogs.mainMenu.checkContainersFromShop();_this.hide();if(TGFW.sdk().getPlatformName()!=='crazygames'&&Game.app().isDynamicLoadingEnabled()){TGFW.Loader.loadResources([],['shop'],false,function(){});}});}else{_super.prototype.onAction.call(this,action,button);}};ShopDialog.prototype._updateContainers=function(time){this._updateCoinsContainer();this.updateLifesContainer(time);};ShopDialog.prototype._updateCoinsContainer=function(){var coinsCount=this._model.getCoins();this.getTextShape('coinsContainer.coins.coins_count').setText(coinsCount.toString());};ShopDialog.prototype.updateLifesContainer=function(time){this.getTextShape('lifesContainer.lifes.lifes_count').setText(time);};ShopDialog.prototype._onSubscriptionCanceled=function(productInfo){this.getNavigation().navigateToButton('products.product_1');};ShopDialog.prototype._onPaymentResult=function(isPurchased,productInfo){if(isPurchased){if(!productInfo.adsFree){if(productInfo.productId==='trivia_crack_p4'){this._model.setIncreasedMaxLifes();}else if(productInfo.productId==='trivia_crack_remove_ads'){var btn=this.getButton('products.product_4');btn.setState(TGFW.UI.ButtonState.DISABLED);btn.setVisibility(false);this.getNavigation().navigateToButton('cancelSubscriptionAds');}else if(productInfo.productId==='trivia_crack_endless_lives'){this._model.setEndlessLifes(true);var btn=this.getButton('products.product_6');btn.setState(TGFW.UI.ButtonState.DISABLED);btn.setVisibility(false);this.getNavigation().navigateToButton('cancelSubscriptionEndlessLives');}Game.app().dialogs.mainMenu._updateContainers();}}this.disabeleAddLifesButton();if(this.getNavigation().getFocusedButton().getState()===TGFW.UI.ButtonState.DISABLED||!this.getNavigation().getFocusedButton().isVisible()){this.getNavigation().navigateToButton('products.product_1');}this._updateCoinsContainer();};ShopDialog.back=new TGFW.Action();return ShopDialog;}(TGFW.UI.PaymentDialog);Game.ShopDialog=ShopDialog;}(Game||(Game={})));var Game;(function(Game){var LayoutScaleClipKey=function(_super){__extends(LayoutScaleClipKey,_super);function LayoutScaleClipKey(desc){return _super.call(this,desc)||this;}LayoutScaleClipKey.prototype.updateObject=function(k){var obj=this.getObject();var layouts=[],i=0;layouts.push(obj.layout);while(i<layouts.length){var layout=layouts[i];for(var p in layout){if(layout.hasOwnProperty(p)){var shape=layout[p];this.updateShape(obj,shape,k);if(shape['layout']){layouts.push(shape['layout']);}}}i++;}};LayoutScaleClipKey.prototype.updateShape=function(obj,shape,k){shape.setX(obj.getX()+100*k);};return LayoutScaleClipKey;}(TGFW.Animation.Key);Game.LayoutScaleClipKey=LayoutScaleClipKey;}(Game||(Game={})));var Game;(function(Game){var ChooseLanguageDialog=function(_super){__extends(ChooseLanguageDialog,_super);function ChooseLanguageDialog(){return _super!==null&&_super.apply(this,arguments)||this;}ChooseLanguageDialog.prototype.create=function(){_super.prototype.create.call(this);this._model=Game.app().getGameModel();this.buttons=[this.getButton('buttons.lang_1'),this.getButton('buttons.lang_2'),this.getButton('buttons.lang_3'),this.getButton('buttons.lang_4'),this.getButton('buttons.lang_5'),this.getButton('buttons.lang_6'),this.getButton('buttons.lang_7'),this.getButton('buttons.lang_8')];};ChooseLanguageDialog.prototype._afterShow=function(){var height=56;var counter=0;var languages=Object.keys(Game.languagesData);var allowLanguages=TGFW.sdk().getAllowedLanguages();for(var j=0;j<this.buttons.length;j++){var data=this.buttons[j].desc.data;for(var i=0;i<languages.length;i++){if(languages[i]===data){this.buttons[j].show();this.buttons[j].setY(counter*height);if(data===this._model.getLocalLanguage()){this.getNavigation().navigateToButton('buttons.'+this.buttons[j].getName());}counter++;break;}}}this.getBoxShape('buttons.back').setDesc({height:counter*height-6});_super.prototype._afterShow.call(this);for(var j=0;j<this.buttons.length;j++){var data=this.buttons[j].desc.data;if(data===this._model.getLocalLanguage()){this.getNavigation().navigateToButton('buttons.'+this.buttons[j].getName());}}};ChooseLanguageDialog.prototype.onMouseEvent=function(type,x,y,shape){_super.prototype.onMouseEvent.call(this,type,x,y,shape);if(type==TGFW.UI.MouseEventType.UP&&shape.getSize().x!=200){this.hide();}};ChooseLanguageDialog.prototype.onKeyUp=function(key){_super.prototype.onKeyUp.call(this,Game.remapNumKeyToArrow(key));};ChooseLanguageDialog.prototype.onAction=function(action,button){var _this=this;if(action===ChooseLanguageDialog.chooseLanguage){this.disableInput();var desc=button.desc;var data_1=desc.data;if(data_1===this._model.getLocalLanguage()){this.hide();}else{Game.app().loadDictionarie(data_1,function(){_this.enableInput();_this._model.setLocalLanguage(data_1);if(data_1.split('_').length===2){Game.app().dialogs.mainMenu._updateLanguageIcon();data_1=data_1.substr(0,2);TGFW.sdk().setLanguage(data_1);TGFW.LocalizationManager.change(data_1);}else{Game.app().dialogs.mainMenu._updateLanguageIcon();TGFW.sdk().setLanguage(data_1);TGFW.LocalizationManager.change(data_1);}_this._model.saveGame();_this.hide();});}}else if(action===ChooseLanguageDialog.back){this.hide();}else{_super.prototype.onAction.call(this,action,button);}};ChooseLanguageDialog.chooseLanguage=new TGFW.Action();ChooseLanguageDialog.back=new TGFW.Action();return ChooseLanguageDialog;}(TGFW.UI.Dialog);Game.ChooseLanguageDialog=ChooseLanguageDialog;}(Game||(Game={})));var Game;(function(Game){var LoadingDialog=function(_super){__extends(LoadingDialog,_super);function LoadingDialog(desc){return _super.call(this,desc)||this;}LoadingDialog.prototype.create=function(){_super.prototype.create.call(this);this.previousCounter=0;};LoadingDialog.prototype.setProgress=function(percent){this._updateProgressBar(percent);_super.prototype.setProgress.call(this,percent);};LoadingDialog.prototype._afterShow=function(){_super.prototype._afterShow.call(this);this.getTextShape('copyright_etermax').updateText({year:Game.getCurrentYear()});this.getTextShape('copyright').updateText({year:Game.getCurrentYear()});this.getImageShape('right').setX(Game.loadingBarX+Game.appDesc.texturePool['loading_bar_left'].width);};LoadingDialog.prototype._updateProgressBar=function(progress){var position=Math.floor(progress*(Game.loadingBarW-Game.appDesc.texturePool['loading_bar_left'].width-Game.appDesc.texturePool['loading_bar_right'].width)/Game.loadingBarMiddlePartW);this.showMiddleShapes(position);this.getImageShape('right').setX(Game.loadingBarX+Game.appDesc.texturePool['loading_bar_left'].width+position*Game.loadingBarMiddlePartW);};LoadingDialog.prototype.showMiddleShapes=function(val){for(var i=this.previousCounter;i<val;i++){this.getImageShape('middle.middle_'+i).setX(Game.loadingBarX+Game.appDesc.texturePool['loading_bar_left'].width+Game.loadingBarMiddlePartW*i);}this.previousCounter=val;};LoadingDialog.prototype.hideMiddleShapes=function(){for(var i=0;i<Game.loadingBarMiddleCount;i++){this.getImageShape('middle.middle_'+i).hide();}};return LoadingDialog;}(TGFW.UI.LoadingDialog);Game.LoadingDialog=LoadingDialog;}(Game||(Game={})));var Game;(function(Game){var _a;Game.appDesc.scene['language']={className:Game.ChooseLanguageDialog,isPopup:true,semiTransparentLayer:false,name:'language',postGameAnalyticsScreenEvent:true,languageButtonName:'languageButton',languageButtonCount:8,cloaseBackgroundName:'closeBack',navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['buttons.lang_1','buttons.lang_2','buttons.lang_3','buttons.lang_4','buttons.lang_5','buttons.lang_6','buttons.lang_7','buttons.lang_8'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.ChooseLanguageDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.ChooseLanguageDialog.back,_a)},layout:{buttons:languageButtons()}};function languageButtons(){var width=230;var height=56;var borderSize=3;var layout={};var index=0;layout['back']=Game.boxDesc(borderSize,borderSize,width-borderSize*2,height*8,Game.colors.white);for(var lang in Game.languagesData){layout['lang_'+(index+1)]={className:TGFW.UI.Button,x:0,y:index*height,action:Game.ChooseLanguageDialog.chooseLanguage,width:20,height:20,data:lang,layout:{cursor:Game.boxDesc(0,0,width,height,Game.colors.languageBtn),back:Game.boxDesc(borderSize,borderSize,width-borderSize*2,height-borderSize*2,Game.colors.white),icon:Game.imageDesc(Game.languagesData[lang].icon,25,9),text:Game.textDesc(Game.languagesData[lang].text,63,0,Game.colors.black,TGFW.Shape.Align.LEFT_CENTER,Game.fonts.languageBtn,null,170,Game.fonts.languageBtn.size+29)},layoutClip:Game.standartButtonlayoutClip()};index++;}return{className:TGFW.Shape.Layout,x:910,y:160,layout:layout};}}(Game||(Game={})));var Game;(function(Game){var buttonClipDesc={clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'bg',className:TGFW.Animation.KeyProperty,texture:'bt_play'}],[{name:'bg',className:TGFW.Animation.KeyProperty,texture:'bt_play_cursor'}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED]};Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'shop',descCreator:function(platform){var _a;return{className:Game.ShopDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'shop',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['products.product_1','products.product_2','products.product_3','products.product_4','products.product_5','products.product_6','cancelSubscriptionAds','cancelSubscriptionEndlessLives','exit'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.ShopDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.ShopDialog.back,_a)},consumableButtons:{names:['products.product_1','products.product_2','products.product_3','products.product_5'],textShapeNames:['article.left','article.right','article.top','article.bottom','article.main','price_2']},subscriptionButtons:{names:['products.product_4','products.product_6'],textShapeNames:['article.left','article.right','article.top','article.bottom','article.main']},cancelSubscriptionButtons:{names:['cancelSubscriptionAds','cancelSubscriptionEndlessLives'],textShapeNames:['article.left','article.right','article.top','article.bottom','article.main','price_2']},cancelationItems:{names:['cancelationInfoLayoutAds','cancelationInfoLayoutLives'],textShapeNames:['article.left','article.right','article.top','article.bottom','article.main','price_2']},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},bg_top:Game.boxDesc(0,0,Game.screenWidth,165,Game.colors.statsHeader),shop_bg:Game.shopBg(),coinsContainer:Game.createContainerLayout(98,71,215,87,Game.coinsLayout('coins',33,23),'score_box'),lifesContainer:Game.createContainerLayout(340,71,215,87,Game.lifesLayout('lifes',21,27),'score_box'),title:Game.improvedTextDesc('topMenu.store',50,70,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.shopTitle,null,{color:Game.colors.black,size:3},{color:new TGFW.Render.Color(46,47,48,0.7),xOffset:0,yOffset:10,includeStroke:true},1280),exit:Game.createExitButton(1167,67,true,Game.ShopDialog.back),products:productsButtons(),cancelSubscriptionAds:{className:TGFW.UI.Button,action:TGFW.UI.PaymentDialog.cancelSubscriptionDialogAction,y:217,x:650,width:10,layout:{bg:Game.imageDesc('',0,0),shop_price:Game.imageDesc('',0,325),article:Game.shadowtext(-7,20,'shop.product_desc',Game.fonts.shopProductPrice,1,184,424),note:Game.shadowtext(-7,280,'shop.product_note',Game.fonts.shopProductName,1,184,424),img:Game.imageDesc('',85,100,TGFW.Shape.Align.TOP_CENTER),price:Game.textDesc('',-7,23,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.shopProductPrice,null,184,424),price_2:Game.textDesc('shop.cancelSubscription',-7,338,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.languageBtn,null,184,424),cursor:Game.imageDesc('',-7,-5)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true,texture:'shop_box_cursor'},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:0.5}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}},cancelSubscriptionEndlessLives:{className:TGFW.UI.Button,action:TGFW.UI.PaymentDialog.cancelSubscriptionDialogAction,y:217,x:1020,width:10,layout:{bg:Game.imageDesc('',0,0),shop_price:Game.imageDesc('',0,325),article:Game.shadowtext(-7,20,'shop.product_desc',Game.fonts.shopProductPrice,1,184,424),note:Game.shadowtext(-7,280,'shop.product_note',Game.fonts.shopProductName,1,184,424),img:Game.imageDesc('',85,100,TGFW.Shape.Align.TOP_CENTER),price:Game.textDesc('',-7,23,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.shopProductPrice,null,184,424),price_2:Game.textDesc('shop.cancelSubscription',-7,338,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.languageBtn,null,184,424),cursor:Game.imageDesc('',-7,-5)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true,texture:'shop_box_cursor'},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:0.5}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}},cancelationInfoLayoutAds:cancelationLayoutAds(),cancelationInfoLayoutLives:cancelationLayoutLives()}};}});function cancelationLayoutLives(){return{className:TGFW.Shape.Layout,action:TGFW.UI.PaymentDialog.cancelSubscriptionDialogAction,y:217,x:1020,width:10,layout:{bg:Game.imageDesc('',0,0),shop_price:Game.imageDesc('',0,325),article:Game.shadowtext(-7,20,'shop.product_desc',Game.fonts.shopProductPrice,1,184,424),img:Game.imageDesc('',85,100,TGFW.Shape.Align.TOP_CENTER),price_2:Game.textDesc('shop.cancelationInfo',-7,338,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.languageBtn,null,184,424)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true,texture:'shop_box_cursor'},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:0.5}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}};}function cancelationLayoutAds(){return{className:TGFW.Shape.Layout,action:TGFW.UI.PaymentDialog.cancelSubscriptionDialogAction,y:217,x:650,width:10,layout:{bg:Game.imageDesc('',0,0),shop_price:Game.imageDesc('',0,325),article:Game.shadowtext(-7,20,'shop.product_desc',Game.fonts.shopProductPrice,1,184,424),img:Game.imageDesc('',85,100,TGFW.Shape.Align.TOP_CENTER),price_2:Game.textDesc('shop.cancelationInfo',-7,338,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.languageBtn,null,184,424)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true,texture:'shop_box_cursor'},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:0.5}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}};}function productsButtons(){var layout={};for(var i=0;i<6;i++){layout['product_'+(i+1)]=productBtn(i+1);}return{className:TGFW.Shape.Layout,layout:layout,y:217,x:0};}function productBtn(index,img,priceText,atricleText,noteText,bgTexture){if(img===undefined){img='';}if(priceText===undefined){priceText='';}if(atricleText===undefined){atricleText='';}if(noteText===undefined){noteText='';}if(bgTexture===undefined){bgTexture='';}var layout={};layout['bg']=Game.imageDesc('',0,0);layout['shop_price']=Game.imageDesc('',0,325);layout['article']=Game.shadowtext(-7,20,'shop.product_desc',Game.fonts.shopProductPrice,1,184,424);layout['note']=Game.shadowtext(-7,280,'shop.product_note',Game.fonts.shopProductName,1,184,424);layout['img']=Game.imageDesc('',85,100,TGFW.Shape.Align.TOP_CENTER);layout['price']=Game.textDesc('',-7,23,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.shopProductPrice,null,184,424);layout['price_2']=Game.textDesc('shop.product_price',-7,338,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.shopProductPrice,null,184,424);layout['cursor']=Game.imageDesc('',-7,-5);return{className:TGFW.UI.Button,action:TGFW.UI.PaymentDialog.buyDialogAction,layout:layout,x:(index-1)*185,width:10,layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true,texture:'shop_box_cursor'},{name:'img',className:TGFW.Animation.KeyProperty,opacity:1}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false,texture:''},{name:'img',className:TGFW.Animation.KeyProperty,opacity:0.5}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}};}}(Game||(Game={})));var Game;(function(Game){var progressRect=new TGFW.Math.Rect(413,550,456,31);Game.loadingBarX=462;Game.loadingBarY=549;Game.loadingBarW=367;Game.loadingBarMiddlePartW=Game.appDesc.texturePool['loading_bar_middle'].width;Game.loadingBarMiddleCount=Math.floor((Game.loadingBarW-Game.appDesc.texturePool['loading_bar_left'].width-Game.appDesc.texturePool['loading_bar_right'].width)/Game.loadingBarMiddlePartW);Game.appDesc.scene['loading']={className:Game.LoadingDialog,progressShapeName:'progressBar',x:0,y:0,progressRect:progressRect,layout:{back:{className:TGFW.Shape.Image,texture:'loading'},middle:middleLoading(),left:Game.imageDesc('loading_bar_left',Game.loadingBarX,Game.loadingBarY),right:Game.imageDesc('loading_bar_right',Game.loadingBarX,Game.loadingBarY),progressBar:{className:TGFW.Shape.Box,x:progressRect.getX(),y:progressRect.getY(),width:progressRect.getWidth(),height:progressRect.getHeight(),color:new TGFW.Render.Color(255,255,255,0)},copyright_etermax:Game.textDesc('loading.copyright_etermax',0,610,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,{size:24,name:'brandon_text_regular'},null,1280,40),copyright:Game.textDesc('loading.copyright',0,655,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,{size:24,name:'brandon_text_regular'},null,1280,40)}};function middleLoading(){var layout={};for(var i=0;i<Game.loadingBarMiddleCount;i++){layout['middle_'+i]=Game.imageDesc('loading_bar_middle',Game.loadingBarX+Game.loadingBarMiddlePartW,Game.loadingBarY);}var res={className:TGFW.Shape.Layout,layout:layout};return res;}}(Game||(Game={})));var Game;(function(Game){var characters={tito:{x:137,y:286},hector:{x:321,y:333},albert:{x:466,y:288},tina:{x:527,y:263},bonzo:{x:758,y:315},pop:{x:894,y:228}};var defeatCharacters={tito:{x:669,y:304},bonzo:{x:504,y:291},willy:{x:567,y:291}};Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'victory',descCreator:function(platform){return{className:Game.VictoryDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'victory',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['reward','no'],onKeyUp:{}},animationFramesDesc:{'tito_defeat':{layout:'defeatLayout',shape:'tito',timePerFrame:100,reverse:true,frames:[{texture:'Tito_Defeat00',time:1000},{texture:'Tito_Defeat01'},{texture:'Tito_Defeat02'},{texture:'Tito_Defeat03'},{texture:'Tito_Defeat04'},{texture:'Tito_Defeat05'},{texture:'Tito_Defeat06'},{texture:'Tito_Defeat07'},{texture:'Tito_Defeat08'},{texture:'Tito_Defeat09'},{texture:'Tito_Defeat10',time:300}]},'bonzo_defeat':{layout:'defeatLayout',shape:'bonzo',timePerFrame:100,reverse:false,frames:[{texture:'Bonzo_Defeat1'},{texture:'Bonzo_Defeat2'},{texture:'Bonzo_Defeat3'}]},'willy_defeat':{layout:'defeatLayout',shape:'willy',timePerFrame:100,reverse:false,frames:[{texture:'Willy_Defeat0',time:1500},{texture:'Willy_Defeat1'},{texture:'Willy_Defeat0',time:200},{texture:'Willy_Defeat1'}]},'tito':{layout:'winLayout',shape:'tito',timePerFrame:130,reverse:false,frames:[{texture:'Tito_Victory_export_12fps00'},{texture:'Tito_Victory_export_12fps01'},{texture:'Tito_Victory_export_12fps02'},{texture:'Tito_Victory_export_12fps03'},{texture:'Tito_Victory_export_12fps04'},{texture:'Tito_Victory_export_12fps00'},{texture:'Tito_Victory_export_12fps01'},{texture:'Tito_Victory_export_12fps02'},{texture:'Tito_Victory_export_12fps03'},{texture:'Tito_Victory_export_12fps04'}]},'hector':{layout:'winLayout',shape:'hector_hand',timePerFrame:80,reverse:false,frames:[{texture:'Hector_Victory_hand0'},{texture:'Hector_Victory_hand1'},{texture:'Hector_Victory_hand2'},{texture:'Hector_Victory_hand3'},{texture:'Hector_Victory_hand4'},{texture:'Hector_Victory_hand5'},{texture:'Hector_Victory_hand6'}]},'albert':{layout:'winLayout',shape:'albert',timePerFrame:100,reverse:true,frames:[{texture:'Albert_Victory00',time:1000},{texture:'Albert_Victory04'},{texture:'Albert_Victory08'},{texture:'Albert_Victory12'},{texture:'Albert_Victory16'},{texture:'Albert_Victory20'},{texture:'Albert_Victory24'},{texture:'Albert_Victory28'},{texture:'Albert_Victory32'},{texture:'Albert_Victory36'}]},'tina':{layout:'winLayout',shape:'tina',timePerFrame:150,reverse:false,frames:[{texture:'Tina_Victory00',time:1000},{texture:'Tina_Victory05'},{texture:'Tina_Victory10'},{texture:'Tina_Victory15'},{texture:'Tina_Victory20'},{texture:'Tina_Victory25'},{texture:'Tina_Victory30'},{texture:'Tina_Victory35'},{texture:'Tina_Victory40'},{texture:'Tina_Victory00'}]},'bonzo':{layout:'winLayout',shape:'bonzo_hand',timePerFrame:80,reverse:true,frames:[{texture:'Bonzo_Victory0'},{texture:'Bonzo_Victory1'},{texture:'Bonzo_Victory2'},{texture:'Bonzo_Victory3'}]},'pop':{layout:'winLayout',shape:'pop',timePerFrame:100,reverse:false,frames:[{texture:'Pop_Victory00',time:500},{texture:'Pop_Victory05'},{texture:'Pop_Victory10'},{texture:'Pop_Victory15'},{texture:'Pop_Victory20'},{texture:'Pop_Victory25'},{texture:'Pop_Victory30'},{texture:'Pop_Victory35'},{texture:'Pop_Victory40'},{texture:'Pop_Victory45'},{texture:'Pop_Victory00'}]}},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('victory_loss.victory',140,90,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1000),subTitleText:Game.textDesc('victory_loss.youEarned',0,200,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupSubTitle,null,1280),winLayout:{className:TGFW.Shape.Layout,layout:{tito:Game.imageDesc('',characters.tito.x-20,characters.tito.y-35,TGFW.Shape.Align.TOP_LEFT,0.7,0.7),hector_hand:Game.imageDesc('',characters.hector.x+1,characters.hector.y+60),hector:Game.imageDesc('',characters.hector.x,characters.hector.y),albert:Game.imageDesc('',characters.albert.x,characters.albert.y),tina:Game.imageDesc('',characters.tina.x,characters.tina.y),bonzo_hand:Game.imageDesc('',characters.bonzo.x+119,characters.bonzo.y+16),bonzo:Game.imageDesc('',characters.bonzo.x,characters.bonzo.y),pop:Game.imageDesc('',characters.pop.x,characters.pop.y)}},defeatLayout:{className:TGFW.Shape.Layout,layout:{tito:Game.imageDesc('',defeatCharacters.tito.x,defeatCharacters.tito.y),bonzo:Game.imageDesc('',defeatCharacters.bonzo.x,defeatCharacters.bonzo.y),willy:Game.imageDesc('',defeatCharacters.willy.x,defeatCharacters.willy.y)}},challengeEndLayout:{className:TGFW.Shape.Layout,layout:{resultImg:Game.imageDesc('',640,380,TGFW.Shape.Align.CENTER)}},reward:{className:TGFW.UI.Button,x:400,y:605,width:485,action:Game.VictoryDialog.reward,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('free_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('video_icon',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'victory_loss.doubleReward',y:-46,height:85,color:Game.colors.white,lineLeading:30,align:TGFW.Shape.Align.LEFT_CENTER,font:'mikado_black',size:32}},layoutClip:Game.standartButtonlayoutClip()},no:{className:TGFW.UI.Button,x:900,y:605,width:Game.appDesc.texturePool['free_button'].width,height:Game.appDesc.texturePool['free_button'].height,action:Game.VictoryDialog.no,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('free_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'victory_loss.no_thanks',y:-3,height:0,color:Game.colors.white,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,textAlign:TGFW.Shape.Align.CENTER}},layoutClip:Game.standartButtonlayoutClip()}}};}});}(Game||(Game={})));var Game;(function(Game){var data={btn:{leftPadding:180,spacing:310,vertPosition:290,width:300,height:90,shadowColor:new TGFW.Render.Color(0,0,0,0.22),shadowDY:3},backBtn:{y:107,x:1135,captionY:137},title:{y:70},bg:{y:480},tabs:{y:229,spacing:300},statsIcons:{x:400,y:430,captionY:80,spacing:130},statsTexts:{leftSpacing:135,x:350,y:530,spacing:130,lineHeight:25,iconWidth:55},gamesPlayed:{x:903,y:-210},classic:{initPosition:0},challange:{initPosition:0},powerUps:{initPosition:0},categories:[{id:'Pop',n:1,text:'statistics.categories.entertainment',color:new TGFW.Render.Color(230,89,159)},{id:'Sports',n:2,text:'statistics.categories.sports',color:new TGFW.Render.Color(244,144,34)},{id:'Science',n:3,text:'statistics.categories.science',color:new TGFW.Render.Color(70,183,104)},{id:'Geography',n:4,text:'statistics.categories.geography',color:new TGFW.Render.Color(48,115,185)},{id:'History',n:5,text:'statistics.categories.history',color:new TGFW.Render.Color(248,221,65)},{id:'Art',n:6,text:'statistics.categories.art',color:new TGFW.Render.Color(237,43,52)}]};Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'statistics',descCreator:function(platform){var _a;return{className:Game.StatisticsDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'statistics',postGameAnalyticsScreenEvent:true,semiTransparentLayer:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['classic','challange','powerUps','exit'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.StatisticsDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.StatisticsDialog.back,_a)},layout:{tbg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},bg_top:Game.boxDesc(0,0,Game.screenWidth,165,Game.colors.statsHeader),bg:Game.shopBg(),title:Game.improvedTextDesc('topMenu.statistics',0,data.title.y,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.modeBtn,null,{color:Game.colors.black,size:2},{color:new TGFW.Render.Color(0,0,0,0.34),xOffset:0,yOffset:7,includeStroke:false},1280),exit:Game.createExitButton(1167,67,true,Game.StatisticsDialog.back),classic:genTabs(data,'classic',-data.tabs.spacing,'statistics.classic',Game.StatisticsDialog.tab),challange:genTabs(data,'challange',0,'statistics.challenge',Game.StatisticsDialog.tab),powerUps:genTabs(data,'powerUps',data.tabs.spacing,'statistics.power_ups',Game.StatisticsDialog.tab),stats_bg:Game.imageDesc('stats_bg',Game.screenCenterX,data.bg.y,TGFW.Shape.Align.CENTER),statsIcons:statsIcons(data),statsclassic:genStatText(data,'classic'),statschallange:genStatText(data,'challange'),statspowerUps:genStatText(data,'powerUps')}};}});function genStatText(data,mode){var output={};output.classic={};output.challange={};output.powerUps={};output.classic['classicHeader']=Game.shadowtext(0,data.gamesPlayed.y-20,'statistics.classic',Game.fonts.statisticsTitleText,2);output.challange['challangeHeader']=Game.shadowtext(0,data.gamesPlayed.y-20,'statistics.challenge',Game.fonts.statisticsTitleText,2);output.powerUps['powerUpsHeader']=Game.shadowtext(0,data.gamesPlayed.y-20,'statistics.power_ups',Game.fonts.statisticsTitleText,2);output.classic['answered']=Game.textDesc('statistics.answered_correctly',data.statsTexts.leftSpacing,0,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsText,-10,230);output.classic['speed']=Game.textDesc('statistics.answer_speed',data.statsTexts.leftSpacing,data.statsTexts.lineHeight*2,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsText,-10,230);output.classic['gamesPlayed']=Game.textDesc('statistics.games_played_total',data.gamesPlayed.x,data.gamesPlayed.y,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsPlayedText);output.challange['games']=Game.textDesc('statistics.games_played',data.statsTexts.leftSpacing,0,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsText,-10,230);output.challange['highScore']=Game.textDesc('statistics.best_score',data.statsTexts.leftSpacing,data.statsTexts.lineHeight*2,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsText,-10,230);output.challange['speed']=Game.textDesc('statistics.answer_speed',data.statsTexts.leftSpacing,data.statsTexts.lineHeight*4,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsText,-10,230);output.challange['gamesPlayed']=Game.textDesc('statistics.games_played_total',data.gamesPlayed.x,data.gamesPlayed.y,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsPlayedText);output.powerUps['bomb_used']=Game.textDesc('statistics.bombs_used',data.statsTexts.leftSpacing+data.statsTexts.iconWidth,-35,Game.colors.darkBlue,TGFW.Shape.Align.LEFT_CENTER,Game.fonts.statisticsText,-10,200);output.powerUps['doubleUp']=Game.textDesc('statistics.doubleup_used',data.statsTexts.leftSpacing+data.statsTexts.iconWidth,data.statsTexts.lineHeight*2-35,Game.colors.darkBlue,TGFW.Shape.Align.LEFT_CENTER,Game.fonts.statisticsText,-10,180);output.powerUps['right_used']=Game.textDesc('statistics.right_used',data.statsTexts.leftSpacing+data.statsTexts.iconWidth,data.statsTexts.lineHeight*4-35,Game.colors.darkBlue,TGFW.Shape.Align.LEFT_CENTER,Game.fonts.statisticsText,-10,200);output.powerUps['gamesPlayed']=Game.textDesc('statistics.games_played_total',data.gamesPlayed.x,data.gamesPlayed.y,Game.colors.darkBlue,TGFW.Shape.Align.TOP_LEFT,Game.fonts.statisticsPlayedText);output.powerUps['bomb']=Game.imageDesc('bomb_icon',data.statsTexts.leftSpacing,data.statsTexts.lineHeight/2,TGFW.Shape.Align.LEFT_CENTER,0.8,0.8);output.powerUps['second_chance_icon']=Game.imageDesc('second_chance_icon',data.statsTexts.leftSpacing,data.statsTexts.lineHeight/2+data.statsTexts.lineHeight*2,TGFW.Shape.Align.LEFT_CENTER,0.8,0.8);output.powerUps['right_icon']=Game.imageDesc('right_icon',data.statsTexts.leftSpacing,data.statsTexts.lineHeight/2+data.statsTexts.lineHeight*4,TGFW.Shape.Align.LEFT_CENTER,0.8,0.8);for(var i=0;i<data.categories.length;i++){output.classic[data.categories[i].id+'Questins']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,0,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.classic[data.categories[i].id+'Time']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,data.statsTexts.lineHeight*2,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.challange[data.categories[i].id+'GamesPlayed']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,0,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.challange[data.categories[i].id+'HighScore']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,data.statsTexts.lineHeight*2,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.challange[data.categories[i].id+'Time']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,data.statsTexts.lineHeight*4,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.powerUps[data.categories[i].id+'Bombs']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,0,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.powerUps[data.categories[i].id+'DoubleUp']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,data.statsTexts.lineHeight*2,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);output.powerUps[data.categories[i].id+'RightAnswer']=Game.textDesc('0',data.statsTexts.x+i*data.statsTexts.spacing,data.statsTexts.lineHeight*4,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsText,null,100);}return{className:TGFW.Shape.Layout,x:data[mode].initPosition,y:data.statsTexts.y,layout:output[mode]};}function statsIcons(data){var layout={};for(var i=0;i<data.categories.length;i++){layout[data.categories[i].id]=Game.imageDesc('icon_'+(i+1),data.statsIcons.spacing*i,0,TGFW.Shape.Align.CENTER);layout[data.categories[i].id+'Header']=Game.improvedTextDesc(data.categories[i].text,data.statsIcons.spacing*i-640,data.statsIcons.captionY-80,data.categories[i].color,TGFW.Shape.Align.CENTER,Game.fonts.categoryName,null,{color:Game.colors.black,size:1},null,1280);}return{className:TGFW.Shape.Layout,layout:layout,x:data.statsIcons.x,y:data.statsIcons.y};}function genTabs(data,id,x,caption,action){var cursorX=-1;var cursorY=-2;var res={className:TGFW.UI.Button,x:Game.screenCenterX+x,y:data.tabs.y,action:action,width:200,layout:{cursor:Game.imageDesc('stats_cursor',cursorX,cursorY,TGFW.Shape.Align.TOP_CENTER),stats_tab_on:Game.imageDesc('stats_tab_on',0,0,TGFW.Shape.Align.TOP_CENTER),stats_tab_off:Game.imageDesc('stats_tab_off',0,0,TGFW.Shape.Align.TOP_CENTER),id:Game.textDesc(caption,-144,10,Game.colors.darkBlue,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticsPlayedText,null,288,50)},layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'stats_tab_off',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true},{name:'stats_tab_off',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'stats_tab_off',className:TGFW.Animation.KeyProperty,visible:true}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'stats_tab_off',className:TGFW.Animation.KeyProperty,visible:true}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED,TGFW.UI.ButtonState.CHECKED]}};return res;}}(Game||(Game={})));var Game;(function(Game){var characters={willy:{x:1030,y:341},albert:{x:907,y:413},bonzo:{x:244,y:436},pop:{x:64,y:353}};Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'statistic',descCreator:function(platform){var _a;return{className:Game.StatisticDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'statistic',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,animationFramesDesc:{'albert':{shape:'albert',timePerFrame:100,reverse:true,frames:[{texture:'Albert_Victory00',time:1000},{texture:'Albert_Victory04'},{texture:'Albert_Victory08'},{texture:'Albert_Victory12'},{texture:'Albert_Victory16'},{texture:'Albert_Victory20'},{texture:'Albert_Victory24'},{texture:'Albert_Victory28'},{texture:'Albert_Victory32'},{texture:'Albert_Victory36'}]},'bonzo':{shape:'bonzo_hand',timePerFrame:80,reverse:true,frames:[{texture:'Bonzo_Victory0'},{texture:'Bonzo_Victory1'},{texture:'Bonzo_Victory2'},{texture:'Bonzo_Victory3'}]},'pop':{shape:'pop',timePerFrame:100,reverse:false,frames:[{texture:'Pop_Victory00',time:500},{texture:'Pop_Victory05'},{texture:'Pop_Victory10'},{texture:'Pop_Victory15'},{texture:'Pop_Victory20'},{texture:'Pop_Victory25'},{texture:'Pop_Victory30'},{texture:'Pop_Victory35'},{texture:'Pop_Victory40'},{texture:'Pop_Victory45'},{texture:'Pop_Victory00'}]},'willy':{shape:'willy',timePerFrame:150,reverse:false,frames:[{texture:'Willy_Victory01',time:500},{texture:'Willy_Victory03'},{texture:'Willy_Victory05'},{texture:'Willy_Victory08'},{texture:'Willy_Victory10'},{texture:'Willy_Victory12'},{texture:'Willy_Victory15'},{texture:'Willy_Victory17'},{texture:'Willy_Victory01'}]}},containerWidth:1080,maxPlayersCount:7,maxDiagramHeight:385,maxQuestionsCount:7,diagramWidth:140,dialogWidth:1020,marginRight:30,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['default_button'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.StatisticDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.StatisticDialog.back,_a)},layout:{bg:{className:TGFW.Shape.Box,y:0,x:-TGFW.RenderManager.resolutionWidth,width:TGFW.RenderManager.resolutionWidth*2,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('partyStatistic.title',0,Game.titleY-25,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),container:diagram(),albert:Game.imageDesc('',characters.albert.x,characters.albert.y),willy:Game.imageDesc('',characters.willy.x,characters.willy.y),bonzo_hand:Game.imageDesc('',characters.bonzo.x+119,characters.bonzo.y+16),bonzo:Game.imageDesc('',characters.bonzo.x,characters.bonzo.y),pop:Game.imageDesc('',characters.pop.x,characters.pop.y),default_button:{className:TGFW.UI.Button,action:Game.StatisticDialog.back,layout:{bg:{className:TGFW.Shape.Box,width:1280,height:720}}}}};}});function diagram(x,y){if(x===undefined){x=130;}if(y===undefined){y=164;}var colorsArr=[Game.colors.yellow,Game.colors.orange,Game.colors.red,Game.colors.magenta,Game.colors.purple,Game.colors.blue,Game.colors.green];var layout={};for(var i=1;i<=colorsArr.length;i++){var item={className:TGFW.Shape.Layout,layout:{text:Game.textDesc('7/7',0,0,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticText,null,50),rect:Game.boxDesc(0,445,105,0,colorsArr[i-1],TGFW.Shape.Align.BOTTOM_CENTER),name:Game.textDesc('partyStatistic.player',0,450,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.statisticText,null,105)}};layout['item_'+i]=item;}return{className:TGFW.Shape.Layout,x:x,y:y,layout:layout};}}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'selMultiplayerGameLenght',descCreator:function(platform){var _a;return{className:Game.SelMultiplayerGameLenghtDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'selMultiplayerGameLenght',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['short','medium','long'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.SelMultiplayerGameLenghtDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.SelMultiplayerGameLenghtDialog.back,_a)},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('selectGameLength.title',0,100,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),short:Game.selMultiplayerGameLenghtButton(Game.screenCenterX-205,300,'selectGameLength.short','selectGameLength.3_questions',Game.SelMultiplayerGameLenghtDialog.playerAction,Game.colors.yellow,3),medium:Game.selMultiplayerGameLenghtButton(Game.screenCenterX,300,'selectGameLength.medium','selectGameLength.5_questions',Game.SelMultiplayerGameLenghtDialog.playerAction,Game.colors.blue,5),long:Game.selMultiplayerGameLenghtButton(Game.screenCenterX+205,300,'selectGameLength.long','selectGameLength.7_questions',Game.SelMultiplayerGameLenghtDialog.playerAction,Game.colors.magenta,7),characters:Game.imageDesc('party',Game.screenCenterX,550,TGFW.Shape.Align.CENTER)}};}});}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'playersGetReady',descCreator:function(platform){return{className:Game.PlayersGetReadyDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,semiTransparentLayer:false,name:'playersGetReady',postGameAnalyticsScreenEvent:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:[],onKeyUp:{}},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('playerGetReady.title',0,140,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),crown_remote:Game.imageDesc('',Game.screenCenterX,400,TGFW.Shape.Align.CENTER),crowncg:Game.imageDesc('',Game.screenCenterX,400,TGFW.Shape.Align.CENTER)}};}});}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'outOfLife',descCreator:function(platform){var _a;return{className:Game.OutOfLifeDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'outOfLife',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['reward','no'],onKeyUp:{onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.OutOfLifeDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.OutOfLifeDialog.back,_a)}},layout:{trnasparent_bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},bg:outOfLifesBG(130,Game.screenCenterY),back_text:Game.textDesc('outOfLifes.title',0,110,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),heart:heartLayout(510,220),reward:{className:TGFW.UI.Button,x:400,y:605,width:0,action:Game.OutOfLifeDialog.reward,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('orange_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('video_icon',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'outOfLifes.watch_ad',color:Game.colors.white,align:TGFW.Shape.Align.LEFT_CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,y:-46,height:85}},layoutClip:Game.standartButtonlayoutClip()},icon_reward:Game.imageDesc('video_icon',240,605,TGFW.Shape.Align.LEFT_CENTER),text_reward:{className:TGFW.Shape.Text,text:'outOfLifes.watch_ad',color:Game.colors.white,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,align:TGFW.Shape.Align.LEFT_CENTER,x:400,y:559,height:85},no:{className:TGFW.UI.Button,x:900,y:605,width:Game.appDesc.texturePool['green_button'].width,height:Game.appDesc.texturePool['green_button'].height,action:Game.OutOfLifeDialog.no,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),text:{width:0,className:TGFW.Shape.Text,text:'outOfLifes.no_thanks',y:-3,height:0,color:Game.colors.white,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,textAlign:TGFW.Shape.Align.CENTER}},layoutClip:Game.standartButtonlayoutClip()}}};}});function outOfLifesBG(x,y){var layout={};layout['left']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);for(var i=1;i<13;i++){layout['part'+i]=Game.imageDesc('',80*i,0,TGFW.Shape.Align.CENTER);}layout['right']=Game.imageDesc('',1040,0,TGFW.Shape.Align.CENTER);return{className:TGFW.Shape.Layout,x:x,y:y,width:1040,layout:layout};}function heartLayout(x,y){return{className:TGFW.Shape.Layout,x:x,y:y,width:1040,layout:{body:Game.imageDesc('',0,0),tear:Game.imageDesc('',100,120,TGFW.Shape.Align.CENTER),brows:Game.imageDesc('',131,55,TGFW.Shape.Align.CENTER),eyes:Game.imageDesc('',129,99,TGFW.Shape.Align.CENTER),mouth:Game.imageDesc('',131,141,TGFW.Shape.Align.CENTER)}};}}(Game||(Game={})));var Game;(function(Game){var y_title=125;var y_name_start=y_title+90;var name_dy=50;var y_start_game=600;Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'selNumOfPlayers',descCreator:function(platform){var _a,_b;if(TGFW.sdk().getPlatformName()==TGH5.Platforms.AIRCONSOLE){return{className:Game.SelNumOfPlayersDialog,x:0,y:0,isPopup:true,semiTransparentLayer:false,name:'selNumOfPlayers',postGameAnalyticsScreenEvent:true,animationFramesDesc:{'hand':{timePerFrame:100,reverse:true,frames:[{texture:'crown_waves_hand0'},{texture:'crown_waves_hand3'},{texture:'crown_waves_hand5'}]},'willy':{timePerFrame:150,reverse:false,frames:[{texture:'Willy_Victory01',time:500},{texture:'Willy_Victory03'},{texture:'Willy_Victory05'},{texture:'Willy_Victory08'},{texture:'Willy_Victory10'},{texture:'Willy_Victory12'},{texture:'Willy_Victory15'},{texture:'Willy_Victory17'},{texture:'Willy_Victory01'}]}},navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['startGameBtn'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.SelNumOfPlayersDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.SelNumOfPlayersDialog.back,_a)},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('selectNumOfPlayers.title',0,y_title,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),player_1:Game.textDesc('1.Yellow',0,y_name_start,Game.colors.color_p1,TGFW.Shape.Align.CENTER,Game.fonts.playerWaitingList,null,1280),player_2:Game.textDesc('2.Orange',0,y_name_start+1*name_dy,Game.colors.color_p2,TGFW.Shape.Align.CENTER,Game.fonts.playerWaitingList,null,1280),player_3:Game.textDesc('3.Red',0,y_name_start+2*name_dy,Game.colors.color_p3,TGFW.Shape.Align.CENTER,Game.fonts.playerWaitingList,null,1280),player_4:Game.textDesc('4.Pink',0,y_name_start+3*name_dy,Game.colors.color_p4,TGFW.Shape.Align.CENTER,Game.fonts.playerWaitingList,null,1280),player_5:Game.textDesc('5.Violet',0,y_name_start+4*name_dy,Game.colors.color_p5,TGFW.Shape.Align.CENTER,Game.fonts.playerWaitingList,null,1280),crown:Game.imageDesc('',180,510,TGFW.Shape.Align.BOTTOM_CENTER,0.75,0.75),crown_waves_hand:Game.imageDesc('',94,370,TGFW.Shape.Align.TOP_CENTER,0.75,0.75),crowncg:Game.imageDesc('',180,510,TGFW.Shape.Align.BOTTOM_CENTER,0.75,0.75),willy:Game.imageDesc('',Game.screenWidth-180,520,TGFW.Shape.Align.BOTTOM_CENTER),startGameBtn:{className:TGFW.UI.Button,x:Game.screenCenterX,y:y_start_game,action:Game.SelNumOfPlayersDialog.startMultiPlayerGame,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,text:'selectNumOfPlayers.startGameBtn.startGame',x:-242.5,y:-57,color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:36,textAlign:TGFW.Shape.Align.CENTER,width:485,height:105}},layoutClip:Game.standartButtonlayoutClip()}}};}else return{className:Game.SelNumOfPlayersDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,semiTransparentLayer:false,name:'selNumOfPlayers',postGameAnalyticsScreenEvent:true,animationFramesDesc:{'hand':{timePerFrame:100,reverse:true,frames:[{texture:'crown_waves_hand0'},{texture:'crown_waves_hand3'},{texture:'crown_waves_hand5'}]},'willy':{timePerFrame:150,reverse:false,frames:[{texture:'Willy_Victory01',time:500},{texture:'Willy_Victory03'},{texture:'Willy_Victory05'},{texture:'Willy_Victory08'},{texture:'Willy_Victory10'},{texture:'Willy_Victory12'},{texture:'Willy_Victory15'},{texture:'Willy_Victory17'},{texture:'Willy_Victory01'}]}},navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['twoPlayers','threePlayers','fourPlayers','fivePlayers','sixPlayers','sevenPlayers'],onKeyUp:(_b={},_b[TGH5.KeyNames.KEY_BACKSPACE]=Game.SelNumOfPlayersDialog.back,_b[TGH5.KeyNames.KEY_EXIT]=Game.SelNumOfPlayersDialog.back,_b)},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('selectNumOfPlayers.title',0,125,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),twoPlayers:Game.selNumOfPlayersButton(Game.screenCenterX-205,280,'2',Game.colors.playerNumbers['2'],Game.SelNumOfPlayersDialog.twoPlayers,2),threePlayers:Game.selNumOfPlayersButton(Game.screenCenterX,280,'3',Game.colors.playerNumbers['3'],Game.SelNumOfPlayersDialog.threePlayers,3),fourPlayers:Game.selNumOfPlayersButton(Game.screenCenterX+205,280,'4',Game.colors.playerNumbers['4'],Game.SelNumOfPlayersDialog.fourPlayers,4),fivePlayers:Game.selNumOfPlayersButton(Game.screenCenterX-205,485,'5',Game.colors.playerNumbers['5'],Game.SelNumOfPlayersDialog.fivePlayers,5),sixPlayers:Game.selNumOfPlayersButton(Game.screenCenterX,485,'6',Game.colors.playerNumbers['6'],Game.SelNumOfPlayersDialog.sixPlayers,6),sevenPlayers:Game.selNumOfPlayersButton(Game.screenCenterX+205,485,'7',Game.colors.playerNumbers['7'],Game.SelNumOfPlayersDialog.sevenPlayers,7),crown:Game.imageDesc('',180,510,TGFW.Shape.Align.BOTTOM_CENTER,0.75,0.75),crown_waves_hand:Game.imageDesc('',94,370,TGFW.Shape.Align.TOP_CENTER,0.75,0.75),crowncg:Game.imageDesc('',180,510,TGFW.Shape.Align.BOTTOM_CENTER,0.75,0.75),willy:Game.imageDesc('',Game.screenWidth-180,520,TGFW.Shape.Align.BOTTOM_CENTER)}};}});}(Game||(Game={})));var Game;(function(Game){var _a,_b;var userNameShapeWidth=700;var buttonBackgroundScale=1;var promoW=700,promoH=106,promoX=Game.screenWidth/2-promoW/2,promoY=Game.screenHeight-promoH-10;Game.appDesc.scene['mainMenu']={className:Game.MainMenuDialog,x:0,y:0,isPopup:false,name:'mainMenu',postGameAnalyticsScreenEvent:true,profilesButtonName:'profileButton',semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['classic','challenge','partyMode','statisticsButton','storeButton','aboutButton','languageButton','exitButton'],looped:false,onKeyDown:(_a={},_a[TGH5.KeyNames.KEY_DOWN]={},_a[TGH5.KeyNames.KEY_UP]={},_a[TGH5.KeyNames.KEY_RIGHT]={'classic':'challenge','challenge':'partyMode'},_a[TGH5.KeyNames.KEY_LEFT]={'partyMode':'challenge','challenge':'classic'},_a),onKeyUp:(_b={},_b[TGH5.KeyNames.KEY_I]=Game.MainMenuDialog.aboutAction,_b[TGH5.KeyNames.KEY_INFO]=Game.MainMenuDialog.aboutAction,_b)},layout:{background:Game.imageDesc('background'),animatedTree:Game.createTreeLayout(100,270),ship:Game.createShipLayout(980,169),cancerBody:Game.createCancerLayout(Game.screenWidth,Game.screenHeight),modeBg:Game.imageDesc(''),coinsContainer:Game.createContainerLayout(98,71,215,87,Game.coinsLayout('coins',33,23),'score_box'),lifesContainer:Game.createContainerLayout(340,71,215,87,Game.lifesLayout('lifes',21,27),'score_box'),storeButton:{x:755,y:67,className:TGFW.UI.Button,width:77,height:90,action:Game.MainMenuDialog.shopAction,layout:{background:Game.imageDesc('storeIcon',0,0,TGFW.Shape.Align.TOP_CENTER,0,0),cursor:Game.imageDesc('smal_mm_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER,0,0)},layoutClip:Game.standartButtonlayoutClip()},statisticsButton:{x:858,y:67,className:TGFW.UI.Button,width:77,height:90,action:Game.MainMenuDialog.statisticsAction,layout:{background:Game.imageDesc('statisticIcon',0,0,TGFW.Shape.Align.TOP_CENTER,0,0),cursor:Game.imageDesc('smal_mm_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER,0,0)},layoutClip:Game.standartButtonlayoutClip()},aboutButton:{x:961,y:67,width:77,height:90,className:TGFW.UI.Button,action:Game.MainMenuDialog.aboutAction,layout:{background:Game.imageDesc('aboutIcon',0,0,TGFW.Shape.Align.TOP_CENTER,0,0),cursor:Game.imageDesc('smal_mm_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER,0,0)},layoutClip:Game.standartButtonlayoutClip()},languageButton:{x:1064,y:67,className:TGFW.UI.Button,width:77,height:90,action:Game.MainMenuDialog.changeLanguageAction,layout:{background:Game.imageDesc('lang_icon',0,0,TGFW.Shape.Align.TOP_CENTER,0,0),cursor:Game.imageDesc('smal_mm_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER,0,0),languageFlag:Game.imageDesc('flag1',0,23,TGFW.Shape.Align.TOP_CENTER,0,0)},layoutClip:Game.standartButtonlayoutClip()},promoButton:promoButton(promoX,promoY,Game.MainMenuDialog.promoAction),exitButton:Game.createExitButton(1167,67,false,Game.MainMenuDialog.exitAction,true),logo:Game.imageDesc('trivia_logo',Game.screenCenterX,307,TGFW.Shape.Align.CENTER,0,0),classic:Game.mainMenuModeButton(270,417,Game.modeButtonText('modes.classic',-172,-35,Game.fonts.modeBtn,344,92),Game.MainMenuDialog.playClassic,340,92),challenge:Game.mainMenuModeButton(640,417,Game.modeButtonText('modes.challenge',-172),Game.MainMenuDialog.playChallenge,340,92),partyMode:Game.mainMenuModeButton(1010,417,Game.modeButtonText('modes.party',-172),Game.MainMenuDialog.playPartyMode,340,92),messageContainer:Game.createContainerLayout(199,474,882,79,Game.modeDescText(15,-14,882,79)),shopBackground:Game.shopBackground()}};function promoButton(x,y,action){var cursorX=-10;var cursorY=-10;return{className:TGFW.UI.Button,x:x,y:y,width:promoW,height:promoH,action:action,layout:{cursor:{className:TGFW.Shape.Box,width:0,height:0,x:-5,y:-5,color:new TGFW.Render.Color(255,255,255)},promoImage:Game.imageDesc('',0,0)},layoutClip:{frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED],clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true}]]}]}}};}Game.promoButton=promoButton;}(Game||(Game={})));var Game;(function(Game){var _a;Game.appDesc.scene['wheel']={className:Game.wheelDialog,x:0,y:0,isPopup:true,name:'wheel',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['spin_btn','exit'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.wheelDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.wheelDialog.back,_a)},layout:{classic:Game.modeButtonText('classic',0,85,Game.fonts.wheelModeName,1280),qCount:Game.improvedTextDesc('',865,95,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.questionsCount,null,{color:Game.colors.black,size:2},null,100),exit:Game.createExitButton(1167,67,true,Game.wheelDialog.back),roulette:Game.imageDesc('',Game.screenCenterX,420,TGFW.Shape.Align.CENTER),spin_btn:{className:TGFW.UI.Button,x:Game.screenCenterX,y:415,width:0,height:0,action:Game.wheelDialog.spinAction,layout:{bg:Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER),cursor:Game.imageDesc('',0,5,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,x:-105,y:-98,text:'wheel.spin',color:Game.colors.spinBtn,align:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,textAlign:TGFW.Shape.Align.CENTER,height:192,width:210}},layoutClip:Game.standartButtonlayoutClip()}}};}(Game||(Game={})));var Game;(function(Game){var _a;Game.appDesc.scene['noCoins']={className:Game.NoCoinsDialog,x:0,y:0,isPopup:true,name:'noCoins',postGameAnalyticsScreenEvent:true,semiTransparentLayer:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['yes','no'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=TGFW.UI.Dialog.cancelAction,_a[TGH5.KeyNames.KEY_EXIT]=TGFW.UI.Dialog.cancelAction,_a)},layout:{back:Game.popupDialogBackground(1088,370),title:Game.textDesc('noCoins.question',0,260,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitle,null,1280),yes:{className:TGFW.UI.Button,x:400,y:430,width:0,action:TGFW.UI.Dialog.yesAction,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('orange_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('coin_icon',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'noCoins.get_more',color:Game.colors.white,align:TGFW.Shape.Align.LEFT_CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,width:400,y:-45.5,height:85}},layoutClip:Game.standartButtonlayoutClip()},no:{className:TGFW.UI.Button,x:905,y:430,width:Game.appDesc.texturePool['green_button'].width,height:Game.appDesc.texturePool['green_button'].height,action:TGFW.UI.Dialog.noAction,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'noCoins.no_thanks',color:Game.colors.white,textAlign:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,y:-46,height:85}},layoutClip:Game.standartButtonlayoutClip()}}};}(Game||(Game={})));var Game;(function(Game){Game.appDesc.scene['noAds']={className:Game.NoAdsDialog,x:0,y:0,isPopup:true,semiTransparentLayer:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:[],onKeyUp:{}},layout:{back_1:Game.boxDesc(640,360,694,164,Game.colors.black,TGFW.Shape.Align.CENTER),back_2:Game.boxDesc(640,360,680,150,new TGFW.Render.Color(77,77,77),TGFW.Shape.Align.CENTER),text:Game.textDesc('noAds.description',640,365,Game.colors.white,TGFW.Shape.Align.CENTER)}};}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'spinAgain',descCreator:function(platform){var layout;layout={bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},categoryName:{x:0,y:110,width:1280,className:TGFW.Shape.Text,text:'',color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.popupTitleSmall.name,size:Game.fonts.popupTitleSmall.size,textAlign:TGFW.Shape.Align.CENTER},characterName:{x:0,y:450,className:TGFW.Shape.Text,width:1280,text:'',color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.characterName.name,size:Game.fonts.characterName.size,textAlign:TGFW.Shape.Align.CENTER},characterImg:Game.imageDesc('',Game.screenCenterX,400,TGFW.Shape.Align.BOTTOM_CENTER),reward:extraSpinButton(400,605,'spinAgain.extraSpin',Game.SpinAgainDialog.reward),no:playGreenButton(900,605,'spinAgain.play',Game.SpinAgainDialog.play)};return{className:Game.SpinAgainDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,semiTransparentLayer:false,name:'spinAgain',postGameAnalyticsScreenEvent:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['reward','no'],onKeyUp:{}},animationFramesDesc:{'history':{shape:'characterImg',timePerFrame:80,reverse:false,frames:[{texture:'history_category12fps00',time:640},{texture:'history_category12fps01'},{texture:'history_category12fps02'},{texture:'history_category12fps03'},{texture:'history_category12fps04'},{texture:'history_category12fps05'},{texture:'history_category12fps06'},{texture:'history_category12fps07'},{texture:'history_category12fps08'},{texture:'history_category12fps09'},{texture:'history_category12fps10'},{texture:'history_category12fps11'},{texture:'history_category12fpsA0'},{texture:'history_category12fpsA1'},{texture:'history_category12fpsA2'},{texture:'history_category12fpsA3'},{texture:'history_category12fpsA4'},{texture:'history_category12fpsA5'},{texture:'history_category12fpsA6'},{texture:'history_category12fpsA0'},{texture:'history_category12fpsA1'},{texture:'history_category12fpsA2'},{texture:'history_category12fpsA3'},{texture:'history_category12fpsA4'},{texture:'history_category12fpsA5'},{texture:'history_category12fpsA6'},{texture:'history_category12fpsA0'},{texture:'history_category12fpsA1'},{texture:'history_category12fpsA2'},{texture:'history_category12fpsA3'},{texture:'history_category12fpsA4'},{texture:'history_category12fpsA5'},{texture:'history_category12fpsA6'},{texture:'history_category12fpsA0',time:480},{texture:'history_category12fps_blink0',time:160},{texture:'history_category12fpsA0',time:480},{texture:'history_category12fps_blink0',time:160},{texture:'history_category12fps11'},{texture:'history_category12fps10'},{texture:'history_category12fps09'},{texture:'history_category12fps08'},{texture:'history_category12fps07'},{texture:'history_category12fps06'},{texture:'history_category12fps05'},{texture:'history_category12fps04'},{texture:'history_category12fps03'},{texture:'history_category12fps02'},{texture:'history_category12fps01'},{texture:'history_category12fps00'}]},'sports':{shape:'characterImg',timePerFrame:100,reverse:false,frames:[{texture:'sports_categoryP10',time:200},{texture:'sports_categoryP10'},{texture:'sports_categoryP11'},{texture:'sports_categoryP12'},{texture:'sports_categoryP13'},{texture:'sports_categoryP12'},{texture:'sports_categoryP11'},{texture:'sports_categoryP10'},{texture:'sports_categoryP11'},{texture:'sports_categoryP12'},{texture:'sports_categoryP13'},{texture:'sports_categoryP12'},{texture:'sports_categoryP11'},{texture:'sports_categoryP10'},{texture:'sports_categoryP11'},{texture:'sports_categoryP12'},{texture:'sports_categoryP13'},{texture:'sports_categoryP205'},{texture:'sports_categoryP206'},{texture:'sports_categoryP207'},{texture:'sports_categoryP208'},{texture:'sports_categoryP209'},{texture:'sports_categoryP210'},{texture:'sports_categoryP211'}]},'entertainment':{shape:'characterImg',timePerFrame:100,reverse:false,frames:[{texture:'movies_category12fps00',time:800},{texture:'movies_category12fps00'},{texture:'movies_category12fps01'},{texture:'movies_category12fps02'},{texture:'movies_category12fps03'},{texture:'movies_category12fps04'},{texture:'movies_category12fps03'},{texture:'movies_category12fps02'},{texture:'movies_category12fps03'},{texture:'movies_category12fps04'},{texture:'movies_category12fps05'},{texture:'movies_category12fps06'},{texture:'movies_category12fps07'},{texture:'movies_category12fps08'},{texture:'movies_category12fps09'},{texture:'movies_category12fps10'},{texture:'movies_category12fps11'},{texture:'movies_category12fps12'},{texture:'movies_category12fps13'},{texture:'movies_category12fps14'},{texture:'movies_category12fps15'},{texture:'movies_category12fps16'},{texture:'movies_category12fps17'},{texture:'movies_category12fps18'},{texture:'movies_category12fps19'},{texture:'movies_category12fps20'},{texture:'movies_category12fps21'},{texture:'movies_category12fps22'},{texture:'movies_category12fps23'},{texture:'movies_category12fps24'},{texture:'movies_category12fps25'},{texture:'movies_category12fps26'},{texture:'movies_category12fps27'}]},'art':{shape:'characterImg',timePerFrame:80,reverse:false,frames:[{texture:'art_category12fps0',time:640},{texture:'art_category12fps3'},{texture:'art_category12fps4'},{texture:'art_category12fps5'},{texture:'art_category12fps6'},{texture:'art_category12fps7',time:480},{texture:'art_category12fps_blink',time:160},{texture:'art_category12fps7',time:480},{texture:'art_category12fps_blink',time:160},{texture:'art_category12fps7',time:480},{texture:'art_category12fps_skull_blink',time:160},{texture:'art_category12fps7',time:480},{texture:'art_category12fps_skull_blink',time:160},{texture:'art_category12fps7'},{texture:'art_category12fps6'},{texture:'art_category12fps5'},{texture:'art_category12fps4'},{texture:'art_category12fps3'},{texture:'art_category12fps0',time:800}]},'geography':{shape:'characterImg',timePerFrame:150,reverse:false,frames:[{texture:'Tito_Victory_export_12fps00'},{texture:'Tito_Victory_export_12fps01'},{texture:'Tito_Victory_export_12fps02'},{texture:'Tito_Victory_export_12fps03'},{texture:'Tito_Victory_export_12fps04'}]},'science':{shape:'characterImg',timePerFrame:100,reverse:false,frames:[{texture:'science_category12fps0'},{texture:'science_category12fps1'},{texture:'science_category12fps2'},{texture:'science_category12fps3'},{texture:'science_category12fps4'},{texture:'science_category12fps5'},{texture:'science_category12fps6'},{texture:'science_category12fps7'},{texture:'science_category12fps8'},{texture:'science_category12fpsA0'},{texture:'science_category12fpsA1'},{texture:'science_category12fpsA2'},{texture:'science_category12fpsA3'},{texture:'science_category12fpsA4'},{texture:'science_category12fpsA5'},{texture:'science_category12fpsA6'},{texture:'science_category12fpsA7',time:600},{texture:'science_category12fps_blink0',time:200},{texture:'science_category12fpsA7',time:600},{texture:'science_category12fps_blink0',time:200},{texture:'science_category12fpsA7',time:600},{texture:'science_category12fps8'},{texture:'science_category12fps7'},{texture:'science_category12fps6'},{texture:'science_category12fps5'},{texture:'science_category12fps4'},{texture:'science_category12fps3'},{texture:'science_category12fps2'},{texture:'science_category12fps1'},{texture:'science_category12fps0',time:700}]}},layout:layout};}});function extraSpinButton(x,y,text,action){return{className:TGFW.UI.Button,x:x,y:y,action:action,width:0,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('orange_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('video_icon',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:text,color:Game.colors.white,align:TGFW.Shape.Align.LEFT_CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,width:400,y:-45.5,height:85}},layoutClip:Game.standartButtonlayoutClip()};}Game.extraSpinButton=extraSpinButton;function playGreenButton(x,y,text,action){return{className:TGFW.UI.Button,x:x,y:y,action:action,width:0,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('play_icon',-160,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:text,color:Game.colors.white,align:TGFW.Shape.Align.LEFT_CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,width:400,y:-45.5,height:85}},layoutClip:Game.standartButtonlayoutClip()};}Game.playGreenButton=playGreenButton;}(Game||(Game={})));var Game;(function(Game){var _a,_b;Game.appDesc.scene['question']={className:Game.QuestionDialog,x:0,y:0,name:'question',postGameAnalyticsScreenEvent:true,isPopup:true,navigation:{className:TGFW.UI.Navigation,buttonNames:['answer1','answer2','answer3','answer4','bomb_powerup','doub_powerup','righ_powerup'],onKeyDown:(_a={},_a[TGH5.KeyNames.KEY_RIGHT]={'answer1':'answer2','answer3':'answer4','bomb_powerup':'doub_powerup','doub_powerup':'righ_powerup'},_a[TGH5.KeyNames.KEY_UP]={'bomb_powerup':'answer3','righ_powerup':'answer4','doub_powerup':'answer3','answer3':'answer1','answer4':'answer2'},_a[TGH5.KeyNames.KEY_DOWN]={'answer1':'answer3','answer2':'answer4','answer3':'bomb_powerup','answer4':'righ_powerup'},_a[TGH5.KeyNames.KEY_LEFT]={'answer4':'answer3','answer2':'answer1','righ_powerup':'doub_powerup','doub_powerup':'bomb_powerup'},_a),onKeyUp:(_b={},_b[TGH5.KeyNames.KEY_BACKSPACE]=Game.QuestionDialog.onBack,_b[TGH5.KeyNames.KEY_EXIT]=Game.QuestionDialog.onBack,_b)},layout:{top_bg:Game.imageDesc(''),coins_icon:Game.imageDesc('coin_icon',249,91),coins:Game.textDesc('SOME TEXT',300,100,Game.colors.white,TGFW.Shape.Align.TOP_LEFT,Game.fonts.questionCoins),category_icon:Game.imageDesc('',85,35,TGFW.Shape.Align.TOP_LEFT,0.9,0.9),category_name:Game.textDesc('',0,85,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.questionTitle,null,1280),player_count:Game.textDesc('P#{{player}}',840,85,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.questionTitle,null,100),questions_count:Game.textDesc('',950,85,Game.colors.white,TGFW.Shape.Align.TOP_LEFT,Game.fonts.questionTitle,null,200),timerLayout:timerLayout(1127,92),question_box:Game.imageDesc('quastion_box',181,175),question_text:Game.textDesc('',195,170,Game.colors.textColor,TGFW.Shape.Align.CENTER,Game.fonts.questionText,null,885,190),answer1:answerButton(51,388,Game.QuestionDialog.onAnswerAction),answer2:answerButton(660,388,Game.QuestionDialog.onAnswerAction),answer3:answerButton(51,500,Game.QuestionDialog.onAnswerAction),answer4:answerButton(660,500,Game.QuestionDialog.onAnswerAction),bomb_powerup:powerUpLayout(213,600,'question.bomb','bomb_icon',Game.QuestionDialog.powerUpsBomb),doub_powerup:powerUpLayout(639,600,'question.double_chance','second_chance_icon',Game.QuestionDialog.powerUpsDoubleChance),righ_powerup:powerUpLayout(1065,600,'question.right_answer','right_icon',Game.QuestionDialog.powerUpsRightUnswer),result_msg:resultMessageText(640,270)}};function resultMessageText(x,y){var _color=Game.colors.green;var _font=Game.fonts.questionResult;var _stroke={color:Game.colors.black,size:2};return Game.improvedTextDesc('resultMessageText',0,y-30,_color,TGFW.Shape.Align.TOP_CENTER,_font,null,_stroke,null,1280);}function powerUpLayout(x,y,name,icon,action){var layout={};var dy=0;if(icon==='bomb_icon')dy=5;layout['bg']=Game.imageDesc('pa_bg',0,0,TGFW.Shape.Align.TOP_CENTER);layout['cursor']=Game.imageDesc('pa_cursor',0,-6,TGFW.Shape.Align.TOP_CENTER);layout['name']=Game.improvedTextDesc(name,-95,-3,Game.colors.white,TGFW.Shape.Align.LEFT_CENTER,Game.fonts.questionPowerUpName,null,{color:Game.colors.black,size:1},{color:new TGFW.Render.Color(0,99,84),xOffset:0,yOffset:4,includeStroke:false},180,90);layout['powerup_icon']=Game.imageDesc(icon,-130,37+dy,TGFW.Shape.Align.CENTER);layout['coin_icon']=Game.imageDesc('coin_shadowed',90,46,TGFW.Shape.Align.CENTER);layout['price']=Game.improvedTextDesc('150',115,26,Game.colors.white,TGFW.Shape.Align.TOP_LEFT,Game.fonts.questionDialogPrice,null,{color:Game.colors.black,size:1},{color:new TGFW.Render.Color(46,47,48,0.52),xOffset:0,yOffset:4,includeStroke:false},75);return{className:TGFW.UI.Button,x:x,y:y,width:20,height:73,layout:layout,action:action,layoutClip:{clip:{className:TGFW.Animation.Clip,timeLines:[{className:TGFW.Animation.SerialTimeLine,frames:[[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false},{name:'bg',className:TGFW.Animation.KeyProperty,texture:'pa_bg'}],[{name:'cursor',className:TGFW.Animation.KeyProperty,visible:true},{name:'bg',className:TGFW.Animation.KeyProperty,texture:'pa_bg'}],[{name:'bg',className:TGFW.Animation.KeyProperty,texture:'pa_bg_disabled'},{name:'cursor',className:TGFW.Animation.KeyProperty,visible:false}]]}]},frameStates:[TGFW.UI.ButtonState.REGULAR,TGFW.UI.ButtonState.FOCUSED,TGFW.UI.ButtonState.DISABLED]}};}function answerButton(x,y,action){var width=578;var height=92;var offsetX=5;var offsetY=5;return{className:TGFW.UI.Button,x:x,y:y,width:20,height:20,action:action,captionShapeName:'text',layout:{cursor:Game.imageDesc('q_button_cursor'),back:Game.imageDesc('q_button',offsetX,offsetY),text:Game.textDesc('',0,-3,Game.colors.textColor,TGFW.Shape.Align.CENTER,Game.fonts.questionText,null,width,height)},layoutClip:Game.standartButtonlayoutClip()};}function timerLayout(x,y){var layout={};layout['timer_icon']=Game.imageDesc('',0,-5,TGFW.Shape.Align.CENTER);layout['time_bg']=Game.imageDesc('',0,-5,TGFW.Shape.Align.CENTER);layout['timer_part_4']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);layout['timer_part_1_bg']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);layout['timer_part_3']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);layout['timer_part_2']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);layout['timer_part_1']=Game.imageDesc('',0,0,TGFW.Shape.Align.CENTER);layout['timer_top']=Game.imageDesc('',0,-5,TGFW.Shape.Align.CENTER);layout['text']=Game.improvedTextDesc('0',-51.5,-51.5,Game.colors.white,TGFW.Shape.Align.CENTER,Game.fonts.questionTimer,null,{color:Game.colors.textColor,size:2},null,103);return{className:TGFW.Shape.Layout,layout:layout,x:x,y:y};}}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'selectCategory',descCreator:function(platform){var _a;return{className:Game.SelectCategoryDialog,x:Game.app().isLowEnd()?0:1280,y:0,name:'selectCategory',postGameAnalyticsScreenEvent:true,isPopup:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['entertainment','art','sports','history','science','geography'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.SelectCategoryDialog.back,_a[TGH5.KeyNames.KEY_EXIT]=Game.SelectCategoryDialog.back,_a)},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},title:Game.textDesc('selectCategory.pickCategory',0,125,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),entertainment:Game.selCategoryButton(Game.screenCenterX-205,280,'','',Game.SelectCategoryDialog.entertainment,'entertainment'),art:Game.selCategoryButton(Game.screenCenterX,280,'','',Game.SelectCategoryDialog.art,'art'),sports:Game.selCategoryButton(Game.screenCenterX+205,280,'','',Game.SelectCategoryDialog.sports,'sports'),history:Game.selCategoryButton(Game.screenCenterX-205,485,'','',Game.SelectCategoryDialog.history,'history'),science:Game.selCategoryButton(Game.screenCenterX,485,'','',Game.SelectCategoryDialog.science,'science'),geography:Game.selCategoryButton(Game.screenCenterX+205,485,'','',Game.SelectCategoryDialog.geography,'geography')}};}});}(Game||(Game={})));var Game;(function(Game){Game.appDesc.deferedDescs.push({descOwner:Game.appDesc.scene,descName:'anotherChance',descCreator:function(platform){return{className:Game.AnotherChanceDialog,x:Game.app().isLowEnd()?0:1280,y:0,isPopup:true,name:'anotherChance',postGameAnalyticsScreenEvent:true,semiTransparentLayer:false,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['reward','no'],onKeyUp:{}},animationFramesDesc:{'hand':{shape:'hand',timePerFrame:100,reverse:true,frames:[{texture:'hand_waves1'},{texture:'hand_waves2'},{texture:'hand_waves3'},{texture:'hand_waves4'},{texture:'hand_waves5'},{texture:'hand_waves6'}]},'bonzo':{shape:'bonzo_eyes',timePerFrame:100,reverse:false,frames:[{texture:'bonzo_eyes_open',time:1500},{texture:'bonzo_eyes_closed'},{texture:'bonzo_eyes_open'}]},'pop':{shape:'pop_eyes',timePerFrame:100,reverse:false,frames:[{texture:'pop_eyes_open',time:1200},{texture:'pop_eyes_closed'},{texture:'pop_eyes_open'}]},'albert':{shape:'albert_eyes',timePerFrame:100,reverse:false,frames:[{texture:'albert_eyes_open',time:1300},{texture:'albert_eyes_closed'},{texture:'albert_eyes_open'}]},'tina':{shape:'tina_eyes',timePerFrame:100,reverse:false,frames:[{texture:'tina_eyes_open',time:1700},{texture:'tina_eyes_closed'},{texture:'tina_eyes_open'}]},'tito':{shape:'tito_eyes',timePerFrame:100,reverse:false,frames:[{texture:'tito_eyes_open',time:1500},{texture:'tito_eyes_closed'},{texture:'tito_eyes_open'}]}},layout:{bg:{className:TGFW.Shape.Box,y:0,x:0,width:TGFW.RenderManager.resolutionWidth,height:TGFW.RenderManager.resolutionHeight,color:new TGFW.Render.Color(0,0,0,0.7)},question:Game.textDesc('anotherChance.title',0,85,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitleSmall,null,1280),next_question_msg:Game.textDesc('anotherChance.subTitle',0,160,Game.colors.white,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupSubTitle,null,1280),img:Game.imageDesc('',Game.screenCenterX,370,TGFW.Shape.Align.CENTER),bonzo_eyes:Game.imageDesc('',439,294,TGFW.Shape.Align.CENTER),pop_eyes:Game.imageDesc('',514,301,TGFW.Shape.Align.CENTER),albert_eyes:Game.imageDesc('',600,298,TGFW.Shape.Align.CENTER),tina_eyes:Game.imageDesc('',750,305,TGFW.Shape.Align.CENTER),tito_eyes:Game.imageDesc('',826,301,TGFW.Shape.Align.CENTER),hand:Game.imageDesc('',660,293,TGFW.Shape.Align.CENTER),question_text:Game.textDesc('',205,300,Game.colors.textColor,TGFW.Shape.Align.CENTER,Game.fonts.popupSubTitle,null,885,190),reward:{className:TGFW.UI.Button,x:400,y:605,width:0,action:Game.AnotherChanceDialog.reward,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('free_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('video_icon',0,-3,TGFW.Shape.Align.LEFT_CENTER),text:{className:TGFW.Shape.Text,text:'anotherChance.free',color:Game.colors.white,align:TGFW.Shape.Align.LEFT_CENTER,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,y:-46,height:85}},layoutClip:Game.standartButtonlayoutClip()},no:{className:TGFW.UI.Button,x:900,y:605,width:Game.appDesc.texturePool['green_button'].width,height:Game.appDesc.texturePool['green_button'].height,action:Game.AnotherChanceDialog.no,layout:{cursor:Game.imageDesc('white_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),icon:Game.imageDesc('',0,-3,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,text:'anotherChance.no_thanks',y:-3,height:0,color:Game.colors.white,font:Game.fonts.spinBtn.name,size:Game.fonts.spinBtn.size,textAlign:TGFW.Shape.Align.CENTER}},layoutClip:Game.standartButtonlayoutClip()}}};}});}(Game||(Game={})));var Game;(function(Game){var _a;Game.appDesc.scene['about']={className:Game.AboutDialog,x:0,y:0,isPopup:true,name:'about',postGameAnalyticsScreenEvent:true,semiTransparentLayer:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['ok'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=Game.AboutDialog.hide,_a[TGH5.KeyNames.KEY_EXIT]=Game.AboutDialog.hide,_a)},layout:{back:Game.popupDialogBackground(1170,620),title:Game.textDesc('about.title',0,75,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitle,null,1280),textLine1:Game.textDesc('about.info',280,145,Game.colors.textColor,TGFW.Shape.Align.TOP_LEFT,Game.fonts.popupRegular),textLine2:Game.textDesc('about.support',280,214,Game.colors.textColor,TGFW.Shape.Align.TOP_LEFT,Game.fonts.popupRegular),textLine3:Game.textDesc('about.terms',280,254,Game.colors.textColor,TGFW.Shape.Align.TOP_LEFT,Game.fonts.popupRegular),textLine4:Game.textDesc('about.privacy',280,294,Game.colors.textColor,TGFW.Shape.Align.TOP_LEFT,Game.fonts.popupRegular),ok:{className:TGFW.UI.Button,x:Game.screenCenterX,y:405,action:Game.AboutDialog.hide,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,text:'about.ok',x:-242.5,y:-57,color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:40,textAlign:TGFW.Shape.Align.CENTER,width:485,height:105}},layoutClip:Game.standartButtonlayoutClip()},copyright1:Game.textDesc('about.copyright_etermax',195,485,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupRegular),copyright2:Game.textDesc('about.copyright',195,525,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupRegular),did:Game.textDesc('about.did',195,585,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupRegular),version:Game.textDesc('about.version',320,585,Game.colors.textColor,TGFW.Shape.Align.TOP_RIGHT,Game.fonts.popupRegular)}};}(Game||(Game={})));var Game;(function(Game){var _a;Game.appDesc.scene['quitConfirmation']={className:Game.Quit,x:0,y:0,name:'quitConfirmation',postGameAnalyticsScreenEvent:true,isPopup:true,semiTransparentLayer:true,navigation:{className:TGFW.UI.AutoNavigation,buttonNames:['no','yes'],onKeyUp:(_a={},_a[TGH5.KeyNames.KEY_BACKSPACE]=TGFW.UI.Dialog.cancelAction,_a[TGH5.KeyNames.KEY_EXIT]=TGFW.UI.Dialog.cancelAction,_a)},layout:{back:Game.popupDialogBackground(1088,370),title:Game.textDesc('quitConf.title',0,200,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupTitle,null,1280),text:Game.textDesc('quitConf.question',0,280,Game.colors.textColor,TGFW.Shape.Align.TOP_CENTER,Game.fonts.popupRegularBig,null,1280),yes:{className:TGFW.UI.Button,x:386,y:430,action:TGFW.UI.Dialog.yesAction,width:20,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('orange_button',0,0,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,text:'quitConf.yes',x:-242.5,y:-57,color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:40,textAlign:TGFW.Shape.Align.CENTER,width:485,height:105}},layoutClip:Game.standartButtonlayoutClip()},no:{className:TGFW.UI.Button,x:890,y:430,action:TGFW.UI.Dialog.noAction,width:20,layout:{cursor:Game.imageDesc('black_dialog_cursor',0,0,TGFW.Shape.Align.CENTER),bg:Game.imageDesc('green_button',0,0,TGFW.Shape.Align.CENTER),text:{className:TGFW.Shape.Text,text:'quitConf.no',x:-242.5,y:-57,color:Game.colors.white,align:TGFW.Shape.Align.CENTER,font:Game.fonts.spinBtn.name,size:40,textAlign:TGFW.Shape.Align.CENTER,width:485,height:105}},layoutClip:Game.standartButtonlayoutClip()}}};}(Game||(Game={})));var Game;(function(Game){Game.appDesc.scene['game']={className:Game.GameDialog,x:0,y:0,isPopup:false,semiTransparentLayer:false,navigation:{className:TGFW.UI.Navigation},layout:{}};}(Game||(Game={})));var Game;(function(Game){{Game.appDesc.loader={common:{dialogs:['mainMenu','game','quitConfirmation','wheel','selectCategory','question','about','anotherChance','noAds','noCoins','outOfLife','playersGetReady','selMultiplayerGameLenght','selNumOfPlayers','statistic','statistics','victory','shop','language','spinAgain'],textures:['mikado_bold','mikado_black','brandon_text_regular','crown_remote'],fonts:['mikado_bold','mikado_black','brandon_text_regular']},all:{dialogs:[],textures:['mikado_bold','Willy_Victory01','sports_categoryP10','Tito_Victory_export_12fps00','science_category12fps0','history_category12fps00','movies_category12fps00','mikado_black','brandon_text_regular','crown_remote','category1','background2','background3','solid1','time_bg','art_category12fps0'],fonts:[]},loading:{dialogs:['loading'],fonts:['brandon_text_regular'],textures:['brandon_text_regular']},selectCategory:{dialogs:[],textures:['category1'],fonts:[]},challenge:{dialogs:[],textures:['background2'],fonts:[]},party:{dialogs:[],textures:['background3'],fonts:[]},question_top_bg:{dialogs:[],textures:['solid1','time_bg'],fonts:[]},art:{dialogs:[],textures:['art_category12fps0'],fonts:[]},entertainment:{dialogs:[],textures:['movies_category12fps00'],fonts:[]},history:{dialogs:[],textures:['history_category12fps00'],fonts:[]},science:{dialogs:[],textures:['science_category12fps0'],fonts:[]},geography:{dialogs:[],textures:['Tito_Victory_export_12fps00'],fonts:[]},sports:{dialogs:[],textures:['sports_categoryP10'],fonts:[]},willy:{dialogs:[],textures:['Willy_Victory01'],fonts:[]},shop:{dialogs:[],textures:['shop_icon'],fonts:[]},outOfLifes:{dialogs:[],textures:['heart_cry_tear'],fonts:[]},wheel:{dialogs:[],textures:['roulette'],fonts:[]},anotherChance:{dialogs:[],textures:['pop_eyes_closed'],fonts:[]},victory:{dialogs:[],textures:['Albert_Victory00','Willy_Defeat0','Tito_Victory_export_12fps00'],fonts:[]},playersGetReady:{dialogs:[],textures:['crown_remote7'],fonts:[]},mainMenu:{dialogs:[],textures:[],fonts:[]},game:{dialogs:[],textures:[],fonts:[]}};}}(Game||(Game={})));var Game;(function(Game){function app(){return TGFW.app();}Game.app=app;var AppDialogs=function(_super){__extends(AppDialogs,_super);function AppDialogs(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.game=null;_this.mainMenu=null;_this.wheel=null;_this.selectCategory=null;_this.spinAgain=null;_this.question=null;_this.about=null;_this.anotherChance=null;_this.noAds=null;_this.noCoins=null;_this.outOfLife=null;_this.playersGetReady=null;_this.selMultiplayerGameLenght=null;_this.selNumOfPlayers=null;_this.statistic=null;_this.statistics=null;_this.victory=null;_this.shop=null;_this.language=null;return _this;}return AppDialogs;}(TGFW.AppDialogs);Game.AppDialogs=AppDialogs;var App=function(_super){__extends(App,_super);function App(config){var _this=this;var debugOptions=new TGFW.DebugOptions();debugOptions.loader.showResourcesToLoad=true;debugOptions.loader.showResourcesToUnload=true;_this=_super.call(this,config,new AppDialogs(),new TGFW.DebugOptions())||this;_this.dynamicLoading=true;return _this;}App.prototype._start=function(){};App.prototype._create=function(){};App.prototype.startPlayMusic=function(){};App.prototype.applyPayment=function(productIds,onDone){var isChanged=false;var _model=this.getGameModel();for(var i=0;i<productIds.length;i++){var value=this.getPaymentManager().getProductValue(productIds[i]);if(value>0){if(productIds[i]==='trivia_crack_p4'){_model.setIncreasedMaxLifes();}else if(productIds[i]==='trivia_crack_endless_lives'){_model.setEndlessLifes(true);}else{_model.buyCoins(app().getPaymentManager().getProductValue(productIds[i]));}isChanged=true;}}app().dialogs.mainMenu.updateLifeTimerAfterPayment();if(isChanged)_model.saveGame();if(isChanged){this.getGameModel().saveGame();}onDone();};App.prototype.isLowEnd=function(){return TGFW.sdk().isLowEndDevice();};App.prototype.isDynamicLoadingEnabled=function(){return this.dynamicLoading;};App.prototype._initAsync=function(onDone){var _this=this;if(TGFW.sdk().getProductSettings().dynamicLoading!=undefined){this.dynamicLoading=TGFW.sdk().getProductSettings().dynamicLoading;}if(this.isDynamicLoadingEnabled()){this.updateLoaderStages();this.getGameModel()._loadGameData(function(){_this.loadDictionarie(_this.getGameModel().getLocalLanguage(),onDone);});}else{TGFW.Loader.loadResources(['victory','question_top_bg','shop','outOfLifes','challenge','selectCategory','party','willy','playersGetReady','wheel','anotherChance','art','history','geography','sports','entertainment','science'],[],false,function(){_this.updateLoaderStages();_this.getGameModel()._loadGameData(function(){_this.loadDictionarie(_this.getGameModel().getLocalLanguage(),onDone);});});}};App.prototype._mobileRemoteControlInit=function(){var _this=this;var p_settings=TGFW.sdk().getProductSettings();if(p_settings&&p_settings.hasOwnProperty('mobileRemoteControlMode')&&p_settings.mobileRemoteControlMode.enabled){var selNumDialog_1=app().dialogs.selNumOfPlayers;var questionDialog_1=app().dialogs.question;var getReadyDialog_1=app().dialogs.playersGetReady;App.mobileRemoteControlMode=true;App.multiControllerManager=TGFW.sdk().getMultiControllerManager();if(App.multiControllerManager){App.multiControllerManager.addListener(TGH5.MultiControllerListeners.ON_CONNECT,function(device_id){var _masterDeviceId=App.multiControllerManager.getMasterControllerDeviceId();App.multiControllerManager.sendMessage(-1,'change_ui',{masterDeviceId:_masterDeviceId,deviceId:device_id,isBackAvailable:true,isWaiting:true,inGame:questionDialog_1.isVisible()||getReadyDialog_1.isVisible(),activePlayerId:_this._gameModel.mr_getCurrentPlayerDeviceId()});_this._gameModel.mr_setUserConnectionStatus(device_id,true);selNumDialog_1.mr_updatePlayerList();if(selNumDialog_1.isVisible()){selNumDialog_1.mr_updateView();}});App.multiControllerManager.addListener(TGH5.MultiControllerListeners.ON_DISCONNECT,function(device_id){var _masterDeviceId=App.multiControllerManager.getMasterControllerDeviceId();App.multiControllerManager.sendMessage(-1,'change_ui',{masterDeviceId:_masterDeviceId,deviceId:device_id,isBackAvailable:true,isWaiting:true,inGame:questionDialog_1.isVisible()||getReadyDialog_1.isVisible(),activePlayerId:_this._gameModel.mr_getCurrentPlayerDeviceId()});_this._gameModel.mr_setUserConnectionStatus(device_id,false);selNumDialog_1.mr_updatePlayerList();if(selNumDialog_1.isVisible()){selNumDialog_1.mr_updateView();}});selNumDialog_1.mr_updatePlayerList();var masterDeviceId=App.multiControllerManager.getMasterControllerDeviceId();App.multiControllerManager.sendMessage(-1,'change_ui',{masterDeviceId:masterDeviceId,isBackAvailable:true,isWaiting:true});}}else App.mobileRemoteControlMode=false;};App.prototype.getPromoSettings=function(){return this.promoSettings;};App.prototype.updateLoaderStages=function(){var resourceManager=TGFW.sdk().getResourceManager();var sdkSettings=TGFW.sdk().getProductSettings();this.promoSettings=sdkSettings.banners;if(!this.promoSettings||!this.promoSettings.enabled)return;var bannerInfo=this.promoSettings.items.map(function(el){if(el.name&&el.imageUrl)return el;}).filter(function(el){return!!el;});this.promoSettings.items=bannerInfo;if(!bannerInfo.length)return;bannerInfo.forEach(function(el,index){var url=resourceManager.resolvePath(el.imageUrl);Game.appDesc.texturePool['banner_'+index]={map:{url:url,width:-1,height:-1,repeatX:false,repeatY:false},x:0,y:0,width:-1,height:-1,opaque:true,trim:{left:0,right:0,top:0,bottom:0}};TGFW.Loader.addStage('banner_'+index,{dialogs:[],textures:['banner_'+index],fonts:[]});});};App.prototype.loadDictionarie=function(languageCode,cb){var _this=this;if(cb===undefined){cb=null;}var url;if(languageCode==='en')languageCode='en_us';var sdkSettings=TGFW.sdk().getProductSettings();var dictionaries=sdkSettings.dictionaries;if(!dictionaries){dictionaries=Game.dictionariesConfig;}for(var key in dictionaries){if(key===languageCode){url=dictionaries[key];}}TGFW.Utils.loadJSON(url,function(data){if(data){_this.getGameModel()._onDictionaryLoaded(data);}_this._mobileRemoteControlInit();if(cb)cb();});};App.prototype.getDictionary=function(){return this.dictionary;};App.prototype._beforeStart=function(){var _this=this;if(TGFW.sdk().setOnAdsResponseCallback){TGFW.sdk().setOnAdsResponseCallback(function(isAdExist){_this.allowedAds=isAdExist;});}};App.prototype.getIsAdExist=function(){return this.allowedAds;};App.prototype.getGameModel=function(){if(!this._gameModel){this._gameModel=new Game.GameModel();}return this._gameModel;};App.mobileRemoteControlMode=false;return App;}(TGFW.TApp);Game.App=App;}(Game||(Game={})));
//# sourceMappingURL=game.js.map